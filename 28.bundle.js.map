{"version":3,"sources":["webpack:///./util/animateScroll.js","webpack:///./components/dnd-classes.js","webpack:///./components/views/dnd-classes-view.js","webpack:///./js/classes.js","webpack:///./util/renderList.js"],"names":["scrollToY","y","duration","element","document","scrollingElement","scrollTop","cosParameter","scrollCount","oldTimestamp","window","requestAnimationFrame","step","newTimestamp","Math","PI","cos","classes","type","Object","observer","hash","String","value","itemOpened","loading","Boolean","super","this","then","data","set","connectedCallback","populateHandlers","addEventListener","selectionChangeEventHandler","deselectionChangeEventHandler","$","backToTop","backToTopEventHandler","subclassScrollRepositionHandler","disconnectedCallback","removeEventListener","passive","e","selection","detail","scrollToTop","scrollY","classList","remove","add","subclassEl","shadowRoot","querySelector","subclassOffsetEl","contains","subclassOffsetHeight","top","body","style","height","dispatchEvent","CustomEvent","bubbles","composed","selectedClass","selectedSubclass","indexOf","hashParts","split","slice","isNewClass","prevClass","scrollTo","customElements","define","CLSS_ACTIVE","renderer","renderStr","string","renderStack","recursiveEntryRender","join","onDataLoad","rootEl","c","subclasses","sort","a","b","name","sortedClasses","filter","includes","classTableDefault","innerHTML","items","container","appendChild","listWrapper","htmlString","i","length","curItem","svg","replace","source","Parser","sourceJsonToFull","itemElements","tar","target","closest","getAttribute","renderList","onClassChange","curClass","hd","getEntryDice","faces","proficiency","map","p","attAbvToFull","sProfs","startingProficiencies","undefined","armor","weapons","w","tools","skills","numString","skillOptions","result","Array","isArray","skill","choose","numberToString","count","from","getSkillProfString","sEquip","startingEquipment","fromBackground","additionalFromBackground","defList","default","goldAlt","goldAlternative","tData","classTableGroups","groupHeaders","colHeaders","levelTrs","spellsFlag","subclassDef","subclassTableGroups","concat","tGroup","hasTitle","title","subclassData","s","append","colLabels","j","lbl","rows","tr","k","entry","stack","rowsSpellProgression","combinedLabels","classFeatures","mobileClone","cloneNode","setAttribute","colHeaderEls","querySelectorAll","colHeaderEl","textContent","toLowerCase","subclassIndex","tblLvlFeatures","featureNames","lvlFeatureList","feature","console","error","featureId","featureLinkPart","featureLinkClasses","push","featureLink","preventDefault","getElementById","scrollIntoView","offset","scrollBy","styleClasses","gainSubclassFeature","level","subClass","subclassFeatures","subFeatureList","subFeature","m","entries","childEntry","startsWith","shortName","toggleUAFeatures","subclassPillWrapper","allSourcesToggle","makeGenericTogglePill","subClasses","sc","nonStandardSource","pillText","sourceJsonToAbv","pill","handleSubclassClick","display","toggle","HASH_ALL_SOURCES","click","pillActiveClass","pillId","hashKey","defaultActive","isUA","active","isPillActive","outStack","hashPart","newHash","handleToggleFeaturesClicks","subclassName","subclassSource","routeSelection","encodedSubClass","subclassLink","subClassStack","substr","hasSubclassHash","nonStandardPills","nonStandardPill","onSubChange","sub","curHash","hideClassFeatures","showAllSources","hideOtherSources","updateClassTableLinks","$toShow","$toHide","$subClassSpanList","classSpan","$this","thisSc","shown","trim","otherSrcSubFeats","shownInTable","v","selectedSCFeatures","selectedSCFeature","otherSrcSubFeat","asInTable","toShow","listEls","el","scs","handleTableGroups","DATA_NONE","subClassEls","subClassEl","cfToggle","toToggleCf","srcToggle","toToggleSrc","outParts","part","els","href","prevFeature"],"mappings":"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","file":"28.bundle.js","sourcesContent":["/*\n * https://github.com/Robbendebiene/Sliding-Scroll\n * y: the y coordinate to scroll, 0 = top\n * duration: scroll duration in milliseconds; default is 0 (no transition)\n * element: the html element that should be scrolled ; default is the main scrolling element\n */\nfunction scrollToY (y, duration = 0, element = document.scrollingElement) {\n  // cancel if already on target position\n  if (element.scrollTop === y) return;\n\n  const cosParameter = (element.scrollTop - y) / 2;\n  let scrollCount = 0, oldTimestamp = null;\n\n  function step (newTimestamp) {\n    if (oldTimestamp !== null) {\n      // if duration is 0 scrollCount will be Infinity\n      scrollCount += Math.PI * (newTimestamp - oldTimestamp) / duration;\n      if (scrollCount >= Math.PI) return element.scrollTop = y;\n      element.scrollTop = cosParameter + y + cosParameter * Math.cos(scrollCount);\n    }\n    oldTimestamp = newTimestamp;\n    window.requestAnimationFrame(step);\n  }\n  window.requestAnimationFrame(step);\n}\n\n/*\n * duration: scroll duration in milliseconds; default is 0 (no transition)\n * this function is using the scrollToY function\n */\nfunction scrollToTop(duration = 0) {\n  scrollToY(0, duration, document.scrollingElement);\n}\n\n/*\n * id: the id of the element as a string that should be scrolled to\n * duration: scroll duration in milliseconds; default is 0 (no transition)\n * this function is using the scrollToY function on the main scrolling element\n */\nfunction scrollToId(id, duration = 0) {\n  const offset = Math.round(document.getElementById(id).getBoundingClientRect().top);\n\tscrollToY(document.scrollingElement.scrollTop + offset, duration);\n}\n\n/*\n * element: the node object that should be scrolled to\n * duration: scroll duration in milliseconds; default is 0 (no transition)\n * this function is using the scrollToY function on the main scrolling element\n */\nfunction scrollToElement(element, duration = 0) {\n\tconst offset = Math.round(element.getBoundingClientRect().top);\n\tscrollToY(document.scrollingElement.scrollTop + offset, duration);\n}\n\nexport {\n  scrollToTop,\n  scrollToId,\n  scrollToElement\n}","import {PolymerElement, html} from '@polymer/polymer';\nimport \"./styles/material-styles.js\";\nimport \"./styles/my-styles.js\";\nimport './dnd-svg.js';\nimport { loadModel } from '../util/data.js';\nimport { resolveHash } from '../util/renderTable.js';\nimport { onDataLoad, onClassChange, onSubChange } from \"../js/classes.js\";\nimport { readRouteSelection, routeEventChannel, clearRouteSelection } from '../util/routing.js';\nimport { scrollToTop } from '../util/animateScroll.js';\nimport { jqOffset, jqHeight } from '../js/utils.js';\n\n\nclass DndClasses extends PolymerElement {\n  static get properties() {\n    return {\n      classes: {\n        type: Object,\n        observer: \"_dataLoaded\"\n      },\n      hash: {\n        type: String,\n        value: ''\n      },\n      itemOpened: {\n        value: false\n      },\n      loading: {\n        type: Boolean,\n        value: true,\n        observer: '_loadingChange'\n      }\n    };\n  }\n\n  static get observers() {\n    return [\"_updateClassFromHash(classes, hash)\"]\n  }\n\n  constructor() {\n    super();\n    this.loading = true;\n    loadModel(\"class-all\").then(data => {\n      this.set(\"classes\", data);\n      this.loading = false;\n    });\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.populateHandlers();\n\n    routeEventChannel().addEventListener(\"selection-change\", this.selectionChangeEventHandler);\n    routeEventChannel().addEventListener(\"selection-deselected\", this.deselectionChangeEventHandler);\n    this.$.backToTop.addEventListener(\"click\", this.backToTopEventHandler);\n    window.addEventListener(\"scroll\", this.subclassScrollRepositionHandler);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.deselectionChangeEventHandler();\n    routeEventChannel().removeEventListener(\"selection-change\", this.selectionChangeEventHandler);\n    routeEventChannel().removeEventListener(\"selection-deselected\", this.deselectionChangeEventHandler);\n    this.$.backToTop.removeEventListener(\"click\", this.backToTopEventHandler);\n    window.removeEventListener(\"scroll\", this.subclassScrollRepositionHandler, {passive: true});\n  }\n\n  populateHandlers() {\n    this.selectionChangeEventHandler = (e) => {\n      let selection = e ? e.detail.selection : readRouteSelection();\n      if (selection) {\n        this.set(\"hash\", selection);\n      }\n    };\n    this.selectionChangeEventHandler();\n    this.deselectionChangeEventHandler = () => {\n      this.set(\"hash\", \"\");\n    }\n\n    this.backToTopEventHandler = () => {\n      scrollToTop(400);\n    };\n    this.subclassScrollRepositionHandler = () => {\n      if (window.scrollY > 850) {\n        this.$.backToTop.classList.remove(\"hidden\");\n      } else {\n        this.$.backToTop.classList.add(\"hidden\");\n      }\n      // setSubclassFixation\n      const subclassEl = this.shadowRoot.querySelector(\"#subclasses\"),\n        subclassOffsetEl = this.shadowRoot.querySelector(\"#subclassHeight\");\n\n      // Stores non-closed height\n      if (!subclassEl.classList.contains(\"closed\") || !subclassEl.classList.contains(\"fixed\")) {\n        this.subclassOffsetHeight = jqHeight(subclassEl) + 55 + \"px\";\n      }\n\n      // When we scroll past the subclasses, sets fixed. otherwise removes it.\n      if (jqOffset(subclassOffsetEl).top - document.body.scrollTop < 64) {\n        if (!subclassEl.classList.contains(\"fixed\")) {\n          subclassEl.classList.add(\"fixed\");\n          subclassOffsetEl.style.height = this.subclassOffsetHeight;\n        }\n      } else {\n        subclassEl.classList.remove(\"fixed\");\n        subclassOffsetEl.style.height = \"0\";\n      }\n    };\n  }\n\n  _loadingChange() {\n    this.dispatchEvent(new CustomEvent(\"loading-data\", {\n      bubbles: true,\n      composed: true,\n      detail: {\n        loading: this.loading\n      }\n    }));\n  }\n\n  _dataLoaded() {\n    onDataLoad(this.classes, this.shadowRoot);\n  }\n\n  _updateClassFromHash() {\n    if (this.classes && this.hash) {\n      let selectedClass, selectedSubclass;\n\n      if (this.hash.indexOf(',') > -1) {\n        let hashParts = this.hash.split(',');\n        selectedClass = resolveHash(this.classes, hashParts[0]);\n        selectedSubclass = hashParts.slice(1);\n      } else {\n        selectedClass = resolveHash(this.classes, this.hash);\n      }\n\n      if (selectedClass) {\n        this.itemOpened = true;\n\n        let isNewClass = selectedClass !== this.prevClass;\n        this.prevClass = selectedClass;\n\n        // Only reload the Class\n        if (isNewClass) {\n          window.scrollTo(0,0);\n          onClassChange(selectedClass, this.shadowRoot);\n        }\n        if (selectedSubclass) {\n          onSubChange(selectedSubclass, this.hash, this.shadowRoot);\n        }\n        routeEventChannel().dispatchEvent(new CustomEvent(\"title-change\", {\n          bubbles: true,\n          composed: true,\n          detail: selectedClass\n        }));\n      } else {\n        clearRouteSelection(true);\n      }\n    }\n    if (!this.hash) {\n      this.itemOpened = false;\n    }\n  }\n\n  _clearSelectionHandler() {\n    clearRouteSelection(true);\n  }\n\n  _mainClass() {\n    return this.itemOpened ? \"main item-opened\" : \"main\";\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles my-styles\"></style>\n      <div class$=\"[[_mainClass(itemOpened)]]\">\n\n        <button class=\"mdc-icon-button close-item material-icons\" on-click=\"_clearSelectionHandler\">close</button>\n        <button id=\"backToTop\" class=\"mdc-icon-button mdc-button--raised back-to-top material-icons hidden\">arrow_upward</button>\n\n        <div class=\"class-container\"></div>\n\n        <div class=\"class-page--class-container stats-wrapper\">\n\n          <div id=\"subclassHeight\"></div>\n          <div id=\"subclasses\"></div>\n\n          <div id=\"classtable\">\n            <table class=\"table\">\n              <tr id=\"groupHeaders\" class=\"table-row table-row--header\">\n                <th colspan=\"3\"></th>\n                <!-- spacer to match the 3 default cols (level, prof, features) -->\n              </tr>\n              <tr id=\"colHeaders\" class=\"table-row table-row--header\">\n                <th class=\"level table-cell\">Level</th>\n                <th class=\"pb table-cell\">Proficiency Bonus</th>\n                <th class=\"features table-cell\">Features</th>\n              </tr>\n              <tr id=\"level1\" class=\"table-row\">\n                <td class=\"level table-cell\">1st</td>\n                <td class=\"pb table-cell\">+2</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level2\" class=\"table-row\">\n                <td class=\"level table-cell\">2nd</td>\n                <td class=\"pb table-cell\">+2</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level3\" class=\"table-row\">\n                <td class=\"level table-cell\">3rd</td>\n                <td class=\"pb table-cell\">+2</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level4\" class=\"table-row\">\n                <td class=\"level table-cell\">4th</td>\n                <td class=\"pb table-cell\">+2</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level5\" class=\"table-row\">\n                <td class=\"level table-cell\">5th</td>\n                <td class=\"pb table-cell\">+3</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level6\" class=\"table-row\">\n                <td class=\"level table-cell\">6th</td>\n                <td class=\"pb table-cell\">+3</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level7\" class=\"table-row\">\n                <td class=\"level table-cell\">7th</td>\n                <td class=\"pb table-cell\">+3</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level8\" class=\"table-row\">\n                <td class=\"level table-cell\">8th</td>\n                <td class=\"pb table-cell\">+3</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level9\" class=\"table-row\">\n                <td class=\"level table-cell\">9th</td>\n                <td class=\"pb table-cell\">+4</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level10\" class=\"table-row\">\n                <td class=\"level table-cell\">10th</td>\n                <td class=\"pb table-cell\">+4</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level11\" class=\"table-row\">\n                <td class=\"level table-cell\">11th</td>\n                <td class=\"pb table-cell\">+4</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level12\" class=\"table-row\">\n                <td class=\"level table-cell\">12th</td>\n                <td class=\"pb table-cell\">+4</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level13\" class=\"table-row\">\n                <td class=\"level table-cell\">13th</td>\n                <td class=\"pb table-cell\">+5</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level14\" class=\"table-row\">\n                <td class=\"level table-cell\">14th</td>\n                <td class=\"pb table-cell\">+5</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level15\" class=\"table-row\">\n                <td class=\"level table-cell\">15th</td>\n                <td class=\"pb table-cell\">+5</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level16\" class=\"table-row\">\n                <td class=\"level table-cell\">16th</td>\n                <td class=\"pb table-cell\">+5</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level17\" class=\"table-row\">\n                <td class=\"level table-cell\">17th</td>\n                <td class=\"pb table-cell\">+6</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level18\" class=\"table-row\">\n                <td class=\"level table-cell\">18th</td>\n                <td class=\"pb table-cell\">+6</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level19\" class=\"table-row\">\n                <td class=\"level table-cell\">19th</td>\n                <td class=\"pb table-cell\">+6</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level20\" class=\"table-row\">\n                <td class=\"level table-cell\">20th</td>\n                <td class=\"pb table-cell\">+6</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n            </table>\n          </div>\n\n          <div id=\"statsprof\" class=\"stats margin-bottom_large\">\n            <div id=\"hp\" colspan=\"6\">\n              <h5>Hit Points</h5>\n              <div id=\"hitdice\" class=\"margin-bottom_small\">\n                <strong>Hit Dice:</strong>\n                <span> </span>\n              </div>\n              <div id=\"hp1stlevel\" class=\"margin-bottom_small\">\n                <strong>Hit Points at 1st Level:</strong>\n                <span> </span>\n              </div>\n              <div id=\"hphigherlevels\" class=\"margin-bottom_small\">\n                <strong>Hit Points at Higher Levels:</strong>\n                <span> </span>\n              </div>\n            </div>\n            <div id=\"prof\" class=\"margin-bottom_small\">\n              <h5>Proficiencies</h5>\n              <div class=\"margin-bottom_med\">You are proficient with the following items, in addition to any proficiencies provided by your race or\n                background.</div>\n              <div id=\"armor\" class=\"margin-bottom_small\">\n                <strong>Armor:</strong>\n                <span> </span>\n              </div>\n              <div id=\"weapons\" class=\"margin-bottom_small\">\n                <strong>Weapons:</strong>\n                <span> </span>\n              </div>\n              <div id=\"tools\" class=\"margin-bottom_small\">\n                <strong>Tools:</strong>\n                <span> </span>\n              </div>\n              <div id=\"saves\" class=\"margin-bottom_small\">\n                <strong>Saving Throws:</strong>\n                <span> </span>\n              </div>\n              <div id=\"skills\" class=\"margin-bottom_small\">\n                <strong>Skills:</strong>\n                <span> </span>\n              </div>\n              <div id=\"equipment\">\n                <h5>Starting Equipment</h5>\n                <div></div>\n              </div>\n            </div>\n          </div>\n\n          <div id=\"stats\" class=\"stats\">\n            <!-- populate with JS -->\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('dnd-classes', DndClasses);","import {PolymerElement, html} from '@polymer/polymer';\nimport \"../styles/material-styles.js\";\nimport \"../styles/my-styles.js\";\nimport \"../dnd-layout\";\nimport \"../dnd-classes\";\n\nclass DndClassesView extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"material-styles my-styles\"></style>\n      \n      <dnd-classes></dnd-classes>\n    `;\n  }\n}\n\ncustomElements.define('dnd-classes-view', DndClassesView);","const HASH_SUBCLASS = \"sub:\";\r\nconst HASH_FEATURE = \"f:\";\r\nconst HASH_HIDE_FEATURES = \"hideclassfs:\";\r\nconst HASH_ALL_SOURCES = \"allsrc:\";\r\n\r\nconst CLSS_FEATURE_LINK = \"feature-link\";\r\nconst CLSS_ACTIVE = \"mdc-chip--selected\";\r\nconst CLSS_SUBCLASS_PILL = \"mdc-chip\";\r\nconst CLSS_CLASS_FEATURES_ACTIVE = \"cf-active\";\r\nconst CLSS_OTHER_SOURCES_ACTIVE = \"os-active\";\r\nconst CLSS_SUBCLASS_PREFIX = \"subclass-prefix\";\r\nconst CLSS_CLASS_FEATURE = \"class-feature\";\r\nconst CLSS_GAIN_SUBCLASS_FEATURE = \"gain-subclass-feature\";\r\nconst ID_CLASS_FEATURES_TOGGLE = \"cf-toggle\";\r\nconst ID_OTHER_SOURCES_TOGGLE = \"os-toggle\";\r\n\r\nconst STR_PROF_NONE = \"none\";\r\n\r\nconst ATB_DATA_FEATURE_LINK = \"data-flink\";\r\nconst ATB_DATA_FEATURE_ID = \"data-flink-id\";\r\nconst ATB_DATA_SC_LIST = \"data-subclass-list\";\r\n\r\nimport {\r\n  jqHeight,\r\n  parseHTML,\r\n  ascSort,\r\n  encodeForHash,\r\n  jqAfter,\r\n  jqEmpty,\r\n  isNonstandardSource,\r\n  joinConjunct,\r\n  hasBeenReprinted\r\n} from \"../js/utils.js\";\r\nimport {\r\n  HASH_LIST_SEP,\r\n  HASH_PART_SEP,\r\n  CLSS_SUBCLASS_FEATURE,\r\n  ATB_DATA_SC,\r\n  ATB_DATA_SRC,\r\n  CLSS_NON_STANDARD_SOURCE,\r\n  ATB_DATA_PART_SEP,\r\n  ATB_DATA_LIST_SEP,\r\n  HASH_START\r\n} from \"../util/consts.js\";\r\nimport EntryRenderer from '../util/entryrender.js';\r\nimport Parser from '../util/Parser.js';\r\nimport { setRouteSelection, readRouteSelection } from \"../util/routing.js\";\r\nimport renderGrid from \"../util/renderGrid.js\";\r\nimport renderList from \"../util/renderList.js\";\r\n\r\nconst renderer = new EntryRenderer();\r\nexport { onDataLoad, onClassChange, onSubChange };\r\n\r\nfunction renderStr(string) {\r\n  let renderStack = []\r\n  renderer.recursiveEntryRender(string, renderStack, 0);\r\n  return renderStack.join(\" \");\r\n}\r\n\r\nfunction onDataLoad(classes, rootEl) {\r\n\t// alphabetically sort subclasses\r\n\tfor (const c of classes) {\r\n    if (c.subclasses) {\r\n      c.subclasses = c.subclasses.sort((a, b) => {\r\n        return ascSort(a.name, b.name)\r\n      });\r\n    }\r\n\t}\r\n\r\n  const sortedClasses = classes.filter(c => !c.name.includes('Sidekick'));\r\n\r\n  // store classTable template from inital dom\r\n  window.classTableDefault = rootEl.querySelector(\"#classtable\").innerHTML;\r\n  \r\n  renderList(rootEl, sortedClasses);\r\n}\r\n\r\nfunction onClassChange(curClass, rootEl) {\r\n  rootEl.querySelector(\"#classtable\").innerHTML = window.classTableDefault;\r\n  rootEl.querySelector(\"#subclasses\").classList.remove(\"fixed\");\r\n  rootEl.querySelector(\"#subclasses\").classList.remove(\"closed\");\r\n  rootEl.querySelector(\"#subclasses\").classList.remove(\"hidden\");\r\n  rootEl.querySelector(\".mobile-clone-spells\") && rootEl.querySelector(\".mobile-clone-spells\").remove();\r\n\r\n  // SUMMARY SIDEBAR =================================================================================================\r\n  // hit dice and HP\r\n  if (curClass.hd) {\r\n    rootEl.querySelector(\"#hp\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#hp div#hitdice span\").innerHTML = EntryRenderer.getEntryDice(curClass.hd);\r\n    rootEl.querySelector(\"#hp div#hp1stlevel span\").innerHTML = curClass.hd.faces + \" + your Constitution modifier\";\r\n    rootEl.querySelector(\"#hp div#hphigherlevels span\").innerHTML =\r\n      `${EntryRenderer.getEntryDice(curClass.hd)} (or ${curClass.hd.faces / 2 + 1}) + your Constitution modifier per ${\r\n        curClass.name\r\n      } level after 1st`;\r\n  } else {\r\n    rootEl.querySelector(\"#hp\").classList.add(\"hidden\");\r\n  }\r\n\r\n  // save proficiency\r\n  if (curClass.proficiency) {\r\n    rootEl.querySelector(\"#prof\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#prof div#saves span\").innerHTML = curClass.proficiency.map(p => Parser.attAbvToFull(p)).join(\", \");\r\n  } else {\r\n    rootEl.querySelector(\"#prof\").classList.add(\"hidden\");\r\n  }\r\n\r\n  // starting proficiencies\r\n  const sProfs = curClass.startingProficiencies;\r\n  if (sProfs) {\r\n    rootEl.querySelector(\"#armor\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#weapons\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#tools\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#skills\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"div#armor span\").innerHTML =\r\n      sProfs.armor === undefined\r\n        ? STR_PROF_NONE\r\n        : sProfs.armor.map(a => (a === \"light\" || a === \"medium\" || a === \"heavy\" ? a + \" armor\" : a)).join(\", \");\r\n    rootEl.querySelector(\"div#weapons span\").innerHTML =\r\n      sProfs.weapons === undefined\r\n        ? STR_PROF_NONE\r\n        : sProfs.weapons.map(w => (w === \"simple\" || w === \"martial\" ? w + \" weapons\" : w)).join(\", \");\r\n    rootEl.querySelector(\"div#tools span\").innerHTML =\r\n      sProfs.tools === undefined ? STR_PROF_NONE : sProfs.tools.join(\", \");\r\n    rootEl.querySelector(\"div#skills span\").innerHTML =\r\n      sProfs.skills === undefined ? STR_PROF_NONE : getSkillProfString(sProfs.skills);\r\n  } else {\r\n    rootEl.querySelector(\"#armor\").classList.add(\"hidden\");\r\n    rootEl.querySelector(\"#weapons\").classList.add(\"hidden\");\r\n    rootEl.querySelector(\"#tools\").classList.add(\"hidden\");\r\n    rootEl.querySelector(\"#skills\").classList.add(\"hidden\");\r\n  }\r\n\r\n  function getSkillProfString(skills) {\r\n    let numString, skillOptions, result = '';\r\n    // Different data structure for v2 classes\r\n    if (Array.isArray(skills)) {\r\n      for (let skill of skills) {\r\n        if (skill.choose) {\r\n          numString = Parser.numberToString(skill.choose.count);\r\n          skillOptions = skill.choose.from;\r\n          result += skillOptions.length === 18\r\n            ? `Choose any ${numString}.`\r\n            : `Choose ${numString} from ${joinConjunct(skillOptions, \", \", \", and \")}.`;\r\n        }\r\n      }\r\n    } else {\r\n      numString = Parser.numberToString(skills.choose);\r\n      skillOptions = skills.from;\r\n      result += skillOptions.length === 18\r\n        ? `Choose any ${numString}.`\r\n        : `Choose ${numString} from ${joinConjunct(skillOptions, \", \", \", and \")}.`;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  // starting equipment\r\n  const sEquip = curClass.startingEquipment;\r\n  if (sEquip) {\r\n    rootEl.querySelector(\"#equipment\").classList.remove(\"hidden\");\r\n    const fromBackground = sEquip.additionalFromBackground\r\n      ? \"<p>You start with the following items, plus anything provided by your background.</p>\"\r\n      : \"\";\r\n    const defList = sEquip.default.length === 0 ? \"\" : `<ul><li>${sEquip.default.map(i => renderStr(i)).join(\"</li><li>\")}</ul>`;\r\n    const goldAlt =\r\n      sEquip.goldAlternative === undefined\r\n        ? \"\"\r\n        : `<p>Alternatively, you may start with ${renderStr(sEquip.goldAlternative)} gp to buy your own equipment.</p>`;\r\n    rootEl.querySelector(\"#equipment div\").innerHTML = `${fromBackground}${defList}${goldAlt}`;\r\n  } else {\r\n    rootEl.querySelector(\"#equipment\").classList.add(\"hidden\");\r\n  }\r\n\r\n  // FEATURE TABLE ===================================================================================================\r\n  let tData = curClass.classTableGroups || [];\r\n  const groupHeaders = rootEl.querySelector(\"#groupHeaders\");\r\n  const colHeaders = rootEl.querySelector(\"#colHeaders\");\r\n  const levelTrs = [];\r\n  let spellsFlag = false;\r\n  for (let subclassDef of curClass.subclasses) {\r\n    if (subclassDef.subclassTableGroups) {\r\n      tData = tData.concat(subclassDef.subclassTableGroups);\r\n    }\r\n  }\r\n  if (tData) {\r\n    for (let i = 0; i < tData.length; i++) {\r\n      const tGroup = tData[i];\r\n\r\n      const hasTitle = tGroup.title !== undefined;\r\n      let subclassData = \"\";\r\n      if (tGroup.subclasses !== undefined) {\r\n        subclassData = `${ATB_DATA_SC_LIST}=\"${tGroup.subclasses\r\n          .map(s => s.name+ATB_DATA_PART_SEP+s.source)\r\n          .join(ATB_DATA_LIST_SEP)}\"`;\r\n      }\r\n      groupHeaders.append(parseHTML(\r\n        `<th ${hasTitle ? `class=\"colGroupTitle table-cell\"` : \"\"} colspan=\"${tGroup.colLabels.length}\" ${subclassData}>${\r\n          hasTitle ? tGroup.title : \"\"\r\n        }</th>`, true, true));\r\n\r\n      for (let j = 0; j < tGroup.colLabels.length; j++) {\r\n        let lbl = tGroup.colLabels[j];\r\n        if (lbl.indexOf(\"@\") > -1) {\r\n          let renderStack = []\r\n          renderer.recursiveEntryRender(lbl, renderStack, 0);\r\n          lbl = renderStack.join(\" \");\r\n        }\r\n        colHeaders.append(parseHTML(`<th class=\"centred-col table-cell\" ${subclassData}>${lbl}</th>`, true, true));\r\n      }\r\n\r\n      if (tGroup.rows) {\r\n        for (let j = 0; j < 20; j++) {\r\n          const tr = rootEl.querySelector(`#level${j + 1}`);\r\n          levelTrs[j] = tr;\r\n          for (let k = 0; k < tGroup.rows[j].length; k++) {\r\n            let entry = tGroup.rows[j][k];\r\n            if (entry === 0) entry = \"\\u2014\";\r\n            const stack = [];\r\n            renderer.recursiveEntryRender(entry, stack, \"\", \"\");\r\n            tr.append(parseHTML(`<td class=\"centred-col\" ${subclassData}>${stack.join(\"\")}</td>`, true, true));\r\n          }\r\n        }\r\n      }\r\n      if (tGroup.rowsSpellProgression) {\r\n        for (let j = 0; j < 20; j++) {\r\n          const tr = rootEl.querySelector(`#level${j + 1}`);\r\n          levelTrs[j] = tr;\r\n          for (let k = 0; k < tGroup.rowsSpellProgression[j].length; k++) {\r\n            let entry = tGroup.rowsSpellProgression[j][k];\r\n            if (entry === 0) entry = \"\\u2014\";\r\n            const stack = [];\r\n            renderer.recursiveEntryRender(entry, stack, \"\", \"\");\r\n            tr.append(parseHTML(`<td class=\"centred-col\" ${subclassData}>${stack.join(\"\")}</td>`, true, true));\r\n          }\r\n        }\r\n      }\r\n      let combinedLabels = tGroup.colLabels.join(' ');\r\n      if (\r\n        !spellsFlag &&\r\n        (combinedLabels.indexOf(\"Spells Known\") > -1 ||\r\n          combinedLabels.indexOf(\"Cantrips Known\") > -1 ||\r\n          combinedLabels.indexOf(\"1st\") > -1 ||\r\n          combinedLabels.indexOf(\"Ki Points\") > -1 ||\r\n          combinedLabels.indexOf(\"Rages\") > -1 ||\r\n          combinedLabels.indexOf(\"Talents Known\") > -1)\r\n      ) {\r\n        spellsFlag = true;\r\n      }\r\n    }\r\n  // uses different data structure for Fighter, since no classTableGroups\r\n  } else if (curClass.classFeatures.length) {\r\n    // for each level, find and index the feature cell\r\n    for (let i = 0; i < 20; i++) {\r\n      const tr = rootEl.querySelector(`#level${i + 1}`);\r\n      levelTrs[i] = tr;\r\n    }\r\n  }\r\n\r\n  rootEl.querySelector(\"#classtable\").classList.remove(\"mobile-clone-features\");\r\n  \r\n  // Add second feature table for mobile\r\n  if (spellsFlag) {\r\n    rootEl.querySelector(\"#classtable\").classList.add(\"mobile-clone-features\");\r\n\t\tlet mobileClone = parseHTML('<div class=\"mobile-clone-spells\"></div>');\r\n\t\tmobileClone.append(rootEl.querySelector(\"#classtable\").cloneNode(true));\r\n    mobileClone.querySelector(\"#classtable\").classList.remove(\"mobile-clone-features\");\r\n    mobileClone.querySelector(\"#groupHeaders th:not(.colGroupTitle)\").remove();\r\n    mobileClone.querySelector(\"#groupHeaders .colGroupTitle\") &&\r\n      mobileClone.querySelector(\"#groupHeaders .colGroupTitle\").setAttribute(\"colspan\", \"12\");\r\n\t\tlet colHeaderEls = mobileClone.querySelectorAll(\"#colHeaders th\");\r\n\t\tfor (let colHeaderEl of colHeaderEls) {\r\n      if (colHeaderEl.textContent.toLowerCase().indexOf(\"sneak attack\") > -1) {\r\n        colHeaderEl.innerHTML = '<span title=\"Sneak Attack\">Snk Atk</span>';\r\n      } else if (colHeaderEl.textContent.toLowerCase().indexOf(\"sorcery points\") > -1) {\r\n        colHeaderEl.innerHTML = '<span title=\"Sorcery Points\">SP</span>';\r\n      } else if (colHeaderEl.textContent.toLowerCase().indexOf(\"spells known\") > -1) {\r\n        colHeaderEl.innerHTML = '<span title=\"Spells Known\">S</span>';\r\n      } else if (colHeaderEl.textContent.toLowerCase().indexOf(\"cantrips known\") > -1) {\r\n        colHeaderEl.innerHTML = '<span title=\"Cantrips Known\">C</span>';\r\n      }\r\n\t\t}\r\n    jqAfter(rootEl.querySelector(\"#classtable\"), mobileClone);\r\n  }\r\n\r\n  // FEATURE DESCRIPTIONS ============================================================================================\r\n  const renderStack = [];\r\n  let subclassIndex = 0; // the subclass array is not 20 elements\r\n  for (let i = 0; i < 20; i++) {\r\n    // track class table feature names\r\n    const tblLvlFeatures = levelTrs[i].querySelector(\".features\");\r\n    const featureNames = [];\r\n\r\n    // add class features to render stack\r\n    const lvlFeatureList = curClass.classFeatures[i];\r\n    for (let j = 0; j < lvlFeatureList.length; j++) {\r\n      const feature = lvlFeatureList[j];\r\n      console.error('feature', feature);\r\n      const featureId = HASH_FEATURE + encodeForHash(feature.name) + \"_\" + i;\r\n      const featureLinkPart = HASH_FEATURE + encodeForHash(feature.name) + i;\r\n      const featureLinkClasses = [CLSS_FEATURE_LINK];\r\n      if (isNonstandardSource(feature.source)) featureLinkClasses.push(CLSS_NON_STANDARD_SOURCE);\r\n      const featureLink = parseHTML(\r\n        `<a href=\"#${encodeForHash([curClass.name, curClass.source])}${HASH_PART_SEP}${featureLinkPart}\"\r\n          class=\"${featureLinkClasses.join(\" \")}\"\r\n          ${ATB_DATA_FEATURE_LINK}=\"${featureLinkPart}\"\r\n          ${ATB_DATA_FEATURE_ID}=\"${featureId}\">${feature.name}</a>`\r\n      );\r\n      featureLink.addEventListener(\"click\", function(e) {\r\n        e.preventDefault();\r\n        rootEl.getElementById(featureId).scrollIntoView(true);\r\n        let offset = -84 - jqHeight(rootEl.querySelector(\"#subclasses\"));\r\n        window.scrollBy(0, offset);\r\n      });\r\n      featureNames.push(featureLink);\r\n\r\n      const styleClasses = [CLSS_CLASS_FEATURE];\r\n      if (feature.gainSubclassFeature) {\r\n        styleClasses.push(CLSS_GAIN_SUBCLASS_FEATURE);\r\n      }\r\n\r\n      renderer.recursiveEntryRender(\r\n        feature,\r\n        renderStack,\r\n        0,\r\n        `<div id=\"${featureId}\" class=\"${styleClasses.join(\" \")}\" level=\"${feature.level}\">`,\r\n        `</div>`,\r\n        true\r\n      );\r\n\r\n      // add subclass features to render stack if appropriate\r\n      if (feature.gainSubclassFeature) {\r\n        for (const subClass of curClass.subclasses) {\r\n          if (subClass.subclassFeatures) {\r\n            const subFeatureList = subClass.subclassFeatures[subclassIndex];\r\n\r\n            for (let i = 0; i < subFeatureList.length; i++) {\r\n              const subFeature = subFeatureList[i];\r\n              // if this is not the subclass intro, add the subclass to the feature name\r\n              // this will only be shown if there are multiple subclasses displayed\r\n              if (subFeature.name === undefined) {\r\n                for (let m = 0; m < subFeature.entries.length; m++) {\r\n                  const childEntry = subFeature.entries[m];\r\n                  if (\r\n                    childEntry.name !== undefined &&\r\n                    !childEntry.name.startsWith(`<span class=\"${CLSS_SUBCLASS_PREFIX}\">`)\r\n                  ) {\r\n                    childEntry.name = `<span class=\"${CLSS_SUBCLASS_PREFIX}\">${subClass.name}: </span>${childEntry.name}`;\r\n                  }\r\n                }\r\n              }\r\n\r\n              const styleClasses = [CLSS_SUBCLASS_FEATURE];\r\n              const hideSource =\r\n                isNonstandardSource(subClass.source) || hasBeenReprinted(subClass.shortName, subClass.source);\r\n              if (hideSource) styleClasses.push(CLSS_NON_STANDARD_SOURCE);\r\n              if (i !== 0) styleClasses.push(\"referenced-subclass-feature\");\r\n              renderer.recursiveEntryRender(\r\n                subFeature,\r\n                renderStack,\r\n                0,\r\n                `<div class=\"${styleClasses.join(\" \")}\" ${ATB_DATA_SC}=\"${subClass.name}\" ${ATB_DATA_SRC}=\"${\r\n                  subClass.source\r\n                }\">`,\r\n                `</div>`,\r\n                true\r\n              );\r\n            }\r\n          }\r\n        }\r\n        subclassIndex++;\r\n      }\r\n    }\r\n\r\n    // render class table feature names\r\n    if (featureNames.length === 0) tblLvlFeatures.innerHTML = \"\\u2014\";\r\n    else {\r\n      for (let j = 0; j < featureNames.length; j++) {\r\n        tblLvlFeatures.append(featureNames[j]);\r\n      }\r\n    }\r\n  }\r\n  rootEl.querySelector(\"#stats\").innerHTML = renderStack.join(\"\");\r\n\r\n  // show UA/other features by default\r\n  toggleUAFeatures(true);\r\n\r\n  // CLASS FEATURE/UA/SUBCLASS PILL BUTTONS ==========================================================================\r\n  let subclassPillWrapper = rootEl.querySelector(\"div#subclasses\");\r\n  // remove any from previous class\r\n  jqEmpty(subclassPillWrapper);\r\n  subclassPillWrapper.append(parseHTML(`<div class='title'>Subclasses</div>`));\r\n  subclassPillWrapper.append(parseHTML(`<div class='subclass-wrapper'></div>`));\r\n  subclassPillWrapper = subclassPillWrapper.querySelector('.subclass-wrapper');\r\n\r\n  // show/hide UA/other sources\r\n  const allSourcesToggle = makeGenericTogglePill(\r\n    \"Show UA\",\r\n    CLSS_OTHER_SOURCES_ACTIVE,\r\n    ID_OTHER_SOURCES_TOGGLE,\r\n    HASH_ALL_SOURCES,\r\n    false,\r\n    true\r\n  );\r\n\r\n  // show/hide class features pill\r\n  makeGenericTogglePill(\r\n    \"Class Features\",\r\n    CLSS_CLASS_FEATURES_ACTIVE,\r\n    ID_CLASS_FEATURES_TOGGLE,\r\n    HASH_HIDE_FEATURES,\r\n    true\r\n  );\r\n\r\n  // subclass pills\r\n  if (curClass.subclasses) {\r\n    const subClasses = curClass.subclasses\r\n      .map(sc => ({ name: sc.name, source: sc.source, shortName: sc.shortName }))\r\n      .sort(function(a, b) {\r\n        return ascSort(a.shortName, b.shortName);\r\n      });\r\n    for (let i = 0; i < subClasses.length; i++) {\r\n      const nonStandardSource =\r\n        isNonstandardSource(subClasses[i].source) || hasBeenReprinted(subClasses[i].shortName, subClasses[i].source);\r\n      const styleClasses = [CLSS_ACTIVE, CLSS_SUBCLASS_PILL];\r\n      if (nonStandardSource) styleClasses.push(CLSS_NON_STANDARD_SOURCE);\r\n      const pillText = hasBeenReprinted(subClasses[i].shortName, subClasses[i].source)\r\n        ? `${subClasses[i].shortName} (${Parser.sourceJsonToAbv(subClasses[i].source)})`\r\n        : subClasses[i].shortName;\r\n      const pill = parseHTML(\r\n        `<div class=\"${styleClasses.join(\" \")}\" ${ATB_DATA_SC}=\"${subClasses[i].name}\" ${ATB_DATA_SRC}=\"${\r\n          subClasses[i].source\r\n        }\" title=\"Source: ${Parser.sourceJsonToFull(\r\n          subClasses[i].source\r\n        )}\"><span class='mdc-chip__text'>${pillText}</span></div>`\r\n      );\r\n      pill.addEventListener(\"click\", function() {\r\n        handleSubclassClick(pill.classList.contains(CLSS_ACTIVE), subClasses[i].name, subClasses[i].source);\r\n      });\r\n      if (nonStandardSource) pill.style.display = 'none';\r\n      subclassPillWrapper.append(pill);\r\n    }\r\n    subclassPillWrapper.append(parseHTML(`<div class='tab material-icons'>expand_less</div>`));\r\n\r\n    rootEl.querySelector(\"#subclasses .tab\").addEventListener(\"click\", () => {\r\n      rootEl.querySelector(\"#subclasses\").classList.toggle(\"closed\");\r\n    });\r\n\r\n    // if this is a UA class, toggle the \"All Sources\" button\r\n    const showUA = readRouteSelection().indexOf(HASH_ALL_SOURCES + 'true') > -1 || readRouteSelection().indexOf(HASH_ALL_SOURCES + 'false') === -1\r\n    if (showUA) {\r\n      allSourcesToggle.click();\r\n    }\r\n  } else {\r\n    rootEl.querySelector(\"#subclasses\").classList.add(\"hidden\");\r\n  }\r\n\r\n  // helper functions\r\n  function makeGenericTogglePill(pillText, pillActiveClass, pillId, hashKey, defaultActive, isUA) {\r\n    const pill = parseHTML(`<div id=\"${pillId}\" class=\"mdc-chip\"><span class=\"mdc-chip__text\">${pillText}</span></div>`);\r\n    subclassPillWrapper.append(pill);\r\n    pill.addEventListener(\"click\", function() {\r\n      let active = pill.classList.contains(pillActiveClass);\r\n      if (!defaultActive) active = !active;\r\n      handleToggleFeaturesClicks(active);\r\n      // enable UA features\r\n      if (isUA) {\r\n        toggleUAFeatures(active);\r\n        pill.querySelector('.mdc-chip__text').innerHTML = active ? \"Hide UA\" : \"Show UA\";\r\n      }\r\n    });\r\n    return pill;\r\n\r\n    function handleToggleFeaturesClicks(isPillActive) {\r\n      const outStack = [];\r\n      const split = readRouteSelection().split(HASH_PART_SEP);\r\n\r\n      for (let i = 0; i < split.length; i++) {\r\n        const hashPart = split[i];\r\n        if (!hashPart.startsWith(hashKey)) outStack.push(hashPart);\r\n      }\r\n      if (isPillActive) {\r\n        outStack.push(hashKey + \"true\");\r\n      } else {\r\n        outStack.push(hashKey + \"false\");\r\n      }\r\n      const newHash = outStack.join(HASH_PART_SEP);\r\n      setRouteSelection(newHash, true);\r\n    }\r\n  }\r\n\r\n  function handleSubclassClick(isPillActive, subclassName, subclassSource) {\r\n    const outStack = [];\r\n    const routeSelection = readRouteSelection();\r\n    const split = routeSelection.split(HASH_PART_SEP);\r\n\r\n    const encodedSubClass = encodeForHash([subclassName]);\r\n    const subclassLink = HASH_SUBCLASS + encodedSubClass;\r\n\r\n    if (isPillActive && routeSelection.includes(HASH_SUBCLASS)) {\r\n      for (let i = 0; i < split.length; i++) {\r\n        const hashPart = split[i];\r\n        if (!hashPart.startsWith(HASH_SUBCLASS)) {\r\n\t\t\t\t\toutStack.push(hashPart);\r\n\t\t\t\t} else {\r\n          const subClassStack = [];\r\n          const subClasses = hashPart.substr(HASH_SUBCLASS.length).split(HASH_LIST_SEP);\r\n          for (let j = 0; j < subClasses.length; j++) {\r\n            const subClass = subClasses[j];\r\n            if (subClass !== encodedSubClass) subClassStack.push(subClass);\r\n          }\r\n          if (subClassStack.length > 0) outStack.push(HASH_SUBCLASS + subClassStack.join(HASH_LIST_SEP));\r\n        }\r\n      }\r\n    } else {\r\n      let hasSubclassHash = false;\r\n\r\n      for (let i = 0; i < split.length; i++) {\r\n        const hashPart = split[i];\r\n        if (!hashPart.startsWith(HASH_SUBCLASS)) outStack.push(hashPart);\r\n        else {\r\n          const subClassStack = [];\r\n          const subClasses = hashPart.substr(HASH_SUBCLASS.length).split(HASH_LIST_SEP);\r\n          for (let j = 0; j < subClasses.length; j++) {\r\n            const subClass = subClasses[j];\r\n            if (subClass !== encodedSubClass) subClassStack.push(subClass);\r\n          }\r\n          subClassStack.push(encodedSubClass);\r\n          if (subClassStack.length > 0) outStack.push(HASH_SUBCLASS + subClassStack.join(HASH_LIST_SEP));\r\n\r\n          hasSubclassHash = true;\r\n        }\r\n      }\r\n\r\n      if (!hasSubclassHash) outStack.push(subclassLink);\r\n    }\r\n    const newHash = outStack.join(HASH_PART_SEP);\r\n    setRouteSelection(newHash, true);\r\n  }\r\n\r\n  function toggleUAFeatures(active) {\r\n    let nonStandardPills = rootEl.querySelectorAll(`.${CLSS_NON_STANDARD_SOURCE}`);\r\n    for (let nonStandardPill of nonStandardPills) {\r\n      if (!nonStandardPill.classList.contains(CLSS_SUBCLASS_PILL)) {\r\n        nonStandardPill.style.display = active ? null : 'none';\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction onSubChange(sub, curHash, rootEl) {\r\n\tlet subclasses = null;\r\n\tlet feature = null;\r\n\tlet hideClassFeatures = null;\r\n\tlet showAllSources = null;\r\n\r\n\tfor (let i = 0; i < sub.length; i++) {\r\n\t\tconst hashPart = sub[i];\r\n\r\n\t\tif (hashPart.startsWith(HASH_SUBCLASS)) subclasses = hashPart.slice(HASH_SUBCLASS.length).split(HASH_LIST_SEP);\r\n\t\tif (hashPart.startsWith(HASH_FEATURE)) feature = hashPart;\r\n\t\tif (hashPart.startsWith(HASH_HIDE_FEATURES)) hideClassFeatures = hashPart.slice(HASH_HIDE_FEATURES.length) === \"true\";\r\n\t\tif (hashPart.startsWith(HASH_ALL_SOURCES)) showAllSources = hashPart.slice(HASH_ALL_SOURCES.length) === \"true\";\r\n\t}\r\n\r\n\tconst hideOtherSources = showAllSources === null || showAllSources === false;\r\n\r\n\tif (subclasses !== null) {\r\n\t\tupdateClassTableLinks();\r\n\r\n\t\tconst $toShow = [];\r\n\t\tconst $toHide = [];\r\n\t\tconst $subClassSpanList = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_PILL}`);\r\n\t\tfor (let classSpan of $subClassSpanList) {\r\n\t\t\tconst $this = classSpan;\r\n      const name = $this.getAttribute(ATB_DATA_SC);\r\n\t\t\tconst thisSc = encodeForHash([name]);\r\n\t\t\tlet shown = false;\r\n\r\n\t\t\tfor (let j = 0; j < subclasses.length; j++) {\r\n\t\t\t\tconst sc = subclasses[j];\r\n\t\t\t\tif (sc.trim() === thisSc) {\r\n\t\t\t\t\tshown = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (shown) {\r\n\t\t\t\t$toShow.push($this);\r\n\t\t\t} else {\r\n\t\t\t\t$toHide.push($this);\r\n\t\t\t}\r\n\t\t}\r\n\r\n    const otherSrcSubFeats = rootEl.querySelectorAll(`p.${CLSS_NON_STANDARD_SOURCE}`);\r\n    const shownInTable = [];\r\n\r\n    for (let v of $toShow) {\r\n      v.classList.add(CLSS_ACTIVE);\r\n      let selectedSCFeatures = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_FEATURE}[${ATB_DATA_SC}=\"${v.getAttribute(ATB_DATA_SC)}\"][${ATB_DATA_SRC}=\"${v.getAttribute(ATB_DATA_SRC)}\"]`);\r\n      for (let selectedSCFeature of selectedSCFeatures) {\r\n        selectedSCFeature.style.display = null;\r\n      }\r\n      if (hideOtherSources) {\r\n        for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n          if (\r\n            otherSrcSubFeat.getAttribute(ATB_DATA_SC) === v.getAttribute(ATB_DATA_SC) &&\r\n            otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === v.getAttribute(ATB_DATA_SRC)\r\n          ) {\r\n            otherSrcSubFeat.style.display = \"none\";\r\n          }\r\n        }\r\n      } else {\r\n        for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n          if (\r\n            otherSrcSubFeat.getAttribute(ATB_DATA_SC) === v.getAttribute(ATB_DATA_SC) &&\r\n            otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === v.getAttribute(ATB_DATA_SRC)\r\n          ) {\r\n            otherSrcSubFeat.style.display = null;\r\n          }\r\n        }\r\n      }\r\n\r\n      const asInTable = v.getAttribute(ATB_DATA_SC) + ATB_DATA_PART_SEP + v.getAttribute(ATB_DATA_SRC);\r\n      shownInTable.push(asInTable);\r\n    }\r\n\r\n    for (let v of $toHide) {\r\n      v.classList.remove(CLSS_ACTIVE);\r\n      let selectedSCFeatures = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_FEATURE}[${ATB_DATA_SC}=\"${v.getAttribute(ATB_DATA_SC)}\"][${ATB_DATA_SRC}=\"${v.getAttribute(ATB_DATA_SRC)}\"]`);\r\n      for (let selectedSCFeature of selectedSCFeatures) {\r\n        selectedSCFeature.style.display = 'none';\r\n      }\r\n      for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n        if (\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SC) === v.getAttribute(ATB_DATA_SC) &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === v.getAttribute(ATB_DATA_SRC)\r\n        ) {\r\n          otherSrcSubFeat.style.display = \"none\";\r\n        }\r\n      }\r\n      v.getAttribute(ATB_DATA_SC);\r\n    }\r\n    \r\n    handleTableGroups(shownInTable);\r\n\r\n    if (hideOtherSources) {\r\n      for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n        if (\r\n          !otherSrcSubFeat.classList.contains(CLSS_SUBCLASS_FEATURE) &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SC) === EntryRenderer.DATA_NONE &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === EntryRenderer.DATA_NONE\r\n        ) {\r\n          otherSrcSubFeat.style.display = \"none\";\r\n        }\r\n      }\r\n    } else {\r\n      for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n        if (\r\n          !otherSrcSubFeat.classList.contains(CLSS_SUBCLASS_FEATURE) &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SC) === EntryRenderer.DATA_NONE &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === EntryRenderer.DATA_NONE\r\n        ) {\r\n          otherSrcSubFeat.style.display = null;\r\n        }\r\n      }\r\n    }\r\n\r\n\t\t// show subclass prefixes if we're displaying more than 1 subclass\r\n\t\tlet subClassEls = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_PREFIX}`);\r\n\t\tif ($toShow.length !== 1) {\r\n\t\t\tfor (let subClassEl of subClassEls) {\r\n\t\t\t\tsubClassEl.style.display = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let subClassEl of subClassEls) {\r\n\t\t\t\tsubClassEl.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// hide class features as required\r\n\tconst cfToggle = rootEl.querySelector(`#${ID_CLASS_FEATURES_TOGGLE}`);\r\n\tconst toToggleCf= rootEl.querySelectorAll(`.${CLSS_CLASS_FEATURE}`);\r\n\tif (hideClassFeatures !== null && hideClassFeatures) {\r\n\t\tcfToggle.classList.remove(CLSS_CLASS_FEATURES_ACTIVE);\r\n\t\tfor (let el of toToggleCf) {\r\n\t\t\tif (!el.classList.contains(CLSS_GAIN_SUBCLASS_FEATURE)) {\r\n        el.style.display = \"none\";\r\n      }\r\n\t\t}\r\n\t} else {\r\n\t\tcfToggle.classList.add(CLSS_CLASS_FEATURES_ACTIVE);\r\n\t\tfor (let el of toToggleCf) {\r\n\t\t\tif (!el.classList.contains(CLSS_GAIN_SUBCLASS_FEATURE)) {\r\n        el.style.display = null;\r\n      }\r\n\t\t}\r\n\t}\r\n\r\n\t// show UA/etc content as required\r\n\tconst srcToggle = rootEl.querySelector(`#${ID_OTHER_SOURCES_TOGGLE}`);\r\n\tconst toToggleSrc = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_PILL}.${CLSS_NON_STANDARD_SOURCE}`);\r\n\tif (hideOtherSources) {\r\n\t\tsrcToggle.classList.remove(CLSS_OTHER_SOURCES_ACTIVE);\r\n\t\tfor (let el of toToggleSrc) {\r\n\t\t\tel.style.display = \"none\";\r\n\t\t}\r\n\t} else {\r\n\t\tsrcToggle.classList.add(CLSS_OTHER_SOURCES_ACTIVE);\r\n\t\tfor (let el of toToggleSrc) {\r\n\t\t\tel.style.display = null;\r\n\t\t}\r\n\t}\r\n\r\n\t// scroll to the linked feature if required\r\n\tif (feature !== null && (window.prevFeature === undefined || window.prevFeature !== feature)) {\r\n\t\trootEl.getElementById(rootEl.querySelectorAll(`[${ATB_DATA_FEATURE_LINK}=\"${feature}\"]`).getAttribute(ATB_DATA_FEATURE_ID)).scrollIntoView();\r\n\t\twindow.prevFeature = feature;\r\n\t}\r\n\r\n\tupdateClassTableLinks();\r\n\r\n  function handleTableGroups(toShow) {\r\n    let listEls = rootEl.querySelectorAll(`[${ATB_DATA_SC_LIST}]`);\r\n    for (let el of listEls) {\r\n      const scs = el.getAttribute(ATB_DATA_SC_LIST).split(ATB_DATA_LIST_SEP);\r\n\r\n      for (let shown of toShow) {\r\n        if (scs.includes(shown)) {\r\n          el.style.display = null;\r\n          break;\r\n        }\r\n          el.style.display = 'none';\r\n        }\r\n      }\r\n\t}\r\n\r\n\tfunction updateClassTableLinks () {\r\n\t\tconst hashParts = curHash.slice(1).split(HASH_PART_SEP);\r\n\t\tconst outParts = [];\r\n\t\tfor (let i = 0; i < hashParts.length; i++) {\r\n\t\t\tconst part = hashParts[i];\r\n\t\t\tif (!part.startsWith(HASH_FEATURE)) outParts.push(part);\r\n\t\t}\r\n\t\tlet els = rootEl.querySelectorAll(`.${CLSS_FEATURE_LINK}`);\r\n\t\tfor (let el of els) {\r\n\t\t\tel.href = HASH_START+outParts.join(HASH_PART_SEP)+HASH_PART_SEP+el.getAttribute(ATB_DATA_FEATURE_LINK);\r\n\t\t}\r\n\t}\r\n}\r\n","import { setRouteSelection } from \"./routing\";\nimport { encodeForHash, parseHTML } from \"../js/utils\";\nimport Parser from \"./Parser\";\n\nexport default function renderList(rootEl, items) {\n  const container = rootEl.querySelector('.class-container');\n  container.appendChild(parseHTML(\"<div class='list-container'></div>\"))\n  const listWrapper = container.querySelector('.list-container');\n\n  let htmlString = \"\";\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst curItem = items[i];\n\t\tlet svg = curItem.name.replace(/(\\s|\\(|\\))/g, \"\");\n\t\tlet link = encodeForHash([curItem.name, curItem.source]);\n\n\t\thtmlString += \n\t\t\t`<div class='list-item history-link grid-item__${svg}' data-link='${link}' data-title='${curItem.name}'>\n\t\t\t\t<div>\n\t\t\t\t\t<dnd-svg id='${svg}' default-color class='list-item--image grid-item__${svg}'></dnd-svg>\n\t\t\t\t\t<span class='list-item--text'>${curItem.name}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"list-item--subtext\">${Parser.sourceJsonToFull(curItem.source)}</div>\n\t\t\t</div>`\n\t}\n\tlet itemElements = parseHTML(htmlString);\n\twhile (itemElements.length > 0) {\n\t\titemElements[0].addEventListener(\"click\", (e) => {\n\t\t\tlet tar = e.target.closest(\".list-item\");\n\t\t\tsetRouteSelection(tar.getAttribute(\"data-link\"));\n\t\t});\n\t\tlistWrapper.appendChild(itemElements[0]);\n\t}\n};"],"sourceRoot":""}