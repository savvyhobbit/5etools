(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{129:function(e,t,s){"use strict";s.r(t),s.d(t,"onDataLoad",(function(){return d})),s.d(t,"onClassChange",(function(){return f})),s.d(t,"onSubChange",(function(){return p}));var l=s(1),o=s(0),n=s(71),r=s(5),i=s(11);const c="mdc-chip--selected",a=new n.a;function u(e){let t=[];return a.recursiveEntryRender(e,t,0),t.join(" ")}function d(e,t){for(const t of e)t.subclasses&&(t.subclasses=t.subclasses.sort((e,t)=>Object(l.ascSort)(e.name,t.name)));window.classTableDefault=t.querySelector("#classtable").innerHTML,function(e,t){const s=e.querySelector(".class-container");s.appendChild(Object(l.parseHTML)("<div class='list-container'></div>"));const o=s.querySelector(".list-container");let n="";for(let e=0;e<t.length;e++){const s=t[e];let o=s.name.replace(/(\s|\(|\))/g,"");n+=`<div class='list-item history-link grid-item__${o}' data-link='${Object(l.encodeForHash)([s.name,s.source])}' data-title='${s.name}'>\n\t\t\t\t<div>\n\t\t\t\t\t<dnd-svg id='${o}' default-color class='list-item--image grid-item__${o}'></dnd-svg>\n\t\t\t\t\t<span class='list-item--text'>${s.name}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="list-item--subtext">${s.source}</div>\n\t\t\t</div>`}let r=Object(l.parseHTML)(n);for(;r.length>0;)r[0].addEventListener("click",e=>{let t=e.target.closest(".list-item");Object(i.f)(t.getAttribute("data-link"))}),o.appendChild(r[0])}(t,e)}function f(e,t){t.querySelector("#classtable").innerHTML=window.classTableDefault,t.querySelector("#subclasses").classList.remove("fixed"),t.querySelector("#subclasses").classList.remove("closed"),t.querySelector("#subclasses").classList.remove("hidden"),t.querySelector(".mobile-clone-spells")&&t.querySelector(".mobile-clone-spells").remove(),e.hd?(t.querySelector("#hp").classList.remove("hidden"),t.querySelector("#hp div#hitdice span").innerHTML=n.a.getEntryDice(e.hd),t.querySelector("#hp div#hp1stlevel span").innerHTML=e.hd.faces+" + your Constitution modifier",t.querySelector("#hp div#hphigherlevels span").innerHTML=`${n.a.getEntryDice(e.hd)} (or ${e.hd.faces/2+1}) + your Constitution modifier per ${e.name} level after 1st`):t.querySelector("#hp").classList.add("hidden"),e.proficiency?(t.querySelector("#prof").classList.remove("hidden"),t.querySelector("#prof div#saves span").innerHTML=e.proficiency.map(e=>r.a.attAbvToFull(e)).join(", ")):t.querySelector("#prof").classList.add("hidden");const s=e.startingProficiencies;s?(t.querySelector("#armor").classList.remove("hidden"),t.querySelector("#weapons").classList.remove("hidden"),t.querySelector("#tools").classList.remove("hidden"),t.querySelector("#skills").classList.remove("hidden"),t.querySelector("div#armor span").innerHTML=void 0===s.armor?"none":s.armor.map(e=>"light"===e||"medium"===e||"heavy"===e?e+" armor":e).join(", "),t.querySelector("div#weapons span").innerHTML=void 0===s.weapons?"none":s.weapons.map(e=>"simple"===e||"martial"===e?e+" weapons":e).join(", "),t.querySelector("div#tools span").innerHTML=void 0===s.tools?"none":s.tools.join(", "),t.querySelector("div#skills span").innerHTML=void 0===s.skills?"none":function(e){let t,s,o="";if(Array.isArray(e))for(let n of e)n.choose&&(t=r.a.numberToString(n.choose.count),s=n.choose.from,o+=18===s.length?`Choose any ${t}.`:`Choose ${t} from ${Object(l.joinConjunct)(s,", ",", and ")}.`);else t=r.a.numberToString(e.choose),s=e.from,o+=18===s.length?`Choose any ${t}.`:`Choose ${t} from ${Object(l.joinConjunct)(s,", ",", and ")}.`;return o}(s.skills)):(t.querySelector("#armor").classList.add("hidden"),t.querySelector("#weapons").classList.add("hidden"),t.querySelector("#tools").classList.add("hidden"),t.querySelector("#skills").classList.add("hidden"));const d=e.startingEquipment;if(d){t.querySelector("#equipment").classList.remove("hidden");const e=d.additionalFromBackground?"<p>You start with the following items, plus anything provided by your background.</p>":"",s=0===d.default.length?"":`<ul><li>${d.default.map(e=>u(e)).join("</li><li>")}</ul>`,l=void 0===d.goldAlternative?"":`<p>Alternatively, you may start with ${u(d.goldAlternative)} gp to buy your own equipment.</p>`;t.querySelector("#equipment div").innerHTML=`${e}${s}${l}`}else t.querySelector("#equipment").classList.add("hidden");let f=e.classTableGroups||[];const p=t.querySelector("#groupHeaders"),b=t.querySelector("#colHeaders"),h=[];let y=!1;for(let t of e.subclasses)t.subclassTableGroups&&(f=f.concat(t.subclassTableGroups));if(f)for(let e=0;e<f.length;e++){const s=f[e],n=void 0!==s.title;let r="";void 0!==s.subclasses&&(r=`data-subclass-list="${s.subclasses.map(e=>e.name+o.e+e.source).join(o.d)}"`),p.append(Object(l.parseHTML)(`<th ${n?'class="colGroupTitle table-cell"':""} colspan="${s.colLabels.length}" ${r}>${n?s.title:""}</th>`,!0,!0));for(let e=0;e<s.colLabels.length;e++){let t=s.colLabels[e];if(t.indexOf("@")>-1){let e=[];a.recursiveEntryRender(t,e,0),t=e.join(" ")}b.append(Object(l.parseHTML)(`<th class="centred-col table-cell" ${r}>${t}</th>`,!0,!0))}if(s.rows)for(let e=0;e<20;e++){const o=t.querySelector("#level"+(e+1));h[e]=o;for(let t=0;t<s.rows[e].length;t++){let n=s.rows[e][t];0===n&&(n="—");const i=[];a.recursiveEntryRender(n,i,"",""),o.append(Object(l.parseHTML)(`<td class="centred-col" ${r}>${i.join("")}</td>`,!0,!0))}}if(s.rowsSpellProgression)for(let e=0;e<20;e++){const o=t.querySelector("#level"+(e+1));h[e]=o;for(let t=0;t<s.rowsSpellProgression[e].length;t++){let n=s.rowsSpellProgression[e][t];0===n&&(n="—");const i=[];a.recursiveEntryRender(n,i,"",""),o.append(Object(l.parseHTML)(`<td class="centred-col" ${r}>${i.join("")}</td>`,!0,!0))}}let i=s.colLabels.join(" ");!y&&(i.indexOf("Spells Known")>-1||i.indexOf("Cantrips Known")>-1||i.indexOf("1st")>-1||i.indexOf("Ki Points")>-1||i.indexOf("Rages")>-1||i.indexOf("Talents Known")>-1)&&(y=!0)}else if(e.classFeatures.length)for(let e=0;e<20;e++){const s=t.querySelector("#level"+(e+1));h[e]=s}if(t.querySelector("#classtable").classList.remove("mobile-clone-features"),y){t.querySelector("#classtable").classList.add("mobile-clone-features");let e=Object(l.parseHTML)('<div class="mobile-clone-spells"></div>');e.append(t.querySelector("#classtable").cloneNode(!0)),e.querySelector("#classtable").classList.remove("mobile-clone-features"),e.querySelector("#groupHeaders th:not(.colGroupTitle)").remove(),e.querySelector("#groupHeaders .colGroupTitle")&&e.querySelector("#groupHeaders .colGroupTitle").setAttribute("colspan","12");let s=e.querySelectorAll("#colHeaders th");for(let e of s)e.textContent.toLowerCase().indexOf("sneak attack")>-1?e.innerHTML='<span title="Sneak Attack">Snk Atk</span>':e.textContent.toLowerCase().indexOf("sorcery points")>-1?e.innerHTML='<span title="Sorcery Points">SP</span>':e.textContent.toLowerCase().indexOf("spells known")>-1?e.innerHTML='<span title="Spells Known">S</span>':e.textContent.toLowerCase().indexOf("cantrips known")>-1&&(e.innerHTML='<span title="Cantrips Known">C</span>');Object(l.jqAfter)(t.querySelector("#classtable"),e)}const g=[];let m=0;for(let s=0;s<20;s++){const n=h[s].querySelector(".features"),r=[],i=e.classFeatures[s];for(let n=0;n<i.length;n++){const c=i[n],u="f:"+Object(l.encodeForHash)(c.name)+"_"+s,d="f:"+Object(l.encodeForHash)(c.name)+s,f=["feature-link"];Object(l.isNonstandardSource)(c.source)&&f.push(o.i);const p=Object(l.parseHTML)(`<a href="#${Object(l.encodeForHash)([e.name,e.source])}${o.o}${d}"\n          class="${f.join(" ")}"\n          data-flink="${d}"\n          data-flink-id="${u}">${c.name}</a>`);p.addEventListener("click",(function(e){e.preventDefault(),t.getElementById(u).scrollIntoView(!0);let s=-84-Object(l.jqHeight)(t.querySelector("#subclasses"));window.scrollBy(0,s)})),r.push(p);const b=["class-feature"];if(c.gainSubclassFeature&&b.push("gain-subclass-feature"),a.recursiveEntryRender(c,g,0,`<div id="${u}" class="${b.join(" ")}">`,"</div>",!0),c.gainSubclassFeature){for(const t of e.subclasses)if(t.subclassFeatures){const e=t.subclassFeatures[m];for(let s=0;s<e.length;s++){const n=e[s];if(void 0===n.name)for(let e=0;e<n.entries.length;e++){const s=n.entries[e];void 0===s.name||s.name.startsWith('<span class="subclass-prefix">')||(s.name=`<span class="subclass-prefix">${t.name}: </span>${s.name}`)}const r=[o.j];(Object(l.isNonstandardSource)(t.source)||Object(l.hasBeenReprinted)(t.shortName,t.source))&&r.push(o.i),0!==s&&r.push("referenced-subclass-feature"),a.recursiveEntryRender(n,g,0,`<div class="${r.join(" ")}" ${o.f}="${t.name}" ${o.g}="${t.source}">`,"</div>",!0)}}m++}}if(0===r.length)n.innerHTML="—";else for(let e=0;e<r.length;e++)n.append(r[e])}t.querySelector("#stats").innerHTML=g.join(""),j(!0);let v=t.querySelector("div#subclasses");Object(l.jqEmpty)(v),v.append(Object(l.parseHTML)("<div class='title'>Subclasses</div>")),v.append(Object(l.parseHTML)("<div class='subclass-wrapper'></div>")),v=v.querySelector(".subclass-wrapper");const S=L("Show UA","os-active","os-toggle","allsrc:",!1,!0);if(L("Class Features","cf-active","cf-toggle","hideclassfs:",!0),e.subclasses){const s=e.subclasses.map(e=>({name:e.name,source:e.source,shortName:e.shortName})).sort((function(e,t){return Object(l.ascSort)(e.shortName,t.shortName)}));for(let e=0;e<s.length;e++){const t=Object(l.isNonstandardSource)(s[e].source)||Object(l.hasBeenReprinted)(s[e].shortName,s[e].source),n=[c,"mdc-chip"];t&&n.push(o.i);const i=Object(l.hasBeenReprinted)(s[e].shortName,s[e].source)?`${s[e].shortName} (${r.a.sourceJsonToAbv(s[e].source)})`:s[e].shortName,a=Object(l.parseHTML)(`<div class="${n.join(" ")}" ${o.f}="${s[e].name}" ${o.g}="${s[e].source}" title="Source: ${r.a.sourceJsonToFull(s[e].source)}"><span class='mdc-chip__text'>${i}</span></div>`);a.addEventListener("click",(function(){q(a.classList.contains(c),s[e].name,s[e].source)})),t&&(a.style.display="none"),v.append(a)}v.append(Object(l.parseHTML)("<div class='tab material-icons'>expand_less</div>")),t.querySelector("#subclasses .tab").addEventListener("click",()=>{t.querySelector("#subclasses").classList.toggle("closed")});(Object(i.c)().indexOf("allsrc:true")>-1||-1===Object(i.c)().indexOf("allsrc:false"))&&S.click()}else t.querySelector("#subclasses").classList.add("hidden");function L(e,t,s,n,r,c){const a=Object(l.parseHTML)(`<div id="${s}" class="mdc-chip"><span class="mdc-chip__text">${e}</span></div>`);return v.append(a),a.addEventListener("click",(function(){let e=a.classList.contains(t);r||(e=!e),function(e){const t=[],s=Object(i.c)().split(o.o);for(let e=0;e<s.length;e++){const l=s[e];l.startsWith(n)||t.push(l)}e?t.push(n+"true"):t.push(n+"false");const l=t.join(o.o);Object(i.f)(l,!0)}(e),c&&(j(e),a.querySelector(".mdc-chip__text").innerHTML=e?"Hide UA":"Show UA")})),a}function q(e,t,s){const n=[],r=Object(i.c)(),c=r.split(o.o),a=Object(l.encodeForHash)([t]),u="sub:"+a;if(e&&r.includes("sub:"))for(let e=0;e<c.length;e++){const t=c[e];if(t.startsWith("sub:")){const e=[],s=t.substr("sub:".length).split(o.n);for(let t=0;t<s.length;t++){const l=s[t];l!==a&&e.push(l)}e.length>0&&n.push("sub:"+e.join(o.n))}else n.push(t)}else{let e=!1;for(let t=0;t<c.length;t++){const s=c[t];if(s.startsWith("sub:")){const t=[],l=s.substr("sub:".length).split(o.n);for(let e=0;e<l.length;e++){const s=l[e];s!==a&&t.push(s)}t.push(a),t.length>0&&n.push("sub:"+t.join(o.n)),e=!0}else n.push(s)}e||n.push(u)}const d=n.join(o.o);Object(i.f)(d,!0)}function j(e){let s=t.querySelectorAll("."+o.i);for(let t of s)t.classList.contains("mdc-chip")||(t.style.display=e?null:"none")}}function p(e,t,s){let r=null,i=null,a=null,u=null;for(let t=0;t<e.length;t++){const s=e[t];s.startsWith("sub:")&&(r=s.slice("sub:".length).split(o.n)),s.startsWith("f:")&&(i=s),s.startsWith("hideclassfs:")&&(a="true"===s.slice("hideclassfs:".length)),s.startsWith("allsrc:")&&(u="true"===s.slice("allsrc:".length))}const d=null===u||!1===u;if(null!==r){y();const e=[],t=[],i=s.querySelectorAll(".mdc-chip");for(let s of i){const n=s,i=n.getAttribute(o.f),c=Object(l.encodeForHash)([i]);let a=!1;for(let e=0;e<r.length;e++){if(r[e].trim()===c){a=!0;break}}a?e.push(n):t.push(n)}const a=s.querySelectorAll("p."+o.i),u=[];for(let t of e){t.classList.add(c);let e=s.querySelectorAll(`.${o.j}[${o.f}="${t.getAttribute(o.f)}"][${o.g}="${t.getAttribute(o.g)}"]`);for(let t of e)t.style.display=null;if(d)for(let e of a)e.getAttribute(o.f)===t.getAttribute(o.f)&&e.getAttribute(o.g)===t.getAttribute(o.g)&&(e.style.display="none");else for(let e of a)e.getAttribute(o.f)===t.getAttribute(o.f)&&e.getAttribute(o.g)===t.getAttribute(o.g)&&(e.style.display=null);const l=t.getAttribute(o.f)+o.e+t.getAttribute(o.g);u.push(l)}for(let e of t){e.classList.remove(c);let t=s.querySelectorAll(`.${o.j}[${o.f}="${e.getAttribute(o.f)}"][${o.g}="${e.getAttribute(o.g)}"]`);for(let e of t)e.style.display="none";for(let t of a)t.getAttribute(o.f)===e.getAttribute(o.f)&&t.getAttribute(o.g)===e.getAttribute(o.g)&&(t.style.display="none");e.getAttribute(o.f)}if(function(e){let t=s.querySelectorAll("[data-subclass-list]");for(let s of t){const t=s.getAttribute("data-subclass-list").split(o.d);for(let l of e){if(t.includes(l)){s.style.display=null;break}s.style.display="none"}}}(u),d)for(let e of a)e.classList.contains(o.j)||e.getAttribute(o.f)!==n.a.DATA_NONE||e.getAttribute(o.g)!==n.a.DATA_NONE||(e.style.display="none");else for(let e of a)e.classList.contains(o.j)||e.getAttribute(o.f)!==n.a.DATA_NONE||e.getAttribute(o.g)!==n.a.DATA_NONE||(e.style.display=null);let f=s.querySelectorAll(".subclass-prefix");if(1!==e.length)for(let e of f)e.style.display=null;else for(let e of f)e.style.display="none"}const f=s.querySelector("#cf-toggle"),p=s.querySelectorAll(".class-feature");if(null!==a&&a){f.classList.remove("cf-active");for(let e of p)e.classList.contains("gain-subclass-feature")||(e.style.display="none")}else{f.classList.add("cf-active");for(let e of p)e.classList.contains("gain-subclass-feature")||(e.style.display=null)}const b=s.querySelector("#os-toggle"),h=s.querySelectorAll(".mdc-chip."+o.i);if(d){b.classList.remove("os-active");for(let e of h)e.style.display="none"}else{b.classList.add("os-active");for(let e of h)e.style.display=null}function y(){const e=t.slice(1).split(o.o),l=[];for(let t=0;t<e.length;t++){const s=e[t];s.startsWith("f:")||l.push(s)}let n=s.querySelectorAll(".feature-link");for(let e of n)e.href=o.p+l.join(o.o)+o.o+e.getAttribute("data-flink")}null===i||void 0!==window.prevFeature&&window.prevFeature===i||(s.getElementById(s.querySelectorAll(`[data-flink="${i}"]`).getAttribute("data-flink-id")).scrollIntoView(),window.prevFeature=i),y()}}}]);
//# sourceMappingURL=3.bundle.js.map