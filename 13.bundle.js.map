{"version":3,"sources":["webpack:///./components/dnd-tabs.js","webpack:///./components/views/dnd-character-builder-view.js","webpack:///./util/editMode.js","webpack:///./components/dnd-switch.js","webpack:///./components/views/character lazy ^\\.\\/dnd\\-character\\-builder\\-.*$ namespace object"],"names":["tabs","type","Array","observer","initialSelectedIndex","Number","value","this","length","tabBar","$","removeEventListener","handleTabChange","setTimeout","addEventListener","e","index","detail","dispatchEvent","CustomEvent","bubbles","composed","customElements","define","loading","Boolean","characterName","String","initialSelectedTab","indexForTabs","isEditMode","super","defaultTabs","connectedCallback","tabChangeHandler","newTabIndex","newViewId","viewId","undefined","then","updateView","document","createElement","loadingHandler","setStateFromCharacter","characterChangeHandler","character","fixedTabsScrollHandler","matches","tabWrap","getBoundingClientRect","top","classList","add","remove","window","nameFieldFocusHandler","name","inputElement","select","editModeHandler","isLoaded","tabTarget","newIndex","activateTab","rollHandler","roll","result","newRollEl","innerHTML","rollContainer","appendChild","disconnectedCallback","el","requestAnimationFrame","scrollHeight","scrollY","scrollTo","classLevel","background","race","isNonCaster","classRefs","classLevels","className","level","Object","entries","casterProgression","wasNonCaster","nonCasterTabs","label","icon","editBtn","toggle","contains","editModeChannelEl","isEditModeBool","getEditModeChannel","dispatchEditModeChange","DndSwitch","initialValue","checked","reflectToAttribute","notify","secondaryLabel","disabled","switchEl","ready","shadowRoot","querySelector","switchEventHandler","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","Error","code","ids","id","all","slice","keys","module","exports"],"mappings":"gJAKA,MAAM,UAAgB,IACpB,wBACE,MAAO,CACLA,KAAM,CACJC,KAAMC,MACNC,SAAU,eAEZC,qBAAsB,CACpBH,KAAMI,OACNC,MAAO,IAKb,cACMC,KAAKP,KAAKQ,SACRD,KAAKE,QACPF,KAAKG,EAAEV,KAAKW,oBAAoB,sBAAuBJ,KAAKK,iBAG9DC,WAAW,KACTN,KAAKE,OAAS,IAAI,IAAUF,KAAKG,EAAEV,MACnCO,KAAKG,EAAEV,KAAKc,iBAAiB,sBAAuBP,KAAKK,kBAExD,IAIP,gBAAgBG,GACd,MAAMC,EAAQD,EAAEE,OAAOD,MACvBT,KAAKW,cAAc,IAAIC,YAAY,YAAc,CAC/CC,SAAS,EACTC,UAAU,EACVJ,OAAQ,CACND,YAKN,sBACE,OAAO,GAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAmEfM,eAAeC,OAAO,WAAY,G,+DCnGlC,MAAM,UAAgC,IACpC,wBACE,MAAO,CACLC,QAAS,CACPvB,KAAMwB,QACNnB,OAAO,GAEToB,cAAe,CACbzB,KAAM0B,OACNrB,MAAO,IAETsB,mBAAoB,CAClB3B,KAAMI,OACNC,MAAO,GAETuB,aAAc,CACZ5B,KAAMI,OACNC,MAAO,GAETwB,WAAY,CACV7B,KAAMwB,QACNnB,OAAO,IAKb,uBACE,MAAO,CAAC,2BAGV,SAASoB,GACHA,GACF,aAAWA,GAIf,cACEK,QAUAxB,KAAKP,KAAOO,KAAKyB,cAGnB,oBACED,MAAME,oBAEN1B,KAAK2B,iBAAoBnB,IACvB,IAAIoB,EAAcpB,EAAEE,OAAOD,MACzBoB,EAAY7B,KAAKP,KAAKmC,GAAaE,OAErC9B,KAAKsB,aAAeM,OACFG,IAAdF,IACF7B,KAAKiB,SAAU,EACf,OAAO,2BAAqCY,GACzCG,KAAK,KACJhC,KAAKiC,WAAWC,SAASC,cAAc,yBAAyBN,QAIxE7B,KAAKO,iBAAiB,YAAaP,KAAK2B,kBAExC3B,KAAKoC,eAAiB,KACpB9B,WAAW,KACTN,KAAKiB,SAAU,GACd,IAELjB,KAAKO,iBAAiB,gBAAiBP,KAAKoC,gBAE5CpC,KAAKqC,sBAAsB,eAC3BrC,KAAKsC,uBAA0B9B,IAC7BR,KAAKqC,sBAAsB7B,EAAEE,OAAO6B,YAEtC,cAAsBhC,iBAAiB,qBAAsBP,KAAKsC,wBAElEtC,KAAKwC,uBAAyB,KAG5B,GAFsBxC,KAAKG,EAAEV,KAAKgD,QAAQ,kBAGxC,OAGiBzC,KAAKG,EAAEuC,QAAQC,wBAAwBC,KAExC,IAChB5C,KAAKG,EAAEV,KAAKoD,UAAUC,IAAI,SAE1B9C,KAAKG,EAAEV,KAAKoD,UAAUE,OAAO,UAGjCC,OAAOzC,iBAAiB,SAAUP,KAAKwC,wBACvCxC,KAAKG,EAAEV,KAAKoD,UAAUE,OAAO,SAE7B/C,KAAKiD,sBAAyBzC,IACF,kBAAtBR,KAAKG,EAAE+C,KAAKnD,OACdC,KAAKG,EAAE+C,KAAKC,aAAaC,UAG7BpD,KAAKG,EAAE+C,KAAK3C,iBAAiB,QAASP,KAAKiD,uBAE3CjD,KAAKqD,gBAAmB7C,IACtBR,KAAKuB,WAAaf,EAAEE,OAAOa,YAE7B,cAAqBhB,iBAAiB,iBAAkBP,KAAKqD,iBAC7DrD,KAAKuB,WAAa,cAEbvB,KAAKsD,WACRtD,KAAKsD,UAAW,EAChB,YAActD,KAAKG,EAAEoD,UAAW,QAAS,KACvC,GAAIvD,KAAKsB,aAAe,EAAG,CACzB,MAAMkC,EAAWxD,KAAKsB,aAAe,EACrCtB,KAAKG,EAAEV,KAAKS,OAAOuD,YAAYD,MAGnC,YAAcxD,KAAKG,EAAEoD,UAAW,OAAQ,KACtC,GAAIvD,KAAKsB,aAAetB,KAAKP,KAAKQ,OAAS,EAAG,CAC5C,MAAMuD,EAAWxD,KAAKsB,aAAe,EACrCtB,KAAKG,EAAEV,KAAKS,OAAOuD,YAAYD,OAKrCxD,KAAK0D,YAAelD,IAElB,MAAM,KAAC0C,EAAI,KAAES,EAAI,OAAEC,GAAUpD,EAAEE,OACzBmD,EAAY3B,SAASC,cAAc,OACzC0B,EAAUhB,UAAUC,IAAI,eACxBe,EAAUC,UAAY,GAAGZ,MAASU,IAClC5D,KAAKG,EAAE4D,cAAcC,YAAYH,GACjCvD,WAAW,KACTuD,EAAUd,UACT,OAEL,OAAAY,EAAA,KAAmBpD,iBAAiB,OAAQP,KAAK0D,aAGnD,uBACElC,MAAMyC,uBAENjE,KAAKI,oBAAoB,YAAaJ,KAAK2B,kBAC3C3B,KAAKI,oBAAoB,gBAAiBJ,KAAKoC,gBAC/CY,OAAO5C,oBAAoB,SAAUJ,KAAKwC,wBAC1C,cAAsBpC,oBAAoB,qBAAsBJ,KAAKsC,wBACrEtC,KAAKG,EAAE+C,KAAK9C,oBAAoB,QAASJ,KAAKiD,uBAC9C,cAAqB7C,oBAAoB,iBAAkBJ,KAAKqD,iBAChE,OAAAM,EAAA,KAAmBvD,oBAAoB,OAAQJ,KAAK0D,aAGtD,WAAWQ,GACTlB,OAAOmB,sBAAsB,KAC3B,MAAMC,EAAepB,OAAOqB,QAC5B,kBAAQrE,KAAKG,EAAEoD,WACfvD,KAAKG,EAAEoD,UAAUS,YAAYE,GAC7BlE,KAAKG,EAAEV,KAAKoD,UAAUE,OAAO,SAC7BC,OAAOsB,SAAS,EAAGF,KAIvB,4BAA4B7B,GAC1BvC,KAAKmB,cAAgBoB,EAAUW,KAC/BlD,KAAKuE,WAAa,YAAehC,GACjCvC,KAAKwE,WAAa,YAAiB,cAAejC,GAAW,GAC7DvC,KAAKyE,KAAO,YAAiB,QAASlC,GAAW,GAGjD,IAAImC,GAAc,EAClB,GAAInC,EAAW,CACb,MAAMoC,QAAkB,YAAmBpC,GACzCqC,EAAc,YAAoBrC,GAEpC,IAAK,MAAQsC,EAAWC,KAAWC,OAAOC,QAAQJ,GAAc,CAC7CD,EAAUE,GAEdI,oBACXP,GAAc,IAKhB1E,KAAKkF,eAAiBR,IACxB1E,KAAKkF,aAAeR,EAElB1E,KAAKP,KADHiF,EACU1E,KAAKmF,gBAELnF,KAAKyB,eAKvB,cACE,MAAO,CACL,CAAE2D,MAAO,GAAIC,KAAM,WAAYvD,OAAQ,cACvC,CAAEsD,MAAO,GAAIC,KAAM,WAAYvD,OAAQ,UACvC,CAAEsD,MAAO,GAAIC,KAAM,sBAAuBvD,OAAQ,aAClD,CAAEsD,MAAO,GAAIC,KAAM,SAAUvD,OAAQ,SACrC,CAAEsD,MAAO,GAAIC,KAAM,QAASvD,OAAQ,SACpC,CAAEsD,MAAO,GAAIC,KAAM,OAAQvD,OAAQ,oBAIvC,gBACE,MAAO,CACL,CAAEsD,MAAO,GAAIC,KAAM,WAAYvD,OAAQ,cACvC,CAAEsD,MAAO,GAAIC,KAAM,sBAAuBvD,OAAQ,aAClD,CAAEsD,MAAO,GAAIC,KAAM,SAAUvD,OAAQ,SACrC,CAAEsD,MAAO,GAAIC,KAAM,QAASvD,OAAQ,SACpC,CAAEsD,MAAO,GAAIC,KAAM,OAAQvD,OAAQ,oBAIvC,eACE,cAGF,kBACE,cAGF,iBACE9B,KAAKG,EAAEmF,QAAQzC,UAAU0C,OAAO,aAChC,MAAMhE,EAAavB,KAAKG,EAAEmF,QAAQzC,UAAU2C,SAAS,aACrD,YAAuBjE,GACvBvB,KAAKG,EAAEmF,QAAQxB,UAAYvC,EAAa,QAAU,OAGpD,eAAeA,GACb,OAAOA,EAAa,YAAc,gBAGpC,sBACE,OAAO,GAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAwLfR,eAAeC,OAAO,6BAA8B,I,iCCjbpD,4GAAMyE,EAAoBvD,SAASC,cAAc,OACjD,IAAIuD,GAAiB,EAQd,SAASC,IACd,OAAOF,EAGF,SAASG,EAAuBrE,GACrCkE,EAAkB9E,cAAc,IAAIC,YAAY,iBAAkB,CAACC,SAAS,EAAMC,UAAU,EAAMJ,OAAQ,CAAEa,iBAGvG,SAASA,IACd,OAAOmE,EAfTD,EAAkBlF,iBAAiB,iBAAmBC,IAChDA,EAAEE,SACJgF,IAAmBlF,EAAEE,OAAOa,e,iCCLhC,oBAGA,MAAMsE,UAAkB,IAEtB,wBACE,MAAO,CACLC,aAAc,CACZpG,KAAMwB,QACNnB,OAAO,EACPH,SAAU,mBAEZmG,QAAS,CACPrG,KAAMwB,QACNnB,OAAO,EACPiG,oBAAoB,EACpBC,QAAQ,GAEVb,MAAO,CACL1F,KAAM0B,OACNrB,MAAO,IAETmG,eAAgB,CACdxG,KAAM0B,OACNrB,MAAO,IAEToG,SAAU,CACRzG,KAAMwB,QACNnB,OAAO,EACPiG,oBAAoB,IAK1B,kBACMhG,KAAKoG,WACPpG,KAAKoG,SAASL,QAAU/F,KAAK8F,aAC7B9F,KAAK+F,QAAU/F,KAAK8F,cAIxB,QACEtE,MAAM6E,QAEN/F,WAAW,KACTN,KAAKoG,SAAW,IAAI,IAAUpG,KAAKsG,WAAWC,cAAc,gBAE5DvG,KAAKoG,SAASL,QAAU/F,KAAK8F,aAC7B9F,KAAK+F,QAAU/F,KAAK8F,cACnB,IAGL,oBACEtE,MAAME,oBAEN1B,KAAKwG,mBAAqB,KACxBxG,KAAK+F,QAAU/F,KAAKoG,SAASL,QAC7B/F,KAAKW,cAAc,IAAIC,YAAY,gBAAiB,CAClDF,OAAQ,CACNqF,QAAS/F,KAAKoG,SAASL,SAEzBlF,SAAS,EACTC,UAAU,MAGdd,KAAKsG,WAAWC,cAAc,+BAA+BhG,iBAAiB,SAAUP,KAAKwG,oBAG/F,uBACEhF,MAAMyC,uBAENjE,KAAKsG,WAAWC,cAAc,+BAA+BnG,oBAAoB,SAAUJ,KAAKwG,oBAGlG,eAAeL,GACb,OAAOA,EAAW,sDAAwD,iCAG5E,sBACE,OAAO,GAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OA0CfpF,eAAeC,OAAO,aAAc6E,I,oBCzHpC,IAAIY,EAAM,CACT,qCAAsC,CACrC,IACA,EACA,GAED,wCAAyC,CACxC,IACA,EACA,GAED,0CAA2C,CAC1C,IACA,IAED,6CAA8C,CAC7C,IACA,IAED,gCAAiC,CAChC,IACA,EACA,EACA,GAED,mCAAoC,CACnC,IACA,EACA,EACA,GAED,oCAAqC,CACpC,IACA,EACA,EACA,IAED,gDAAiD,CAChD,IACA,GAED,mDAAoD,CACnD,IACA,GAED,uCAAwC,CACvC,IACA,EACA,EACA,IAED,gCAAiC,CAChC,IACA,GAED,mCAAoC,CACnC,IACA,GAED,iCAAkC,CACjC,IACA,EACA,GAED,oCAAqC,CACpC,IACA,EACA,IAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAU/E,MAAK,WAC7B,IAAIxB,EAAI,IAAIwG,MAAM,uBAAyBL,EAAM,KAEjD,MADAnG,EAAEyG,KAAO,mBACHzG,KAIR,IAAI0G,EAAMT,EAAIE,GAAMQ,EAAKD,EAAI,GAC7B,OAAOJ,QAAQM,IAAIF,EAAIG,MAAM,GAAGZ,IAAIG,EAAoBpG,IAAIwB,MAAK,WAChE,OAAO4E,EAAoBO,MAG7BT,EAAoBY,KAAO,WAC1B,OAAOvC,OAAOuC,KAAKb,IAEpBC,EAAoBS,GAAK,IACzBI,EAAOC,QAAUd","file":"13.bundle.js","sourcesContent":["import {PolymerElement, html} from '@polymer/polymer';\nimport {MDCTabBar} from '@material/tab-bar';\nimport {} from '@polymer/polymer/lib/elements/dom-repeat.js';\nimport {} from '@polymer/polymer/lib/elements/dom-if.js';\n\nclass DndTabs extends PolymerElement {\n  static get properties() {\n    return {\n      tabs: {\n        type: Array,\n        observer: 'tabsChanged'\n      },\n      initialSelectedIndex: {\n        type: Number,\n        value: 0\n      }\n    }\n  }\n\n  tabsChanged() {\n    if (this.tabs.length) {\n      if (this.tabBar) {\n        this.$.tabs.removeEventListener(\"MDCTabBar:activated\", this.handleTabChange);\n      }\n      // Allow tabs to be rendered\n      setTimeout(() => {\n        this.tabBar = new MDCTabBar(this.$.tabs);\n        this.$.tabs.addEventListener(\"MDCTabBar:activated\", this.handleTabChange);\n        // this.tabBar.activateTab(this.initialSelectedIndex);\n      }, 0);\n    }\n  }\n\n  handleTabChange(e) {\n    const index = e.detail.index;\n    this.dispatchEvent(new CustomEvent(\"tabChange\",  {\n      bubbles: true,\n      composed: true,\n      detail: {\n        index\n      }\n    }));\n  }\n  \n  static get template() {\n    return html`\n      <style include=\"material-styles\">\n        .mdc-tab-bar {\n          max-width: 100vw;\n          line-height: 1;\n        }\n        .mdc-tab__icon {\n          width: unset;\n          height: unset;\n        }\n        :host([theme=\"large\"]) .mdc-tab {\n          height: 64px;\n          margin-left: -5px;\n        }\n        :host([theme=\"large\"]) .mdc-tab__icon {\n          font-size: 30px;\n        }\n        :host([theme=\"large\"]) .mdc-tab__text-label {\n          font-size: 20px;\n          padding-left: 16px;\n        }\n        :host([theme=\"large\"]) .mdc-tab__content {\n          margin-left: 6px;\n        }\n        :host([theme=\"large\"]) .mdc-tab .mdc-tab--active {\n          background-color: var(--lumo-primary-color-10pct);\n        }\n        :host([theme=\"large\"]) .mdc-tab-indicator .mdc-tab-indicator__content {\n          border-width: 6px;\n        }\n\n        .mdc-tab-scroller__scroll-area--scroll {\n          overflow-x: auto;\n          background-color: var(--mdc-theme-surface);\n          border: 1px solid var(--mdc-theme-text-divider-on-background);\n          border-bottom: none;\n        }\n      </style>\n\n      <div class=\"mdc-tab-bar\" role=\"tablist\" id=\"tabs\">\n        <div class=\"mdc-tab-scroller\">\n          <div class=\"mdc-tab-scroller__scroll-area\">\n            <div class=\"mdc-tab-scroller__scroll-content\">\n              \n              <template is=\"dom-repeat\" items=\"[[tabs]]\">\n                \n                <button class=\"mdc-tab\" role=\"tab\" aria-selected=\"false\" tabindex=\"[[index]]\">\n                  <span class=\"mdc-tab__content\">\n                      <span class=\"mdc-tab__icon material-icons\" aria-hidden=\"true\">[[item.icon]]</span>\n                    <span class=\"mdc-tab__text-label\">[[item.label]]</span>\n                  </span>\n                  <span class=\"mdc-tab-indicator\">\n                    <span class=\"mdc-tab-indicator__content mdc-tab-indicator__content--underline\"></span>\n                  </span>\n                  <span class=\"mdc-tab__ripple\"></span>\n                </button>\n\n              </template>\n\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n  \n}\ncustomElements.define('dnd-tabs', DndTabs);","import {PolymerElement, html} from '@polymer/polymer';\nimport \"../styles/material-styles.js\";\nimport \"../styles/my-styles.js\";\nimport \"../dnd-tabs.js\";\nimport \"../dnd-character-select\";\nimport \"../dnd-spinner\";\nimport \"../dnd-switch\";\nimport { jqEmpty } from \"../../js/utils.js\";\nimport { getCharacterChannel, getSelectedCharacter, updateName, getClassString, getFeatureString, addCharacter, removeSelectedCharacter, getClassReferences, getClassLevelGroups } from '../../util/charBuilder.js';\nimport registerSwipe from '../../util/swipe.js';\nimport { dispatchEditModeChange, getEditModeChannel, isEditMode } from '../../util/editMode.js';\nimport { rollEventChannel } from '../../util/roll.js';\n\nclass DndCharacterBuilderView extends PolymerElement {\n  static get properties() {\n    return {\n      loading: {\n        type: Boolean,\n        value: true\n      },\n      characterName: {\n        type: String,\n        value: ''\n      },\n      initialSelectedTab: {\n        type: Number,\n        value: 0\n      },\n      indexForTabs: {\n        type: Number,\n        value: 0\n      },\n      isEditMode: {\n        type: Boolean,\n        value: false\n      }\n    }\n  }\n\n  static get observers() {\n    return ['_setName(characterName)']\n  }\n\n  _setName(characterName) {\n    if (characterName) {\n      updateName(characterName);\n    }\n  }\n\n  constructor() {\n    super();\n\n    // this.tabs = [\n    //   { label: \"Attributes & Proficiencies\", icon: \"favorite\", viewId: \"attributes\" },\n    //   { label: \"Class Levels\", icon: \"class\", viewId: \"class\" },\n    //   { label: \"Race & Background\", icon: \"face\", viewId: \"background-race\" },\n    //   { label: \"Spells\", icon: \"flash_on\", viewId: \"spells\" },\n    //   { label: \"Equipment\", icon: \"local_grocery_store\", viewId: \"equipment\" },\n    // ]\n    \n    this.tabs = this.defaultTabs();\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.tabChangeHandler = (e) => {\n      let newTabIndex = e.detail.index,\n        newViewId = this.tabs[newTabIndex].viewId;\n\n      this.indexForTabs = newTabIndex;\n      if (newViewId !== undefined) {\n        this.loading = true;\n        import(`./character/dnd-character-builder-${newViewId}`)\n          .then(() => {\n            this.updateView(document.createElement(`dnd-character-builder-${newViewId}`));\n          });\n      }\n    };\n    this.addEventListener(\"tabChange\", this.tabChangeHandler);\n\n    this.loadingHandler = () => {\n      setTimeout(() => {\n        this.loading = false;\n      }, 0);\n    };\n    this.addEventListener(\"loadingChange\", this.loadingHandler);\n\n    this.setStateFromCharacter(getSelectedCharacter());\n    this.characterChangeHandler = (e) => {\n      this.setStateFromCharacter(e.detail.character);\n    };\n    getCharacterChannel().addEventListener(\"character-selected\", this.characterChangeHandler);\n\n    this.fixedTabsScrollHandler = () => {\n      const isBottomFixed = this.$.tabs.matches('.fixed--bottom');\n\n      if (isBottomFixed) {\n        return;\n      }\n      \n      const heightDiff = this.$.tabWrap.getBoundingClientRect().top;\n\n      if (heightDiff <= 104) {\n        this.$.tabs.classList.add('fixed');\n      } else {\n        this.$.tabs.classList.remove('fixed');\n      }\n    };\n    window.addEventListener('scroll', this.fixedTabsScrollHandler);\n    this.$.tabs.classList.remove('fixed');\n\n    this.nameFieldFocusHandler = (e) => {\n      if (this.$.name.value === \"New Character\") {\n        this.$.name.inputElement.select();\n      }\n    }\n    this.$.name.addEventListener(\"focus\", this.nameFieldFocusHandler);\n\n    this.editModeHandler = (e) => {\n      this.isEditMode = e.detail.isEditMode;\n    }\n    getEditModeChannel().addEventListener('editModeChange', this.editModeHandler);\n    this.isEditMode = isEditMode();\n\n    if (!this.isLoaded) {\n      this.isLoaded = true;\n      registerSwipe(this.$.tabTarget, \"right\", () => {\n        if (this.indexForTabs > 0) {\n          const newIndex = this.indexForTabs - 1;\n          this.$.tabs.tabBar.activateTab(newIndex);\n        }\n      });\n      registerSwipe(this.$.tabTarget, \"left\", () => {\n        if (this.indexForTabs < this.tabs.length - 1) {\n          const newIndex = this.indexForTabs + 1;\n          this.$.tabs.tabBar.activateTab(newIndex);\n        }\n      });\n    }\n\n    this.rollHandler = (e) => {\n      // Display Rolls\n      const {name, roll, result} = e.detail;\n      const newRollEl = document.createElement('div');\n      newRollEl.classList.add('roll-result');\n      newRollEl.innerHTML = `${name}: ${result}`;\n      this.$.rollContainer.appendChild(newRollEl);\n      setTimeout(() => {\n        newRollEl.remove();\n      }, 3900);\n    }\n    rollEventChannel().addEventListener('roll', this.rollHandler);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.removeEventListener(\"tabChange\", this.tabChangeHandler);\n    this.removeEventListener(\"loadingChange\", this.loadingHandler);\n    window.removeEventListener('scroll', this.fixedTabsScrollHandler);\n    getCharacterChannel().removeEventListener(\"character-selected\", this.characterChangeHandler);\n    this.$.name.removeEventListener(\"focus\", this.nameFieldFocusHandler);\n    getEditModeChannel().removeEventListener('editModeChange', this.editModeHandler);\n    rollEventChannel().removeEventListener('roll', this.rollHandler);\n  }\n\n  updateView(el) {\n    window.requestAnimationFrame(() => {\n      const scrollHeight = window.scrollY;\n      jqEmpty(this.$.tabTarget);\n      this.$.tabTarget.appendChild(el);\n      this.$.tabs.classList.remove('fixed');\n      window.scrollTo(0, scrollHeight);\n    });\n  }\n\n  async setStateFromCharacter(character) {\n    this.characterName = character.name;\n    this.classLevel = getClassString(character);\n    this.background = getFeatureString(\"backgrounds\", character, true);\n    this.race = getFeatureString(\"races\", character, true);\n\n    // Set Tabs order based on tab order\n    let isNonCaster = true;\n    if (character) {\n      const classRefs = await getClassReferences(character),\n        classLevels = getClassLevelGroups(character);\n\n      for (const [ className, level ] of Object.entries(classLevels)) {\n        const classRef = classRefs[className];\n\n        if (classRef.casterProgression) {\n          isNonCaster = false;\n        }\n      }\n    }\n\n    if (this.wasNonCaster !== isNonCaster) {\n      this.wasNonCaster = isNonCaster;\n      if (isNonCaster) {\n        this.tabs = this.nonCasterTabs();\n      } else {\n        this.tabs = this.defaultTabs();\n      }\n    }\n  }\n\n  defaultTabs() {\n    return [\n      { label: \"\", icon: \"favorite\", viewId: \"attributes\" },\n      { label: \"\", icon: \"flash_on\", viewId: \"spells\" },\n      { label: \"\", icon: \"local_grocery_store\", viewId: \"equipment\" },\n      { label: \"\", icon: \"casino\", viewId: \"rolls\" },\n      { label: \"\", icon: \"class\", viewId: \"class\" },\n      { label: \"\", icon: \"face\", viewId: \"background-race\" },\n    ]\n  }\n\n  nonCasterTabs() {\n    return [\n      { label: \"\", icon: \"favorite\", viewId: \"attributes\" },\n      { label: \"\", icon: \"local_grocery_store\", viewId: \"equipment\" },\n      { label: \"\", icon: \"casino\", viewId: \"rolls\" },\n      { label: \"\", icon: \"class\", viewId: \"class\" },\n      { label: \"\", icon: \"face\", viewId: \"background-race\" },\n    ]\n  }\n\n  newCharacter() {\n    addCharacter();\n  }\n\n  removeCharacter() {\n    removeSelectedCharacter();\n  }\n\n  toggleEditMode() {\n    this.$.editBtn.classList.toggle('edit-mode');\n    const isEditMode = this.$.editBtn.classList.contains('edit-mode');\n    dispatchEditModeChange(isEditMode);\n    this.$.editBtn.innerHTML = isEditMode ? 'check' : 'edit';\n  }\n\n  _editModeClass(isEditMode) {\n    return isEditMode ? 'edit-mode' : 'not-edit-mode';\n  }\n  \n  static get template() {\n    return html`\n      <style include=\"material-styles\"></style>\n      <style>\n        :host {\n          display: block;\n        }\n        .head-wrap {\n          display: flex;\n          flex-direction: column;\n          margin-bottom: 16px;\n        }\n\n        .char-change {\n          display: flex;\n        }\n        .char-change vaadin-text-field {\n          font-size: 24px;\n          margin: 0 8px 12px 0;\n          max-width: calc(100% - 140px);\n        }\n        .char-change .mdc-icon-button {\n          margin-left: 8px;\n        }\n        .char-detail-edit {\n          display: flex;\n          justify-content: space-between;\n        }\n        .char-detail {\n          font-size: 16px;\n          line-height: 1.5;\n          display: flex;\n          flex-direction: column;\n        }\n        .char-detail__class {\n          font-size: 17px;\n        }\n        .char-detail__race-background {\n          font-size: 13px;\n          font-style: italic;\n        }\n        .roll-container {\n          position: relative;\n        }\n        .roll-result {\n          animation-name: fadeOutUp;\n          animation-duration: 4s;\n          animation-timing-function: ease-in;\n          position: absolute;\n          top: -80px;\n          width: max-content;\n          right: 0;\n          font-weight: bold;\n          font-size: 20px;\n          color: var(--mdc-theme-secondary);\n          z-index: 1000;\n        }\n\n        @media(min-width: 921px) {\n          .roll-result {\n            top: calc(var(--vh, 1vh) * 100 - 300px);\n            right: 50px;\n          }\n        }\n\n        @keyframes fadeOutUp {\n          0% {\n            opacity: 1;\n            transform: translateY(0);\n          }\n          50% {\n            opacity: 1;\n          }\n          100% {\n            opacity: 0;\n            transform: translateY(calc(var(--vh, 1vh) * -20));\n          }\n        }\n\n        .thumb-menu {\n          position: fixed;\n          bottom: 24px;\n          right: 24px;\n          z-index: 2;\n          display: flex;\n          flex-direction: column-reverse;\n        }\n        .thumb-menu__btn {\n          border-radius: 50%;\n        }\n        #editBtn.edit-mode {\n          background: var(--mdc-theme-secondary) !important;\n        }\n\n        .tab-wrap {\n          background-color: var(--mdc-theme-surface);\n          border: 1px solid var(--mdc-theme-text-divider-on-background);\n          display: flex;\n          flex-direction: column;\n        }\n        #tabTarget {\n          flex-grow: 1;\n        }\n\n        .not-edit-mode .delete-char,\n        .not-edit-mode .add-char {\n          display: none;\n        }\n        .not-edit-mode .char-change vaadin-text-field {\n          max-width: calc(100% - 50px);\n        }\n        @media(max-width: 420px) {\n          .thumb-menu {\n            bottom: 90px;\n          }\n          #tabs.fixed {\n            position: fixed;\n            top: 56px;\n            z-index: 2;\n            box-shadow: 0px 0px 30px -5px rgba(0,0,0,0.75);\n            border-bottom: 1px solid var(--mdc-theme-text-divider-on-background);\n          }\n          #tabs.fixed + .tab-wrap {\n            margin-top: 64px;\n          }\n          #tabs.fixed--bottom {\n            position: fixed;\n            bottom: 0;\n            z-index: 2;\n            box-shadow: 0px 0px 30px -10px rgba(0,0,0,0.75);\n            border-top: 1px solid var(--mdc-theme-text-divider-on-background);\n            height: 64px\n          }\n          #tabs.fixed--bottom + .tab-wrap {\n            margin-bottom: 94px;\n          }\n          .character-builder--tabs-wrapper {\n            margin: 0 -16px -90px;\n          }\n          .tab-wrap {\n            min-height: calc(var(--vh, 1vh) * 100 - 250px);\n          }\n        }\n\n        @media(min-width: 921px) {\n          .thumb-menu {\n            position: static;\n          }\n        }\n      </style>\n\n      <div class$=\"[[_editModeClass(isEditMode)]]\">\n        <div class=\"head-wrap\">\n          <div class=\"char-change\">\n            <vaadin-text-field id=\"name\" class=\"name\" value=\"{{characterName}}\" disabled$=\"[[!isEditMode]]\"></vaadin-text-field>\n            <dnd-character-select mini></dnd-character-select>\n            <button class=\"mdc-icon-button material-icons add-char\" on-click=\"newCharacter\">person_add</button>\n            <button class=\"mdc-icon-button material-icons delete-char\" on-click=\"removeCharacter\">delete</button>\n          </div>\n\n          <div class=\"char-detail-edit\">\n            <div class=\"char-detail\">\n              <span class=\"char-detail__class\">[[classLevel]]</span>\n              <span class=\"char-detail__race-background\">[[race]], [[background]]</span>\n            </div>\n\n            <div class=\"thumb-menu\">\n              <div class=\"roll-container\" id=\"rollContainer\"></div>\n              <button class=\"thumb-menu__btn mdc-icon-button mdc-button--raised material-icons\" id=\"editBtn\" on-click=\"toggleEditMode\">edit</button>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"character-builder--tabs-wrapper\">\n          <dnd-tabs id=\"tabs\" class='fixed--bottom' theme=\"large\" tabs=\"[[tabs]]\" initial-selected-index=\"[[initialSelectedTab]]\"></dnd-tabs>\n\n          <div class=\"tab-wrap\" id=\"tabWrap\">\n            <div id=\"tabTarget\" hidden$=\"[[loading]]\"></div>\n            <dnd-spinner loading$=\"[[loading]]\"></dnd-spinner>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\ncustomElements.define('dnd-character-builder-view', DndCharacterBuilderView);\n","const editModeChannelEl = document.createElement('div');\nlet isEditModeBool = false;\n\neditModeChannelEl.addEventListener('editModeChange', (e) => {\n  if (e.detail) {\n    isEditModeBool = !!e.detail.isEditMode;\n  }\n});\n\nexport function getEditModeChannel() {\n  return editModeChannelEl;\n}\n\nexport function dispatchEditModeChange(isEditMode) {\n  editModeChannelEl.dispatchEvent(new CustomEvent('editModeChange', {bubbles: true, composed: true, detail: { isEditMode }}));\n}\n\nexport function isEditMode() {\n  return isEditModeBool;\n}\n","import { PolymerElement, html } from \"@polymer/polymer\";\nimport { MDCSwitch } from \"@material/switch\";\n\nclass DndSwitch extends PolymerElement {\n  \n  static get properties() {\n    return {\n      initialValue: {\n        type: Boolean,\n        value: false,\n        observer: 'initValueChange'\n      },\n      checked: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        notify: true\n      },\n      label: {\n        type: String,\n        value: ''\n      },\n      secondaryLabel: {\n        type: String,\n        value: ''\n      },\n      disabled: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      }\n    };\n  }\n\n  initValueChange() {\n    if (this.switchEl) {\n      this.switchEl.checked = this.initialValue;\n      this.checked = this.initialValue;\n    }\n  }\n\n  ready() {\n    super.ready(); \n\n    setTimeout(() => {\n      this.switchEl = new MDCSwitch(this.shadowRoot.querySelector(\".mdc-switch\"));\n  \n      this.switchEl.checked = this.initialValue;\n      this.checked = this.initialValue;\n    }, 10);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.switchEventHandler = () => {\n      this.checked = this.switchEl.checked;\n      this.dispatchEvent(new CustomEvent(\"switch-change\", {\n        detail: {\n          checked: this.switchEl.checked\n        },\n        bubbles: true,\n        composed: true\n      }));\n    };\n    this.shadowRoot.querySelector(\".mdc-switch__native-control\").addEventListener(\"change\", this.switchEventHandler);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.shadowRoot.querySelector(\".mdc-switch__native-control\").removeEventListener(\"change\", this.switchEventHandler);\n  }\n\n  _switchClasses(disabled) {\n    return disabled ? \"mdc-switch mdc-list-item__meta mdc-switch--disabled\" : \"mdc-switch mdc-list-item__meta\";\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles\">\n        :host {\n          display: inline-flex;\n          justify-content: center;\n          align-items: center;\n          text-align: center;\n        }\n        :host([checked]) label.secondary {\n          color: var(--mdc-theme-primary);\n        }\n        :host([checked]) label:not(.secondary) {\n          color: var(--lumo-secondary-text-color);\n        }\n        label {\n          color: var(--mdc-theme-primary);\n          font-weight: 500;\n          font-size: var(--lumo-font-size-s);\n          margin-right: 16px;\n          transition: color 0.2s;\n        }\n        label.secondary {\n          color: var(--lumo-secondary-text-color);\n          margin-right: 0;\n          margin-left: 16px;\n        }\n      </style>\n      \n      <label for=\"switch\">[[label]]</label>\n      <div class$=\"[[_switchClasses(disabled)]]\">\n        <div class=\"mdc-switch__track\"></div>\n        <div class=\"mdc-switch__thumb-underlay\">\n          <div class=\"mdc-switch__thumb\">\n            <input type=\"checkbox\" id=\"switch\" class=\"mdc-switch__native-control\" role=\"switch\" disabled$=\"[[disabled]]\" />\n          </div>\n        </div>\n      </div>\n      <label class=\"secondary\">[[secondaryLabel]]</label>\n    `;\n  }\n}\n\ncustomElements.define(\"dnd-switch\", DndSwitch);","var map = {\n\t\"./dnd-character-builder-attributes\": [\n\t\t134,\n\t\t4,\n\t\t8\n\t],\n\t\"./dnd-character-builder-attributes.js\": [\n\t\t134,\n\t\t4,\n\t\t8\n\t],\n\t\"./dnd-character-builder-background-race\": [\n\t\t129,\n\t\t10\n\t],\n\t\"./dnd-character-builder-background-race.js\": [\n\t\t129,\n\t\t10\n\t],\n\t\"./dnd-character-builder-class\": [\n\t\t136,\n\t\t3,\n\t\t4,\n\t\t9\n\t],\n\t\"./dnd-character-builder-class.js\": [\n\t\t136,\n\t\t3,\n\t\t4,\n\t\t9\n\t],\n\t\"./dnd-character-builder-equipment\": [\n\t\t137,\n\t\t3,\n\t\t5,\n\t\t11\n\t],\n\t\"./dnd-character-builder-equipment-item-detail\": [\n\t\t124,\n\t\t5\n\t],\n\t\"./dnd-character-builder-equipment-item-detail.js\": [\n\t\t124,\n\t\t5\n\t],\n\t\"./dnd-character-builder-equipment.js\": [\n\t\t137,\n\t\t3,\n\t\t5,\n\t\t11\n\t],\n\t\"./dnd-character-builder-rolls\": [\n\t\t132,\n\t\t7\n\t],\n\t\"./dnd-character-builder-rolls.js\": [\n\t\t132,\n\t\t7\n\t],\n\t\"./dnd-character-builder-spells\": [\n\t\t133,\n\t\t3,\n\t\t6\n\t],\n\t\"./dnd-character-builder-spells.js\": [\n\t\t133,\n\t\t3,\n\t\t6\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 148;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}