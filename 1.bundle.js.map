{"version":3,"sources":["webpack:///./node_modules/@vaadin/vaadin-grid/theme/lumo/vaadin-grid-styles.js","webpack:///./node_modules/@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/iron-list.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-scroller.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-a11y-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-active-item-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-array-data-provider-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column-resizing-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-data-provider-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-dynamic-columns-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-event-context-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-filter-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-row-details-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-scroll-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-selection-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-sort-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-styling-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-drag-and-drop-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-keyboard-navigation-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column-reordering-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-outer-scroller.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-styles.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column.js","webpack:///./node_modules/@vaadin/vaadin-checkbox/src/vaadin-checkbox.js","webpack:///./node_modules/@vaadin/vaadin-checkbox/theme/lumo/vaadin-checkbox-styles.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-templatizer.js"],"names":["$_documentContainer","document","head","appendChild","content","IronScrollTargetBehavior","properties","scrollTarget","type","HTMLElement","value","this","_defaultScrollTarget","observers","_shouldHaveListener","_scrollTargetChanged","isAttached","_oldScrollTarget","_toggleScrollListener","_doc","domHost","$","ownerDocument","querySelector","_isValidScrollTarget","_scrollHandler","documentElement","window","pageYOffset","scrollTop","pageXOffset","scrollLeft","top","scrollTo","left","scroll","leftOrOptions","innerWidth","offsetWidth","innerHeight","offsetHeight","yes","eventTarget","_boundScrollHandler","bind","addEventListener","removeEventListener","toggleScrollListener","IOS","navigator","userAgent","match","IOS_TOUCH_SCROLLING","ANIMATION_FRAME","IDLE_TIME","MICRO_TASK","PolymerIronList","behaviors","_ratio","_scrollerPaddingTop","_scrollPosition","_physicalSize","_physicalAverage","_physicalAverageCount","_physicalTop","_virtualCount","_estScrollHeight","_scrollHeight","_viewportHeight","_viewportWidth","_physicalItems","_physicalSizes","_firstVisibleIndexVal","_collection","_lastVisibleIndexVal","_maxPages","_focusedVirtualIndex","_itemsPerRow","_rowHeight","_templateCost","_virtualStart","_physicalCount","grid","_physicalRows","_scrollOffset","virtualCount","_convertIndexToCompleteRow","Math","max","val","_clamp","_maxVirtualStart","_virtualStartVal","_physicalStartVal","_physicalStart","_physicalCountVal","Infinity","Boolean","idx","physicalOffset","_iterateItems","pidx","vidx","_getPhysicalSizeIncrement","min","firstVisibleIndex","_estRowsInView","_scrollBottom","attached","_debounce","_render","listen","detached","unlisten","updateViewportBoundaries","styles","getComputedStyle","parseInt","_isRTL","direction","items","_scrollTargetHeight","_updateGridMetrics","_maxScrollTop","_scrollTop","delta","isScrollingDown","abs","idxAdjustment","round","floor","_update","reusables","_getReusables","physicalTop","indexes","length","_increasePoolIfNeeded","fromTop","ith","offsetContent","physicalItemHeight","idxs","protectedOffsetContent","_hiddenContentSize","virtualStart","virtualEnd","_virtualEnd","physicalCount","bottom","_physicalBottom","scrollBottom","_physicalEnd","push","itemSet","movingUp","_manageFocus","_assignModels","_updateMetrics","pop","_positionItems","_updateScrollerSize","_isClientFull","count","nextPhysicalCount","nextIncrease","ts","performance","now","apply","_createPool","i","_isIndexRendered","_getPhysicalIndex","_optPhysicalSize","_isVisible","_itemsChanged","change","path","_physicalIndexForKey","_resetScrollPosition","_removeFocusedItem","fn","rtn","arguments","_computeVidx","call","flush","newPhysicalSize","oldPhysicalSize","prevAvgCount","prevPhysicalAvg","ceil","_adjustScrollPosition","y","translate3d","deltaHeight","pos","forceUpdate","_virtualRowCount","style","height","scrollToIndex","currentTopItem","currentVirtualItem","targetOffsetTop","hiddenContentSize","_resetAverage","_resizeHandler","v","name","cb","asyncModule","_debouncers","debounce","size","Number","notify","_vidxOffset","super","connectedCallback","item","index","_warnPrivateAPIAccess","_pendingScrollToIndex","borderTopWidth","_scrollingToIndex","_effectiveSize","table","scrollHeight","_accessIronListAPI","_adjustVirtualIndexOffset","row","Array","from","children","filter","child","headerOffset","getBoundingClientRect","header","fvi","fviOffset","_firstVisibleIndex","isArray","maxVirtualItems","_edge","_ie","_scrollToIndex","_focusedItemIndex","_itemsFocusable","contains","shadowRoot","activeElement","cellIndex","parentElement","indexOf","focus","requestAnimationFrame","rePosition","isNaN","transform","_canPopulate","_initialPoolCreated","_debounceIncreasePool","remainingPhysicalSize","estimatedMissingRowCount","__reorderChildNodes","childNodes","reduce","inOrder","current","currentIndex","array","sort","row1","row2","forEach","fragment","createDocumentFragment","physicalItems","_createScrollerRows","inst","_getRowTarget","slot","getAttribute","setAttribute","_updateHeaderFooterMetrics","notifyResize","el","_toggleAttribute","_updateScrollerItem","oldOffset","_afterScroll","_noScale","scale","offset","threshold","maxShift","maxOffset","_warnPrivateAPIAccessAsyncEnabled","returnValue","_debouncerWarnPrivateAPIAccess","_debounceRender","apiName","console","warn","lastVisibleIndex","customElements","define","is","A11yMixin","superClass","_columnTree","level","some","col","_headerTemplate","headerRenderer","undefined","bodyColumns","_a11yGetHeaderRowCount","_a11yGetFooterRowCount","_a11yUpdateHeaderRows","_a11yUpdateFooterRows","headerRow","footer","footerRow","selected","cell","detailsOpened","hasAttribute","removeAttribute","detailsCell","id","colspan","querySelectorAll","sorter","cellContent","parentNode","localName","assignedSlot","String","ActiveItemMixin","activeItem","Object","ready","scroller","_onClick","_activateItem","e","model","detail","clickedItem","_itemsEqual","defaultPrevented","composedPath","_content","getRootNode","_isFocusable","target","dispatchEvent","CustomEvent","__getRowModel","isFocusableElement","element","disabled","splices","dataProvider","_arrayDataProvider","clearCache","_ensureFirstPageLoaded","opts","slice","_filters","_checkPaths","_filter","sortOrders","_sorters","_multiSort","start","page","pageSize","end","arrayToCheck","action","result","parentProperty","replace","get","a","b","map","_compare","p","n","toString","_normalizeEmptyValue","filterValueLowercase","toLowerCase","_onHeaderTrack","preventDefault","handle","column","_column","prototype","_childColumns","_order","hidden","columnRowCells","targetCell","minWidth","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","marginLeft","marginRight","maxWidth","__isRTL","x","right","width","flexGrow","state","resizedColumn","ItemCache","parentCache","parentItem","itemCaches","effectiveSize","pendingRequests","keys","isLoading","cache","scaledIndex","getCacheAndIndex","_isExpanded","prev","curr","subCache","updateSize","_loadPage","thisLevelIndex","expandedIndex","observer","loading","readOnly","reflectToAttribute","_cache","itemIdPath","expandedItems","_updateItem","ensureSubCacheForScaledIndex","_getPageForIndex","expandItem","collapseItem","__expandedKeys","has","getItemId","__cacheExpandedKeys","Set","add","splice","_getItemIndexInArray","_hasData","_setLoading","params","_mapSorters","filters","_mapFilters","currentItems","_item","itemsIndex","itemIndex","cachedItem","getItemForIndex","__itemsReceived","_instance","_setPendingProperty","oldPageSize","oldDataProvider","_debouncerCheckSize","after","_checkSize","hadData","item1","item2","_addNodeObserver","columns","getFlattenedNodes","_isColumnElement","_getChildColumns","concat","c","_hasColumnGroups","_flattenColumnGroups","columnTree","_getColumnTree","_arrayEquals","_observer","info","rowDetailsTemplate","addedNodes","classList","_rowDetailsTemplate","removedNodes","_updateColumnTree","_debouncerCheckImports","_checkImports","arr1","arr2","l","elementName","_updateFirstAndLastColumnForRow","node","nodeType","Node","ELEMENT_NODE","test","EventContextMixin","event","context","section","assign","FilterMixin","_filterChanged","stopPropagation","detailsOpenedItems","rowDetailsRenderer","Function","_detailsCells","Error","templatizer","_grid","dataHost","template","_updateRow","_a11yUpdateRowDetailsOpened","_toggleDetailsCell","changeRecord","_isDetailsOpened","detailsHidden","hiddenChanged","_renderer","removeProperty","createInstance","innerHTML","root","setProperty","instance","_detailsOpenedInstanceChangedCallback","openItemDetails","closeItemDetails","SCROLL_PERIOD","WHEEL_SCROLLING","SCROLLING","IGNORE_WHEEL","_frozenCells","_scrollbarWidth","scrollDiv","createElement","overflow","position","body","scrollbarWidth","clientWidth","removeChild","_rowWithFocusedElement","Element","_deltaYAcc","_scrollLineHeight","_getScrollLineHeight","fontSize","display","_scrollPageHeight","clientHeight","_wheelScrolling","_debouncerWheelScrolling","_timeouts","_onWheel","outerscroller","outerScrolling","stopImmediatePropagation","ctrlKey","_hasScrolledAncestor","deltaX","deltaY","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","_wheelAnimationFrame","_debouncerWheelAnimationFrame","momentum","_canScroll","_hasResidualMomentum","_ignoreNewWheel","_debouncerIgnoreNewWheel","_previousMomentum","scrollWidth","_scrollingFrame","_debounceScrolling","cancelAnimationFrame","_reorderRows","_scrollPeriodFrame","_debounceScrollPeriod","_translateStationaryElements","_scheduleScrolling","os","_ios","passthrough","syncOuterScroller","overScroll","_updateOverflow","_debounceOverflow","trim","adjustedVirtualStart","targetRow","targetPhysicalIndex","insertBefore","_debouncerCacheElements","_updateScrollerMeasurements","_updateLastFrozen","__scrollerMetrics","columnsRow","lastFrozen","_lastFrozen","frozen","_getTranslate","_scrollLeft","__getNormalizedScrollLeft","frozenCellTransform","outersizer","fixedsizer","SelectionMixin","selectedItems","_isSelected","selectItem","deselectItem","_selectedInstanceChangedCallback","multiSort","_previousSorters","_onSorterChanged","ShadyDOM","run","sorters","bubbles","composed","_removeArrayItem","unshift","JSON","stringify","_a11yUpdateSorters","StylingMixin","cellClassNameGenerator","cellClassGenerator","generateCellClassNames","_generateCellClassNames","rowData","__generatedClasses","className","remove","split","DropMode","DropLocation","DragAndDropMixin","dropMode","rowsDraggable","dragFilter","dropFilter","__dndAutoScrollThreshold","_onDragStart","_onDragEnd","_onDragOver","_onDragLeave","_onDrop","_safari","exec","rowRect","dataTransfer","setDragImage","clientX","clientY","rows","__getViewportRows","setData","__formatDefaultTransferData","updateStyles","draggedItems","setDragData","data","setDraggedItemsCount","originalEvent","_clearDragStyles","_dropLocation","_dragOverItem","__dndAutoScroll","dropAbove","__dndAutoScrolling","headerBottom","footerTop","topDiff","bottomDiff","scrollTopDelta","setTimeout","dragData","types","getData","cancelable","dropTargetItem","dropLocation","textContent","join","filterDragAndDrop","_filterDragAndDrop","dragDisabled","dropDisabled","KeyboardNavigationMixin","_headerFocusable","_footerFocusable","_navigatingIsHidden","_focusedColumnOrder","_android","_onKeyDown","_onKeyUp","_onFocusIn","_onFocusOut","_onCellFocusIn","_onCellFocusOut","_isMousedown","focusable","oldFocusable","keyGroup","key","_detectInteracting","indexOfChildElement","visibleItemsCount","_lastVisibleIndex","dx","dy","activeCell","columnIndex","isRowDetails","_elementMatches","activeRow","activeRowGroup","maxRowIndex","rowIndex","dstRowIndex","dstIsRowDetails","dstItem","_getColumns","dstColumns","dstSortedColumnOrders","maxOrderedColumnIndex","orderedColumnIndex","dstOrderedColumnIndex","_ensureScrolledToIndex","dstColumnIndex","acc","dstRow","dstCell","_scrollHorizontallyToCell","dstRect","tableIndex","rowGroup","localTarget","localTargetIsTextInput","wantInteracting","_parseEventPath","focusTarget","firstElementChild","srcElement","step","tabOrder","focusexit","_predictFocusStepTarget","shiftKey","itemsFocusTarget","focusedItemRow","wasNavigating","click","rootTarget","_activeRowGroup","_detectFocusedItemIndex","columnTreeLevel","firstVisibleIndexRow","dstCellRect","dstCellIndex","tableRect","leftBoundary","rightBoundary","query","matches","columnReorderingAllowed","_orderBaseScope","_onTrackEvent","_reorderGhost","_onTouchStart","_onTouchMove","_onTouchEnd","_onContextMenu","_startTouchReorderTimeout","_onTrackStart","touches","_draggedColumn","clearTimeout","_onTrackEnd","headerCell","_touchDevice","_onTrack","_cellFromPoint","childElementCount","_setSiblingsReorderStatus","_reorderStatus","_updateGhost","visibility","_updateGhostPosition","_autoScroller","targetColumn","_getTargetColumn","_isSwapAllowed","_isSwappableByPosition","_swapColumnOrders","_lastDragClientX","_getColumnsInOrder","elementFromPoint","eventClientX","eventClientY","ghostRect","targetLeft","targetTop","_left","_top","_getInnerText","ghost","propertyName","status","sibling","rightDiff","leftDiff","async","column1","column2","differentColumns","sameParent","sameFrozen","sourceCellRect","targetRect","_updateFirstAndLastColumn","draggedColumn","candidate","scrollHandler","noScrollbars","_syncScrollTarget","_onMouseMove","webkitOverflowScrolling","_","offsetY","offsetX","VaadinGridStyles","safari","firefox","scrollingStyles","register","TOUCH_DEVICE","createEvent","_this","MSStream","platform","maxTouchPoints","CSS","supports","_firefox","heightByRows","_recalculateColumnWidthOnceLoadingFinished","_onAnimationEnd","recalculateColumnWidths","oldValue","newValue","attributeChangedCallback","__hasRowsWithClientHeight","cols","_origFlexGrow","_currentWidth","_allCells","cellWidth","autoWidth","_recalculateColumnWidths","notifyPath","_cells","_resetKeyboardNavigation","tagName","slotName","_contentIndex","chrome","mouseUpListener","isColumnRow","noNotify","contentsFragment","_vacant","_createCell","_configureDetailsCell","_a11ySetRowDetailsCell","_emptyCells","__updateHeaderFooterRowVisibility","_frozenCellsChanged","visibleRowCells","footerRenderer","_footerTemplate","_preventScrollerRotatingCellFocus","_a11yUpdateRowRowindex","_getItem","_renderColumnTree","_a11yUpdateRowSelected","_a11yUpdateRowLevel","expanded","owner","__detailsOpened__","__selected__","__level__","__expanded__","setProperties","_debouncerUpdateHeights","_updateDetailsCellHeights","headerHeight","footerHeight","borderBottomWidth","animationName","bool","_getIndexLevel","_renderHeaderAndFooter","_debouncerForceReflow","ColumnBaseMixin","resizable","parent","textAlign","_headerCell","_footerCell","_bodyTemplate","_templateObserver","callback","disconnectedCallback","_findHostGrid","_gridValue","_prepareHeaderTemplate","_prepareFooterTemplate","_prepareBodyTemplate","_prepareTemplatizer","_findTemplate","instanceProps","_instanceProps","__runRenderer","renderer","args","cells","_template","__setColumnTemplateOrRenderer","headerTemplate","footerTemplate","footerCell","_selectFirstTemplate","_rootDataHost","_columnPropChanged","order","__forceReflow","bodyTemplate","hasHeaderText","__setTextContent","pathRenderer","_generateHeader","substr","lastIndexOf","toUpperCase","reorderStatus","existingHandle","textAlignFallback","_previousHidden","_debouncerHiddenChanged","GridColumnElement","CheckboxElement","checked","indeterminate","_nativeCheckbox","_storedName","_handleClick","_addActiveListeners","attrName","_updateLabelAttribute","label","assignedNodes","_isAssignedNodesEmpty","nodes","TEXT_NODE","_addEventListenerToNode","__interactionsAllowed","keyCode","_toggleChecked","GridTemplatizer","_templateInstances","_parentPathValues","_ensureTemplatized","_TemplateClass","addInstance","parentModel","forwardHostProp","prop","_forwardParentProp","notifyInstanceProp","originalProp","gridCallback","t","addedCount","keyName","set"],"mappings":"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","file":"1.bundle.js","sourcesContent":["import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport '@vaadin/vaadin-checkbox/theme/lumo/vaadin-checkbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-grid\" theme-for=\"vaadin-grid\">\n  <template>\n    <style>\n      :host {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size-m);\n        line-height: var(--lumo-line-height-s);\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n        box-sizing: border-box;\n        -webkit-text-size-adjust: 100%;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n\n        /* For internal use only */\n        --_lumo-grid-border-color: var(--lumo-contrast-20pct);\n        --_lumo-grid-secondary-border-color: var(--lumo-contrast-10pct);\n        --_lumo-grid-border-width: 1px;\n        --_lumo-grid-selected-row-color: var(--lumo-primary-color-10pct);\n      }\n\n      /* No (outer) border */\n\n      :host(:not([theme~=\"no-border\"])) {\n        border: var(--_lumo-grid-border-width) solid var(--_lumo-grid-border-color);\n      }\n\n      /* Cell styles */\n\n      [part~=\"cell\"] {\n        min-height: var(--lumo-size-m);\n        background-color: var(--lumo-base-color);\n      }\n\n      [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n        cursor: default;\n        padding: var(--lumo-space-xs) var(--lumo-space-m);\n      }\n\n      /* Apply row borders by default and introduce the \"no-row-borders\" variant */\n      :host(:not([theme~=\"no-row-borders\"])) [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n        border-top: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);\n      }\n\n      /* Hide first body row top border */\n      :host(:not([theme~=\"no-row-borders\"])) [part=\"row\"][first] [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n        border-top: 0;\n        min-height: calc(var(--lumo-size-m) - var(--_lumo-grid-border-width));\n      }\n\n      /* Focus-ring */\n\n      [part~=\"cell\"]:focus {\n        outline: none;\n      }\n\n      :host([navigating]) [part~=\"cell\"]:focus::before {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        pointer-events: none;\n        box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      /* Drag and Drop styles */\n      :host([dragover])::after {\n        content: \"\";\n        position: absolute;\n        z-index: 100;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        pointer-events: none;\n        box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      [part~=\"row\"][dragover] {\n        z-index: 100 !important;\n      }\n\n      [part~=\"row\"][dragover] [part~=\"cell\"] {\n        overflow: visible;\n      }\n\n      [part~=\"row\"][dragover] [part~=\"cell\"]::after {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        height: calc(var(--_lumo-grid-border-width) + 2px);\n        pointer-events: none;\n        background: var(--lumo-primary-color-50pct);\n      }\n\n      :host([theme~=\"no-row-borders\"]) [dragover] [part~=\"cell\"]::after {\n        height: 2px;\n      }\n\n      [part~=\"row\"][dragover=\"below\"] [part~=\"cell\"]::after {\n        top: 100%;\n        bottom: auto;\n        margin-top: -1px;\n      }\n\n      [part~=\"row\"][dragover=\"above\"] [part~=\"cell\"]::after {\n        top: auto;\n        bottom: 100%;\n        margin-bottom: -1px;\n      }\n\n      [part~=\"row\"][details-opened][dragover=\"below\"] [part~=\"cell\"]:not([part~=\"details-cell\"])::after,\n      [part~=\"row\"][details-opened][dragover=\"above\"] [part~=\"details-cell\"]::after {\n        display: none;\n      }\n\n      [part~=\"row\"][dragover][dragover=\"on-top\"] [part~=\"cell\"]::after {\n        height: 100%;\n      }\n\n      [part~=\"row\"][dragstart] {\n        /* Add bottom-space to the row so the drag number doesn't get clipped. Needed for IE/Edge */\n        border-bottom: 100px solid transparent;\n        z-index: 100 !important;\n        opacity: 0.9;\n      }\n\n      [part~=\"row\"][dragstart] [part~=\"cell\"] {\n        border: none !important;\n        box-shadow: none !important;\n      }\n\n      [part~=\"row\"][dragstart] [part~=\"cell\"][last-column] {\n        border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;\n      }\n\n      [part~=\"row\"][dragstart] [part~=\"cell\"][first-column] {\n        border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);\n      }\n\n      [ios] [part~=\"row\"][dragstart] [part~=\"cell\"] {\n        background: var(--lumo-primary-color-50pct);\n      }\n\n      #scroller:not([ios]) [part~=\"row\"][dragstart]:not([dragstart=\"\"])::after {\n        display: block;\n        position: absolute;\n        left: var(--_grid-drag-start-x);\n        top: var(--_grid-drag-start-y);\n        z-index: 100;\n        content: attr(dragstart);\n        align-items: center;\n        justify-content: center;\n        box-sizing: border-box;\n        padding: calc(var(--lumo-space-xs) * 0.8);\n        color: var(--lumo-error-contrast-color);\n        background-color: var(--lumo-error-color);\n        border-radius: var(--lumo-border-radius-m);\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size-xxs);\n        line-height: 1;\n        font-weight: 500;\n        text-transform: initial;\n        letter-spacing: initial;\n        min-width: calc(var(--lumo-size-s) * 0.7);\n        text-align: center;\n      }\n\n      /* Headers and footers */\n\n      [part~=\"header-cell\"] ::slotted(vaadin-grid-cell-content),\n      [part~=\"footer-cell\"] ::slotted(vaadin-grid-cell-content),\n      [part~=\"reorder-ghost\"] {\n        font-size: var(--lumo-font-size-s);\n        font-weight: 500;\n      }\n\n      [part~=\"footer-cell\"] ::slotted(vaadin-grid-cell-content) {\n        font-weight: 400;\n      }\n\n      [part=\"row\"]:only-child [part~=\"header-cell\"] {\n        min-height: var(--lumo-size-xl);\n      }\n\n      /* Header borders */\n\n      /* Hide first header row top border */\n      :host(:not([theme~=\"no-row-borders\"])) [part=\"row\"]:first-child [part~=\"header-cell\"] {\n        border-top: 0;\n      }\n\n      [part=\"row\"]:last-child [part~=\"header-cell\"] {\n        border-bottom: var(--_lumo-grid-border-width) solid transparent;\n      }\n\n      :host(:not([theme~=\"no-row-borders\"])) [part=\"row\"]:last-child [part~=\"header-cell\"] {\n        border-bottom-color: var(--_lumo-grid-secondary-border-color);\n      }\n\n      /* Overflow uses a stronger border color */\n      :host([overflow~=\"top\"]) [part=\"row\"]:last-child [part~=\"header-cell\"] {\n        border-bottom-color: var(--_lumo-grid-border-color);\n      }\n\n      /* Footer borders */\n\n      [part=\"row\"]:first-child [part~=\"footer-cell\"] {\n        border-top: var(--_lumo-grid-border-width) solid transparent;\n      }\n\n      :host(:not([theme~=\"no-row-borders\"])) [part=\"row\"]:first-child [part~=\"footer-cell\"] {\n        border-top-color: var(--_lumo-grid-secondary-border-color);\n      }\n\n      /* Overflow uses a stronger border color */\n      :host([overflow~=\"bottom\"]) [part=\"row\"]:first-child [part~=\"footer-cell\"] {\n        border-top-color: var(--_lumo-grid-border-color);\n      }\n\n      /* Column reordering */\n\n      :host([reordering]) [part~=\"cell\"] {\n        background: linear-gradient(var(--lumo-shade-20pct), var(--lumo-shade-20pct)) var(--lumo-base-color);\n      }\n\n      :host([reordering]) [part~=\"cell\"][reorder-status=\"allowed\"] {\n        background: var(--lumo-base-color);\n      }\n\n      :host([reordering]) [part~=\"cell\"][reorder-status=\"dragging\"] {\n        background: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct)) var(--lumo-base-color);\n      }\n\n      [part~=\"reorder-ghost\"] {\n        opacity: 0.85;\n        box-shadow: var(--lumo-box-shadow-s);\n        /* TODO Use the same styles as for the cell element (reorder-ghost copies styles from the cell element) */\n        padding: var(--lumo-space-s) var(--lumo-space-m) !important;\n      }\n\n      /* Column resizing */\n\n      [part=\"resize-handle\"] {\n        width: 3px;\n        background-color: var(--lumo-primary-color-50pct);\n        opacity: 0;\n        transition: opacity 0.2s;\n      }\n\n      :host(:not([reordering])) *:not([column-resizing]) [part~=\"cell\"]:hover [part=\"resize-handle\"],\n      [part=\"resize-handle\"]:active {\n        opacity: 1;\n        transition-delay: 0.15s;\n      }\n\n      /* Column borders */\n\n      :host([theme~=\"column-borders\"]) [part~=\"cell\"]:not([last-column]):not([part~=\"details-cell\"]) {\n        border-right: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);\n      }\n\n      /* Frozen columns */\n\n      [last-frozen] {\n        border-right: var(--_lumo-grid-border-width) solid transparent;\n        overflow: hidden;\n      }\n\n      :host([overflow~=\"left\"]) [part~=\"cell\"][last-frozen]:not([part~=\"details-cell\"]) {\n        border-right-color: var(--_lumo-grid-border-color);\n      }\n\n      /* Row stripes */\n\n      :host([theme~=\"row-stripes\"]) [part~=\"row\"]:not([odd]) [part~=\"body-cell\"],\n      :host([theme~=\"row-stripes\"]) [part~=\"row\"]:not([odd]) [part~=\"details-cell\"] {\n        background-image: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct));\n        background-repeat: repeat-x;\n      }\n\n      /* Selected row */\n\n      /* Raise the selected rows above unselected rows (so that box-shadow can cover unselected rows) */\n      :host(:not([reordering])) [part~=\"row\"][selected] {\n        z-index: 1;\n      }\n\n      :host(:not([reordering])) [part~=\"row\"][selected] [part~=\"body-cell\"]:not([part~=\"details-cell\"]) {\n        background-image: linear-gradient(var(--_lumo-grid-selected-row-color), var(--_lumo-grid-selected-row-color));\n        background-repeat: repeat;\n      }\n\n      /* Cover the border of an unselected row */\n      :host(:not([theme~=\"no-row-borders\"])) [part~=\"row\"][selected] [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n        box-shadow: 0 var(--_lumo-grid-border-width) 0 0 var(--_lumo-grid-selected-row-color);\n      }\n\n      /* Compact */\n\n      :host([theme~=\"compact\"]) [part=\"row\"]:only-child [part~=\"header-cell\"] {\n        min-height: var(--lumo-size-m);\n      }\n\n      :host([theme~=\"compact\"]) [part~=\"cell\"] {\n        min-height: var(--lumo-size-s);\n      }\n\n      :host([theme~=\"compact\"]) [part=\"row\"][first] [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n        min-height: calc(var(--lumo-size-s) - var(--_lumo-grid-border-width));\n      }\n\n      :host([theme~=\"compact\"]) [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n        padding: var(--lumo-space-xs) var(--lumo-space-s);\n      }\n\n      /* Wrap cell contents */\n\n      :host([theme~=\"wrap-cell-content\"]) [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n        white-space: normal;\n      }\n\n      /* RTL specific styles */\n\n      :host([dir=\"rtl\"]) [part~=\"row\"][dragstart] [part~=\"cell\"][last-column] {\n        border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);\n      }\n\n      :host([dir=\"rtl\"]) [part~=\"row\"][dragstart] [part~=\"cell\"][first-column] {\n        border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;\n      }\n\n      :host([dir=\"rtl\"][theme~=\"column-borders\"]) [part~=\"cell\"]:not([last-column]):not([part~=\"details-cell\"]) {\n        border-right: none;\n        border-left: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);\n      }\n\n      :host([dir=\"rtl\"]) [last-frozen] {\n        border-right: none;\n        border-left: var(--_lumo-grid-border-width) solid transparent;\n      }\n\n      :host([dir=\"rtl\"][overflow~=\"right\"]) [part~=\"cell\"][last-frozen]:not([part~=\"details-cell\"]) {\n        border-left-color: var(--_lumo-grid-border-color);\n      }\n    </style>\n  </template>\n</dom-module><dom-module theme-for=\"vaadin-checkbox\" id=\"vaadin-grid-select-all-checkbox-lumo\">\n  <template>\n    <style>\n      :host(.vaadin-grid-select-all-checkbox) {\n        font-size: var(--lumo-font-size-m);\n      }\n   </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\n\n/**\n * `Polymer.IronScrollTargetBehavior` allows an element to respond to scroll\n * events from a designated scroll target.\n *\n * Elements that consume this behavior can override the `_scrollHandler`\n * method to add logic on the scroll event.\n *\n * @demo demo/scrolling-region.html Scrolling Region\n * @demo demo/document.html Document Element\n * @polymerBehavior\n */\nexport const IronScrollTargetBehavior = {\n\n  properties: {\n\n    /**\n     * Specifies the element that will handle the scroll event\n     * on the behalf of the current element. This is typically a reference to an\n     *element, but there are a few more posibilities:\n     *\n     * ### Elements id\n     *\n     *```html\n     * <div id=\"scrollable-element\" style=\"overflow: auto;\">\n     *  <x-element scroll-target=\"scrollable-element\">\n     *    <!-- Content-->\n     *  </x-element>\n     * </div>\n     *```\n     * In this case, the `scrollTarget` will point to the outer div element.\n     *\n     * ### Document scrolling\n     *\n     * For document scrolling, you can use the reserved word `document`:\n     *\n     *```html\n     * <x-element scroll-target=\"document\">\n     *   <!-- Content -->\n     * </x-element>\n     *```\n     *\n     * ### Elements reference\n     *\n     *```js\n     * appHeader.scrollTarget = document.querySelector('#scrollable-element');\n     *```\n     *\n     * @type {HTMLElement}\n     * @default document\n     */\n    scrollTarget: {\n      type: HTMLElement,\n      value: function() {\n        return this._defaultScrollTarget;\n      }\n    }\n  },\n\n  observers: ['_scrollTargetChanged(scrollTarget, isAttached)'],\n\n  /**\n   * True if the event listener should be installed.\n   */\n  _shouldHaveListener: true,\n\n  _scrollTargetChanged: function(scrollTarget, isAttached) {\n    var eventTarget;\n\n    if (this._oldScrollTarget) {\n      this._toggleScrollListener(false, this._oldScrollTarget);\n      this._oldScrollTarget = null;\n    }\n    if (!isAttached) {\n      return;\n    }\n    // Support element id references\n    if (scrollTarget === 'document') {\n      this.scrollTarget = this._doc;\n\n    } else if (typeof scrollTarget === 'string') {\n      var domHost = this.domHost;\n\n      this.scrollTarget = domHost && domHost.$ ?\n          domHost.$[scrollTarget] :\n          dom(this.ownerDocument).querySelector('#' + scrollTarget);\n\n    } else if (this._isValidScrollTarget()) {\n      this._oldScrollTarget = scrollTarget;\n      this._toggleScrollListener(this._shouldHaveListener, scrollTarget);\n    }\n  },\n\n  /**\n   * Runs on every scroll event. Consumer of this behavior may override this\n   * method.\n   *\n   * @protected\n   */\n  _scrollHandler: function scrollHandler() {},\n\n  /**\n   * The default scroll target. Consumers of this behavior may want to customize\n   * the default scroll target.\n   *\n   * @type {Element}\n   */\n  get _defaultScrollTarget() {\n    return this._doc;\n  },\n\n  /**\n   * Shortcut for the document element\n   *\n   * @type {Element}\n   */\n  get _doc() {\n    return this.ownerDocument.documentElement;\n  },\n\n  /**\n   * Gets the number of pixels that the content of an element is scrolled\n   * upward.\n   *\n   * @type {number}\n   */\n  get _scrollTop() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.pageYOffset :\n                                               this.scrollTarget.scrollTop;\n    }\n    return 0;\n  },\n\n  /**\n   * Gets the number of pixels that the content of an element is scrolled to the\n   * left.\n   *\n   * @type {number}\n   */\n  get _scrollLeft() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.pageXOffset :\n                                               this.scrollTarget.scrollLeft;\n    }\n    return 0;\n  },\n\n  /**\n   * Sets the number of pixels that the content of an element is scrolled\n   * upward.\n   *\n   * @type {number}\n   */\n  set _scrollTop(top) {\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(window.pageXOffset, top);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollTop = top;\n    }\n  },\n\n  /**\n   * Sets the number of pixels that the content of an element is scrolled to the\n   * left.\n   *\n   * @type {number}\n   */\n  set _scrollLeft(left) {\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(left, window.pageYOffset);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollLeft = left;\n    }\n  },\n\n  /**\n   * Scrolls the content to a particular place.\n   *\n   * @method scroll\n   * @param {number|!{left: number, top: number}} leftOrOptions The left position or scroll options\n   * @param {number=} top The top position\n   * @return {void}\n   */\n  scroll: function(leftOrOptions, top) {\n    var left;\n\n    if (typeof leftOrOptions === 'object') {\n      left = leftOrOptions.left;\n      top = leftOrOptions.top;\n    } else {\n      left = leftOrOptions;\n    }\n\n    left = left || 0;\n    top = top || 0;\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(left, top);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollLeft = left;\n      this.scrollTarget.scrollTop = top;\n    }\n  },\n\n  /**\n   * Gets the width of the scroll target.\n   *\n   * @type {number}\n   */\n  get _scrollTargetWidth() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.innerWidth :\n                                               this.scrollTarget.offsetWidth;\n    }\n    return 0;\n  },\n\n  /**\n   * Gets the height of the scroll target.\n   *\n   * @type {number}\n   */\n  get _scrollTargetHeight() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.innerHeight :\n                                               this.scrollTarget.offsetHeight;\n    }\n    return 0;\n  },\n\n  /**\n   * Returns true if the scroll target is a valid HTMLElement.\n   *\n   * @return {boolean}\n   */\n  _isValidScrollTarget: function() {\n    return this.scrollTarget instanceof HTMLElement;\n  },\n\n  _toggleScrollListener: function(yes, scrollTarget) {\n    var eventTarget = scrollTarget === this._doc ? window : scrollTarget;\n    if (yes) {\n      if (!this._boundScrollHandler) {\n        this._boundScrollHandler = this._scrollHandler.bind(this);\n        eventTarget.addEventListener('scroll', this._boundScrollHandler);\n      }\n    } else {\n      if (this._boundScrollHandler) {\n        eventTarget.removeEventListener('scroll', this._boundScrollHandler);\n        this._boundScrollHandler = null;\n      }\n    }\n  },\n\n  /**\n   * Enables or disables the scroll event listener.\n   *\n   * @param {boolean} yes True to add the event, False to remove it.\n   */\n  toggleScrollListener: function(yes) {\n    this._shouldHaveListener = yes;\n    this._toggleScrollListener(yes, this.scrollTarget);\n  }\n\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/**\n\nThis is a fork of <iron-list> for <vaadin-grid>'s internal purposes only!\nTo update:\n1. Get the most recent code from https://github.com/PolymerElements/iron-list/\n2. Remove the  <dom-module id=\"iron-list\"> to avoid collisions with actual <iron-list>\n3. Change \"Polymer({\" to \"window.PolymerIronList = Polymer.Class({\" to expose the class\n3.1. Add @namespace\n4. Optional: Remove all properties and functions not needed by <vaadin-grid>\n5. Profit!\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { IronScrollTargetBehavior } from '@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js';\nimport { animationFrame, idlePeriod, microTask } from '@polymer/polymer/lib/utils/async.js';\nimport { Class } from '@polymer/polymer/lib/legacy/class.js';\nimport { flush, enqueueDebouncer } from '@polymer/polymer/lib/utils/flush.js';\nimport { flush as flush$0 } from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nvar IOS = navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/);\nvar IOS_TOUCH_SCROLLING = IOS && IOS[1] >= 8;\nvar DEFAULT_PHYSICAL_COUNT = 3;\nvar ANIMATION_FRAME = animationFrame;\nvar IDLE_TIME = idlePeriod;\nvar MICRO_TASK = microTask;\n\nexport const PolymerIronList = Class({\n\n  behaviors: [\n    IronResizableBehavior,\n    IronScrollTargetBehavior\n  ],\n\n  /**\n   * The ratio of hidden tiles that should remain in the scroll direction.\n   * Recommended value ~0.5, so it will distribute tiles evenly in both directions.\n   */\n  _ratio: 0.5,\n\n  /**\n   * The padding-top value for the list.\n   */\n  _scrollerPaddingTop: 0,\n\n  /**\n   * This value is the same as `scrollTop`.\n   */\n  _scrollPosition: 0,\n\n  /**\n   * The sum of the heights of all the tiles in the DOM.\n   */\n  _physicalSize: 0,\n\n  /**\n   * The average `offsetHeight` of the tiles observed till now.\n   */\n  _physicalAverage: 0,\n\n  /**\n   * The number of tiles which `offsetHeight` > 0 observed until now.\n   */\n  _physicalAverageCount: 0,\n\n  /**\n   * The Y position of the item rendered in the `_physicalStart`\n   * tile relative to the scrolling list.\n   */\n  _physicalTop: 0,\n\n  /**\n   * The number of items in the list.\n   */\n  _virtualCount: 0,\n\n  /**\n   * The estimated scroll height based on `_physicalAverage`\n   */\n  _estScrollHeight: 0,\n\n  /**\n   * The scroll height of the dom node\n   */\n  _scrollHeight: 0,\n\n  /**\n   * The height of the list. This is referred as the viewport in the context of list.\n   */\n  _viewportHeight: 0,\n\n  /**\n   * The width of the list. This is referred as the viewport in the context of list.\n   */\n  _viewportWidth: 0,\n\n  /**\n   * An array of DOM nodes that are currently in the tree\n   * @type {?Array<!TemplatizerNode>}\n   */\n  _physicalItems: null,\n\n  /**\n   * An array of heights for each item in `_physicalItems`\n   * @type {?Array<number>}\n   */\n  _physicalSizes: null,\n\n  /**\n   * A cached value for the first visible index.\n   * See `firstVisibleIndex`\n   * @type {?number}\n   */\n  _firstVisibleIndexVal: null,\n\n  /**\n   * A Polymer collection for the items.\n   * @type {?Polymer.Collection}\n   */\n  _collection: null,\n\n  /**\n   * A cached value for the last visible index.\n   * See `lastVisibleIndex`\n   * @type {?number}\n   */\n  _lastVisibleIndexVal: null,\n\n  /**\n   * The max number of pages to render. One page is equivalent to the height of the list.\n   */\n  _maxPages: 2,\n\n  /**\n   * The virtual index of the focused item.\n   */\n  _focusedVirtualIndex: -1,\n\n  /**\n   * The maximum items per row\n   */\n  _itemsPerRow: 1,\n\n  /**\n   * The height of the row in grid layout.\n   */\n  _rowHeight: 0,\n\n  /**\n   * The cost of stamping a template in ms.\n   */\n  _templateCost: 0,\n\n  /**\n   * The bottom of the physical content.\n   */\n  get _physicalBottom() {\n    return this._physicalTop + this._physicalSize;\n  },\n\n  /**\n   * The bottom of the scroll.\n   */\n  get _scrollBottom() {\n    return this._scrollPosition + this._viewportHeight;\n  },\n\n  /**\n   * The n-th item rendered in the last physical item.\n   */\n  get _virtualEnd() {\n    return this._virtualStart + this._physicalCount - 1;\n  },\n\n  /**\n   * The height of the physical content that isn't on the screen.\n   */\n  get _hiddenContentSize() {\n    var size = this.grid ? this._physicalRows * this._rowHeight : this._physicalSize;\n    return size - this._viewportHeight;\n  },\n\n  /**\n   * The maximum scroll top value.\n   */\n  get _maxScrollTop() {\n    return this._estScrollHeight - this._viewportHeight + this._scrollOffset;\n  },\n\n  /**\n   * The largest n-th value for an item such that it can be rendered in `_physicalStart`.\n   */\n  get _maxVirtualStart() {\n    var virtualCount = this._convertIndexToCompleteRow(this._virtualCount);\n    return Math.max(0, virtualCount - this._physicalCount);\n  },\n\n  set _virtualStart(val) {\n    val = this._clamp(val, 0, this._maxVirtualStart);\n    if (this.grid) {\n      val = val - (val % this._itemsPerRow);\n    }\n    this._virtualStartVal = val;\n  },\n\n  get _virtualStart() {\n    return this._virtualStartVal || 0;\n  },\n\n  /**\n   * The k-th tile that is at the top of the scrolling list.\n   */\n  set _physicalStart(val) {\n    val = val % this._physicalCount;\n    if (val < 0) {\n      val = this._physicalCount + val;\n    }\n    if (this.grid) {\n      val = val - (val % this._itemsPerRow);\n    }\n    this._physicalStartVal = val;\n  },\n\n  get _physicalStart() {\n    return this._physicalStartVal || 0;\n  },\n\n  /**\n   * The k-th tile that is at the bottom of the scrolling list.\n   */\n  get _physicalEnd() {\n    return (this._physicalStart + this._physicalCount - 1) % this._physicalCount;\n  },\n\n  set _physicalCount(val) {\n    this._physicalCountVal = val;\n  },\n\n  get _physicalCount() {\n    return this._physicalCountVal || 0;\n  },\n\n  /**\n   * An optimal physical size such that we will have enough physical items\n   * to fill up the viewport and recycle when the user scrolls.\n   *\n   * This default value assumes that we will at least have the equivalent\n   * to a viewport of physical items above and below the user's viewport.\n   */\n  get _optPhysicalSize() {\n    return this._viewportHeight === 0 ? Infinity : this._viewportHeight * this._maxPages;\n  },\n\n  /**\n   * True if the current list is visible.\n   */\n  get _isVisible() {\n    return Boolean(this.offsetWidth || this.offsetHeight);\n  },\n\n  /**\n   * Gets the index of the first visible item in the viewport.\n   *\n   * @type {number}\n   */\n  get firstVisibleIndex() {\n    var idx = this._firstVisibleIndexVal;\n    if (idx == null) {\n      var physicalOffset = this._physicalTop + this._scrollOffset;\n\n      idx = this._iterateItems(function(pidx, vidx) {\n        physicalOffset += this._getPhysicalSizeIncrement(pidx);\n\n        if (physicalOffset > this._scrollPosition) {\n          return this.grid ? vidx - (vidx % this._itemsPerRow) : vidx;\n        }\n        // Handle a partially rendered final row in grid mode\n        if (this.grid && this._virtualCount - 1 === vidx) {\n          return vidx - (vidx % this._itemsPerRow);\n        }\n      }) || 0;\n      this._firstVisibleIndexVal = idx;\n    }\n    return idx;\n  },\n\n  /**\n   * Gets the index of the last visible item in the viewport.\n   *\n   * @type {number}\n   */\n  get lastVisibleIndex() {\n    var idx = this._lastVisibleIndexVal;\n    if (idx == null) {\n      if (this.grid) {\n        idx = Math.min(this._virtualCount, this.firstVisibleIndex + this._estRowsInView * this._itemsPerRow - 1);\n      } else {\n        var physicalOffset = this._physicalTop + this._scrollOffset;\n        this._iterateItems(function(pidx, vidx) {\n          if (physicalOffset < this._scrollBottom) {\n            idx = vidx;\n          }\n          physicalOffset += this._getPhysicalSizeIncrement(pidx);\n        });\n      }\n      this._lastVisibleIndexVal = idx;\n    }\n    return idx;\n  },\n\n  get _scrollOffset() {\n    return this._scrollerPaddingTop;\n  },\n\n  attached: function() {\n    this._debounce('_render', this._render, ANIMATION_FRAME);\n    // `iron-resize` is fired when the list is attached if the event is added\n    // before attached causing unnecessary work.\n    this.listen(this, 'iron-resize', '_resizeHandler');\n  },\n\n  detached: function() {\n    this.unlisten(this, 'iron-resize', '_resizeHandler');\n  },\n\n  /**\n   * Invoke this method if you dynamically update the viewport's\n   * size or CSS padding.\n   *\n   * @method updateViewportBoundaries\n   */\n  updateViewportBoundaries: function() {\n    var styles = window.getComputedStyle(this);\n    this._scrollerPaddingTop = this.scrollTarget === this ? 0 : parseInt(styles['padding-top'], 10);\n    this._isRTL = Boolean(styles.direction === 'rtl');\n    this._viewportWidth = this.$.items.offsetWidth;\n    this._viewportHeight = this._scrollTargetHeight;\n    this.grid && this._updateGridMetrics();\n  },\n\n  /**\n   * Recycles the physical items when needed.\n   */\n  _scrollHandler: function() {\n    var scrollTop = Math.max(0, Math.min(this._maxScrollTop, this._scrollTop));\n    var delta = scrollTop - this._scrollPosition;\n    var isScrollingDown = delta >= 0;\n    // Track the current scroll position.\n    this._scrollPosition = scrollTop;\n    // Clear indexes for first and last visible indexes.\n    this._firstVisibleIndexVal = null;\n    this._lastVisibleIndexVal = null;\n    // Random access.\n    if (Math.abs(delta) > this._physicalSize && this._physicalSize > 0) {\n      delta = delta - this._scrollOffset;\n      var idxAdjustment = Math.round(delta / this._physicalAverage) * this._itemsPerRow;\n      this._virtualStart = this._virtualStart + idxAdjustment;\n      this._physicalStart = this._physicalStart + idxAdjustment;\n      // Estimate new physical offset.\n      this._physicalTop = Math.floor(this._virtualStart / this._itemsPerRow) * this._physicalAverage;\n      this._update();\n    } else if (this._physicalCount > 0) {\n      var reusables = this._getReusables(isScrollingDown);\n      if (isScrollingDown) {\n        this._physicalTop = reusables.physicalTop;\n        this._virtualStart = this._virtualStart + reusables.indexes.length;\n        this._physicalStart = this._physicalStart + reusables.indexes.length;\n      } else {\n        this._virtualStart = this._virtualStart - reusables.indexes.length;\n        this._physicalStart = this._physicalStart - reusables.indexes.length;\n      }\n      this._update(reusables.indexes, isScrollingDown ? null : reusables.indexes);\n      this._debounce('_increasePoolIfNeeded', this._increasePoolIfNeeded.bind(this, 0), MICRO_TASK);\n    }\n  },\n\n  /**\n   * Returns an object that contains the indexes of the physical items\n   * that might be reused and the physicalTop.\n   *\n   * @param {boolean} fromTop If the potential reusable items are above the scrolling region.\n   */\n  _getReusables: function(fromTop) {\n    var ith, offsetContent, physicalItemHeight;\n    var idxs = [];\n    var protectedOffsetContent = this._hiddenContentSize * this._ratio;\n    var virtualStart = this._virtualStart;\n    var virtualEnd = this._virtualEnd;\n    var physicalCount = this._physicalCount;\n    var top = this._physicalTop + this._scrollOffset;\n    var bottom = this._physicalBottom + this._scrollOffset;\n    var scrollTop = this._scrollTop;\n    var scrollBottom = this._scrollBottom;\n\n    if (fromTop) {\n      ith = this._physicalStart;\n      offsetContent = scrollTop - top;\n    } else {\n      ith = this._physicalEnd;\n      offsetContent = bottom - scrollBottom;\n    }\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      physicalItemHeight = this._getPhysicalSizeIncrement(ith);\n      offsetContent = offsetContent - physicalItemHeight;\n      if (idxs.length >= physicalCount || offsetContent <= protectedOffsetContent) {\n        break;\n      }\n      if (fromTop) {\n        // Check that index is within the valid range.\n        if (virtualEnd + idxs.length + 1 >= this._virtualCount) {\n          break;\n        }\n        // Check that the index is not visible.\n        if (top + physicalItemHeight >= scrollTop - this._scrollOffset) {\n          break;\n        }\n        idxs.push(ith);\n        top = top + physicalItemHeight;\n        ith = (ith + 1) % physicalCount;\n      } else {\n        // Check that index is within the valid range.\n        if (virtualStart - idxs.length <= 0) {\n          break;\n        }\n        // Check that the index is not visible.\n        if (top + this._physicalSize - physicalItemHeight <= scrollBottom) {\n          break;\n        }\n        idxs.push(ith);\n        top = top - physicalItemHeight;\n        ith = (ith === 0) ? physicalCount - 1 : ith - 1;\n      }\n    }\n    return {indexes: idxs, physicalTop: top - this._scrollOffset};\n  },\n\n  /**\n   * Update the list of items, starting from the `_virtualStart` item.\n   * @param {!Array<number>=} itemSet\n   * @param {!Array<number>=} movingUp\n   */\n  _update: function(itemSet, movingUp) {\n    if ((itemSet && itemSet.length === 0) || this._physicalCount === 0) {\n      return;\n    }\n    this._manageFocus();\n    this._assignModels(itemSet);\n    this._updateMetrics(itemSet);\n    // Adjust offset after measuring.\n    if (movingUp) {\n      while (movingUp.length) {\n        var idx = movingUp.pop();\n        this._physicalTop -= this._getPhysicalSizeIncrement(idx);\n      }\n    }\n    this._positionItems();\n    this._updateScrollerSize();\n  },\n\n  _isClientFull: function() {\n    return this._scrollBottom != 0 && this._physicalBottom - 1 >= this._scrollBottom &&\n        this._physicalTop <= this._scrollPosition;\n  },\n\n  /**\n   * Increases the pool size.\n   */\n  _increasePoolIfNeeded: function(count) {\n    var nextPhysicalCount = this._clamp(this._physicalCount + count,\n      DEFAULT_PHYSICAL_COUNT, this._virtualCount - this._virtualStart);\n    nextPhysicalCount = this._convertIndexToCompleteRow(nextPhysicalCount);\n    var delta = nextPhysicalCount - this._physicalCount;\n    var nextIncrease = Math.round(this._physicalCount * 0.5);\n\n    if (delta < 0) {\n      return;\n    }\n    if (delta > 0) {\n      var ts = window.performance.now();\n      // Concat arrays in place.\n      [].push.apply(this._physicalItems, this._createPool(delta));\n      // Push 0s into physicalSizes. Can't use Array.fill because IE11 doesn't support it.\n      for (var i = 0; i < delta; i++) {\n        this._physicalSizes.push(0);\n      }\n      this._physicalCount = this._physicalCount + delta;\n      // Update the physical start if it needs to preserve the model of the focused item.\n      // In this situation, the focused item is currently rendered and its model would\n      // have changed after increasing the pool if the physical start remained unchanged.\n      if (this._physicalStart > this._physicalEnd &&\n          this._isIndexRendered(this._focusedVirtualIndex) &&\n          this._getPhysicalIndex(this._focusedVirtualIndex) < this._physicalEnd) {\n        this._physicalStart = this._physicalStart + delta;\n      }\n      this._update();\n      this._templateCost = (window.performance.now() - ts) / delta;\n      nextIncrease = Math.round(this._physicalCount * 0.5);\n    }\n    // The upper bounds is not fixed when dealing with a grid that doesn't\n    // fill it's last row with the exact number of items per row.\n    if (this._virtualEnd >= this._virtualCount - 1 || nextIncrease === 0) {\n      // Do nothing.\n    } else if (!this._isClientFull()) {\n      this._debounce(\n        '_increasePoolIfNeeded',\n        this._increasePoolIfNeeded.bind(\n          this,\n          nextIncrease\n        ), MICRO_TASK);\n    } else if (this._physicalSize < this._optPhysicalSize) {\n      // Yield and increase the pool during idle time until the physical size is optimal.\n      this._debounce(\n        '_increasePoolIfNeeded',\n        this._increasePoolIfNeeded.bind(\n          this,\n          this._clamp(Math.round(50 / this._templateCost), 1, nextIncrease)\n        ), IDLE_TIME);\n    }\n  },\n\n  /**\n   * Renders the a new list.\n   */\n  _render: function() {\n    if (!this.isAttached || !this._isVisible) {\n      return;\n    }\n    if (this._physicalCount !== 0) {\n      var reusables = this._getReusables(true);\n      this._physicalTop = reusables.physicalTop;\n      this._virtualStart = this._virtualStart + reusables.indexes.length;\n      this._physicalStart = this._physicalStart + reusables.indexes.length;\n      this._update(reusables.indexes);\n      this._update();\n      this._increasePoolIfNeeded(0);\n    } else if (this._virtualCount > 0) {\n      // Initial render\n      this.updateViewportBoundaries();\n      this._increasePoolIfNeeded(DEFAULT_PHYSICAL_COUNT);\n    }\n  },\n\n  /**\n   * Called when the items have changed. That is, reassignments\n   * to `items`, splices or updates to a single item.\n   */\n  _itemsChanged: function(change) {\n    if (change.path === 'items') {\n      this._virtualStart = 0;\n      this._physicalTop = 0;\n      this._virtualCount = this.items ? this.items.length : 0;\n      this._collection = this.items && undefined ?\n        undefined.get(this.items) : null;\n      this._physicalIndexForKey = {};\n      this._firstVisibleIndexVal = null;\n      this._lastVisibleIndexVal = null;\n      this._physicalCount = this._physicalCount || 0;\n      this._physicalItems = this._physicalItems || [];\n      this._physicalSizes = this._physicalSizes || [];\n      this._physicalStart = 0;\n      if (this._scrollTop > this._scrollOffset) {\n        this._resetScrollPosition(0);\n      }\n      this._removeFocusedItem();\n      this._debounce('_render', this._render, ANIMATION_FRAME);\n    }\n  },\n\n  /**\n   * Executes a provided function per every physical index in `itemSet`\n   * `itemSet` default value is equivalent to the entire set of physical indexes.\n   *\n   * @param {!function(number, number)} fn\n   * @param {!Array<number>=} itemSet\n   */\n  _iterateItems: function(fn, itemSet) {\n    var pidx, vidx, rtn, i;\n\n    if (arguments.length === 2 && itemSet) {\n      for (i = 0; i < itemSet.length; i++) {\n        pidx = itemSet[i];\n        vidx = this._computeVidx(pidx);\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n    } else {\n      pidx = this._physicalStart;\n      vidx = this._virtualStart;\n      for (; pidx < this._physicalCount; pidx++, vidx++) {\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n      for (pidx = 0; pidx < this._physicalStart; pidx++, vidx++) {\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n    }\n  },\n\n  /**\n   * Returns the virtual index for a given physical index\n   *\n   * @param {number} pidx Physical index\n   * @return {number}\n   */\n  _computeVidx: function(pidx) {\n    if (pidx >= this._physicalStart) {\n      return this._virtualStart + (pidx - this._physicalStart);\n    }\n    return this._virtualStart + (this._physicalCount - this._physicalStart) + pidx;\n  },\n\n  /**\n   * Updates the height for a given set of items.\n   *\n   * @param {!Array<number>=} itemSet\n   */\n  _updateMetrics: function(itemSet) {\n    // Make sure we distributed all the physical items\n    // so we can measure them.\n    flush ? flush() : flush$0();\n\n    var newPhysicalSize = 0;\n    var oldPhysicalSize = 0;\n    var prevAvgCount = this._physicalAverageCount;\n    var prevPhysicalAvg = this._physicalAverage;\n\n    this._iterateItems(function(pidx, vidx) {\n      oldPhysicalSize += this._physicalSizes[pidx];\n      this._physicalSizes[pidx] = this._physicalItems[pidx].offsetHeight;\n      newPhysicalSize += this._physicalSizes[pidx];\n      this._physicalAverageCount += this._physicalSizes[pidx] ? 1 : 0;\n    }, itemSet);\n\n    if (this.grid) {\n      this._updateGridMetrics();\n      this._physicalSize = Math.ceil(this._physicalCount / this._itemsPerRow) * this._rowHeight;\n    } else {\n      oldPhysicalSize = (this._itemsPerRow === 1) ?\n        oldPhysicalSize :\n        Math.ceil(this._physicalCount / this._itemsPerRow) * this._rowHeight;\n      this._physicalSize = this._physicalSize + newPhysicalSize - oldPhysicalSize;\n      this._itemsPerRow = 1;\n    }\n    // Update the average if it measured something.\n    if (this._physicalAverageCount !== prevAvgCount) {\n      this._physicalAverage = Math.round(\n        ((prevPhysicalAvg * prevAvgCount) + newPhysicalSize) /\n        this._physicalAverageCount);\n    }\n  },\n\n  /**\n   * Updates the position of the physical items.\n   */\n  _positionItems: function() {\n    this._adjustScrollPosition();\n\n    var y = this._physicalTop;\n\n    this._iterateItems(function(pidx, vidx) {\n      this.translate3d(0, y + 'px', 0, this._physicalItems[pidx]);\n      y += this._physicalSizes[pidx];\n    });\n  },\n\n  _getPhysicalSizeIncrement: function(pidx) {\n    if (!this.grid) {\n      return this._physicalSizes[pidx];\n    }\n    if (this._computeVidx(pidx) % this._itemsPerRow !== this._itemsPerRow - 1) {\n      return 0;\n    }\n    return this._rowHeight;\n  },\n\n  /**\n   * Adjusts the scroll position when it was overestimated.\n   */\n  _adjustScrollPosition: function() {\n    var deltaHeight = this._virtualStart === 0 ? this._physicalTop : Math.min(this._scrollPosition + this._physicalTop, 0);\n    // Note: the delta can be positive or negative.\n    if (deltaHeight !== 0) {\n      this._physicalTop = this._physicalTop - deltaHeight;\n      var scrollTop = this._scrollTop;\n      // juking scroll position during interial scrolling on iOS is no bueno\n      if (!IOS_TOUCH_SCROLLING && scrollTop > 0) {\n        this._resetScrollPosition(scrollTop - deltaHeight);\n      }\n    }\n  },\n\n  /**\n   * Sets the position of the scroll.\n   */\n  _resetScrollPosition: function(pos) {\n    if (this.scrollTarget && pos >= 0) {\n      this._scrollTop = pos;\n      this._scrollPosition = this._scrollTop;\n    }\n  },\n\n  /**\n   * Sets the scroll height, that's the height of the content,\n   *\n   * @param {boolean=} forceUpdate If true, updates the height no matter what.\n   */\n  _updateScrollerSize: function(forceUpdate) {\n    if (this.grid) {\n      this._estScrollHeight = this._virtualRowCount * this._rowHeight;\n    } else {\n      this._estScrollHeight = (this._physicalBottom +\n          Math.max(this._virtualCount - this._physicalCount - this._virtualStart, 0) * this._physicalAverage);\n    }\n    forceUpdate = forceUpdate || this._scrollHeight === 0;\n    forceUpdate = forceUpdate || this._scrollPosition >= this._estScrollHeight - this._physicalSize;\n    forceUpdate = forceUpdate || this.grid && this.$.items.style.height < this._estScrollHeight;\n    // Amortize height adjustment, so it won't trigger large repaints too often.\n    if (forceUpdate || Math.abs(this._estScrollHeight - this._scrollHeight) >= this._viewportHeight) {\n      this.$.items.style.height = this._estScrollHeight + 'px';\n      this._scrollHeight = this._estScrollHeight;\n    }\n  },\n\n  /**\n   * Scroll to a specific index in the virtual list regardless\n   * of the physical items in the DOM tree.\n   *\n   * @method scrollToIndex\n   * @param {number} idx The index of the item\n   */\n  scrollToIndex: function(idx) {\n    if (typeof idx !== 'number' || idx < 0 || idx > this.items.length - 1) {\n      return;\n    }\n    flush ? flush() : flush$0();\n    // Items should have been rendered prior scrolling to an index.\n    if (this._physicalCount === 0) {\n      return;\n    }\n    idx = this._clamp(idx, 0, this._virtualCount - 1);\n    // Update the virtual start only when needed.\n    if (!this._isIndexRendered(idx) || idx >= this._maxVirtualStart) {\n      this._virtualStart = this.grid ? (idx - this._itemsPerRow * 2) : (idx - 1);\n    }\n    this._manageFocus();\n    this._assignModels();\n    this._updateMetrics();\n    // Estimate new physical offset.\n    this._physicalTop = Math.floor(this._virtualStart / this._itemsPerRow) * this._physicalAverage;\n\n    var currentTopItem = this._physicalStart;\n    var currentVirtualItem = this._virtualStart;\n    var targetOffsetTop = 0;\n    var hiddenContentSize = this._hiddenContentSize;\n    // scroll to the item as much as we can.\n    while (currentVirtualItem < idx && targetOffsetTop <= hiddenContentSize) {\n      targetOffsetTop = targetOffsetTop + this._getPhysicalSizeIncrement(currentTopItem);\n      currentTopItem = (currentTopItem + 1) % this._physicalCount;\n      currentVirtualItem++;\n    }\n    this._updateScrollerSize(true);\n    this._positionItems();\n    this._resetScrollPosition(this._physicalTop + this._scrollOffset + targetOffsetTop);\n    this._increasePoolIfNeeded(0);\n    // clear cached visible index.\n    this._firstVisibleIndexVal = null;\n    this._lastVisibleIndexVal = null;\n  },\n\n  /**\n   * Reset the physical average and the average count.\n   */\n  _resetAverage: function() {\n    this._physicalAverage = 0;\n    this._physicalAverageCount = 0;\n  },\n\n  /**\n   * A handler for the `iron-resize` event triggered by `IronResizableBehavior`\n   * when the element is resized.\n   */\n  _resizeHandler: function() {\n    this._debounce('_render', function() {\n      // clear cached visible index.\n      this._firstVisibleIndexVal = null;\n      this._lastVisibleIndexVal = null;\n      // Skip the resize event on touch devices when the address bar slides up.\n      this.updateViewportBoundaries();\n      if (this._isVisible) {\n        // Reinstall the scroll event listener.\n        this.toggleScrollListener(true);\n        this._resetAverage();\n        this._render();\n      } else {\n        // Uninstall the scroll event listener.\n        this.toggleScrollListener(false);\n      }\n    }, ANIMATION_FRAME);\n  },\n\n  /**\n   * Converts a random index to the index of the item that completes it's row.\n   * Allows for better order and fill computation when grid == true.\n   */\n  _convertIndexToCompleteRow: function(idx) {\n    // when grid == false _itemPerRow can be unset.\n    this._itemsPerRow = this._itemsPerRow || 1;\n    return this.grid ? Math.ceil(idx / this._itemsPerRow) * this._itemsPerRow : idx;\n  },\n\n  _isIndexRendered: function(idx) {\n    return idx >= this._virtualStart && idx <= this._virtualEnd;\n  },\n\n  _getPhysicalIndex: function(vidx) {\n    return (this._physicalStart + (vidx - this._virtualStart)) % this._physicalCount;\n  },\n\n  _clamp: function(v, min, max) {\n    return Math.min(max, Math.max(min, v));\n  },\n\n  _debounce: function(name, cb, asyncModule) {\n    this._debouncers = this._debouncers || {};\n    this._debouncers[name] = Debouncer.debounce(\n      this._debouncers[name],\n      asyncModule,\n      cb.bind(this));\n    enqueueDebouncer(this._debouncers[name]);\n  }\n\n});\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\n\nimport { animationFrame } from '@polymer/polymer/lib/utils/async.js';\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\nimport { PolymerIronList } from './iron-list.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\n/**\n * This Element is used internally by vaadin-grid.\n *\n * @private\n */\nclass GridScrollerElement extends PolymerIronList {\n\n  static get is() {\n    return 'vaadin-grid-scroller';\n  }\n\n  static get properties() {\n    return {\n      size: {\n        type: Number,\n        notify: true\n      },\n      _vidxOffset: {\n        value: 0\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_effectiveSizeChanged(_effectiveSize)'\n    ];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._scrollHandler();\n  }\n\n  /**\n  * @protected\n  */\n  _updateScrollerItem(item, index) {}\n  /**\n  * @protected\n  */\n  _afterScroll() {}\n  /**\n  * @protected\n  */\n  _getRowTarget() {}\n  /**\n  * @protected\n  */\n  _createScrollerRows() {}\n  /**\n  * @protected\n  */\n  _canPopulate() {}\n\n  /**\n  * @private\n  */\n  scrollToIndex(index) {\n    this._warnPrivateAPIAccess('scrollToIndex');\n\n    if (index > 0) {\n      this._pendingScrollToIndex = null;\n    }\n    if (!parseInt(this.$.items.style.borderTopWidth) && index > 0) {\n      // Schedule another scroll to be invoked once init is complete\n      this._pendingScrollToIndex = index;\n    }\n\n    this._scrollingToIndex = true;\n    index = Math.min(Math.max(index, 0), this._effectiveSize - 1);\n    this.$.table.scrollTop = index / this._effectiveSize * (this.$.table.scrollHeight - this.$.table.offsetHeight);\n    this._scrollHandler();\n\n    if (this._accessIronListAPI(() => this._maxScrollTop) && this._virtualCount < this._effectiveSize) {\n      this._adjustVirtualIndexOffset(1000000);\n    }\n\n    this._accessIronListAPI(() => super.scrollToIndex(index - this._vidxOffset));\n    this._scrollHandler();\n\n    // Ensure scroll position\n    const row = Array.from(this.$.items.children).filter(child => child.index === index)[0];\n    if (row) {\n      const headerOffset = row.getBoundingClientRect().top - this.$.header.getBoundingClientRect().bottom;\n      if (Math.abs(headerOffset) > 1) {\n        this.$.table.scrollTop += headerOffset;\n        this._scrollHandler();\n      }\n    }\n\n    this._scrollingToIndex = false;\n  }\n\n  _effectiveSizeChanged(size) {\n    let fvi; // first visible (adjusted) index\n    let fviOffset = 0;\n    this._iterateItems((pidx, vidx) => {\n      if (vidx === this._firstVisibleIndex) {\n        const row = this._physicalItems[pidx];\n        fvi = row.index;\n        fviOffset = row.getBoundingClientRect().top;\n      }\n    });\n\n    if (this.items && size < this.items.length) {\n      // Size was reduced, scroll to 0 first\n      this._scrollTop = 0;\n    }\n    if (!Array.isArray(this.items)) {\n      // Edge/IE seems to have the lowest maximum\n      const maxVirtualItems = this._edge || this._ie ? 30000 : 100000;\n      this.items = {length: Math.min(size, maxVirtualItems)};\n    }\n\n    this._accessIronListAPI(() => super._itemsChanged({path: 'items'}));\n\n    this._virtualCount = Math.min(this.items.length, size) || 0;\n\n    if (this._scrollTop === 0) {\n      this._accessIronListAPI(() => this._scrollToIndex(Math.min(size - 1, fvi)));\n      this._iterateItems((pidx, vidx) => {\n        const row = this._physicalItems[pidx];\n        if (row.index === fvi) {\n          this.$.table.scrollTop += Math.round(row.getBoundingClientRect().top - fviOffset);\n        }\n        // Restore keyboard focus to the right cell\n        if (row.index === this._focusedItemIndex && this._itemsFocusable && this.$.items.contains(this.shadowRoot.activeElement)) {\n          const cellIndex = Array.from(this._itemsFocusable.parentElement.children).indexOf(this._itemsFocusable);\n          row.children[cellIndex].focus();\n        }\n      });\n    }\n    this._assignModels();\n    requestAnimationFrame(() => this._update());\n  }\n\n  _positionItems() {\n    this._adjustScrollPosition();\n\n    let rePosition;\n    if (isNaN(this._physicalTop)) {\n      rePosition = true;\n      this._physicalTop = 0;\n    }\n\n    let y = this._physicalTop;\n    this._iterateItems((pidx, vidx) => {\n      this._physicalItems[pidx].style.transform = `translateY(${y}px)`;\n      y += this._physicalSizes[pidx];\n    });\n\n    if (rePosition) {\n      this._scrollToIndex(0);\n    }\n  }\n\n  _increasePoolIfNeeded(count) {\n    if ((count === 0 && this._scrollingToIndex) || !this._canPopulate() || !this._effectiveSize) {\n      return;\n    }\n\n    if (!this._initialPoolCreated) {\n      this._initialPoolCreated = true;\n      super._increasePoolIfNeeded(25);\n    } else if (this._optPhysicalSize !== Infinity) {\n      this._debounceIncreasePool = Debouncer.debounce(\n        this._debounceIncreasePool,\n        animationFrame,\n        () => {\n          this._updateMetrics();\n          const remainingPhysicalSize = this._optPhysicalSize - this._physicalSize;\n          let estimatedMissingRowCount = Math.ceil(remainingPhysicalSize / this._physicalAverage);\n\n          if (this._physicalCount + estimatedMissingRowCount > this._effectiveSize) {\n            // Do not increase the physical item count above the this._effectiveSize\n            estimatedMissingRowCount = Math.max(0, this._effectiveSize - this._physicalCount);\n          }\n\n          if (this._physicalSize && estimatedMissingRowCount > 0 && this._optPhysicalSize !== Infinity) {\n            super._increasePoolIfNeeded(estimatedMissingRowCount);\n            // Ensure the rows are in order after increasing pool\n            this.__reorderChildNodes();\n          }\n        });\n    }\n  }\n\n  __reorderChildNodes() {\n    const childNodes = Array.from(this.$.items.childNodes);\n    const rowsInOrder = !!childNodes.reduce((inOrder, current, currentIndex, array) => {\n      if (currentIndex === 0 || array[currentIndex - 1].index === current.index - 1) {\n        return inOrder;\n      }\n    }, true);\n\n    if (!rowsInOrder) {\n      childNodes.sort((row1, row2) => {\n        return row1.index - row2.index;\n      }).forEach(row => this.$.items.appendChild(row));\n    }\n  }\n\n  _createPool(size) {\n    const fragment = document.createDocumentFragment();\n    const physicalItems = this._createScrollerRows(size);\n\n    physicalItems.forEach(inst => fragment.appendChild(inst));\n    this._getRowTarget().appendChild(fragment);\n\n    // Weird hack needed to get Safari to actually distribute slots\n    const content = this.querySelector('[slot]');\n    if (content) {\n      const slot = content.getAttribute('slot');\n      content.setAttribute('slot', 'foo-bar');\n      content.setAttribute('slot', slot);\n    }\n\n    this._updateHeaderFooterMetrics();\n\n    afterNextRender(this, () => this.notifyResize());\n    return physicalItems;\n  }\n\n  /**\n   * Assigns the data models to a given set of items.\n   * @param {!Array<number>=} itemSet\n   */\n  _assignModels(itemSet) {\n    this._iterateItems((pidx, vidx) => {\n      const el = this._physicalItems[pidx];\n      this._toggleAttribute('hidden', vidx >= this._effectiveSize, el);\n      this._updateScrollerItem(el, vidx + (this._vidxOffset || 0));\n    }, itemSet);\n  }\n\n  _scrollHandler() {\n    const delta = this.$.table.scrollTop - this._scrollPosition;\n    this._accessIronListAPI(super._scrollHandler);\n    const oldOffset = this._vidxOffset;\n    if (this._accessIronListAPI(() => this._maxScrollTop) && this._virtualCount < this._effectiveSize) {\n      this._adjustVirtualIndexOffset(delta);\n    }\n    if (this._vidxOffset !== oldOffset) {\n      this._update();\n    }\n    this._afterScroll();\n  }\n\n  _adjustVirtualIndexOffset(delta) {\n    if (Math.abs(delta) > 10000) {\n      if (this._noScale) {\n        this._noScale = false;\n        return;\n      }\n      const scale = this.$.table.scrollTop / (this.$.table.scrollHeight - this.$.table.offsetHeight);\n      const offset = scale * this._effectiveSize;\n      this._vidxOffset = Math.round(offset - scale * this._virtualCount);\n    } else {\n      // Make sure user can always swipe/wheel scroll to the start and end\n      const oldOffset = this._vidxOffset || 0;\n      const threshold = 1000;\n      const maxShift = 100;\n      // At start\n      if (this._scrollTop === 0) {\n        this._vidxOffset = 0;\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(0);\n        }\n      } else if (this.firstVisibleIndex < threshold && this._vidxOffset > 0) {\n        this._vidxOffset -= Math.min(this._vidxOffset, maxShift);\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(this.firstVisibleIndex + (oldOffset - this._vidxOffset));\n        }\n        this._noScale = true;\n      }\n      // At end\n      const maxOffset = this._effectiveSize - this._virtualCount;\n      if (this._scrollTop >= this._maxScrollTop && this._maxScrollTop > 0) {\n        this._vidxOffset = maxOffset;\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(this._virtualCount);\n        }\n      } else if (this.firstVisibleIndex > this._virtualCount - threshold && this._vidxOffset < maxOffset) {\n        this._vidxOffset += Math.min(maxOffset - this._vidxOffset, maxShift);\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(this.firstVisibleIndex - (this._vidxOffset - oldOffset));\n        }\n        this._noScale = true;\n      }\n    }\n  }\n\n  _accessIronListAPI(cb) {\n    this._warnPrivateAPIAccessAsyncEnabled = false;\n    const returnValue = cb.apply(this);\n    this._debouncerWarnPrivateAPIAccess = Debouncer.debounce(\n      this._debouncerWarnPrivateAPIAccess,\n      animationFrame,\n      () => this._warnPrivateAPIAccessAsyncEnabled = true\n    );\n    return returnValue;\n  }\n\n  /* Allow iron-list to access its APIs from debounced callbacks without warns */\n  _debounceRender(cb, asyncModule) {\n    super._debounceRender(() => this._accessIronListAPI(cb), asyncModule);\n  }\n\n  /* Warn when iron-list APIs are being accessed directly */\n  _warnPrivateAPIAccess(apiName) {\n    if (this._warnPrivateAPIAccessAsyncEnabled) {\n      console.warn(`Accessing private API (${apiName})!`);\n    }\n  }\n\n  _render() {\n    this._accessIronListAPI(super._render);\n  }\n\n  _createFocusBackfillItem() { /* Ignore */ }\n  _multiSelectionChanged() { /* Ignore */ }\n  clearSelection() { /* Ignore */ }\n  _itemsChanged() { /* Ignore */ }\n  _manageFocus() { /* Ignore */ }\n  _removeFocusedItem() { /* Ignore */ }\n\n  get _firstVisibleIndex() {\n    return this._accessIronListAPI(() => super.firstVisibleIndex);\n  }\n  get _lastVisibleIndex() {\n    return this._accessIronListAPI(() => super.lastVisibleIndex);\n  }\n  _scrollToIndex(index) {\n    this._accessIronListAPI(() => this.scrollToIndex(index));\n  }\n  get firstVisibleIndex() {\n    this._warnPrivateAPIAccess('firstVisibleIndex'); return super.firstVisibleIndex;\n  }\n  set firstVisibleIndex(value) {\n    this._warnPrivateAPIAccess('firstVisibleIndex'); super.firstVisibleIndex = value;\n  }\n  get lastVisibleIndex() {\n    this._warnPrivateAPIAccess('lastVisibleIndex'); return super.lastVisibleIndex;\n  }\n  set lastVisibleIndex(value) {\n    this._warnPrivateAPIAccess('lastVisibleIndex'); super.lastVisibleIndex = value;\n  }\n  updateViewportBoundaries() {\n    this._warnPrivateAPIAccess('updateViewportBoundaries'); super.updateViewportBoundaries.apply(this, arguments);\n  }\n  _resizeHandler() {\n    super._resizeHandler();\n    flush();\n  }\n}\n\ncustomElements.define(GridScrollerElement.is, GridScrollerElement);\n\nexport { GridScrollerElement as ScrollerElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const A11yMixin = superClass => class A11yMixin extends superClass {\n  static get observers() {\n    return [\n      '_a11yUpdateGridSize(size, _columnTree, _columnTree.*)'\n    ];\n  }\n\n  _a11yGetHeaderRowCount(_columnTree) {\n    return _columnTree.filter(level => level.some(col => col._headerTemplate || col.headerRenderer || col.path || col.header)).length;\n  }\n\n  _a11yGetFooterRowCount(_columnTree) {\n    return _columnTree.filter(level => level.some(col => col._headerTemplate || col.headerRenderer)).length;\n  }\n\n  _a11yUpdateGridSize(size, _columnTree) {\n    if (size === undefined || _columnTree === undefined) {\n      return;\n    }\n\n    const bodyColumns = _columnTree[_columnTree.length - 1];\n    this.$.table.setAttribute(\n      'aria-rowcount',\n      size + this._a11yGetHeaderRowCount(_columnTree) + this._a11yGetFooterRowCount(_columnTree)\n    );\n    this.$.table.setAttribute('aria-colcount', bodyColumns && bodyColumns.length || 0);\n\n    this._a11yUpdateHeaderRows();\n    this._a11yUpdateFooterRows();\n  }\n\n  _a11yUpdateHeaderRows() {\n    Array.from(this.$.header.children).forEach((headerRow, index) =>\n      headerRow.setAttribute('aria-rowindex', index + 1)\n    );\n  }\n\n  _a11yUpdateFooterRows() {\n    Array.from(this.$.footer.children).forEach((footerRow, index) =>\n      footerRow.setAttribute(\n        'aria-rowindex',\n        this._a11yGetHeaderRowCount(this._columnTree) + this.size + index + 1\n      )\n    );\n  }\n\n  _a11yUpdateRowRowindex(row, index) {\n    row.setAttribute('aria-rowindex', index + this._a11yGetHeaderRowCount(this._columnTree) + 1);\n  }\n\n  _a11yUpdateRowSelected(row, selected) {\n    // Jaws reads selection only for rows, NVDA only for cells\n    row.setAttribute('aria-selected', Boolean(selected));\n    Array.from(row.children).forEach(cell =>\n      cell.setAttribute('aria-selected', Boolean(selected))\n    );\n  }\n\n  _a11yUpdateRowLevel(row, level) {\n    row.setAttribute('aria-level', level + 1);\n  }\n\n  _a11yUpdateRowDetailsOpened(row, detailsOpened) {\n    Array.from(row.children).forEach(cell => {\n      if (typeof detailsOpened === 'boolean') {\n        cell.setAttribute('aria-expanded', detailsOpened);\n      } else {\n        if (cell.hasAttribute('aria-expanded')) {\n          cell.removeAttribute('aria-expanded');\n        }\n      }\n    });\n  }\n\n  _a11ySetRowDetailsCell(row, detailsCell) {\n    Array.from(row.children).forEach(cell => {\n      if (cell !== detailsCell) {\n        cell.setAttribute('aria-controls', detailsCell.id);\n      }\n    });\n  }\n\n  _a11yUpdateCellColspan(cell, colspan) {\n    cell.setAttribute('aria-colspan', Number(colspan));\n  }\n\n  _a11yUpdateSorters() {\n    Array.from(this.querySelectorAll('vaadin-grid-sorter')).forEach(sorter => {\n      let cellContent = sorter.parentNode;\n      while (cellContent && cellContent.localName !== 'vaadin-grid-cell-content') {\n        cellContent = cellContent.parentNode;\n      }\n      if (cellContent && cellContent.assignedSlot) {\n        const cell = cellContent.assignedSlot.parentNode;\n        cell.setAttribute('aria-sort', {\n          'asc': 'ascending',\n          'desc': 'descending'\n        }[String(sorter.direction)] || 'none');\n      }\n    });\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const ActiveItemMixin = superClass => class ActiveItemMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * The item user has last interacted with. Turns to `null` after user deactivates\n       * the item by re-interacting with the currently active item.\n       */\n      activeItem: {\n        type: Object,\n        notify: true,\n        value: null\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n\n    this.$.scroller.addEventListener('click', this._onClick.bind(this));\n    this.addEventListener('cell-activate', this._activateItem.bind(this));\n  }\n\n  _activateItem(e) {\n    const model = e.detail.model;\n    const clickedItem = model ? model.item : null;\n\n    if (clickedItem) {\n      this.activeItem = !this._itemsEqual(this.activeItem, clickedItem) ? clickedItem : null;\n    }\n  }\n\n  // we need to listen to click instead of tap because on mobile safari, the\n  // document.activeElement has not been updated (focus has not been shifted)\n  // yet at the point when tap event is being executed.\n  _onClick(e) {\n    if (e.defaultPrevented) {\n      // Something has handled this click already, e. g., <vaadin-grid-sorter>\n      return;\n    }\n\n    const path = e.composedPath();\n    const cell = path[path.indexOf(this.$.table) - 3];\n    if (!cell || cell.getAttribute('part').indexOf('details-cell') > -1) {\n      return;\n    }\n    const cellContent = cell._content;\n\n    const activeElement = this.getRootNode().activeElement;\n    const cellContentHasFocus = cellContent.contains(activeElement) &&\n      // MSIE bug: flex children receive focus. Make type & attributes check.\n      (!this._ie || this._isFocusable(activeElement));\n    if (!cellContentHasFocus && !this._isFocusable(e.target)) {\n      this.dispatchEvent(new CustomEvent('cell-activate', {detail: {\n        model: this.__getRowModel(cell.parentElement)\n      }}));\n    }\n  }\n\n  _isFocusable(target) {\n    if (!target.parentNode) {\n      return false;\n    }\n    const focusables = Array.from(target.parentNode\n      .querySelectorAll('[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]'))\n      .filter(element => element.getAttribute('part') !== 'cell body-cell');\n\n    const isFocusableElement = focusables.indexOf(target) !== -1;\n    return !target.disabled && isFocusableElement;\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Base } from '@polymer/polymer/polymer-legacy.js';\n\n/**\n * @polymerMixin\n */\nexport const ArrayDataProviderMixin = superClass => class ArrayDataProviderMixin extends superClass {\n\n  static get properties() {\n\n    return {\n      /**\n       * An array containing the items which will be stamped to the column template\n       * instances.\n       */\n      items: Array\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_itemsChanged(items, items.*, isAttached)'\n    ];\n  }\n\n  _itemsChanged(items, splices, isAttached) {\n    if (!isAttached) {\n      return;\n    }\n    if (!Array.isArray(items)) {\n      if (items === undefined || items === null) {\n        this.size = 0;\n      }\n      if (this.dataProvider === this._arrayDataProvider) {\n        this.dataProvider = undefined;\n      }\n      return;\n    }\n\n    this.size = items.length;\n    this.dataProvider = this.dataProvider || this._arrayDataProvider;\n    this.clearCache();\n    this._ensureFirstPageLoaded();\n  }\n\n  _arrayDataProvider(opts, cb) {\n    let items = (Array.isArray(this.items) ? this.items : []).slice(0);\n\n    if (this._filters && this._checkPaths(this._filters, 'filtering', items)) {\n      items = this._filter(items);\n    }\n\n    this.size = items.length;\n\n    if (opts.sortOrders.length && this._checkPaths(this._sorters, 'sorting', items)) {\n      items = items.sort(this._multiSort.bind(this));\n    }\n\n    const start = opts.page * opts.pageSize;\n    const end = start + opts.pageSize;\n    const slice = items.slice(start, end);\n    cb(slice, items.length);\n  }\n\n  /**\n   * Check array of filters/sorters for paths validity, console.warn invalid items\n   * @param {Array}  arrayToCheck The array of filters/sorters to check\n   * @param {string} action       The name of action to include in warning (filtering, sorting)\n   * @param {Array}  items\n   */\n  _checkPaths(arrayToCheck, action, items) {\n    if (!items.length) {\n      return false;\n    }\n\n    let result = true;\n\n    for (var i in arrayToCheck) {\n      const path = arrayToCheck[i].path;\n\n      // skip simple paths\n      if (!path || path.indexOf('.') === -1) {\n        continue;\n      }\n\n      const parentProperty = path.replace(/\\.[^\\.]*$/, ''); // a.b.c -> a.b\n      if (Base.get(parentProperty, items[0]) === undefined) {\n        console.warn(`Path \"${path}\" used for ${action} does not exist in all of the items, ${action} is disabled.`);\n        result = false;\n      }\n    }\n\n    return result;\n  }\n\n  _multiSort(a, b) {\n    return this._sorters.map(sort => {\n      if (sort.direction === 'asc') {\n        return this._compare(Base.get(sort.path, a), Base.get(sort.path, b));\n      } else if (sort.direction === 'desc') {\n        return this._compare(Base.get(sort.path, b), Base.get(sort.path, a));\n      }\n      return 0;\n    }).reduce((p, n) => {\n      return p ? p : n;\n    }, 0);\n  }\n\n  _normalizeEmptyValue(value) {\n    if ([undefined, null].indexOf(value) >= 0) {\n      return '';\n    } else if (isNaN(value)) {\n      return value.toString();\n    } else {\n      return value;\n    }\n  }\n\n  _compare(a, b) {\n    a = this._normalizeEmptyValue(a);\n    b = this._normalizeEmptyValue(b);\n\n    if (a < b) {\n      return -1;\n    }\n    if (a > b) {\n      return 1;\n    }\n    return 0;\n  }\n\n  _filter(items) {\n    return items.filter((item, index) => {\n      return this._filters.filter(filter => {\n        const value = this._normalizeEmptyValue(Base.get(filter.path, item));\n        const filterValueLowercase = this._normalizeEmptyValue(filter.value).toString().toLowerCase();\n        return value.toString().toLowerCase().indexOf(filterValueLowercase) === -1;\n      }).length === 0;\n    });\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\n\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\n\n/**\n * @polymerMixin\n */\nexport const ColumnResizingMixin = superClass => class ColumnResizingMixin extends GestureEventListeners(superClass) {\n\n  ready() {\n    super.ready();\n    const scroller = this.$.scroller;\n    addListener(scroller, 'track', this._onHeaderTrack.bind(this));\n\n    // Disallow scrolling while resizing\n    scroller.addEventListener('touchmove', e => scroller.hasAttribute('column-resizing') && e.preventDefault());\n\n    // Disable contextmenu on any resize separator.\n    scroller.addEventListener('contextmenu', e => e.target.getAttribute('part') == 'resize-handle' && e.preventDefault());\n\n    // Disable native cell focus when resizing\n    scroller.addEventListener('mousedown', e => e.target.getAttribute('part') === 'resize-handle' && e.preventDefault());\n  }\n\n  _onHeaderTrack(e) {\n    const handle = e.target;\n    if (handle.getAttribute('part') === 'resize-handle') {\n      const cell = handle.parentElement;\n      let column = cell._column;\n\n      this._toggleAttribute('column-resizing', true, this.$.scroller);\n\n      // Get the target column to resize\n      while (column.localName === 'vaadin-grid-column-group') {\n        column = Array.prototype.slice.call(column._childColumns, 0)\n          .sort(function(a, b) {\n            return a._order - b._order;\n          })\n          .filter(function(column) {\n            return !column.hidden;\n          }).pop();\n      }\n\n      const columnRowCells = Array.from(this.$.header.querySelectorAll('[part~=\"row\"]:last-child [part~=\"cell\"]'));\n      var targetCell = columnRowCells.filter(cell => cell._column === column)[0];\n      // Resize the target column\n      if (targetCell.offsetWidth) {\n        var style = window.getComputedStyle(targetCell);\n        var minWidth = 10 + parseInt(style.paddingLeft) + parseInt(style.paddingRight) + parseInt(style.borderLeftWidth)\n          + parseInt(style.borderRightWidth) + parseInt(style.marginLeft) + parseInt(style.marginRight);\n        const maxWidth = targetCell.offsetWidth + (this.__isRTL ? targetCell.getBoundingClientRect().left - e.detail.x :\n          e.detail.x - targetCell.getBoundingClientRect().right);\n        column.width = Math.max(minWidth, maxWidth) + 'px';\n        column.flexGrow = 0;\n      }\n      // Fix width and flex-grow for all preceding columns\n      columnRowCells\n        .sort(\n          function(a, b) {\n            return a._column._order - b._column._order;\n          })\n        .forEach(function(cell, index, array) {\n          if (index < array.indexOf(targetCell)) {\n            cell._column.width = cell.offsetWidth + 'px';\n            cell._column.flexGrow = 0;\n          }\n        });\n\n      if (e.detail.state === 'end') {\n        this._toggleAttribute('column-resizing', false, this.$.scroller);\n        this.dispatchEvent(new CustomEvent('column-resize', {\n          detail: {resizedColumn: column}\n        }));\n      }\n\n      // Notify resize\n      this._resizeHandler();\n    }\n  }\n\n  /**\n  * Fired when a column in the grid is resized by the user.\n  *\n  * @event column-resize\n  * @param {Object} detail\n  * @param {Object} detail.resizedColumn the column that was resized\n  */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\n\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\n\nexport const ItemCache = class ItemCache {\n\n  constructor(grid, parentCache, parentItem) {\n    this.grid = grid;\n    this.parentCache = parentCache;\n    this.parentItem = parentItem;\n    this.itemCaches = {};\n    this.items = {};\n    this.effectiveSize = 0;\n    this.size = 0;\n    this.pendingRequests = {};\n  }\n\n  isLoading() {\n    return Object.keys(this.pendingRequests).length || Object.keys(this.itemCaches).filter(index => {\n      return this.itemCaches[index].isLoading();\n    })[0];\n  }\n\n  getItemForIndex(index) {\n    const {cache, scaledIndex} = this.getCacheAndIndex(index);\n    return cache.items[scaledIndex];\n  }\n\n  updateSize() {\n    this.effectiveSize = (!this.parentItem || this.grid._isExpanded(this.parentItem)) ?\n      this.size + Object.keys(this.itemCaches).reduce((prev, curr) => {\n        const subCache = this.itemCaches[curr];\n        subCache.updateSize();\n        return prev + subCache.effectiveSize;\n      }, 0) :\n      0;\n  }\n\n  ensureSubCacheForScaledIndex(scaledIndex) {\n    if (!this.itemCaches[scaledIndex]) {\n      const subCache = new ItemCache(this.grid, this, this.items[scaledIndex]);\n      this.itemCaches[scaledIndex] = subCache;\n      this.grid._loadPage(0, subCache);\n    }\n  }\n\n  getCacheAndIndex(index) {\n    let thisLevelIndex = index;\n    const keys = Object.keys(this.itemCaches);\n    for (var i = 0; i < keys.length; i++) {\n      const expandedIndex = Number(keys[i]);\n      const subCache = this.itemCaches[expandedIndex];\n      if (thisLevelIndex <= expandedIndex) {\n        return {cache: this, scaledIndex: thisLevelIndex};\n      } else if (thisLevelIndex <= expandedIndex + subCache.effectiveSize) {\n        return subCache.getCacheAndIndex(thisLevelIndex - expandedIndex - 1);\n      }\n      thisLevelIndex -= subCache.effectiveSize;\n    }\n    return {cache: this, scaledIndex: thisLevelIndex};\n  }\n\n};\n\n/**\n * @polymerMixin\n */\nexport const DataProviderMixin = superClass => class DataProviderMixin extends superClass {\n\n  static get properties() {\n    return {\n\n      /**\n       * Number of items fetched at a time from the dataprovider.\n       */\n      pageSize: {\n        type: Number,\n        value: 50,\n        observer: '_pageSizeChanged'\n      },\n\n      /**\n       * Function that provides items lazily. Receives arguments `params`, `callback`\n       *\n       * `params.page` Requested page index\n       *\n       * `params.pageSize` Current page size\n       *\n       * `params.filters` Currently applied filters\n       *\n       * `params.sortOrders` Currently applied sorting orders\n       *\n       * `params.parentItem` When tree is used, and sublevel items\n       * are requested, reference to parent item of the requested sublevel.\n       * Otherwise `undefined`.\n       *\n       * `callback(items, size)` Callback function with arguments:\n       *   - `items` Current page of items\n       *   - `size` Total number of items. When tree sublevel items\n       *     are requested, total number of items in the requested sublevel.\n       *     Optional when tree is not used, required for tree.\n       */\n      dataProvider: {\n        type: Object,\n        notify: true,\n        observer: '_dataProviderChanged'\n      },\n\n      /**\n       * `true` while data is being requested from the data provider.\n       */\n      loading: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        reflectToAttribute: true\n      },\n\n      _cache: {\n        type: Object,\n        value: function() {\n          const cache = new ItemCache(this);\n          return cache;\n        }\n      },\n\n      /**\n       * Path to an item sub-property that identifies the item.\n       */\n      itemIdPath: {\n        type: String,\n        value: null\n      },\n\n      /**\n       * An array that contains the expanded items.\n       */\n      expandedItems: {\n        type: Object,\n        notify: true,\n        value: () => []\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_sizeChanged(size)',\n      '_itemIdPathChanged(itemIdPath)',\n      '_expandedItemsChanged(expandedItems.*)'\n    ];\n  }\n\n  _sizeChanged(size) {\n    const delta = size - this._cache.size;\n    this._cache.size += delta;\n    this._cache.effectiveSize += delta;\n    this._effectiveSize = this._cache.effectiveSize;\n  }\n\n  _getItem(index, el) {\n    if (index >= this._effectiveSize) {\n      return;\n    }\n\n    el.index = index;\n    const {cache, scaledIndex} = this._cache.getCacheAndIndex(index);\n    const item = cache.items[scaledIndex];\n    if (item) {\n      this._toggleAttribute('loading', false, el);\n      this._updateItem(el, item);\n      if (this._isExpanded(item)) {\n        cache.ensureSubCacheForScaledIndex(scaledIndex);\n      }\n    } else {\n      this._toggleAttribute('loading', true, el);\n      this._loadPage(this._getPageForIndex(scaledIndex), cache);\n    }\n\n  }\n\n  _expandedInstanceChangedCallback(inst, value) {\n    if (inst.item === undefined) {\n      return;\n    }\n    if (value) {\n      this.expandItem(inst.item);\n    } else {\n      this.collapseItem(inst.item);\n    }\n  }\n\n  /**\n   * Returns a value that identifies the item. Uses `itemIdPath` if available.\n   * Can be customized by overriding.\n   */\n  getItemId(item) {\n    return this.itemIdPath ? this.get(this.itemIdPath, item) : item;\n  }\n\n  _isExpanded(item) {\n    return this.__expandedKeys.has(this.getItemId(item));\n  }\n\n  _expandedItemsChanged(e) {\n    this.__cacheExpandedKeys();\n    this._cache.updateSize();\n    this._effectiveSize = this._cache.effectiveSize;\n    this._assignModels();\n  }\n\n  _itemIdPathChanged(e) {\n    this.__cacheExpandedKeys();\n  }\n\n  __cacheExpandedKeys() {\n    if (this.expandedItems) {\n      this.__expandedKeys = new Set();\n      this.expandedItems.forEach(item => {\n        this.__expandedKeys.add(this.getItemId(item));\n      });\n    }\n  }\n\n  /**\n   * Expands the given item tree.\n   */\n  expandItem(item) {\n    if (!this._isExpanded(item)) {\n      this.push('expandedItems', item);\n    }\n  }\n\n  /**\n   * Collapses the given item tree.\n   */\n  collapseItem(item) {\n    if (this._isExpanded(item)) {\n      this.splice('expandedItems', this._getItemIndexInArray(item, this.expandedItems), 1);\n    }\n  }\n\n  _getIndexLevel(index) {\n    let {cache} = this._cache.getCacheAndIndex(index);\n    let level = 0;\n    while (cache.parentCache) {\n      cache = cache.parentCache;\n      level++;\n    }\n    return level;\n  }\n\n  _canPopulate() {\n    return this._hasData && this._columnTree;\n  }\n\n  _loadPage(page, cache) {\n    // make sure same page isn't requested multiple times.\n    if (!cache.pendingRequests[page] && this.dataProvider) {\n      this._setLoading(true);\n      cache.pendingRequests[page] = true;\n      const params = {\n        page,\n        pageSize: this.pageSize,\n        sortOrders: this._mapSorters(),\n        filters: this._mapFilters(),\n        parentItem: cache.parentItem\n      };\n\n      this.dataProvider(params, (items, size) => {\n        if (size !== undefined) {\n          cache.size = size;\n        } else {\n          if (params.parentItem) {\n            cache.size = items.length;\n          }\n        }\n\n        const currentItems = Array.from(this.$.items.children).map(row => row._item);\n\n        // Populate the cache with new items\n        items.forEach((item, itemsIndex) => {\n          const itemIndex = page * this.pageSize + itemsIndex;\n          cache.items[itemIndex] = item;\n          if (this._isExpanded(item) && currentItems.indexOf(item) > -1) {\n            // Force synchronous data request for expanded item sub-cache\n            cache.ensureSubCacheForScaledIndex(itemIndex);\n          }\n        });\n\n        this._hasData = true;\n\n        delete cache.pendingRequests[page];\n\n        this._setLoading(false);\n        this._cache.updateSize();\n        this._effectiveSize = this._cache.effectiveSize;\n\n        Array.from(this.$.items.children)\n          .filter(row => !row.hidden)\n          .forEach(row => {\n            const cachedItem = this._cache.getItemForIndex(row.index);\n            if (cachedItem) {\n              this._toggleAttribute('loading', false, row);\n              this._updateItem(row, cachedItem);\n            }\n          });\n\n        this._increasePoolIfNeeded(0);\n\n        this.__itemsReceived();\n      });\n    }\n  }\n\n  _getPageForIndex(index) {\n    return Math.floor(index / this.pageSize);\n  }\n\n  /**\n   * Clears the cached pages and reloads data from dataprovider when needed.\n   */\n  clearCache() {\n    this._cache = new ItemCache(this);\n    Array.from(this.$.items.children).forEach(row => {\n      Array.from(row.children).forEach(cell => {\n        // Force data system to pick up subproperty changes\n        cell._instance && cell._instance._setPendingProperty('item', {}, false);\n      });\n    });\n    this._cache.size = this.size || 0;\n    this._cache.updateSize();\n    this._hasData = false;\n    this._assignModels();\n\n    if (!this._effectiveSize) {\n      this._loadPage(0, this._cache);\n    }\n  }\n\n  _pageSizeChanged(pageSize, oldPageSize) {\n    if (oldPageSize !== undefined && pageSize !== oldPageSize) {\n      this.clearCache();\n    }\n  }\n\n  _checkSize() {\n    if (this.size === undefined && this._effectiveSize === 0) {\n      console.warn(\n        'The <vaadin-grid> needs the total number of items' +\n        ' in order to display rows. Set the total number of items' +\n        ' to the `size` property, or provide the total number of items' +\n        ' in the second argument of the `dataProvider`s `callback` call.'\n      );\n    }\n  }\n\n  _dataProviderChanged(dataProvider, oldDataProvider) {\n    if (oldDataProvider !== undefined) {\n      this.clearCache();\n    }\n\n    if (dataProvider && this.items && this.items.length) {\n      // Fixes possibly invalid cached lastVisibleIndex value in <iron-list>\n      this._scrollToIndex(this._firstVisibleIndex);\n    }\n\n    this._ensureFirstPageLoaded();\n\n    this._debouncerCheckSize = Debouncer.debounce(\n      this._debouncerCheckSize,\n      timeOut.after(2000),\n      this._checkSize.bind(this));\n\n    this._scrollHandler();\n  }\n\n  _ensureFirstPageLoaded() {\n    if (!this._hasData) {\n      // load data before adding rows to make sure they have content when\n      // rendered for the first time.\n      this._loadPage(0, this._cache, () => {\n        const hadData = this._hasData;\n        this._hasData = true;\n        if (!hadData) {\n          this.notifyResize();\n        }\n      });\n    }\n  }\n\n  _itemsEqual(item1, item2) {\n    return this.getItemId(item1) === this.getItemId(item2);\n  }\n\n  _getItemIndexInArray(item, array) {\n    let result = -1;\n    array.forEach((i, idx) => {\n      if (this._itemsEqual(i, item)) {\n        result = idx;\n      }\n    });\n    return result;\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { FlattenedNodesObserver } from '@polymer/polymer/lib/utils/flattened-nodes-observer.js';\n\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n/**\n * @polymerMixin\n */\nexport const DynamicColumnsMixin = superClass => class DynamicColumnsMixin extends superClass {\n\n  ready() {\n    super.ready();\n    this._addNodeObserver();\n  }\n\n  _hasColumnGroups(columns) {\n    for (let i = 0; i < columns.length; i++) {\n      if (columns[i].localName === 'vaadin-grid-column-group') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  _getChildColumns(el) {\n    return FlattenedNodesObserver.getFlattenedNodes(el).filter(this._isColumnElement);\n  }\n\n  _flattenColumnGroups(columns) {\n    return columns.map(col => {\n      if (col.localName === 'vaadin-grid-column-group') {\n        return this._getChildColumns(col);\n      } else {\n        return [col];\n      }\n    }).reduce((prev, curr) => {\n      return prev.concat(curr);\n    }, []);\n  }\n\n  _getColumnTree() {\n    var rootColumns = FlattenedNodesObserver.getFlattenedNodes(this).filter(this._isColumnElement);\n    var _columnTree = [];\n\n    for (var c = rootColumns; ;) {\n      _columnTree.push(c);\n      if (!this._hasColumnGroups(c)) {\n        break;\n      }\n      c = this._flattenColumnGroups(c);\n    }\n\n    return _columnTree;\n  }\n\n  _updateColumnTree() {\n    var columnTree = this._getColumnTree();\n    if (!this._arrayEquals(columnTree, this._columnTree)) {\n      this._columnTree = columnTree;\n    }\n  }\n\n  _addNodeObserver() {\n    this._observer = new FlattenedNodesObserver(this, info => {\n\n      const rowDetailsTemplate = info.addedNodes.filter(n => n.localName === 'template' && n.classList.contains('row-details'))[0];\n      if (rowDetailsTemplate && this._rowDetailsTemplate !== rowDetailsTemplate) {\n        this._rowDetailsTemplate = rowDetailsTemplate;\n      }\n\n      if (info.addedNodes.filter(this._isColumnElement).length > 0 ||\n        info.removedNodes.filter(this._isColumnElement).length > 0) {\n        this._updateColumnTree();\n      }\n\n      this._debouncerCheckImports = Debouncer.debounce(\n        this._debouncerCheckImports,\n        timeOut.after(2000),\n        this._checkImports.bind(this));\n\n      this._ensureFirstPageLoaded();\n    });\n  }\n\n  _arrayEquals(arr1, arr2) {\n    if (!arr1 || !arr2 || arr1.length != arr2.length) {\n      return false;\n    }\n\n    for (var i = 0, l = arr1.length; i < l; i++) {\n      // Check if we have nested arrays\n      if (arr1[i] instanceof Array && arr2[i] instanceof Array) {\n        // recurse into the nested arrays\n        if (!this._arrayEquals(arr1[i], arr2[i])) {\n          return false;\n        }\n      } else if (arr1[i] != arr2[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  _checkImports() {\n    [\n      'vaadin-grid-column-group',\n      'vaadin-grid-filter',\n      'vaadin-grid-filter-column',\n      'vaadin-grid-tree-toggle',\n      'vaadin-grid-selection-column',\n      'vaadin-grid-sort-column',\n      'vaadin-grid-sorter'\n    ].forEach(elementName => {\n      var element = this.querySelector(elementName);\n      if (element && !(element instanceof PolymerElement)) {\n        console.warn(`Make sure you have imported the required module for <${elementName}> element.`);\n      }\n    });\n  }\n\n  _updateFirstAndLastColumn() {\n    Array.from(this.shadowRoot.querySelectorAll('tr')).forEach(row => this._updateFirstAndLastColumnForRow(row));\n  }\n\n  _updateFirstAndLastColumnForRow(row) {\n    Array.from(row.querySelectorAll('[part~=\"cell\"]:not([part~=\"details-cell\"])'))\n      .sort((a, b) => {\n        return a._column._order - b._column._order;\n      }).forEach((cell, cellIndex, children) => {\n        this._toggleAttribute('first-column', cellIndex === 0, cell);\n        this._toggleAttribute('last-column', cellIndex === children.length - 1, cell);\n      });\n  }\n\n  _isColumnElement(node) {\n    return node.nodeType === Node.ELEMENT_NODE && /\\bcolumn\\b/.test(node.localName);\n  }\n};\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const EventContextMixin = superClass => class EventContextMixin extends superClass {\n\n  /**\n   * Returns an object with context information about the event target:\n   * - `item`: the data object corresponding to the targeted row (not specified when targeting header or footer)\n   * - `column`: the column element corresponding to the targeted cell (not specified when targeting row details)\n   * - `section`: whether the event targeted the body, header, footer or details of the grid\n   *\n   * These additional properties are included when `item` is specified:\n   * - `index`: the index of the item\n   * - `selected`: the selected state of the item\n   * - `detailsOpened`: whether the row details are open for the item\n   * - `expanded`: the expanded state of the tree toggle\n   * - `level`: the tree hierarchy level\n   *\n   * The returned object is populated only when a grid cell, header, footer or row details is found in `event.composedPath()`.\n   * This means mostly mouse and keyboard events. If such a grid part is not found in the path, an empty object is returned.\n   * This may be the case eg. if the event is fired on the `<vaadin-grid>` element and not any deeper in the DOM, or if\n   * the event targets the empty part of the grid body.\n   */\n  getEventContext(event) {\n\n    const context = {};\n\n    const path = event.composedPath();\n    const cell = path[path.indexOf(this.$.table) - 3];\n\n    if (!cell) {\n      return context;\n    }\n\n    context.section = ['body', 'header', 'footer', 'details']\n      .filter(section => cell.getAttribute('part').indexOf(section) > -1)[0];\n\n    if (cell._column) {\n      context.column = cell._column;\n    }\n\n    if (context.section === 'body' || context.section === 'details') {\n      Object.assign(context, this.__getRowModel(cell.parentElement));\n    }\n\n    return context;\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const FilterMixin = superClass => class FilterMixin extends superClass {\n\n  static get properties() {\n    return {\n      _filters: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('filter-changed', this._filterChanged.bind(this));\n  }\n\n  _filterChanged(e) {\n    if (this._filters.indexOf(e.target) === -1) {\n      this._filters.push(e.target);\n    }\n\n    e.stopPropagation();\n\n    if (this.dataProvider) {\n      this.clearCache();\n    }\n  }\n\n  _mapFilters() {\n    return this._filters.map(filter => {\n      return {\n        path: filter.path,\n        value: filter.value\n      };\n    });\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Templatizer } from './vaadin-grid-templatizer.js';\n\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\n\n/**\n * @polymerMixin\n */\nexport const RowDetailsMixin = superClass => class RowDetailsMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * An array containing references to items with open row details.\n       */\n      detailsOpenedItems: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      _rowDetailsTemplate: Object,\n\n      /**\n       * Custom function for rendering the content of the row details.\n       * Receives three arguments:\n       *\n       * - `root` The row details content DOM element. Append your content to it.\n       * - `grid` The `<vaadin-grid>` element.\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       */\n      rowDetailsRenderer: Function,\n\n      _detailsCells: {\n        type: Array,\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_detailsOpenedItemsChanged(detailsOpenedItems.*, _rowDetailsTemplate, rowDetailsRenderer)',\n      '_rowDetailsTemplateOrRendererChanged(_rowDetailsTemplate, rowDetailsRenderer)'\n    ];\n  }\n\n  _rowDetailsTemplateOrRendererChanged(rowDetailsTemplate, rowDetailsRenderer) {\n    if (rowDetailsTemplate && rowDetailsRenderer) {\n      throw new Error('You should only use either a renderer or a template for row details');\n    }\n    if (rowDetailsTemplate || rowDetailsRenderer) {\n      if (rowDetailsTemplate && !rowDetailsTemplate.templatizer) {\n        var templatizer = new Templatizer();\n        templatizer._grid = this;\n        templatizer.dataHost = this.dataHost;\n        templatizer.template = rowDetailsTemplate;\n        rowDetailsTemplate.templatizer = templatizer;\n      }\n\n      if (this._columnTree) {\n        // Only update the rows if the column tree has already been initialized\n        Array.from(this.$.items.children).forEach(row => {\n          if (!row.querySelector('[part~=details-cell]')) {\n            this._updateRow(row, this._columnTree[this._columnTree.length - 1]);\n            this._a11yUpdateRowDetailsOpened(row, false);\n          }\n          // Clear any old template instances\n          delete row.querySelector('[part~=details-cell]')._instance;\n        });\n      }\n\n      if (this.detailsOpenedItems.length) {\n        Array.from(this.$.items.children).forEach(this._toggleDetailsCell, this);\n        this._update();\n      }\n    }\n  }\n\n  _detailsOpenedItemsChanged(changeRecord, rowDetailsTemplate, rowDetailsRenderer) {\n    if (changeRecord.path === 'detailsOpenedItems.length' || !changeRecord.value) {\n      // Lets avoid duplicate work of both .splices and .length updates.\n      return;\n    }\n    Array.from(this.$.items.children).forEach(row => {\n      this._toggleDetailsCell(row, row._item);\n      this._a11yUpdateRowDetailsOpened(row, this._isDetailsOpened(row._item));\n      this._toggleAttribute('details-opened', this._isDetailsOpened(row._item), row);\n    });\n  }\n\n  _configureDetailsCell(cell) {\n    cell.setAttribute('part', 'cell details-cell');\n    // Freeze the details cell, so that it does not scroll horizontally\n    // with the normal cells. This way it looks less weird.\n    this._toggleAttribute('frozen', true, cell);\n  }\n\n  _toggleDetailsCell(row, item) {\n    const cell = row.querySelector('[part~=\"details-cell\"]');\n    if (!cell) {\n      return;\n    }\n    const detailsHidden = !this._isDetailsOpened(item);\n    const hiddenChanged = !!cell.hidden !== detailsHidden;\n\n    if (!cell._instance && !cell._renderer || cell.hidden !== detailsHidden) {\n      cell.hidden = detailsHidden;\n      if (detailsHidden) {\n        row.style.removeProperty('padding-bottom');\n      } else {\n        if (this.rowDetailsRenderer) {\n          cell._renderer = this.rowDetailsRenderer;\n          cell._renderer.call(this, cell._content, this, {index: row.index, item: item});\n        } else if (this._rowDetailsTemplate && !cell._instance) {\n          // Stamp the template\n          cell._instance = this._rowDetailsTemplate.templatizer.createInstance();\n          cell._content.innerHTML = '';\n          cell._content.appendChild(cell._instance.root);\n          this._updateItem(row, item);\n        }\n\n        flush();\n        row.style.setProperty('padding-bottom', `${cell.offsetHeight}px`);\n\n        requestAnimationFrame(() => this.notifyResize());\n      }\n    }\n    if (hiddenChanged) {\n      this._updateMetrics();\n      this._positionItems();\n    }\n  }\n\n  _updateDetailsCellHeights() {\n    Array.from(this.$.items.querySelectorAll('[part~=\"details-cell\"]:not([hidden])')).forEach(cell => {\n      cell.parentElement.style.setProperty('padding-bottom', `${cell.offsetHeight}px`);\n    });\n  }\n\n  _isDetailsOpened(item) {\n    return this.detailsOpenedItems && this._getItemIndexInArray(item, this.detailsOpenedItems) !== -1;\n  }\n\n  /**\n   * Open the details row of a given item.\n   */\n  openItemDetails(item) {\n    if (!this._isDetailsOpened(item)) {\n      this.push('detailsOpenedItems', item);\n    }\n  }\n\n  /**\n   * Close the details row of a given item.\n   */\n  closeItemDetails(item) {\n    if (this._isDetailsOpened(item)) {\n      this.splice('detailsOpenedItems', this._getItemIndexInArray(item, this.detailsOpenedItems), 1);\n    }\n  }\n\n  _detailsOpenedInstanceChangedCallback(instance, value) {\n    if (super._detailsOpenedInstanceChangedCallback) {\n      super._detailsOpenedInstanceChangedCallback(instance, value);\n    }\n    if (value) {\n      this.openItemDetails(instance.item);\n    } else {\n      this.closeItemDetails(instance.item);\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\n\nimport { timeOut, animationFrame, microTask } from '@polymer/polymer/lib/utils/async.js';\n\n/**\n * @polymerMixin\n */\nexport const ScrollMixin = superClass => class ScrollMixin extends superClass {\n\n  get _timeouts() {\n    return {\n      SCROLL_PERIOD: 1000,\n      WHEEL_SCROLLING: 200,\n      SCROLLING: 100,\n      IGNORE_WHEEL: 500\n    };\n  }\n\n  static get properties() {\n    return {\n\n      // Cached array of frozen cells\n      _frozenCells: {\n        type: Array,\n        value: function() {\n          return [];\n        },\n      },\n\n      _scrollbarWidth: {\n        type: Number,\n        value: function() {\n          // Create the measurement node\n          var scrollDiv = document.createElement('div');\n          scrollDiv.style.width = '100px';\n          scrollDiv.style.height = '100px';\n          scrollDiv.style.overflow = 'scroll';\n          scrollDiv.style.position = 'absolute';\n          scrollDiv.style.top = '-9999px';\n          document.body.appendChild(scrollDiv);\n          // Get the scrollbar width\n          var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n          // Delete the DIV\n          document.body.removeChild(scrollDiv);\n          return scrollbarWidth;\n        }\n      },\n\n      _rowWithFocusedElement: Element,\n\n      _deltaYAcc: {\n        type: Number,\n        value: 0\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_scrollHeightUpdated(_estScrollHeight)',\n      '_scrollViewportHeightUpdated(_viewportHeight)'\n    ];\n  }\n\n  // Override (from iron-scroll-target-behavior) to avoid document scroll\n  set _scrollTop(top) {\n    this.$.table.scrollTop = top;\n  }\n\n  get _scrollTop() {\n    return this.$.table.scrollTop;\n  }\n\n  constructor() {\n    super();\n    this._scrollLineHeight = this._getScrollLineHeight();\n  }\n\n  /**\n   * @returns {Number|undefined} - The browser's default font-size in pixels\n   */\n  _getScrollLineHeight() {\n    const el = document.createElement('div');\n    el.style.fontSize = 'initial';\n    el.style.display = 'none';\n    document.body.appendChild(el);\n    const fontSize = window.getComputedStyle(el).fontSize;\n    document.body.removeChild(el);\n    return fontSize ? window.parseInt(fontSize) : undefined;\n  }\n\n  _scrollViewportHeightUpdated(_viewportHeight) {\n    this._scrollPageHeight = _viewportHeight - this.$.header.clientHeight - this.$.footer.clientHeight - this._scrollLineHeight;\n  }\n\n  ready() {\n    super.ready();\n    this.scrollTarget = this.$.table;\n\n    this.addEventListener('wheel', e => {\n      this._wheelScrolling = true;\n      this._debouncerWheelScrolling = Debouncer.debounce(\n        this._debouncerWheelScrolling,\n        timeOut.after(this._timeouts.WHEEL_SCROLLING),\n        () => this._wheelScrolling = false\n      );\n      this._onWheel(e);\n    });\n\n    this.$.table.addEventListener('scroll', e => {\n      if (this.$.outerscroller.outerScrolling) {\n        e.stopImmediatePropagation();\n      }\n    }, true);\n\n    this.$.items.addEventListener('focusin', (e) => {\n      const itemsIndex = e.composedPath().indexOf(this.$.items);\n      this._rowWithFocusedElement = e.composedPath()[itemsIndex - 1];\n    });\n    this.$.items.addEventListener('focusout', () => this._rowWithFocusedElement = undefined);\n  }\n\n  /**\n   * Scroll to a specific row index in the virtual list. Note that the row index is\n   * not always the same for any particular item. For example, sorting/filtering/expanding\n   * or collapsing hierarchical items can affect the row index related to an item.\n   *\n   * @param {number} index Row index to scroll to\n   */\n  scrollToIndex(index) {\n    this._accessIronListAPI(() => super.scrollToIndex(index));\n  }\n\n  _onWheel(e) {\n    if (e.ctrlKey || this._hasScrolledAncestor(e.target, e.deltaX, e.deltaY)) {\n      return;\n    }\n\n    const table = this.$.table;\n\n    let deltaY = e.deltaY;\n    if (e.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n      // Scrolling by \"lines of text\" instead of pixels\n      deltaY *= this._scrollLineHeight;\n    } else if (e.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n      // Scrolling by \"pages\" instead of pixels\n      deltaY *= this._scrollPageHeight;\n    }\n\n    if (this._wheelAnimationFrame) {\n      // Skip new wheel events while one is being processed\n      this._deltaYAcc += deltaY;\n      e.preventDefault();\n      return;\n    }\n\n    deltaY += this._deltaYAcc;\n    this._deltaYAcc = 0;\n\n    this._wheelAnimationFrame = true;\n    this._debouncerWheelAnimationFrame = Debouncer.debounce(\n      this._debouncerWheelAnimationFrame,\n      animationFrame,\n      () => this._wheelAnimationFrame = false\n    );\n\n    var momentum = Math.abs(e.deltaX) + Math.abs(deltaY);\n\n    if (this._canScroll(table, e.deltaX, deltaY)) {\n      e.preventDefault();\n      table.scrollTop += deltaY;\n      table.scrollLeft += e.deltaX;\n      this._scrollHandler();\n      this._hasResidualMomentum = true;\n\n      this._ignoreNewWheel = true;\n      this._debouncerIgnoreNewWheel = Debouncer.debounce(\n        this._debouncerIgnoreNewWheel,\n        timeOut.after(this._timeouts.IGNORE_WHEEL),\n        () => this._ignoreNewWheel = false\n      );\n    } else if (this._hasResidualMomentum && momentum <= this._previousMomentum || this._ignoreNewWheel) {\n      e.preventDefault();\n    } else if (momentum > this._previousMomentum) {\n      this._hasResidualMomentum = false;\n    }\n    this._previousMomentum = momentum;\n  }\n\n  /**\n   * Determines if the element has an ancestor prior to this\n   * cell content that handles the scroll delta\n   */\n  _hasScrolledAncestor(el, deltaX, deltaY) {\n    if (el.localName === 'vaadin-grid-cell-content') {\n      return false;\n    } else if (this._canScroll(el, deltaX, deltaY)\n      && ['auto', 'scroll'].indexOf(getComputedStyle(el).overflow) !== -1) {\n      return true;\n    } else if (el !== this && el.parentElement) {\n      return this._hasScrolledAncestor(el.parentElement, deltaX, deltaY);\n    }\n  }\n\n  /**\n   * Determines if the the given scroll deltas can be applied to the element\n   * (fully or partially)\n   */\n  _canScroll(el, deltaX, deltaY) {\n    return (deltaY > 0 && el.scrollTop < el.scrollHeight - el.offsetHeight) ||\n    (deltaY < 0 && el.scrollTop > 0) ||\n    (deltaX > 0 && el.scrollLeft < el.scrollWidth - el.offsetWidth) ||\n    (deltaX < 0 && el.scrollLeft > 0);\n  }\n\n  _scheduleScrolling() {\n    if (!this._scrollingFrame) {\n      // Defer setting state attributes to avoid Edge hiccups\n      this._scrollingFrame = requestAnimationFrame(() => this._toggleAttribute('scrolling', true, this.$.scroller));\n    }\n    this._debounceScrolling = Debouncer.debounce(\n      this._debounceScrolling,\n      timeOut.after(this._timeouts.SCROLLING),\n      () => {\n        cancelAnimationFrame(this._scrollingFrame);\n        delete this._scrollingFrame;\n        this._toggleAttribute('scrolling', false, this.$.scroller);\n        if (!this.$.outerscroller.outerScrolling) {\n          this._reorderRows();\n        }\n      }\n    );\n\n    if (!this._scrollPeriodFrame) {\n      this._scrollPeriodFrame = requestAnimationFrame(() => this._toggleAttribute('scroll-period', true, this.$.scroller));\n    }\n    this._debounceScrollPeriod = Debouncer.debounce(\n      this._debounceScrollPeriod,\n      timeOut.after(this._timeouts.SCROLL_PERIOD),\n      () => {\n        cancelAnimationFrame(this._scrollPeriodFrame);\n        delete this._scrollPeriodFrame;\n        this._toggleAttribute('scroll-period', false, this.$.scroller);\n      }\n    );\n  }\n\n  _afterScroll() {\n    this._translateStationaryElements();\n\n    if (!this.hasAttribute('reordering')) {\n      this._scheduleScrolling();\n    }\n\n    const os = this.$.outerscroller;\n    if (!this._ios && (this._wheelScrolling || os.passthrough)) {\n      os.syncOuterScroller();\n    }\n\n    if (this._ios) {\n      // Enable vertical rubberband feedback\n      const overScroll = Math.max(-os.scrollTop, 0) ||\n        Math.min(0, os.scrollHeight - os.scrollTop - os.offsetHeight);\n      this.$.items.style.transform = `translateY(${overScroll}px)`;\n    }\n\n    this._updateOverflow();\n  }\n\n  _updateOverflow() {\n    // Set overflow styling attributes\n    let overflow = '';\n    const table = this.$.table;\n    if (table.scrollTop < table.scrollHeight - table.clientHeight) {\n      overflow += ' bottom';\n    }\n\n    if (table.scrollTop > 0) {\n      overflow += ' top';\n    }\n\n    if (table.scrollLeft < table.scrollWidth - table.clientWidth) {\n      overflow += ' right';\n    }\n\n    if (table.scrollLeft > 0) {\n      overflow += ' left';\n    }\n\n    this._debounceOverflow = Debouncer.debounce(\n      this._debounceOverflow,\n      animationFrame,\n      () => {\n        const value = overflow.trim();\n        if (value.length > 0 && this.getAttribute('overflow') !== value) {\n          this.setAttribute('overflow', value);\n        } else if (value.length == 0 && this.hasAttribute('overflow')) {\n          this.removeAttribute('overflow');\n        }\n      }\n    );\n  }\n\n  // correct order needed for preserving correct tab order between cell contents.\n  _reorderRows() {\n    const body = this.$.items;\n    const items = body.querySelectorAll('tr');\n    if (!items.length) {\n      return;\n    }\n\n    const adjustedVirtualStart = this._virtualStart + this._vidxOffset;\n\n    // Which row to use as a target?\n    const targetRow = this._rowWithFocusedElement || Array.from(items).filter(row => !row.hidden)[0];\n    if (!targetRow) {\n      // All rows are hidden, don't reorder\n      return;\n    }\n\n    // Where the target row should be?\n    const targetPhysicalIndex = targetRow.index - adjustedVirtualStart;\n\n    // Reodrer the DOM elements to keep the target row at the target physical index\n    const delta = Array.from(items).indexOf(targetRow) - targetPhysicalIndex;\n    if (delta > 0) {\n      for (let i = 0; i < delta; i++) {\n        body.appendChild(items[i]);\n      }\n    } else if (delta < 0) {\n      for (let i = items.length + delta; i < items.length; i++) {\n        body.insertBefore(items[i], items[0]);\n      }\n    }\n  }\n\n  _frozenCellsChanged() {\n    this._debouncerCacheElements = Debouncer.debounce(\n      this._debouncerCacheElements,\n      microTask,\n      () => {\n        Array.from(this.root.querySelectorAll('[part~=\"cell\"]')).forEach(function(cell) {\n          cell.style.transform = '';\n        });\n        this._frozenCells = Array.prototype.slice.call(this.$.table.querySelectorAll('[frozen]'));\n        this._updateScrollerMeasurements();\n        this._translateStationaryElements();\n      }\n    );\n    this._updateLastFrozen();\n  }\n\n  _updateScrollerMeasurements() {\n    if (this._frozenCells.length > 0 && this.__isRTL) {\n      this.__scrollerMetrics = {\n        scrollWidth: this.$.outerscroller.scrollWidth,\n        clientWidth: this.$.outerscroller.clientWidth\n      };\n    }\n  }\n\n  _updateLastFrozen() {\n    if (!this._columnTree) {\n      return;\n    }\n\n    const columnsRow = this._columnTree[this._columnTree.length - 1].slice(0);\n    columnsRow.sort((a, b) => {\n      return a._order - b._order;\n    });\n    const lastFrozen = columnsRow.reduce((prev, col, index) => {\n      col._lastFrozen = false;\n      return col.frozen && !col.hidden ? index : prev;\n    }, undefined);\n    if (lastFrozen !== undefined) {\n      columnsRow[lastFrozen]._lastFrozen = true;\n    }\n  }\n\n  _translateStationaryElements() {\n    if (this._edge && !this._scrollbarWidth) {\n      // Fixed mode (Tablet Edge)\n      this.$.items.style.transform =\n      this._getTranslate(-this._scrollLeft || 0, -this._scrollTop || 0);\n\n      this.$.footer.style.transform = this.$.header.style.transform =\n      this._getTranslate(-this._scrollLeft || 0, 0);\n    } else {\n      this.$.footer.style.transform = this.$.header.style.transform = this._getTranslate(0, this._scrollTop);\n    }\n\n    if (this._frozenCells.length > 0) {\n      const x = this.__isRTL ?\n        this.__getNormalizedScrollLeft(this.$.table) + this.__scrollerMetrics.clientWidth -\n        this.__scrollerMetrics.scrollWidth\n        : this._scrollLeft;\n      var frozenCellTransform = this._getTranslate(x, 0);\n      for (var i = 0; i < this._frozenCells.length; i++) {\n        this._frozenCells[i].style.transform = frozenCellTransform;\n      }\n    }\n  }\n\n  _getTranslate(x, y) {\n    return 'translate(' + x + 'px,' + y + 'px)';\n  }\n\n  _scrollHeightUpdated(_estScrollHeight) {\n    this.$.outersizer.style.top = this.$.fixedsizer.style.top = _estScrollHeight + 'px';\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const SelectionMixin = superClass => class SelectionMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * An array that contains the selected items.\n       */\n      selectedItems: {\n        type: Object,\n        notify: true,\n        value: () => []\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_selectedItemsChanged(selectedItems.*)'\n    ];\n  }\n\n  _isSelected(item) {\n    return this.selectedItems && this._getItemIndexInArray(item, this.selectedItems) > -1;\n  }\n\n  /**\n   * Selects the given item.\n   *\n   * @method selectItem\n   * @param {Object} item The item object\n   */\n  selectItem(item) {\n    if (!this._isSelected(item)) {\n      this.push('selectedItems', item);\n    }\n  }\n\n  /**\n   * Deselects the given item if it is already selected.\n   *\n   * @method deselect\n   * @param {Object} item The item object\n   */\n  deselectItem(item) {\n    const index = this._getItemIndexInArray(item, this.selectedItems);\n    if (index > -1) {\n      this.splice('selectedItems', index, 1);\n    }\n  }\n\n  /**\n   * Toggles the selected state of the given item.\n   *\n   * @method toggle\n   * @param {Object} item The item object\n   */\n  _toggleItem(item) {\n    const index = this._getItemIndexInArray(item, this.selectedItems);\n    if (index === -1) {\n      this.selectItem(item);\n    } else {\n      this.deselectItem(item);\n    }\n  }\n\n  _selectedItemsChanged(e) {\n    if (this.$.items.children.length && (e.path === 'selectedItems' || e.path === 'selectedItems.splices')) {\n      Array.from(this.$.items.children).forEach(row => {\n        this._updateItem(row, row._item);\n      });\n    }\n  }\n\n  _selectedInstanceChangedCallback(instance, value) {\n    if (super._selectedInstanceChangedCallback) {\n      super._selectedInstanceChangedCallback(instance, value);\n    }\n    if (value) {\n      this.selectItem(instance.item);\n    } else {\n      this.deselectItem(instance.item);\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { microTask } from '@polymer/polymer/lib/utils/async.js';\n\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n/**\n * @polymerMixin\n */\nexport const SortMixin = superClass => class SortMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * When `true`, all `<vaadin-grid-sorter>` are applied for sorting.\n       */\n      multiSort: {\n        type: Boolean,\n        value: false\n      },\n\n      _sorters: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      _previousSorters: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('sorter-changed', this._onSorterChanged);\n\n    // With Polymer 2 & shady the 'sorter-changed' listener isn't guaranteed to be registered\n    // before child <vaadin-grid-sorter>'s upgrade and fire the events. The following\n    // makes sure that 'sorter-changed' is fired for all <vaadin-grid-sorter> elements\n    // after this (<vaadin-grid>) is ready (and the listeners are active).\n    if (window.ShadyDOM) {\n      microTask.run(() => {\n        const sorters = this.querySelectorAll('vaadin-grid-sorter');\n        Array.from(sorters).forEach((sorter) => {\n          // Don't try to fire if the sorter hasn't been upgraded yet\n          if (sorter instanceof PolymerElement) {\n            sorter.dispatchEvent(new CustomEvent('sorter-changed', {bubbles: true, composed: true}));\n          }\n        });\n      });\n    }\n  }\n\n  _onSorterChanged(e) {\n    const sorter = e.target;\n\n    this._removeArrayItem(this._sorters, sorter);\n    sorter._order = null;\n\n    if (this.multiSort) {\n      if (sorter.direction) {\n        this._sorters.unshift(sorter);\n      }\n\n      this._sorters.forEach((sorter, index) => sorter._order = this._sorters.length > 1 ? index : null, this);\n    } else {\n      if (sorter.direction) {\n        this._sorters.forEach(sorter => {\n          sorter._order = null;\n          sorter.direction = null;\n        });\n        this._sorters = [sorter];\n      }\n    }\n\n    e.stopPropagation();\n\n    if (this.dataProvider &&\n      // No need to clear cache if sorters didn't change\n      JSON.stringify(this._previousSorters) !== JSON.stringify(this._mapSorters())) {\n      this.clearCache();\n    }\n\n    this._a11yUpdateSorters();\n\n    this._previousSorters = this._mapSorters();\n  }\n\n  _mapSorters() {\n    return this._sorters.map(sorter => {\n      return {\n        path: sorter.path,\n        direction: sorter.direction\n      };\n    });\n  }\n\n  _removeArrayItem(array, item) {\n    const index = array.indexOf(item);\n    if (index > -1) {\n      array.splice(index, 1);\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const StylingMixin = superClass => class StylingMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * A function that allows generating CSS class names for grid cells\n       * based on their row and column. The return value should be the generated\n       * class name as a string, or multiple class names separated by whitespace\n       * characters.\n       *\n       * Receives two arguments:\n       * - `column` The `<vaadin-grid-column>` element (`undefined` for details-cell).\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       *   - `rowData.expanded` Sublevel toggle state.\n       *   - `rowData.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `rowData.selected` Selected state.\n       */\n      cellClassNameGenerator: Function\n    };\n  }\n\n  static get observers() {\n    return [\n      '__cellClassNameGeneratorChanged(cellClassNameGenerator)'\n    ];\n  }\n\n  __cellClassNameGeneratorChanged(cellClassGenerator) {\n    this.generateCellClassNames();\n  }\n\n  /**\n   * Runs the `cellClassNameGenerator` for the visible cells.\n   * If the generator depends on varying conditions, you need to\n   * call this function manually in order to update the styles when\n   * the conditions change.\n   */\n  generateCellClassNames() {\n    Array.from(this.$.items.children).filter(row => !row.hidden).forEach(\n      row => this._generateCellClassNames(row, this.__getRowModel(row)));\n  }\n\n  _generateCellClassNames(row, rowData) {\n    Array.from(row.children).forEach(cell => {\n      if (cell.__generatedClasses) {\n        cell.__generatedClasses.forEach(className => cell.classList.remove(className));\n      }\n      if (this.cellClassNameGenerator) {\n        const result = this.cellClassNameGenerator(cell._column, rowData);\n        cell.__generatedClasses = result && result.split(' ').filter(className => className.length > 0);\n        if (cell.__generatedClasses) {\n          cell.__generatedClasses.forEach(className => cell.classList.add(className));\n        }\n      }\n    });\n  }\n};\n","/**\n@license\nCopyright (c) 2019 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nconst DropMode = {\n  BETWEEN: 'between',\n  ON_TOP: 'on-top',\n  ON_TOP_OR_BETWEEN: 'on-top-or-between',\n  ON_GRID: 'on-grid'\n};\n\nconst DropLocation = {\n  ON_TOP: 'on-top',\n  ABOVE: 'above',\n  BELOW: 'below',\n  EMPTY: 'empty'\n};\n\n/**\n * @polymerMixin\n */\nexport const DragAndDropMixin = superClass => class DragAndDropMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * Defines the locations within the Grid row where an element can be dropped.\n       *\n       * Possible values are:\n       * - `between`: The drop event can happen between Grid rows.\n       * - `on-top`: The drop event can happen on top of Grid rows.\n       * - `on-top-or-between`: The drop event can happen either on top of or between Grid rows.\n       * - `on-grid`: The drop event will not happen on any specific row, it will show the drop target outline around the whole grid.\n       */\n      dropMode: String,\n\n      /**\n       * Marks the grid's rows to be available for dragging.\n       */\n      rowsDraggable: Boolean,\n\n      /**\n       * A function that filters dragging of specific grid rows. The return value should be false\n       * if dragging of the row should be disabled.\n       *\n       * Receives one argument:\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       *   - `rowData.expanded` Sublevel toggle state.\n       *   - `rowData.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `rowData.selected` Selected state.\n       */\n      dragFilter: Function,\n\n      /**\n       * A function that filters dropping on specific grid rows. The return value should be false\n       * if dropping on the row should be disabled.\n       *\n       * Receives one argument:\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       *   - `rowData.expanded` Sublevel toggle state.\n       *   - `rowData.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `rowData.selected` Selected state.\n       */\n      dropFilter: Function,\n\n      __dndAutoScrollThreshold: {\n        value: 50\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    this.$.table.addEventListener('dragstart', this._onDragStart.bind(this));\n    this.$.table.addEventListener('dragend', this._onDragEnd.bind(this));\n    this.$.table.addEventListener('dragover', this._onDragOver.bind(this));\n    this.$.table.addEventListener('dragleave', this._onDragLeave.bind(this));\n    this.$.table.addEventListener('drop', this._onDrop.bind(this));\n    this.$.table.addEventListener('dragenter', e => {\n      if (this.dropMode) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    });\n\n  }\n\n  _onDragStart(e) {\n    if (this.rowsDraggable) {\n      let row = e.target;\n      if (row.localName === 'vaadin-grid-cell-content') {\n        // The draggable node is the cell content element on browsers that support native shadow\n        row = row.assignedSlot.parentNode.parentNode;\n      }\n      if (row.parentNode !== this.$.items) {\n        return;\n      }\n\n      e.stopPropagation();\n      this._toggleAttribute('dragging-rows', true, this);\n\n      if (this._safari) {\n        // Safari doesn't get proper drag images from transformed\n        // elements so we need to switch to top temporarily\n        const transform = row.style.transform;\n        row.style.top = /translateY\\((.*)\\)/.exec(transform)[1];\n        row.style.transform = 'none';\n        requestAnimationFrame(() => {\n          row.style.top = '';\n          row.style.transform = transform;\n        });\n      }\n\n      const rowRect = row.getBoundingClientRect();\n      if (!window.ShadyDOM) {\n        if (this._ios) {\n          e.dataTransfer.setDragImage(row);\n        } else {\n          e.dataTransfer.setDragImage(row, e.clientX - rowRect.left, e.clientY - rowRect.top);\n        }\n\n      }\n\n      let rows = [row];\n      if (this._isSelected(row._item)) {\n        rows = this.__getViewportRows()\n          .filter(row => this._isSelected(row._item))\n          .filter(row => !this.dragFilter || this.dragFilter(this.__getRowModel(row)));\n      }\n\n      // Set the default transfer data\n      e.dataTransfer.setData('text', this.__formatDefaultTransferData(rows));\n\n      row.setAttribute('dragstart', rows.length > 1 ? rows.length : '');\n      this.updateStyles({\n        '--_grid-drag-start-x': `${e.clientX - rowRect.left + 20}px`,\n        '--_grid-drag-start-y': `${e.clientY - rowRect.top + 10}px`\n      });\n\n      requestAnimationFrame(() => {\n        row.removeAttribute('dragstart');\n        this.updateStyles({'--_grid-drag-start-x': '', '--_grid-drag-start-y': ''});\n      });\n\n      const event = new CustomEvent('grid-dragstart', {\n        detail: {\n          draggedItems: rows.map(row => row._item),\n          setDragData: (type, data) => e.dataTransfer.setData(type, data),\n          setDraggedItemsCount: count => row.setAttribute('dragstart', count)\n        }\n      });\n      event.originalEvent = e;\n      this.dispatchEvent(event);\n    }\n  }\n\n  _onDragEnd(e) {\n    this._toggleAttribute('dragging-rows', false, this);\n    e.stopPropagation();\n    const event = new CustomEvent('grid-dragend');\n    event.originalEvent = e;\n    this.dispatchEvent(event);\n  }\n\n  _onDragLeave(e) {\n    e.stopPropagation();\n    this._clearDragStyles();\n  }\n\n  _onDragOver(e) {\n\n    if (this.dropMode) {\n      this._dropLocation = undefined;\n      this._dragOverItem = undefined;\n\n      if (this.__dndAutoScroll(e.clientY)) {\n        this._clearDragStyles();\n        return;\n      }\n\n      let row = e.composedPath().filter(node => node.localName === 'tr')[0];\n\n      if (!this._effectiveSize || this.dropMode === DropMode.ON_GRID) {\n        // The grid is empty or \"on-grid\" drop mode was used, always default to \"empty\"\n        this._dropLocation = DropLocation.EMPTY;\n      } else if (!row || row.parentNode !== this.$.items) {\n        // The dragover didn't occur on a body row but the grid has items\n        if (row) {\n          // The dragover occurred over a header/footer row\n          return;\n        } else if (this.dropMode === DropMode.BETWEEN || this.dropMode === DropMode.ON_TOP_OR_BETWEEN) {\n          // The drop mode allows setting the last row as the drag over item\n          row = Array.from(this.$.items.children).filter(row => !row.hidden).pop();\n          this._dropLocation = DropLocation.BELOW;\n        } else {\n          // Drop mode on-top used but the dragover didn't occur over one of the existing rows\n          return;\n        }\n      } else {\n        // The dragover occurred on a body row, determine the drop location from coordinates\n        const rowRect = row.getBoundingClientRect();\n\n        this._dropLocation = DropLocation.ON_TOP;\n\n        if (this.dropMode === DropMode.BETWEEN) {\n          const dropAbove = e.clientY - rowRect.top < rowRect.bottom - e.clientY;\n          this._dropLocation = dropAbove ? DropLocation.ABOVE : DropLocation.BELOW;\n\n        } else if (this.dropMode === DropMode.ON_TOP_OR_BETWEEN) {\n          if (e.clientY - rowRect.top < rowRect.height / 3) {\n            this._dropLocation = DropLocation.ABOVE;\n          } else if (e.clientY - rowRect.top > (rowRect.height / 3) * 2) {\n            this._dropLocation = DropLocation.BELOW;\n          }\n        }\n      }\n\n      if (row && row.hasAttribute('drop-disabled')) {\n        this._dropLocation = undefined;\n        return;\n      }\n\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (this._dropLocation === DropLocation.EMPTY) {\n        this._toggleAttribute('dragover', true, this);\n      } else if (row) {\n        this._dragOverItem = row._item;\n        if (row.getAttribute('dragover') !== this._dropLocation) {\n          row.setAttribute('dragover', this._dropLocation);\n        }\n      } else {\n        this._clearDragStyles();\n      }\n    }\n  }\n\n  __dndAutoScroll(clientY) {\n    if (this.__dndAutoScrolling) {\n      return true;\n    }\n\n    const headerBottom = this.$.header.getBoundingClientRect().bottom;\n    const footerTop = this.$.footer.getBoundingClientRect().top;\n    const topDiff = headerBottom - clientY + this.__dndAutoScrollThreshold;\n    const bottomDiff = clientY - footerTop + this.__dndAutoScrollThreshold;\n    let scrollTopDelta = 0;\n\n    if (bottomDiff > 0) {\n      scrollTopDelta = bottomDiff * 2;\n    } else if (topDiff > 0) {\n      scrollTopDelta = -topDiff * 2;\n    }\n\n    if (scrollTopDelta) {\n      const scrollTop = this.$.table.scrollTop;\n      this.$.table.scrollTop += scrollTopDelta;\n      const scrollTopChanged = scrollTop !== this.$.table.scrollTop;\n      if (scrollTopChanged) {\n        this.__dndAutoScrolling = true;\n        // Disallow more auto-scrolls within 20ms\n        setTimeout(() => this.__dndAutoScrolling = false, 20);\n        this._scrollHandler();\n        return true;\n      }\n    }\n  }\n\n  __getViewportRows() {\n    const headerBottom = this.$.header.getBoundingClientRect().bottom;\n    const footerTop = this.$.footer.getBoundingClientRect().top;\n    return Array.from(this.$.items.children)\n      .filter(row => {\n        const rowRect = row.getBoundingClientRect();\n        return rowRect.bottom > headerBottom && rowRect.top < footerTop;\n      });\n  }\n\n  _clearDragStyles() {\n    this.removeAttribute('dragover');\n    Array.from(this.$.items.children).forEach(row => row.removeAttribute('dragover'));\n  }\n\n  _onDrop(e) {\n    if (this.dropMode) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const dragData = e.dataTransfer.types && Array.from(e.dataTransfer.types).map(type => {\n        return {\n          type,\n          data: e.dataTransfer.getData(type)\n        };\n      });\n\n      this._clearDragStyles();\n\n      const event = new CustomEvent('grid-drop', {\n        bubbles: e.bubbles,\n        cancelable: e.cancelable,\n        detail: {\n          dropTargetItem: this._dragOverItem,\n          dropLocation: this._dropLocation,\n          dragData\n        }\n      });\n      event.originalEvent = e;\n      this.dispatchEvent(event);\n    }\n  }\n\n  __formatDefaultTransferData(rows) {\n    return rows\n      .map(row => {\n        return Array.from(row.children)\n          .filter(cell => !cell.hidden && cell.getAttribute('part').indexOf('details-cell') === -1)\n          .sort((a, b) => {\n            return a._column._order > b._column._order ? 1 : -1;\n          })\n          .map(cell => cell._content.textContent.trim())\n          .filter(content => content)\n          .join('\\t');\n      })\n      .join('\\n');\n  }\n\n  _dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter) {\n    this.filterDragAndDrop();\n  }\n\n  /**\n   * Runs the `dragFilter` and `dropFilter` hooks for the visible cells.\n   * If the filter depends on varying conditions, you may need to\n   * call this function manually in order to update the draggability when\n   * the conditions change.\n   */\n  filterDragAndDrop() {\n    Array.from(this.$.items.children).filter(row => !row.hidden).forEach(\n      row => {\n        this._filterDragAndDrop(row, this.__getRowModel(row));\n      }\n    );\n  }\n\n  _filterDragAndDrop(row, rowData) {\n    const dragDisabled = !this.rowsDraggable || (this.dragFilter && !this.dragFilter(rowData));\n    const dropDisabled = !this.dropMode || (this.dropFilter && !this.dropFilter(rowData));\n\n    const draggableElements = window.ShadyDOM\n      ? [row]\n      : Array.from(row.children).map(cell => cell._content);\n\n    draggableElements.forEach(e => {\n      if (dragDisabled) {\n        e.removeAttribute('draggable');\n      } else {\n        e.setAttribute('draggable', true);\n      }\n    });\n\n    this._toggleAttribute('drag-disabled', dragDisabled, row);\n    this._toggleAttribute('drop-disabled', dropDisabled, row);\n  }\n\n  /**\n   * Fired when starting to drag grid rows.\n   *\n   * @event grid-dragstart\n   * @param {Object} originalEvent The native dragstart event\n   * @param {Object} detail\n   * @param {Object} detail.draggedItems the items in the visible viewport that are dragged\n   * @param {Function} detail.setDraggedItemsCount Overrides the default number shown in the drag image on multi row drag.\n   * Parameter is of type number.\n   * @param {Function} detail.setDragData Sets dataTransfer data for the drag operation.\n   * Note that \"text\" is the only data type supported by all the browsers the grid currently supports (including IE11).\n   * The function takes two parameters:\n   * - type:string The type of the data\n   * - data:string The data\n   */\n\n  /**\n   * Fired when the dragging of the rows ends.\n   *\n   * @event grid-dragend\n   * @param {Object} originalEvent The native dragend event\n   */\n\n  /**\n   * Fired when a drop occurs on top of the grid.\n   *\n   * @event grid-drop\n   * @param {Object} originalEvent The native drop event\n   * @param {Object} detail\n   * @param {Object} detail.dropTargetItem The item of the grid row on which the drop occurred.\n   * @param {string} detail.dropLocation The position at which the drop event took place relative to a row.\n   * Depending on the dropMode value, the drop location can be one of the following\n   * - `on-top`: when the drop occurred on top of the row\n   * - `above`: when the drop occurred above the row\n   * - `below`: when the drop occurred below the row\n   * - `empty`: when the drop occurred over the grid, not relative to any specific row\n   * @param {string} detail.dragData An array of items with the payload as a string representation as the\n   * `data` property and the type of the data as `type` property.\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const KeyboardNavigationMixin = superClass => class KeyboardNavigationMixin extends superClass {\n  static get properties() {\n    return {\n      _headerFocusable: {\n        type: Object,\n        observer: '_focusableChanged'\n      },\n      _itemsFocusable: {\n        type: Object,\n        observer: '_focusableChanged'\n      },\n      _footerFocusable: {\n        type: Object,\n        observer: '_focusableChanged'\n      },\n      _navigatingIsHidden: Boolean,\n      _focusedItemIndex: {\n        type: Number,\n        value: 0\n      },\n      _focusedColumnOrder: Number\n    };\n  }\n\n  ready() {\n    super.ready();\n\n    if (this._ios || this._android) {\n      // Disable keyboard navigation on mobile devices\n      return;\n    }\n\n    this.addEventListener('keydown', this._onKeyDown);\n    this.addEventListener('keyup', this._onKeyUp);\n\n    this.addEventListener('focusin', this._onFocusIn);\n    this.addEventListener('focusout', this._onFocusOut);\n\n    // When focus goes from cell to another cell, focusin/focusout events do\n    // not escape the grids shadowRoot, thus listening inside the shadowRoot.\n    this.$.table.addEventListener('focusin', this._onCellFocusIn.bind(this));\n    this.$.table.addEventListener('focusout', this._onCellFocusOut.bind(this));\n\n    this.addEventListener('mousedown', () => {\n      this._toggleAttribute('navigating', false, this);\n      this._isMousedown = true;\n    });\n    this.addEventListener('mouseup', () => this._isMousedown = false);\n  }\n\n  _focusableChanged(focusable, oldFocusable) {\n    if (oldFocusable) {\n      oldFocusable.setAttribute('tabindex', '-1');\n    }\n    if (focusable) {\n      focusable.setAttribute('tabindex', '0');\n    }\n  }\n\n  _onKeyDown(e) {\n    // Ensure standard key value, unified across browsers\n    let key = e.key;\n    if (key === 'Up' || key === 'Down' || key === 'Left' || key === 'Right') {\n      // MSIE & Edge\n      key = 'Arrow' + key;\n    }\n    if (key === 'Esc') {\n      // MSIE & Edge\n      key = 'Escape';\n    }\n    if (key === 'Spacebar') {\n      // MSIE\n      key = ' ';\n    }\n\n    let keyGroup;\n    switch (key) {\n      case 'ArrowUp':\n      case 'ArrowDown':\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'PageUp':\n      case 'PageDown':\n      case 'Home':\n      case 'End':\n        keyGroup = 'Navigation';\n        break;\n      case 'Enter':\n      case 'Escape':\n      case 'F2':\n        keyGroup = 'Interaction';\n        break;\n      case 'Tab':\n        keyGroup = 'Tab';\n        break;\n      case ' ':\n        keyGroup = 'Space';\n        break;\n    }\n\n    this._detectInteracting(e);\n    if (this.hasAttribute('interacting') && keyGroup !== 'Interaction') {\n      // When in the interacting mode, only the Interaction keys are handled.\n      keyGroup = undefined;\n    }\n\n    if (keyGroup) {\n      this[`_on${keyGroup}KeyDown`](e, key);\n    }\n  }\n\n  _ensureScrolledToIndex(index) {\n    const targetRowInDom = Array.from(this.$.items.children).filter(child => child.index === index)[0];\n    if (!targetRowInDom) {\n      this._scrollToIndex(index);\n    }\n  }\n\n  _onNavigationKeyDown(e, key) {\n    e.preventDefault();\n\n    function indexOfChildElement(el) {\n      return Array.prototype.indexOf.call(el.parentNode.children, el);\n    }\n\n    const visibleItemsCount = this._lastVisibleIndex - this._firstVisibleIndex - 1;\n\n    let dx = 0, dy = 0;\n    switch (key) {\n      case 'ArrowRight':\n        dx = this.__isRTL ? -1 : 1;\n        break;\n      case 'ArrowLeft':\n        dx = this.__isRTL ? 1 : -1;\n        break;\n      case 'Home':\n        dx = -Infinity;\n        e.ctrlKey && (dy = -Infinity);\n        break;\n      case 'End':\n        dx = Infinity;\n        e.ctrlKey && (dy = Infinity);\n        break;\n      case 'ArrowDown':\n        dy = 1;\n        break;\n      case 'ArrowUp':\n        dy = -1;\n        break;\n      case 'PageDown':\n        dy = visibleItemsCount;\n        break;\n      case 'PageUp':\n        dy = -visibleItemsCount;\n        break;\n    }\n\n    const activeCell = e.composedPath()[0];\n    const columnIndex = indexOfChildElement(activeCell);\n    const isRowDetails = this._elementMatches(activeCell, '[part~=\"details-cell\"]');\n\n    const activeRow = activeCell.parentNode;\n\n    const activeRowGroup = activeRow.parentNode;\n    const maxRowIndex = (activeRowGroup === this.$.items ? this._effectiveSize : activeRowGroup.children.length) - 1;\n\n    // Body rows have index property, otherwise DOM child index of the row is used.\n    const rowIndex = (activeRowGroup === this.$.items) ?\n      (this._focusedItemIndex !== undefined ? this._focusedItemIndex : activeRow.index) :\n      indexOfChildElement(activeRow);\n\n    // Index of the destination row\n    let dstRowIndex = Math.max(0, Math.min(rowIndex + dy, maxRowIndex));\n\n    // Row details navigation logic\n    let dstIsRowDetails = false;\n    if (activeRowGroup === this.$.items) {\n      const item = activeRow._item;\n      const dstItem = this._cache.getItemForIndex(dstRowIndex);\n      // Should we navigate to row details?\n      if (isRowDetails) {\n        dstIsRowDetails = dy === 0;\n      } else {\n        dstIsRowDetails = dy === 1 && this._isDetailsOpened(item) ||\n          dy === -1 && dstRowIndex !== rowIndex && this._isDetailsOpened(dstItem);\n      }\n      // Should we navigate between details and regular cells of the same row?\n      if (dstIsRowDetails !== isRowDetails &&\n          (dy === 1 && dstIsRowDetails || dy === -1 && !dstIsRowDetails)) {\n        dstRowIndex = rowIndex;\n      }\n    }\n\n    // Header and footer could have hidden rows, e. g., if none of the columns\n    // or groups on the given column tree level define template. Skip them\n    // in vertical keyboard navigation.\n    if (activeRowGroup !== this.$.items) {\n      if (dstRowIndex > rowIndex) {\n        while (\n          dstRowIndex < maxRowIndex &&\n          activeRowGroup.children[dstRowIndex].hidden\n        ) {\n          dstRowIndex++;\n        }\n      } else if (dstRowIndex < rowIndex) {\n        while (\n          dstRowIndex > 0 &&\n          activeRowGroup.children[dstRowIndex].hidden\n        ) {\n          dstRowIndex--;\n        }\n      }\n    }\n\n    // _focusedColumnOrder is memoized  this is to ensure predictable\n    // navigation when entering and leaving detail and column group cells.\n    if (this._focusedColumnOrder === undefined) {\n      if (isRowDetails) {\n        this._focusedColumnOrder = 0;\n      } else {\n        this._focusedColumnOrder = this._getColumns(activeRowGroup, rowIndex).filter(c => !c.hidden)[columnIndex]._order;\n      }\n    }\n\n    // Find orderedColumnIndex  the index of order closest matching the\n    // original _focusedColumnOrder in the sorted array of orders\n    // of the visible columns on the destination row.\n    const dstColumns = this._getColumns(activeRowGroup, dstRowIndex).filter(c => !c.hidden);\n    const dstSortedColumnOrders = dstColumns.map(c => c._order)\n      .sort((b, a) => (b - a));\n    const maxOrderedColumnIndex = dstSortedColumnOrders.length - 1;\n    const orderedColumnIndex = dstSortedColumnOrders.indexOf(\n      dstSortedColumnOrders.slice(0).sort((b, a) =>\n        Math.abs(b - this._focusedColumnOrder) - Math.abs(a - this._focusedColumnOrder)\n      )[0]\n    );\n\n    // Index of the destination column order\n    const dstOrderedColumnIndex = (dy === 0 && isRowDetails) ? orderedColumnIndex :\n      Math.max(0, Math.min(orderedColumnIndex + dx, maxOrderedColumnIndex));\n\n    if (dstOrderedColumnIndex !== orderedColumnIndex) {\n      // Horizontal movement invalidates stored _focusedColumnOrder\n      this._focusedColumnOrder = undefined;\n    }\n\n    // Ensure correct vertical scroll position, destination row is visible\n    if (activeRowGroup === this.$.items) {\n      this._ensureScrolledToIndex(dstRowIndex);\n    }\n\n    // This has to be set after scrolling, otherwise it can be removed by\n    // `_preventScrollerRotatingCellFocus(item, index)` during scrolling.\n    this._toggleAttribute('navigating', true, this);\n\n    const columnIndexByOrder = dstColumns.reduce((acc, col, i) => (acc[col._order] = i, acc), {});\n    const dstColumnIndex = columnIndexByOrder[dstSortedColumnOrders[dstOrderedColumnIndex]];\n\n    // For body rows, use index property to find destination row, otherwise use DOM child index\n    const dstRow = activeRowGroup === this.$.items ?\n      Array.from(activeRowGroup.children).filter(el => el.index === dstRowIndex)[0] :\n      activeRowGroup.children[dstRowIndex];\n    if (!dstRow) {\n      return;\n    }\n\n    // Here we go!\n    const dstCell = dstIsRowDetails ?\n      Array.from(dstRow.children)\n        .filter(el => this._elementMatches(el, '[part~=\"details-cell\"]'))[0] :\n      dstRow.children[dstColumnIndex];\n    this._scrollHorizontallyToCell(dstCell);\n    if (activeRowGroup === this.$.items) {\n      // When scrolling with repeated keydown, sometimes FocusEvent listeners\n      // are too late to update _focusedItemIndex. Ensure next keydown\n      // listener invocation gets updated _focusedItemIndex value.\n      this._focusedItemIndex = dstRowIndex;\n    }\n\n    if (activeRowGroup === this.$.items) {\n      const dstRect = dstCell.getBoundingClientRect();\n      const footerTop = this.$.footer.getBoundingClientRect().top;\n      const headerBottom = this.$.header.getBoundingClientRect().bottom;\n      if (dstRect.bottom > footerTop) {\n        this.$.table.scrollTop += dstRect.bottom - footerTop;\n        this._scrollHandler();\n      } else if (dstRect.top < headerBottom) {\n        this.$.table.scrollTop -= headerBottom - dstRect.top;\n        this._scrollHandler();\n      }\n    }\n\n    dstCell.focus();\n  }\n\n  _parseEventPath(path) {\n    const tableIndex = path.indexOf(this.$.table);\n    return {\n      rowGroup: path[tableIndex - 1],\n      row: path[tableIndex - 2],\n      cell: path[tableIndex - 3]\n    };\n  }\n\n  _onInteractionKeyDown(e, key) {\n    const localTarget = e.composedPath()[0];\n    const localTargetIsTextInput = localTarget.localName === 'input' &&\n      !/^(button|checkbox|color|file|image|radio|range|reset|submit)$/i.test(localTarget.type);\n\n    let wantInteracting;\n    switch (key) {\n      case 'Enter':\n        wantInteracting = this.hasAttribute('interacting') ? !localTargetIsTextInput : true;\n        break;\n      case 'Escape':\n        wantInteracting = false;\n        break;\n      case 'F2':\n        wantInteracting = !this.hasAttribute('interacting');\n        break;\n    }\n\n    const {cell} = this._parseEventPath(e.composedPath());\n\n    if (this.hasAttribute('interacting') !== wantInteracting) {\n      if (wantInteracting) {\n        const focusTarget = cell._content.querySelector('[focus-target]') ||\n          cell._content.firstElementChild;\n        if (focusTarget) {\n          e.preventDefault();\n          focusTarget.focus();\n          this._toggleAttribute('interacting', true, this);\n          this._toggleAttribute('navigating', false, this);\n        }\n      } else {\n        e.preventDefault();\n        this._focusedColumnOrder = undefined;\n        cell.focus();\n        this._toggleAttribute('interacting', false, this);\n        this._toggleAttribute('navigating', true, this);\n      }\n    }\n  }\n\n  _predictFocusStepTarget(srcElement, step) {\n    const tabOrder = [\n      this.$.table,\n      this._headerFocusable,\n      this._itemsFocusable,\n      this._footerFocusable,\n      this.$.focusexit\n    ];\n\n    let index = tabOrder.indexOf(srcElement);\n\n    index += step;\n    while (index >= 0 && index <= tabOrder.length - 1 &&\n        (!tabOrder[index] || tabOrder[index].parentNode.hidden)) {\n      index += step;\n    }\n\n    return tabOrder[index];\n  }\n\n  _onTabKeyDown(e) {\n    const focusTarget = this._predictFocusStepTarget(e.composedPath()[0], e.shiftKey ? -1 : 1);\n\n    if (focusTarget === this.$.table) {\n      // The focus is about to exit the grid to the top.\n      this.$.table.focus();\n    } else if (focusTarget === this.$.focusexit) {\n      // The focus is about to exit the grid to the bottom.\n      this.$.focusexit.focus();\n    } else if (focusTarget === this._itemsFocusable) {\n      let itemsFocusTarget = focusTarget;\n      const targetRow = this._itemsFocusable.parentNode;\n      this._ensureScrolledToIndex(this._focusedItemIndex);\n      if (targetRow.index !== this._focusedItemIndex) {\n        // The target row, which is about to be focused next, has been\n        // assigned with a new index since last focus, probably because of\n        // scrolling. Focus the row for the stored focused item index instead.\n        const columnIndex = Array.from(targetRow.children).indexOf(this._itemsFocusable);\n        const focusedItemRow = Array.from(this.$.items.children)\n          .filter(row => row.index === this._focusedItemIndex)[0];\n        if (focusedItemRow) {\n          itemsFocusTarget = focusedItemRow.children[columnIndex];\n        }\n      }\n      e.preventDefault();\n      itemsFocusTarget.focus();\n    } else {\n      e.preventDefault();\n      focusTarget.focus();\n    }\n\n    this._toggleAttribute('navigating', true, this);\n  }\n\n  _onSpaceKeyDown(e) {\n    e.preventDefault();\n\n    const cell = e.composedPath()[0];\n    if (!cell._content || !cell._content.firstElementChild) {\n      this.dispatchEvent(new CustomEvent('cell-activate', {detail: {\n        model: this.__getRowModel(cell.parentElement)\n      }}));\n    }\n  }\n\n  /** @private */\n  _onKeyUp(e) {\n    if (!/^( |SpaceBar)$/.test(e.key)) {\n      return;\n    }\n\n    e.preventDefault();\n\n    const cell = e.composedPath()[0];\n    if (cell._content && cell._content.firstElementChild) {\n      const wasNavigating = this.hasAttribute('navigating');\n      cell._content.firstElementChild.click();\n      this._toggleAttribute('navigating', wasNavigating, this);\n    }\n  }\n\n  _onFocusIn(e) {\n    if (!this._isMousedown) {\n      this._toggleAttribute('navigating', true, this);\n    }\n\n    const rootTarget = e.composedPath()[0];\n\n    if (rootTarget === this.$.table ||\n        rootTarget === this.$.focusexit) {\n      // The focus enters the top (bottom) of the grid, meaning that user has\n      // tabbed (shift-tabbed) into the grid. Move the focus to\n      // the first (the last) focusable.\n      this._predictFocusStepTarget(\n        rootTarget,\n        rootTarget === this.$.table ? 1 : -1\n      ).focus();\n      this._toggleAttribute('interacting', false, this);\n    } else {\n      this._detectInteracting(e);\n    }\n  }\n\n  _onFocusOut(e) {\n    this._toggleAttribute('navigating', false, this);\n    this._detectInteracting(e);\n  }\n\n  _onCellFocusIn(e) {\n    this._detectInteracting(e);\n\n    if (e.composedPath().indexOf(this.$.table) === 3) {\n      const cell = e.composedPath()[0];\n      this._activeRowGroup = cell.parentNode.parentNode;\n      if (this._activeRowGroup === this.$.header) {\n        this._headerFocusable = cell;\n      } else if (this._activeRowGroup === this.$.items) {\n        this._itemsFocusable = cell;\n      } else if (this._activeRowGroup === this.$.footer) {\n        this._footerFocusable = cell;\n      }\n      // Inform cell content of the focus (used in <vaadin-grid-sorter>)\n      cell._content.dispatchEvent(new CustomEvent('cell-focusin', {bubbles: false}));\n    }\n\n    this._detectFocusedItemIndex(e);\n  }\n\n  _onCellFocusOut(e) {\n    if (e.composedPath().indexOf(this.$.table) === 3) {\n      const cell = e.composedPath()[0];\n      // Inform cell content of the focus (used in <vaadin-grid-sorter>)\n      cell._content.dispatchEvent(new CustomEvent('cell-focusout', {bubbles: false}));\n    }\n  }\n\n  _detectInteracting(e) {\n    this._toggleAttribute('interacting',\n      e.composedPath().some(el => el.localName === 'vaadin-grid-cell-content'),\n      this);\n  }\n\n  _detectFocusedItemIndex(e) {\n    const {rowGroup, row} = this._parseEventPath(e.composedPath());\n    if (rowGroup === this.$.items) {\n      this._focusedItemIndex = row.index;\n    }\n  }\n\n  _preventScrollerRotatingCellFocus(item, index) {\n    if (item.index === this._focusedItemIndex && this.hasAttribute('navigating') && this._activeRowGroup === this.$.items) {\n      // Focused item has went, hide navigation mode\n      this._navigatingIsHidden = true;\n      this._toggleAttribute('navigating', false, this);\n    }\n    if (index === this._focusedItemIndex && this._navigatingIsHidden) {\n      // Focused item is back, restore navigation mode\n      this._navigatingIsHidden = false;\n      this._toggleAttribute('navigating', true, this);\n    }\n  }\n\n  _getColumns(rowGroup, rowIndex) {\n    let columnTreeLevel = this._columnTree.length - 1;\n    if (rowGroup === this.$.header) {\n      columnTreeLevel = rowIndex;\n    } else if (rowGroup === this.$.footer) {\n      columnTreeLevel = this._columnTree.length - 1 - rowIndex;\n    }\n    return this._columnTree[columnTreeLevel];\n  }\n\n  _resetKeyboardNavigation() {\n    if (this.$.header.firstElementChild) {\n      this._headerFocusable = Array.from(this.$.header.firstElementChild.children).filter(el => !el.hidden)[0];\n    }\n\n    if (this.$.items.firstElementChild) {\n      const firstVisibleIndexRow = this._iterateItems((pidx, vidx) => {\n        if (this._firstVisibleIndex === vidx) {\n          return this.$.items.children[pidx];\n        }\n      });\n      if (firstVisibleIndexRow) {\n        this._itemsFocusable = Array.from(firstVisibleIndexRow.children).filter(el => !el.hidden)[0];\n      }\n    }\n\n    if (this.$.footer.firstElementChild) {\n      this._footerFocusable = Array.from(this.$.footer.firstElementChild.children).filter(el => !el.hidden)[0];\n    }\n  }\n\n  _scrollHorizontallyToCell(dstCell) {\n    if (dstCell.hasAttribute('frozen') || this._elementMatches(dstCell, '[part~=\"details-cell\"]')) {\n      // These cells are, by design, always visible, no need to scroll.\n      return;\n    }\n\n    const dstCellRect = dstCell.getBoundingClientRect();\n    const dstRow = dstCell.parentNode;\n    const dstCellIndex = Array.from(dstRow.children).indexOf(dstCell);\n    const tableRect = this.$.table.getBoundingClientRect();\n    let leftBoundary = tableRect.left, rightBoundary = tableRect.right;\n    for (let i = dstCellIndex - 1; i >= 0; i--) {\n      const cell = dstRow.children[i];\n      if (cell.hasAttribute('hidden') ||\n          this._elementMatches(cell, '[part~=\"details-cell\"]')) {\n        continue;\n      }\n      if (cell.hasAttribute('frozen')) {\n        leftBoundary = cell.getBoundingClientRect().right;\n        break;\n      }\n    }\n    for (let i = dstCellIndex + 1; i < dstRow.children.length; i++) {\n      const cell = dstRow.children[i];\n      if (cell.hasAttribute('hidden') ||\n          this._elementMatches(cell, '[part~=\"details-cell\"]')) {\n        continue;\n      }\n      if (cell.hasAttribute('frozen')) {\n        rightBoundary = cell.getBoundingClientRect().left;\n        break;\n      }\n    }\n\n    if (dstCellRect.left < leftBoundary) {\n      this.$.table.scrollLeft += Math.round(dstCellRect.left - leftBoundary);\n    }\n    if (dstCellRect.right > rightBoundary) {\n      this.$.table.scrollLeft += Math.round(dstCellRect.right - rightBoundary);\n    }\n  }\n\n  _elementMatches(el, query) {\n    return el.matches ? el.matches(query) :\n      Array.from(el.parentNode.querySelectorAll(query)).indexOf(el) !== -1;\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\n\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\nimport { dom } from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport { useShadow } from '@polymer/polymer/lib/utils/settings.js';\n\n/**\n * @polymerMixin\n */\nexport const ColumnReorderingMixin = superClass => class ColumnReorderingMixin extends GestureEventListeners(superClass) {\n\n  static get properties() {\n    return {\n      /**\n       * Set to true to allow column reordering.\n       */\n      columnReorderingAllowed: {\n        type: Boolean,\n        value: false\n      },\n\n      _orderBaseScope: {\n        type: Number,\n        value: 10000000\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateOrders(_columnTree, _columnTree.*)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    addListener(this, 'track', this._onTrackEvent);\n    this._reorderGhost = this.shadowRoot.querySelector('[part=\"reorder-ghost\"]');\n\n    this.addEventListener('touchstart', this._onTouchStart.bind(this));\n    this.addEventListener('touchmove', this._onTouchMove.bind(this));\n    this.addEventListener('touchend', this._onTouchEnd.bind(this));\n    this.addEventListener('contextmenu', this._onContextMenu.bind(this));\n  }\n\n  _onContextMenu(e) {\n    if (this.hasAttribute('reordering')) {\n      e.preventDefault();\n    }\n  }\n\n  _onTouchStart(e) {\n    // Touch event, delay activation by 100ms\n    this._startTouchReorderTimeout = setTimeout(() => {\n      this._onTrackStart({\n        detail: {\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY\n        }\n      });\n    }, 100);\n  }\n\n  _onTouchMove(e) {\n    if (this._draggedColumn) {\n      e.preventDefault();\n    }\n    clearTimeout(this._startTouchReorderTimeout);\n  }\n\n  _onTouchEnd() {\n    clearTimeout(this._startTouchReorderTimeout);\n    this._onTrackEnd();\n  }\n\n  _onTrackEvent(e) {\n    if (e.detail.state === 'start') {\n      const path = e.composedPath();\n      const headerCell = path[path.indexOf(this.$.header) - 2];\n      if (!headerCell || !headerCell._content) {\n        // Not a header column\n        return;\n      }\n\n      const activeElement = this.getRootNode().activeElement;\n      if (headerCell._content.contains(this.getRootNode().activeElement)\n          && (!this._ie || !this._isFocusable(activeElement))) {\n        // Something was focused inside the cell\n        return;\n      }\n\n      if (this.$.scroller.hasAttribute('column-resizing')) {\n        // Resizing is in progress\n        return;\n      }\n\n      if (!this._touchDevice) {\n        // Not a touch device\n        this._onTrackStart(e);\n      }\n    } else if (e.detail.state === 'track') {\n      this._onTrack(e);\n    } else if (e.detail.state === 'end') {\n      this._onTrackEnd(e);\n    }\n  }\n\n  _onTrackStart(e) {\n    if (!this.columnReorderingAllowed) {\n      return;\n    }\n\n    // Cancel reordering if there are draggable nodes on the event path\n    const path = e.path || dom(e).path;\n    if (path && path.filter(node => node.hasAttribute && node.hasAttribute('draggable'))[0]) {\n      return;\n    }\n\n    const headerCell = this._cellFromPoint(e.detail.x, e.detail.y);\n    if (!headerCell || headerCell.getAttribute('part').indexOf('header-cell') === -1) {\n      return;\n    }\n\n    this._toggleAttribute('reordering', true, this);\n    this._draggedColumn = headerCell._column;\n    while (this._draggedColumn.parentElement.childElementCount === 1) {\n      // This is the only column in the group, drag the whole group instead\n      this._draggedColumn = this._draggedColumn.parentElement;\n    }\n    this._setSiblingsReorderStatus(this._draggedColumn, 'allowed');\n    this._draggedColumn._reorderStatus = 'dragging';\n\n    this._updateGhost(headerCell);\n    this._reorderGhost.style.visibility = 'visible';\n    this._updateGhostPosition(e.detail.x, this._touchDevice ? e.detail.y - 50 : e.detail.y);\n    this._autoScroller();\n  }\n\n  _onTrack(e) {\n    if (!this._draggedColumn) {\n      // Reordering didnt start. Skip this event.\n      return;\n    }\n\n    const targetCell = this._cellFromPoint(e.detail.x, e.detail.y);\n    if (!targetCell) {\n      return;\n    }\n\n    const targetColumn = this._getTargetColumn(targetCell, this._draggedColumn);\n    if (this._isSwapAllowed(this._draggedColumn, targetColumn) &&\n      this._isSwappableByPosition(targetColumn, e.detail.x)) {\n      this._swapColumnOrders(this._draggedColumn, targetColumn);\n    }\n\n    this._updateGhostPosition(e.detail.x, this._touchDevice ? e.detail.y - 50 : e.detail.y);\n    this._lastDragClientX = e.detail.x;\n  }\n\n  _onTrackEnd() {\n    if (!this._draggedColumn) {\n      // Reordering didnt start. Skip this event.\n      return;\n    }\n\n    this._toggleAttribute('reordering', false, this);\n    this._draggedColumn._reorderStatus = '';\n    this._setSiblingsReorderStatus(this._draggedColumn, '');\n    this._draggedColumn = null;\n    this._lastDragClientX = null;\n    this._reorderGhost.style.visibility = 'hidden';\n\n    this.dispatchEvent(new CustomEvent('column-reorder', {detail: {\n      columns: this._getColumnsInOrder()\n    }}));\n  }\n\n  _getColumnsInOrder() {\n    return this._columnTree.slice(0).pop()\n      .filter(c => !c.hidden)\n      .sort((b, a) => (b._order - a._order));\n  }\n\n  _cellFromPoint(x, y) {\n    x = x || 0;\n    y = y || 0;\n    if (!this._draggedColumn) {\n      this._toggleAttribute('no-content-pointer-events', true, this.$.scroller);\n    }\n    let cell;\n    if (useShadow) {\n      cell = this.shadowRoot.elementFromPoint(x, y);\n    } else {\n      cell = document.elementFromPoint(x, y);\n\n      // Workaround a FF58 bug\n      if (cell.localName === 'vaadin-grid-cell-content') {\n        cell = cell.assignedSlot.parentNode;\n      }\n\n    }\n    this._toggleAttribute('no-content-pointer-events', false, this.$.scroller);\n\n    // Make sure the element is actually a cell\n    if (cell && cell._column) {\n      return cell;\n    }\n  }\n\n  _updateGhostPosition(eventClientX, eventClientY) {\n    const ghostRect = this._reorderGhost.getBoundingClientRect();\n    // // This is where we want to position the ghost\n    const targetLeft = eventClientX - ghostRect.width / 2;\n    const targetTop = eventClientY - ghostRect.height / 2;\n    // Current position\n    const _left = parseInt(this._reorderGhost._left || 0);\n    const _top = parseInt(this._reorderGhost._top || 0);\n    // Reposition the ghost\n    this._reorderGhost._left = _left - (ghostRect.left - targetLeft);\n    this._reorderGhost._top = _top - (ghostRect.top - targetTop);\n    this._reorderGhost.style.transform = `translate(${this._reorderGhost._left}px, ${this._reorderGhost._top}px)`;\n  }\n\n  _getInnerText(e) {\n    if (e.localName) {\n      // Custom implementation needed since IE11 doesn't respect the spec in case of hidden elements\n      if (getComputedStyle(e).display === 'none') {\n        return '';\n      } else {\n        return Array.from(e.childNodes).map(n => this._getInnerText(n)).join('');\n      }\n    } else {\n      return e.textContent;\n    }\n  }\n\n  _updateGhost(cell) {\n    const ghost = this._reorderGhost;\n    ghost.textContent = this._getInnerText(cell._content);\n    const style = window.getComputedStyle(cell);\n    ['boxSizing', 'display', 'width', 'height', 'background', 'alignItems', 'padding', 'border', 'flex-direction', 'overflow']\n      .forEach(propertyName => ghost.style[propertyName] = style[propertyName]);\n    return ghost;\n  }\n\n  _updateOrders(columnTree, splices) {\n    if (columnTree === undefined || splices === undefined) {\n      return;\n    }\n\n    // Reset all column orders\n    columnTree[0].forEach((column, index) => column._order = 0);\n    // Set order numbers to top-level columns\n    columnTree[0].forEach((column, index) => column._order = (index + 1) * this._orderBaseScope);\n  }\n\n  _setSiblingsReorderStatus(column, status) {\n    Array.from(column.parentNode.children)\n      .filter(child => /column/.test(child.localName) && this._isSwapAllowed(child, column))\n      .forEach(sibling => sibling._reorderStatus = status);\n  }\n\n  _autoScroller() {\n    if (this._lastDragClientX) {\n      const rightDiff = this._lastDragClientX - this.getBoundingClientRect().right + 50;\n      const leftDiff = this.getBoundingClientRect().left - this._lastDragClientX + 50;\n\n      if (rightDiff > 0) {\n        this.$.table.scrollLeft += rightDiff / 10;\n      } else if (leftDiff > 0) {\n        this.$.table.scrollLeft -= leftDiff / 10;\n      }\n      this._scrollHandler();\n    }\n\n    if (this._draggedColumn) {\n      this.async(this._autoScroller, 10);\n    }\n  }\n\n  _isSwapAllowed(column1, column2) {\n    if (column1 && column2) {\n      const differentColumns = column1 !== column2;\n      const sameParent = column1.parentElement === column2.parentElement;\n      const sameFrozen = column1.frozen === column2.frozen;\n      return differentColumns && sameParent && sameFrozen;\n    }\n  }\n\n  _isSwappableByPosition(targetColumn, clientX) {\n    const targetCell =\n      Array.from(this.$.header.querySelectorAll('tr:not([hidden]) [part~=\"cell\"]')).filter(cell => targetColumn.contains(cell._column))[0];\n    const sourceCellRect = this.$.header.querySelector('tr:not([hidden]) [reorder-status=dragging]').getBoundingClientRect();\n    const targetRect = targetCell.getBoundingClientRect();\n    if (targetRect.left > sourceCellRect.left) {\n      return clientX > targetRect.right - sourceCellRect.width;\n    } else {\n      return clientX < targetRect.left + sourceCellRect.width;\n    }\n  }\n\n  _swapColumnOrders(column1, column2) {\n    const _order = column1._order;\n    column1._order = column2._order;\n    column2._order = _order;\n    this._updateLastFrozen();\n    this._updateFirstAndLastColumn();\n  }\n\n  _getTargetColumn(targetCell, draggedColumn) {\n    if (targetCell && draggedColumn) {\n      let candidate = targetCell._column;\n      while (candidate.parentElement !== draggedColumn.parentElement && candidate !== this) {\n        candidate = candidate.parentElement;\n      }\n      if (candidate.parentElement === draggedColumn.parentElement) {\n        return candidate;\n      } else {\n        return targetCell._column;\n      }\n    }\n  }\n\n  /**\n   * Fired when the columns in the grid are reordered.\n   *\n   * @event column-reorder\n   * @param {Object} detail\n   * @param {Object} detail.columns the columns in the new order\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * This Element is used internally by vaadin-grid.\n *\n * @private\n */\nclass GridOuterScrollerElement extends (class extends PolymerElement {}) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n        height: 100%;\n        width: 100%;\n        position: absolute;\n        top: 0;\n        box-sizing: border-box;\n        overflow: auto;\n      }\n\n      :host([passthrough]) {\n        pointer-events: none;\n      }\n    </style>\n\n    <slot></slot>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid-outer-scroller';\n  }\n\n  static get properties() {\n    return {\n\n      scrollTarget: {\n        type: Object\n      },\n\n      scrollHandler: {\n        type: Object\n      },\n\n      passthrough: {\n        type: Boolean,\n        reflectToAttribute: true,\n        value: true\n      },\n\n      outerScrolling: Boolean,\n\n      noScrollbars: Boolean,\n\n      _touchDevice: Boolean\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('scroll', () => this._syncScrollTarget());\n    this.parentElement.addEventListener('mousemove', this._onMouseMove.bind(this));\n\n    // for some reason scroll bars are hidden in iOS if this style is\n    // added in stylesheets or before attaching.\n    this.style.webkitOverflowScrolling = 'touch';\n\n    this.addEventListener('mousedown', _ => this.outerScrolling = true);\n    this.addEventListener('mouseup', _ => {\n      this.outerScrolling = false;\n      this.scrollHandler._scrollHandler();\n    });\n  }\n\n  _onMouseMove(e) {\n    // Ignore mousemove events on touch devices\n    if (!this._touchDevice) {\n      if (this.noScrollbars && this.parentElement.hasAttribute('scroll-period')) {\n        this.passthrough = e.offsetY <= this.clientHeight - 20 && e.offsetX <= this.clientWidth - 20;\n      } else {\n        this.passthrough = e.offsetY <= this.clientHeight && e.offsetX <= this.clientWidth;\n      }\n    }\n  }\n\n  syncOuterScroller() {\n    this.scrollTop = this.scrollTarget.scrollTop;\n    this.scrollLeft = this.scrollTarget.scrollLeft;\n  }\n\n  _syncScrollTarget() {\n    requestAnimationFrame(() => {\n      this.scrollTarget.scrollTop = this.scrollTop;\n      this.scrollTarget.scrollLeft = this.scrollLeft;\n      this.scrollHandler._scrollHandler();\n    });\n\n  }\n}\n\ncustomElements.define(GridOuterScrollerElement.is, GridOuterScrollerElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/lib/elements/dom-module.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nconst VaadinGridStyles = document.createElement('dom-module');\n\n// NOTE(web-padawan): https://github.com/vaadin/vaadin-grid/issues/1514\nVaadinGridStyles.appendChild(\n  html`\n  <style>\n    @keyframes vaadin-grid-appear {\n      to {\n        opacity: 1;\n      }\n    }\n\n    :host {\n      display: block;\n      animation: 1ms vaadin-grid-appear;\n      height: 400px;\n      flex: 1 1 auto;\n      align-self: stretch;\n      position: relative;\n    }\n\n    :host([hidden]) {\n      display: none !important;\n    }\n\n    #scroller {\n      display: block;\n      transform: translateY(0);\n      width: auto;\n      height: auto;\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n    }\n\n    :host([height-by-rows]) {\n      height: auto;\n      align-self: flex-start;\n      flex-grow: 0;\n      width: 100%;\n    }\n\n    :host([height-by-rows]) #scroller {\n      width: 100%;\n      height: 100%;\n      position: relative;\n    }\n\n    #table {\n      display: block;\n      width: 100%;\n      height: 100%;\n      overflow: auto;\n      z-index: -2;\n      position: relative;\n      outline: none;\n    }\n\n    #header {\n      display: block;\n      position: absolute;\n      top: 0;\n      width: 100%;\n    }\n\n    th {\n      text-align: inherit;\n    }\n\n    /* Safari doesn't work with \"inherit\" */\n    [safari] th {\n      text-align: initial;\n    }\n\n    #footer {\n      display: block;\n      position: absolute;\n      bottom: 0;\n      width: 100%;\n    }\n\n    #items {\n      display: block;\n      width: 100%;\n      position: relative;\n      z-index: -1;\n    }\n\n    #items,\n    #outersizer,\n    #fixedsizer {\n      border-top: 0 solid transparent;\n      border-bottom: 0 solid transparent;\n    }\n\n    [part~=\"row\"] {\n      display: flex;\n      width: 100%;\n      box-sizing: border-box;\n      margin: 0;\n    }\n\n    [part~=\"row\"][loading] [part~=\"body-cell\"] ::slotted(vaadin-grid-cell-content) {\n      opacity: 0;\n    }\n\n    #items [part~=\"row\"] {\n      position: absolute;\n    }\n\n    #items [part~=\"row\"]:empty {\n      height: 1em;\n    }\n\n    [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n      flex-shrink: 0;\n      flex-grow: 1;\n      box-sizing: border-box;\n      display: flex;\n      width: 100%;\n      position: relative;\n      align-items: center;\n      padding: 0;\n      white-space: nowrap;\n    }\n\n    [part~=\"details-cell\"] {\n      position: absolute;\n      bottom: 0;\n      width: 100%;\n      box-sizing: border-box;\n      padding: 0;\n    }\n\n    [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n      display: block;\n      width: 100%;\n      box-sizing: border-box;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    [hidden] {\n      display: none !important;\n    }\n\n    [frozen] {\n      z-index: 2;\n      will-change: transform;\n    }\n\n    #outerscroller {\n      /* Needed (at least) for Android Chrome */\n      z-index: 0;\n    }\n\n    #scroller:not([safari]) #outerscroller {\n      /* Needed for Android Chrome (#1020). Can't be applied to Safari\n      since it would re-introduce the sub-pixel overflow bug (#853) */\n      will-change: transform;\n    }\n\n    [no-scrollbars]:not([safari]):not([firefox]) #outerscroller,\n    [no-scrollbars][safari] #table,\n    [no-scrollbars][firefox] #table {\n      overflow: hidden;\n    }\n\n    [no-scrollbars]:not([safari]):not([firefox]) #outerscroller {\n      pointer-events: none;\n    }\n\n    /* Reordering styles */\n    :host([reordering]) [part~=\"cell\"] ::slotted(vaadin-grid-cell-content),\n    :host([reordering]) [part~=\"resize-handle\"],\n    #scroller[no-content-pointer-events] [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n      pointer-events: none;\n    }\n\n    [part~=\"reorder-ghost\"] {\n      visibility: hidden;\n      position: fixed;\n      pointer-events: none;\n      opacity: 0.5;\n\n      /* Prevent overflowing the grid in Firefox */\n      top: 0;\n      left: 0;\n    }\n\n    :host([reordering]) {\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n\n    #scroller[ie][column-reordering-allowed] [part~=\"header-cell\"] {\n      -ms-user-select: none;\n    }\n\n    :host([reordering]) #outerscroller {\n      -webkit-overflow-scrolling: auto !important;\n    }\n\n    /* Resizing styles */\n    [part~=\"resize-handle\"] {\n      position: absolute;\n      top: 0;\n      right: 0;\n      height: 100%;\n      cursor: col-resize;\n      z-index: 1;\n    }\n\n    [part~=\"resize-handle\"]::before {\n      position: absolute;\n      content: \"\";\n      height: 100%;\n      width: 35px;\n      transform: translateX(-50%);\n    }\n\n    [last-column] [part~=\"resize-handle\"]::before,\n    [last-frozen] [part~=\"resize-handle\"]::before {\n      width: 18px;\n      transform: none;\n      right: 0;\n    }\n\n    #scroller[column-resizing] {\n      -ms-user-select: none;\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n\n    /* Sizer styles */\n    .sizer {\n      display: flex;\n      position: relative;\n      width: 100%;\n      visibility: hidden;\n    }\n\n    .sizer [part~=\"details-cell\"] {\n      display: none !important;\n    }\n\n    .sizer [part~=\"cell\"][hidden] {\n      display: none !important;\n    }\n\n    .sizer [part~=\"cell\"] {\n      display: block;\n      flex-shrink: 0;\n      line-height: 0;\n      margin-top: -1em;\n      height: 0 !important;\n      min-height: 0 !important;\n      max-height: 0 !important;\n      padding: 0 !important;\n    }\n\n    .sizer [part~=\"cell\"]::before {\n      content: \"-\";\n    }\n\n    .sizer [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n      display: none !important;\n    }\n\n    /* Fixed mode (Tablet Edge) */\n    #fixedsizer {\n      position: absolute;\n    }\n\n    :not([edge][no-scrollbars]) #fixedsizer {\n      display: none;\n    }\n\n    [edge][no-scrollbars] {\n      /* Any value other than none for the transform results in the creation of both a stacking context and\n      a containing block. The object acts as a containing block for fixed positioned descendants. */\n      transform: translateZ(0);\n      overflow: hidden;\n    }\n\n    [edge][no-scrollbars] #header,\n    [edge][no-scrollbars] #footer {\n      position: fixed;\n    }\n\n    [edge][no-scrollbars] #items {\n      position: fixed;\n      width: 100%;\n      will-change: transform;\n    }\n\n    /* RTL specific styles */\n\n    :host([dir=\"rtl\"]) [part~=\"reorder-ghost\"] {\n      left: auto;\n      right: 0;\n    }\n\n    :host([dir=\"rtl\"]) [part~=\"resize-handle\"] {\n      left: 0;\n      right: auto;\n    }\n\n    :host([dir=\"rtl\"]) [part~=\"resize-handle\"]::before {\n      transform: translateX(50%);\n    }\n\n    :host([dir=\"rtl\"]) [last-column] [part~=\"resize-handle\"]::before,\n    :host([dir=\"rtl\"]) [last-frozen] [part~=\"resize-handle\"]::before {\n      left: 0;\n      right: auto;\n    }\n  </style>\n`);\n\nconst safari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nconst firefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\nif (safari || firefox) {\n  const scrollingStyles = document.createElement('style');\n  scrollingStyles.textContent = `\n    [scrolling][safari] #outerscroller,\n    [scrolling][firefox] #outerscroller {\n      pointer-events: auto;\n    }\n\n    [ios] #outerscroller {\n      pointer-events: auto;\n      z-index: -3;\n    }\n\n    [ios][scrolling] #outerscroller {\n      z-index: 0;\n    }\n\n    [ios] [frozen] {\n      will-change: auto;\n    }\n  `;\n  VaadinGridStyles.querySelector('template').content.appendChild(scrollingStyles);\n}\n\nVaadinGridStyles.register('vaadin-grid-styles');\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ScrollerElement } from './vaadin-grid-scroller.js';\nimport { A11yMixin } from './vaadin-grid-a11y-mixin.js';\nimport { ActiveItemMixin } from './vaadin-grid-active-item-mixin.js';\nimport { ArrayDataProviderMixin } from './vaadin-grid-array-data-provider-mixin.js';\nimport { ColumnResizingMixin } from './vaadin-grid-column-resizing-mixin.js';\nimport { DataProviderMixin } from './vaadin-grid-data-provider-mixin.js';\nimport { DynamicColumnsMixin } from './vaadin-grid-dynamic-columns-mixin.js';\nimport { EventContextMixin } from './vaadin-grid-event-context-mixin.js';\nimport { FilterMixin } from './vaadin-grid-filter-mixin.js';\nimport { RowDetailsMixin } from './vaadin-grid-row-details-mixin.js';\nimport { ScrollMixin } from './vaadin-grid-scroll-mixin.js';\nimport { SelectionMixin } from './vaadin-grid-selection-mixin.js';\nimport { SortMixin } from './vaadin-grid-sort-mixin.js';\nimport { StylingMixin } from './vaadin-grid-styling-mixin.js';\nimport { DragAndDropMixin } from './vaadin-grid-drag-and-drop-mixin.js';\nimport { KeyboardNavigationMixin } from './vaadin-grid-keyboard-navigation-mixin.js';\nimport { ColumnReorderingMixin } from './vaadin-grid-column-reordering-mixin.js';\nimport './vaadin-grid-column.js';\nimport './vaadin-grid-outer-scroller.js';\nimport './vaadin-grid-styles.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { beforeNextRender, afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut, animationFrame } from '@polymer/polymer/lib/utils/async.js';\n\nconst TOUCH_DEVICE = (() => {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\n/**\n *\n * `<vaadin-grid>` is a free, high quality data grid / data table Web Component. The content of the\n * the grid can be populated in two ways: imperatively by using renderer callback function and\n * declaratively by using Polymer's Templates.\n *\n * ### Quick Start\n *\n * Start with an assigning an array to the [`items`](#/elements/vaadin-grid#property-items) property to visualize your data.\n *\n * Use the [`<vaadin-grid-column>`](#/elements/vaadin-grid-column) element to configure the grid columns. Set `path` and `header`\n * shorthand properties for the columns to define what gets rendered in the cells of the column.\n *\n * #### Example:\n * ```html\n * <vaadin-grid>\n *   <vaadin-grid-column path=\"name.first\" header=\"First name\"></vaadin-grid-column>\n *   <vaadin-grid-column path=\"name.last\" header=\"Last name\"></vaadin-grid-column>\n *   <vaadin-grid-column path=\"email\"></vaadin-grid-column>\n * </vaadin-grid>\n * ```\n *\n * For custom content `vaadin-grid-column` element provides you with three types of `renderer` callback functions: `headerRenderer`,\n * `renderer` and `footerRenderer`.\n *\n * Each of those renderer functions provides `root`, `column`, `rowData` arguments when applicable.\n * Generate DOM content, append it to the `root` element and control the state\n * of the host element by accessing `column`. Before generating new content,\n * users are able to check if there is already content in `root` for reusing it.\n *\n * Renderers are called on initialization of new column cells and each time the\n * related row data is updated. DOM generated during the renderer call can be reused\n * in the next renderer call and will be provided with the `root` argument.\n * On first call it will be empty.\n *\n * #### Example:\n * ```html\n * <vaadin-grid>\n *   <vaadin-grid-column></vaadin-grid-column>\n *   <vaadin-grid-column></vaadin-grid-column>\n *   <vaadin-grid-column></vaadin-grid-column>\n * </vaadin-grid>\n * ```\n * ```js\n * const grid = document.querySelector('vaadin-grid');\n * grid.items = [{'name': 'John', 'surname': 'Lennon', 'role': 'singer'},\n *               {'name': 'Ringo', 'surname': 'Starr', 'role': 'drums'}];\n *\n * const columns = grid.querySelectorAll('vaadin-grid-column');\n *\n * columns[0].headerRenderer = function(root) {\n *   root.textContent = 'Name';\n * };\n * columns[0].renderer = function(root, column, rowData) {\n *   root.textContent = rowData.item.name;\n * };\n *\n * columns[1].headerRenderer = function(root) {\n *   root.textContent = 'Surname';\n * };\n * columns[1].renderer = function(root, column, rowData) {\n *   root.textContent = rowData.item.surname;\n * };\n *\n * columns[2].headerRenderer = function(root) {\n *   root.textContent = 'Role';\n * };\n * columns[2].renderer = function(root, column, rowData) {\n *   root.textContent = rowData.item.role;\n * };\n * ```\n *\n * Alternatively, the content can be provided with Polymer's Templates:\n *\n * #### Example:\n * ```html\n * <vaadin-grid items='[{\"name\": \"John\", \"surname\": \"Lennon\", \"role\": \"singer\"},\n * {\"name\": \"Ringo\", \"surname\": \"Starr\", \"role\": \"drums\"}]'>\n *   <vaadin-grid-column>\n *     <template class=\"header\">Name</template>\n *     <template>[[item.name]]</template>\n *   </vaadin-grid-column>\n *   <vaadin-grid-column>\n *     <template class=\"header\">Surname</template>\n *     <template>[[item.surname]]</template>\n *   </vaadin-grid-column>\n *   <vaadin-grid-column>\n *     <template class=\"header\">Role</template>\n *     <template>[[item.role]]</template>\n *   </vaadin-grid-column>\n * </vaadin-grid>\n * ```\n *\n * The following helper elements can be used for further customization:\n * - [`<vaadin-grid-column-group>`](#/elements/vaadin-grid-column-group)\n * - [`<vaadin-grid-filter>`](#/elements/vaadin-grid-filter)\n * - [`<vaadin-grid-sorter>`](#/elements/vaadin-grid-sorter)\n * - [`<vaadin-grid-selection-column>`](#/elements/vaadin-grid-selection-column)\n * - [`<vaadin-grid-tree-toggle>`](#/elements/vaadin-grid-tree-toggle)\n *\n * __Note that the helper elements must be explicitly imported.__\n * If you want to import everything at once you can use the `all-imports.html` bundle.\n *\n * A column template can be decorated with one the following class names to specify its purpose\n * - `header`: Marks a header template\n * - `footer`: Marks a footer template\n * - `row-details`: Marks a row details template\n *\n * The following built-in template variables can be bound to inside the column templates:\n * - `[[index]]`: Number representing the row index\n * - `[[item]]` and it's sub-properties: Data object (provided by a data provider / items array)\n * - `{{selected}}`: True if the item is selected (can be two-way bound)\n * - `{{detailsOpened}}`: True if the item has row details opened (can be two-way bound)\n * - `{{expanded}}`: True if the item has tree sublevel expanded (can be two-way bound)\n * - `[[level]]`: Number of the tree sublevel of the item, first level-items have 0\n *\n * ### Lazy Loading with Function Data Provider\n *\n * In addition to assigning an array to the items property, you can alternatively\n * provide the `<vaadin-grid>` data through the\n * [`dataProvider`](#/elements/vaadin-grid#property-dataProvider) function property.\n * The `<vaadin-grid>` calls this function lazily, only when it needs more data\n * to be displayed.\n *\n * See the [`dataProvider`](#/elements/vaadin-grid#property-dataProvider) in\n * the API reference below for the detailed data provider arguments description,\n * and the Assigning Data page in the demos.\n *\n * __Note that expanding the tree grid's item will trigger a call to the `dataProvider`.__\n *\n * __Also, note that when using function data providers, the total number of items\n * needs to be set manually. The total number of items can be returned\n * in the second argument of the data provider callback:__\n *\n * ```javascript\n * grid.dataProvider = function(params, callback) {\n *   var url = 'https://api.example/data' +\n *       '?page=' + params.page +        // the requested page index\n *       '&per_page=' + params.pageSize; // number of items on the page\n *   var xhr = new XMLHttpRequest();\n *   xhr.onload = function() {\n *     var response = JSON.parse(xhr.responseText);\n *     callback(\n *       response.employees, // requested page of items\n *       response.totalSize  // total number of items\n *     );\n *   };\n *   xhr.open('GET', url, true);\n *   xhr.send();\n * };\n * ```\n *\n * __Alternatively, you can use the `size` property to set the total number of items:__\n *\n * ```javascript\n * grid.size = 200; // The total number of items\n * grid.dataProvider = function(params, callback) {\n *   var url = 'https://api.example/data' +\n *       '?page=' + params.page +        // the requested page index\n *       '&per_page=' + params.pageSize; // number of items on the page\n *   var xhr = new XMLHttpRequest();\n *   xhr.onload = function() {\n *     var response = JSON.parse(xhr.responseText);\n *     callback(response.employees);\n *   };\n *   xhr.open('GET', url, true);\n *   xhr.send();\n * };\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `row` | Row in the internal table\n * `cell` | Cell in the internal table\n * `header-cell` | Header cell in the internal table\n * `body-cell` | Body cell in the internal table\n * `footer-cell` | Footer cell in the internal table\n * `details-cell` | Row details cell in the internal table\n * `resize-handle` | Handle for resizing the columns\n * `reorder-ghost` | Ghost element of the header cell being dragged\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `loading` | Set when the grid is loading data from data provider | :host\n * `interacting` | Keyboard navigation in interaction mode | :host\n * `navigating` | Keyboard navigation in navigation mode | :host\n * `overflow` | Set when rows are overflowing the grid viewport. Possible values: `top`, `bottom`, `left`, `right` | :host\n * `reordering` | Set when the grid's columns are being reordered | :host\n * `dragover` | Set when the grid (not a specific row) is dragged over | :host\n * `dragging-rows` : Set when grid rows are dragged  | :host\n * `reorder-status` | Reflects the status of a cell while columns are being reordered | cell\n * `frozen` | Frozen cell | cell\n * `last-frozen` | Last frozen cell | cell\n* * `first-column` | First visible cell on a row | cell\n * `last-column` | Last visible cell on a row | cell\n * `selected` | Selected row | row\n * `expanded` | Expanded row | row\n * `details-opened` | Row with details open | row\n * `loading` | Row that is waiting for data from data provider | row\n * `odd` | Odd row | row\n * `first` | The first body row | row\n * `dragstart` | Set for one frame when drag of a row is starting. The value is a number when multiple rows are dragged | row\n * `dragover` | Set when the row is dragged over | row\n * `drag-disabled` | Set to a row that isn't available for dragging | row\n * `drop-disabled` | Set to a row that can't be dropped on top of | row\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends PolymerElement\n * @mixes ThemableMixin\n * @mixes Grid.A11yMixin\n * @mixes Grid.ActiveItemMixin\n * @mixes Grid.ArrayDataProviderMixin\n * @mixes Grid.ColumnResizingMixin\n * @mixes Grid.DataProviderMixin\n * @mixes Grid.DynamicColumnsMixin\n * @mixes Grid.FilterMixin\n * @mixes Grid.RowDetailsMixin\n * @mixes Grid.ScrollMixin\n * @mixes Grid.SelectionMixin\n * @mixes Grid.SortMixin\n * @mixes Grid.KeyboardNavigationMixin\n * @mixes Grid.ColumnReorderingMixin\n * @mixes Grid.EventContextMixin\n * @mixes Grid.StylingMixin\n * @mixes Grid.DragAndDropMixin\n * @demo demo/index.html\n */\nclass GridElement extends\n  ElementMixin(\n    ThemableMixin(\n      DataProviderMixin(\n        ArrayDataProviderMixin(\n          DynamicColumnsMixin(\n            ActiveItemMixin(\n              ScrollMixin(\n                SelectionMixin(\n                  SortMixin(\n                    RowDetailsMixin(\n                      KeyboardNavigationMixin(\n                        A11yMixin(\n                          FilterMixin(\n                            ColumnReorderingMixin(\n                              ColumnResizingMixin(\n                                EventContextMixin(\n                                  DragAndDropMixin(\n                                    StylingMixin(\n                                      ScrollerElement)))))))))))))))))) {\n  static get template() {\n    return html`\n    <style include=\"vaadin-grid-styles\"></style>\n\n    <div id=\"scroller\" no-scrollbars\\$=\"[[!_scrollbarWidth]]\" wheel-scrolling\\$=\"[[_wheelScrolling]]\" safari\\$=\"[[_safari]]\" ios\\$=\"[[_ios]]\" loading\\$=\"[[loading]]\" edge\\$=\"[[_edge]]\" firefox\\$=\"[[_firefox]]\" ie\\$=\"[[_ie]]\" column-reordering-allowed\\$=\"[[columnReorderingAllowed]]\">\n\n      <table id=\"table\" role=\"grid\" aria-multiselectable=\"true\" tabindex=\"0\">\n        <caption id=\"fixedsizer\" class=\"sizer\" part=\"row\"></caption>\n        <thead id=\"header\" role=\"rowgroup\"></thead>\n        <tbody id=\"items\" role=\"rowgroup\"></tbody>\n        <tfoot id=\"footer\" role=\"rowgroup\"></tfoot>\n      </table>\n\n      <div part=\"reorder-ghost\"></div>\n      <vaadin-grid-outer-scroller id=\"outerscroller\" _touch-device=\"[[_touchDevice]]\" scroll-target=\"[[scrollTarget]]\" scroll-handler=\"[[_this]]\" no-scrollbars=\"[[!_scrollbarWidth]]\">\n        <div id=\"outersizer\" class=\"sizer\" part=\"row\"></div>\n      </vaadin-grid-outer-scroller>\n    </div>\n\n    <!-- The template needs at least one slot or else shady doesn't distribute -->\n    <slot name=\"nodistribute\"></slot>\n\n    <div id=\"focusexit\" tabindex=\"0\"></div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid';\n  }\n\n  static get version() {\n    return '5.6.6';\n  }\n\n  static get observers() {\n    return [\n      '_columnTreeChanged(_columnTree, _columnTree.*)'\n    ];\n  }\n\n  static get properties() {\n    return {\n\n      _this: {\n        type: Object,\n        value: function() {\n          return this;\n        }\n      },\n\n      _safari: {\n        type: Boolean,\n        value: /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n      },\n\n      _ios: {\n        type: Boolean,\n        value: (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream)\n          || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)\n      },\n\n      _edge: {\n        type: Boolean,\n        value: typeof CSS !== 'undefined' && CSS.supports('(-ms-ime-align:auto)')\n      },\n\n      _ie: {\n        type: Boolean,\n        value: !!(navigator.userAgent.match(/Trident/) && !navigator.userAgent.match(/MSIE/))\n      },\n\n      _firefox: {\n        type: Boolean,\n        value: navigator.userAgent.toLowerCase().indexOf('firefox') > -1\n      },\n\n      _android: {\n        type: Boolean,\n        value: /android/i.test(navigator.userAgent)\n      },\n\n      _touchDevice: {\n        type: Boolean,\n        value: TOUCH_DEVICE\n      },\n\n      /**\n       * If true, the grid's height is defined by its rows.\n       *\n       * Effectively, this disables the grid's virtual scrolling so that all the rows are rendered in the DOM at once.\n       * If the grid has a large number of items, using the feature is discouraged to avoid performance issues.\n       */\n      heightByRows: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        observer: '_heightByRowsChanged'\n      },\n      _recalculateColumnWidthOnceLoadingFinished: {\n        type: Boolean,\n        value: true\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this.addEventListener('animationend', this._onAnimationEnd);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.recalculateColumnWidths();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n    if (name === 'dir') {\n      this.__isRTL = newValue === 'rtl';\n      this._updateScrollerMeasurements();\n    }\n  }\n\n  __hasRowsWithClientHeight() {\n    return !!Array.from(this.$.items.children).filter(row => row.clientHeight).length;\n  }\n\n  __itemsReceived() {\n    if (this._recalculateColumnWidthOnceLoadingFinished\n      && !this._cache.isLoading()\n      && this.__hasRowsWithClientHeight()) {\n      this._recalculateColumnWidthOnceLoadingFinished = false;\n      this.recalculateColumnWidths();\n    }\n  }\n\n  /**\n   * @param {Array<Vaadin.GridColumnElement>} cols the columns to auto size based on their content width\n   */\n  _recalculateColumnWidths(cols) {\n    // Note: The `cols.forEach()` loops below could be implemented as a single loop but this has been\n    // split for performance reasons to batch these similar actions [write/read] together to avoid\n    // unnecessary layout trashing.\n\n    // [write] Set automatic width for all cells (breaks column alignment)\n    cols.forEach(col => {\n      col.width = 'auto';\n      col._origFlexGrow = col.flexGrow;\n      col.flexGrow = 0;\n    });\n    // [read] Measure max cell width in each column\n    cols.forEach(col => {\n      col._currentWidth = 0;\n      // Note: _allCells only contains cells which are currently rendered in DOM\n      col._allCells.forEach(c => {\n        // Add 1px buffer to the offset width to avoid too narrow columns (sub-pixel rendering)\n        const cellWidth = c.offsetWidth + 1;\n        col._currentWidth = Math.max(col._currentWidth, cellWidth);\n      });\n    });\n    // [write] Set column widths to fit widest measured content\n    cols.forEach(col => {\n      col.width = `${col._currentWidth}px`;\n      col.flexGrow = col._origFlexGrow;\n      col._currentWidth = undefined;\n      col._origFlexGrow = undefined;\n    });\n  }\n\n  /**\n   * Updates the `width` of all columns which have `autoWidth` set to `true`.\n   */\n  recalculateColumnWidths() {\n    if (!this._columnTree) {\n      return; // No columns\n    }\n    if (this._cache.isLoading()) {\n      this._recalculateColumnWidthOnceLoadingFinished = true;\n    } else {\n      const cols = this._getColumns().filter(col => !col.hidden && col.autoWidth);\n      this._recalculateColumnWidths(cols);\n\n    }\n  }\n\n  _createScrollerRows(count) {\n    const rows = [];\n    for (var i = 0; i < count; i++) {\n      const row = document.createElement('tr');\n      row.setAttribute('part', 'row');\n      row.setAttribute('role', 'row');\n      if (this._columnTree) {\n        this._updateRow(row, this._columnTree[this._columnTree.length - 1], 'body', false, true);\n      }\n      rows.push(row);\n    }\n\n    if (this._columnTree) {\n      this._columnTree[this._columnTree.length - 1].forEach(c => c.notifyPath && c.notifyPath('_cells.*', c._cells));\n    }\n\n    beforeNextRender(this, () => {\n      this._updateFirstAndLastColumn();\n      this._resetKeyboardNavigation();\n    });\n    return rows;\n  }\n\n  _getRowTarget() {\n    return this.$.items;\n  }\n\n  _createCell(tagName) {\n    const contentId = this._contentIndex = this._contentIndex + 1 || 0;\n    const slotName = 'vaadin-grid-cell-content-' + contentId;\n\n    const cellContent = document.createElement('vaadin-grid-cell-content');\n    cellContent.setAttribute('slot', slotName);\n\n    const cell = document.createElement(tagName);\n    cell.id = slotName.replace('-content-', '-');\n    cell.setAttribute('tabindex', '-1');\n    cell.setAttribute('role', tagName === 'td' ? 'gridcell' : 'columnheader');\n\n    const slot = document.createElement('slot');\n    slot.setAttribute('name', slotName);\n\n    cell.appendChild(slot);\n\n    cell._content = cellContent;\n\n    // With native Shadow DOM, mousedown on slotted element does not focus\n    // focusable slot wrapper, that is why cells are not focused with\n    // mousedown. Workaround: listen for mousedown and focus manually.\n    cellContent.addEventListener('mousedown', () => {\n      if (window.chrome) {\n        // Chrome bug: focusing before mouseup prevents text selection, see http://crbug.com/771903\n        const mouseUpListener = () => {\n          if (!cellContent.contains(this.getRootNode().activeElement)) {\n            cell.focus();\n          }\n          // If focus is in the cell content  respect it, do not change.\n          document.removeEventListener('mouseup', mouseUpListener, true);\n        };\n        document.addEventListener('mouseup', mouseUpListener, true);\n      } else {\n        // Focus on mouseup, on the other hand, removes selection on Safari.\n        // Watch out sync focus removal issue, only async focus works here.\n        setTimeout(() => {\n          if (!cellContent.contains(this.getRootNode().activeElement)) {\n            cell.focus();\n          }\n        });\n      }\n    });\n\n    return cell;\n  }\n\n  _updateRow(row, columns, section, isColumnRow, noNotify) {\n    section = section || 'body';\n\n    const contentsFragment = document.createDocumentFragment();\n\n    Array.from(row.children).forEach(cell => cell._vacant = true);\n    row.innerHTML = '';\n    if (row.id !== 'outersizer' && row.id !== 'fixedsizer') {\n      row.hidden = true;\n    }\n    columns\n      .filter(column => !column.hidden)\n      .forEach((column, index, cols) => {\n        let cell;\n\n        if (section === 'body') {\n        // Body\n          column._cells = column._cells || [];\n          cell = column._cells.filter(cell => cell._vacant)[0];\n          if (!cell) {\n            cell = this._createCell('td');\n            column._cells.push(cell);\n          }\n          cell.setAttribute('part', 'cell body-cell');\n          row.appendChild(cell);\n\n          if (index === cols.length - 1 && (this._rowDetailsTemplate || this.rowDetailsRenderer)) {\n          // Add details cell as last cell to body rows\n            this._detailsCells = this._detailsCells || [];\n            const detailsCell = this._detailsCells.filter(cell => cell._vacant)[0] || this._createCell('td');\n            if (this._detailsCells.indexOf(detailsCell) === -1) {\n              this._detailsCells.push(detailsCell);\n            }\n            if (!detailsCell._content.parentElement) {\n              contentsFragment.appendChild(detailsCell._content);\n            }\n            this._configureDetailsCell(detailsCell);\n            row.appendChild(detailsCell);\n            this._a11ySetRowDetailsCell(row, detailsCell);\n            detailsCell._vacant = false;\n          }\n\n          if (column.notifyPath && !noNotify) {\n            column.notifyPath('_cells.*', column._cells);\n          }\n        } else {\n        // Header & footer\n          const tagName = section === 'header' ? 'th' : 'td';\n          if (isColumnRow || column.localName === 'vaadin-grid-column-group') {\n            cell = column[`_${section}Cell`] || this._createCell(tagName);\n            cell._column = column;\n            row.appendChild(cell);\n            column[`_${section}Cell`] = cell;\n          } else {\n            column._emptyCells = column._emptyCells || [];\n            cell = column._emptyCells.filter(cell => cell._vacant)[0] || this._createCell(tagName);\n            cell._column = column;\n            row.appendChild(cell);\n            if (column._emptyCells.indexOf(cell) === -1) {\n              column._emptyCells.push(cell);\n            }\n          }\n          cell.setAttribute('part', `cell ${section}-cell`);\n          this.__updateHeaderFooterRowVisibility(row);\n        }\n\n        if (!cell._content.parentElement) {\n          contentsFragment.appendChild(cell._content);\n        }\n        cell._vacant = false;\n        cell._column = column;\n      });\n\n    // Might be empty if only cache was used\n    this.appendChild(contentsFragment);\n\n    this._frozenCellsChanged();\n    this._updateFirstAndLastColumnForRow(row);\n  }\n\n  __updateHeaderFooterRowVisibility(row) {\n    if (!row) {\n      return;\n    }\n\n    const visibleRowCells = Array.from(row.children).filter(cell => {\n      const column = cell._column;\n      if (column._emptyCells && column._emptyCells.indexOf(cell) > -1) {\n        // The cell is an \"empty cell\"  -> doesn't block hiding the row\n        return false;\n      }\n      if (row.parentElement === this.$.header) {\n        if (column.headerRenderer || column._headerTemplate) {\n          // The cell is the header cell of a column that has a header renderer\n          // or a header template -> row should be visible\n          return true;\n        }\n        if (column.header === null) {\n          // The column header is explicilty set to null -> doesn't block hiding the row\n          return false;\n        }\n        if (column.path || column.header !== undefined) {\n          // The column has an explicit non-null header or a path that generates a header\n          // -> row should be visible\n          return true;\n        }\n      } else {\n        if (column.footerRenderer || column._footerTemplate) {\n          // The cell is the footer cell of a column that has a footer renderer\n          // or a footer template -> row should be visible\n          return true;\n        }\n      }\n    });\n\n    if (row.hidden !== !visibleRowCells.length) {\n      row.hidden = !visibleRowCells.length;\n      this.notifyResize();\n    }\n  }\n\n  _updateScrollerItem(row, index) {\n    this._preventScrollerRotatingCellFocus(row, index);\n\n    if (!this._columnTree) {\n      return;\n    }\n\n    this._toggleAttribute('first', index === 0, row);\n    this._toggleAttribute('odd', index % 2, row);\n    this._a11yUpdateRowRowindex(row, index);\n    this._getItem(index, row);\n  }\n\n  _columnTreeChanged(columnTree, splices) {\n    this._renderColumnTree(columnTree);\n    this.recalculateColumnWidths();\n  }\n\n  _renderColumnTree(columnTree) {\n    Array.from(this.$.items.children).forEach((row) => this._updateRow(row, columnTree[columnTree.length - 1], null, false, true));\n\n    while (this.$.header.children.length < columnTree.length) {\n      const headerRow = document.createElement('tr');\n      headerRow.setAttribute('part', 'row');\n      headerRow.setAttribute('role', 'row');\n      this.$.header.appendChild(headerRow);\n\n      const footerRow = document.createElement('tr');\n      footerRow.setAttribute('part', 'row');\n      footerRow.setAttribute('role', 'row');\n      this.$.footer.appendChild(footerRow);\n    }\n    while (this.$.header.children.length > columnTree.length) {\n      this.$.header.removeChild(this.$.header.firstElementChild);\n      this.$.footer.removeChild(this.$.footer.firstElementChild);\n    }\n\n    Array.from(this.$.header.children)\n      .forEach((headerRow, index) => this._updateRow(headerRow, columnTree[index], 'header', index === columnTree.length - 1));\n\n    Array.from(this.$.footer.children)\n      .forEach((footerRow, index) => this._updateRow(footerRow, columnTree[columnTree.length - 1 - index], 'footer', index === 0));\n\n    // Sizer rows\n    this._updateRow(this.$.outersizer, columnTree[columnTree.length - 1], null, false, true);\n    this._updateRow(this.$.fixedsizer, columnTree[columnTree.length - 1]);\n\n    this._resizeHandler();\n    this._frozenCellsChanged();\n    this._updateFirstAndLastColumn();\n    this._resetKeyboardNavigation();\n    this._a11yUpdateHeaderRows();\n    this._a11yUpdateFooterRows();\n  }\n\n  _updateItem(row, item) {\n    row._item = item;\n    const model = this.__getRowModel(row);\n\n    this._toggleAttribute('selected', model.selected, row);\n    this._a11yUpdateRowSelected(row, model.selected);\n    this._a11yUpdateRowLevel(row, model.level);\n    this._toggleAttribute('expanded', model.expanded, row);\n    if (this._rowDetailsTemplate || this.rowDetailsRenderer) {\n      this._toggleDetailsCell(row, item);\n    }\n    this._generateCellClassNames(row, model);\n    this._filterDragAndDrop(row, model);\n\n    Array.from(row.children).forEach(cell => {\n      if (cell._renderer) {\n        const owner = cell._column || this;\n        cell._renderer.call(owner, cell._content, owner, model);\n      } else if (cell._instance) {\n        cell._instance.__detailsOpened__ = model.detailsOpened;\n        cell._instance.__selected__ = model.selected;\n        cell._instance.__level__ = model.level;\n        cell._instance.__expanded__ = model.expanded;\n        cell._instance.setProperties(model);\n      }\n    });\n\n    this._debouncerUpdateHeights = Debouncer.debounce(this._debouncerUpdateHeights,\n      timeOut.after(1), () => {\n        this._updateMetrics();\n        this._positionItems();\n        this._updateScrollerSize();\n      }\n    );\n  }\n\n  _resizeHandler() {\n    this._updateDetailsCellHeights();\n    this._accessIronListAPI(super._resizeHandler, true);\n    this._updateScrollerMeasurements();\n    this._updateHeaderFooterMetrics();\n  }\n\n  _updateHeaderFooterMetrics() {\n    const headerHeight = this.$.header.clientHeight + 'px';\n    const footerHeight = this.$.footer.clientHeight + 'px';\n    [this.$.outersizer, this.$.fixedsizer, this.$.items].forEach(element => {\n      element.style.borderTopWidth = headerHeight;\n      element.style.borderBottomWidth = footerHeight;\n    });\n\n    afterNextRender(this.$.header, () => {\n      if (this._pendingScrollToIndex) {\n        this._scrollToIndex(this._pendingScrollToIndex);\n      }\n    });\n  }\n\n  _onAnimationEnd(e) {\n    // ShadyCSS applies scoping suffixes to animation names\n    if (e.animationName.indexOf('vaadin-grid-appear') === 0) {\n      this._render();\n      this._updateHeaderFooterMetrics();\n      e.stopPropagation();\n      this.notifyResize();\n      this.__itemsReceived();\n    }\n  }\n\n  _toggleAttribute(name, bool, node) {\n    if (node.hasAttribute(name) === !bool) {\n      if (bool) {\n        node.setAttribute(name, '');\n      } else {\n        node.removeAttribute(name);\n      }\n    }\n  }\n\n  __getRowModel(row) {\n    return {\n      index: row.index,\n      item: row._item,\n      level: this._getIndexLevel(row.index),\n      expanded: this._isExpanded(row._item),\n      selected: this._isSelected(row._item),\n      detailsOpened:\n        !!(this._rowDetailsTemplate || this.rowDetailsRenderer) && this._isDetailsOpened(row._item)\n    };\n  }\n\n  /**\n   * Manually invoke existing renderers for all the columns\n   * (header, footer and body cells) and opened row details.\n   */\n  render() {\n    if (this._columnTree) {\n      // header and footer renderers\n      this._columnTree.forEach(level => {\n        level.forEach(column => column._renderHeaderAndFooter());\n      });\n\n      // body and row details renderers\n      this._update();\n    }\n  }\n\n  /**\n   * Updates the computed metrics and positioning of internal grid parts\n   * (row/details cell positioning etc). Needs to be invoked whenever the sizing of grid\n   * content changes asynchronously to ensure consistent appearance (e.g. when a\n   * contained image whose bounds aren't known beforehand finishes loading).\n   */\n  notifyResize() {\n    super.notifyResize();\n  }\n\n  _heightByRowsChanged(value, oldValue) {\n    if (value || oldValue) {\n      this.notifyResize();\n    }\n  }\n\n  __forceReflow() {\n    this._debouncerForceReflow = Debouncer.debounce(this._debouncerForceReflow,\n      animationFrame, () => {\n        this.$.scroller.style.overflow = 'hidden';\n        setTimeout(() => this.$.scroller.style.overflow = '');\n      }\n    );\n  }\n}\n\ncustomElements.define(GridElement.is, GridElement);\nexport { GridElement };\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { FlattenedNodesObserver } from '@polymer/polymer/lib/utils/flattened-nodes-observer.js';\nimport { DirMixin } from '@vaadin/vaadin-element-mixin/vaadin-dir-mixin.js';\nimport { Templatizer } from './vaadin-grid-templatizer.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { animationFrame } from '@polymer/polymer/lib/utils/async.js';\n\n/**\n * @polymerMixin\n */\nexport const ColumnBaseMixin = superClass => class ColumnBaseMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * When set to true, the column is user-resizable.\n       * @default false\n       */\n      resizable: {\n        type: Boolean,\n        value: function() {\n          if (this.localName === 'vaadin-grid-column-group') {\n            return;\n          }\n\n          const parent = this.parentNode;\n          if (parent && parent.localName === 'vaadin-grid-column-group') {\n            return parent.resizable || false;\n          } else {\n            return false;\n          }\n        }\n      },\n\n      _headerTemplate: {\n        type: Object\n      },\n\n      _footerTemplate: {\n        type: Object\n      },\n\n      /**\n       * When true, the column is frozen. When a column inside of a column group is frozen,\n       * all of the sibling columns inside the group will get frozen also.\n       */\n      frozen: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * When set to true, the cells for this column are hidden.\n       */\n      hidden: {\n        type: Boolean\n      },\n\n      /**\n       * Text content to display in the header cell of the column.\n       */\n      header: {\n        type: String\n      },\n\n      /**\n       * Aligns the columns cell content horizontally.\n       * Supported values: \"start\", \"center\" and \"end\".\n       */\n      textAlign: {\n        type: String\n      },\n\n      _lastFrozen: {\n        type: Boolean,\n        value: false\n      },\n\n      _order: Number,\n\n      _reorderStatus: Boolean,\n\n      _emptyCells: Array,\n\n      _headerCell: Object,\n\n      _footerCell: Object,\n\n      _grid: Object,\n\n      /**\n       * Custom function for rendering the header content.\n       * Receives two arguments:\n       *\n       * - `root` The header cell content DOM element. Append your content to it.\n       * - `column` The `<vaadin-grid-column>` element.\n       */\n      headerRenderer: Function,\n\n      /**\n       * Custom function for rendering the footer content.\n       * Receives two arguments:\n       *\n       * - `root` The footer cell content DOM element. Append your content to it.\n       * - `column` The `<vaadin-grid-column>` element.\n       */\n      footerRenderer: Function\n    };\n  }\n\n  static get observers() {\n    return [\n      '_widthChanged(width, _headerCell, _footerCell, _cells.*)',\n      '_frozenChanged(frozen, _headerCell, _footerCell, _cells.*)',\n      '_flexGrowChanged(flexGrow, _headerCell, _footerCell, _cells.*)',\n      '_pathOrHeaderChanged(path, header, _headerCell, _footerCell, _cells.*, renderer, headerRenderer, _bodyTemplate, _headerTemplate)',\n      '_textAlignChanged(textAlign, _cells.*, _headerCell, _footerCell)',\n      '_orderChanged(_order, _headerCell, _footerCell, _cells.*)',\n      '_lastFrozenChanged(_lastFrozen)',\n      '_setBodyTemplateOrRenderer(_bodyTemplate, renderer, _cells, _cells.*)',\n      '_setHeaderTemplateOrRenderer(_headerTemplate, headerRenderer, _headerCell)',\n      '_setFooterTemplateOrRenderer(_footerTemplate, footerRenderer, _footerCell)',\n      '_resizableChanged(resizable, _headerCell)',\n      '_reorderStatusChanged(_reorderStatus, _headerCell, _footerCell, _cells.*)',\n      '_hiddenChanged(hidden, _headerCell, _footerCell, _cells.*)'\n    ];\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._bodyTemplate && (this._bodyTemplate.templatizer._grid = this._grid);\n    this._headerTemplate && (this._headerTemplate.templatizer._grid = this._grid);\n    this._footerTemplate && (this._footerTemplate.templatizer._grid = this._grid);\n\n    this._templateObserver.flush();\n    if (!this._bodyTemplate) {\n      // The observer might not have triggered if the tag is empty. Run manually.\n      this._templateObserver.callback();\n    }\n\n    requestAnimationFrame(() => {\n      this._allCells.forEach(cell => {\n        if (!cell._content.parentNode) {\n          this._grid && this._grid.appendChild(cell._content);\n        }\n      });\n    });\n  }\n\n  /** @protected */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    requestAnimationFrame(() => {\n      if (!this._findHostGrid()) {\n        this._allCells.forEach(cell => {\n          if (cell._content.parentNode) {\n            cell._content.parentNode.removeChild(cell._content);\n          }\n        });\n      }\n    });\n\n    this._gridValue = undefined;\n  }\n\n  _findHostGrid() {\n    let el = this;\n    // Custom elements extending grid must have a specific localName\n    while (el && !/^vaadin.*grid(-pro)?$/.test(el.localName)) {\n      el = el.assignedSlot ? el.assignedSlot.parentNode : el.parentNode;\n    }\n    return el || undefined;\n  }\n\n  get _grid() {\n    if (!this._gridValue) {\n      this._gridValue = this._findHostGrid();\n    }\n    return this._gridValue;\n  }\n\n  get _allCells() {\n    return []\n      .concat(this._cells || [])\n      .concat(this._emptyCells || [])\n      .concat(this._headerCell)\n      .concat(this._footerCell)\n      .filter(cell => cell);\n  }\n\n  constructor() {\n    super();\n\n    this._templateObserver = new FlattenedNodesObserver(this, info => {\n      this._headerTemplate = this._prepareHeaderTemplate();\n      this._footerTemplate = this._prepareFooterTemplate();\n      this._bodyTemplate = this._prepareBodyTemplate();\n    });\n  }\n\n  _prepareHeaderTemplate() {\n    return this._prepareTemplatizer(this._findTemplate(true) || null, {});\n  }\n\n  _prepareFooterTemplate() {\n    return this._prepareTemplatizer(this._findTemplate(false, true) || null, {});\n  }\n\n  _prepareBodyTemplate() {\n    return this._prepareTemplatizer(this._findTemplate() || null);\n  }\n\n  _prepareTemplatizer(template, instanceProps) {\n    if (template && !template.templatizer) {\n      const templatizer = new Templatizer();\n      templatizer._grid = this._grid;\n      templatizer.dataHost = this.dataHost;\n      templatizer._instanceProps = instanceProps || templatizer._instanceProps;\n      templatizer.template = template;\n      template.templatizer = templatizer;\n    }\n\n    return template;\n  }\n\n  _renderHeaderAndFooter() {\n    if (this.headerRenderer && this._headerCell) {\n      this.__runRenderer(this.headerRenderer, this._headerCell);\n    }\n    if (this.footerRenderer && this._footerCell) {\n      this.__runRenderer(this.footerRenderer, this._footerCell);\n    }\n  }\n\n  __runRenderer(renderer, cell, rowData) {\n    const args = [cell._content, this];\n    if (rowData && rowData.item) {\n      args.push(rowData);\n    }\n    renderer.apply(this, args);\n  }\n\n  __setColumnTemplateOrRenderer(template, renderer, cells) {\n    if (template && renderer) {\n      throw new Error('You should only use either a renderer or a template');\n    }\n\n    cells.forEach(cell => {\n      const model = this._grid.__getRowModel(cell.parentElement);\n\n      if (renderer) {\n        cell._renderer = renderer;\n\n        if (model.item || renderer === this.headerRenderer || renderer === this.footerRenderer) {\n          this.__runRenderer(renderer, cell, model);\n        }\n      } else if (cell._template !== template) {\n        cell._template = template;\n\n        cell._content.innerHTML = '';\n        template.templatizer._grid = template.templatizer._grid || this._grid;\n        const inst = template.templatizer.createInstance();\n        cell._content.appendChild(inst.root);\n        cell._instance = inst;\n        if (model.item) {\n          cell._instance.setProperties(model);\n        }\n      }\n    });\n  }\n\n  _setBodyTemplateOrRenderer(template, renderer, cells, splices) {\n    if ((template || renderer) && cells) {\n      this.__setColumnTemplateOrRenderer(template, renderer, cells);\n    }\n  }\n\n  _setHeaderTemplateOrRenderer(headerTemplate, headerRenderer, headerCell) {\n    if ((headerTemplate || headerRenderer) && headerCell) {\n      this.__setColumnTemplateOrRenderer(headerTemplate, headerRenderer, [headerCell]);\n    }\n  }\n\n  _setFooterTemplateOrRenderer(footerTemplate, footerRenderer, footerCell) {\n    if ((footerTemplate || footerRenderer) && footerCell) {\n      this.__setColumnTemplateOrRenderer(footerTemplate, footerRenderer, [footerCell]);\n      this._grid.__updateHeaderFooterRowVisibility(footerCell.parentElement);\n    }\n  }\n\n  _selectFirstTemplate(header = false, footer = false) {\n    return FlattenedNodesObserver.getFlattenedNodes(this)\n      .filter(node =>\n        node.localName === 'template'\n        && node.classList.contains('header') === header\n        && node.classList.contains('footer') === footer\n      )[0];\n  }\n\n  _findTemplate(header, footer) {\n    const template = this._selectFirstTemplate(header, footer);\n    if (template) {\n      if (this.dataHost) {\n        // set dataHost to the context where template has been defined\n        template._rootDataHost = this.dataHost._rootDataHost || this.dataHost;\n      }\n    }\n    return template;\n  }\n\n  _flexGrowChanged(flexGrow, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('flexGrow');\n    }\n\n    this._allCells.forEach(cell => cell.style.flexGrow = flexGrow);\n  }\n\n  _orderChanged(order, headerCell, footerCell, cells) {\n    this._allCells.forEach(cell => cell.style.order = order);\n  }\n\n  _widthChanged(width, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('width');\n    }\n\n    this._allCells.forEach(cell => cell.style.width = width);\n\n    // Force a reflow to workaround browser issues causing double scrollbars to grid\n    // https://github.com/vaadin/vaadin-grid/issues/1586\n    if (this._grid && this._grid.__forceReflow) {\n      this._grid.__forceReflow();\n    }\n  }\n\n  _frozenChanged(frozen, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('frozen', frozen);\n    }\n\n    this._allCells.forEach(cell => this._toggleAttribute('frozen', frozen, cell));\n\n    this._grid && this._grid._frozenCellsChanged && this._grid._frozenCellsChanged();\n  }\n\n  _lastFrozenChanged(lastFrozen) {\n    this._allCells.forEach(cell => this._toggleAttribute('last-frozen', lastFrozen, cell));\n\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._lastFrozen = lastFrozen;\n    }\n  }\n\n  _pathOrHeaderChanged(path, header, headerCell, footerCell, cells, renderer, headerRenderer, bodyTemplate, headerTemplate) {\n    const hasHeaderText = header !== undefined;\n    if (!headerRenderer && !headerTemplate && hasHeaderText && headerCell) {\n      this.__setTextContent(headerCell._content, header);\n    }\n\n    if (path && cells.value) {\n      if (!renderer && !bodyTemplate) {\n        const pathRenderer = (root, owner, {item}) => this.__setTextContent(root, this.get(path, item));\n        this.__setColumnTemplateOrRenderer(undefined, pathRenderer, cells.value);\n      }\n\n      if (!headerRenderer && !headerTemplate && !hasHeaderText && headerCell && header !== null) {\n        this.__setTextContent(headerCell._content, this._generateHeader(path));\n      }\n    }\n\n    if (headerCell) {\n      this._grid.__updateHeaderFooterRowVisibility(headerCell.parentElement);\n    }\n  }\n\n  __setTextContent(node, textContent) {\n    node.textContent !== textContent && (node.textContent = textContent);\n  }\n\n  _generateHeader(path) {\n    return path\n      .substr(path.lastIndexOf('.') + 1)\n      .replace(/([A-Z])/g, '-$1').toLowerCase()\n      .replace(/-/g, ' ')\n      .replace(/^./, match => match.toUpperCase());\n  }\n\n  _toggleAttribute(name, bool, node) {\n    if (node.hasAttribute(name) === !bool) {\n      if (bool) {\n        node.setAttribute(name, '');\n      } else {\n        node.removeAttribute(name);\n      }\n    }\n  }\n\n  _reorderStatusChanged(reorderStatus, headerCell, footerCell, cells) {\n    this._allCells.forEach(cell => cell.setAttribute('reorder-status', reorderStatus));\n  }\n\n  _resizableChanged(resizable, headerCell) {\n    if (resizable === undefined || headerCell === undefined) {\n      return;\n    }\n\n    if (headerCell) {\n      [headerCell].concat(this._emptyCells).forEach(cell => {\n        if (cell) {\n          const existingHandle = cell.querySelector('[part~=\"resize-handle\"]');\n          if (existingHandle) {\n            cell.removeChild(existingHandle);\n          }\n\n          if (resizable) {\n            const handle = document.createElement('div');\n            handle.setAttribute('part', 'resize-handle');\n            cell.appendChild(handle);\n          }\n        }\n      });\n    }\n  }\n\n  _textAlignChanged(textAlign, _cells, _headerCell, _footerCell) {\n    if (textAlign === undefined) {\n      return;\n    }\n    if (['start', 'end', 'center'].indexOf(textAlign) === -1) {\n      console.warn('textAlign can only be set as \"start\", \"end\" or \"center\"');\n      return;\n    }\n\n    let textAlignFallback;\n    if (getComputedStyle(this._grid).direction === 'ltr') {\n      if (textAlign === 'start') {\n        textAlignFallback = 'left';\n      } else if (textAlign === 'end') {\n        textAlignFallback = 'right';\n      }\n    } else {\n      if (textAlign === 'start') {\n        textAlignFallback = 'right';\n      } else if (textAlign === 'end') {\n        textAlignFallback = 'left';\n      }\n    }\n\n    this._allCells.forEach(cell => {\n      cell._content.style.textAlign = textAlign;\n      if (getComputedStyle(cell._content).textAlign !== textAlign) {\n        cell._content.style.textAlign = textAlignFallback;\n      }\n    });\n  }\n\n  _hiddenChanged(hidden, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('hidden', hidden);\n    }\n\n    if (!!hidden !== !!this._previousHidden && this._grid) {\n      if (hidden === true) {\n        this._allCells.forEach(cell => {\n          if (cell._content.parentNode) {\n            cell._content.parentNode.removeChild(cell._content);\n          }\n        });\n      }\n      this._grid._debouncerHiddenChanged = Debouncer.debounce(\n        this._grid._debouncerHiddenChanged,\n        animationFrame,\n        () => {\n          if (this._grid && this._grid._renderColumnTree) {\n            this._grid._renderColumnTree(this._grid._columnTree);\n          }\n        }\n      );\n\n      this._grid._updateLastFrozen && this._grid._updateLastFrozen();\n      this._grid.notifyResize && this._grid.notifyResize();\n      this._grid._resetKeyboardNavigation && this._grid._resetKeyboardNavigation();\n    }\n    this._previousHidden = hidden;\n  }\n\n};\n\n/**\n * A `<vaadin-grid-column>` is used to configure how a column in `<vaadin-grid>`\n * should look like.\n *\n * See `<vaadin-grid>` documentation and demos for instructions and examples on how\n * to configure the `<vaadin-grid-column>`.\n * ```\n *\n * @extends PolymerElement\n * @mixes Grid.ColumnBaseMixin\n */\nclass GridColumnElement extends ColumnBaseMixin(DirMixin(PolymerElement)) {\n  static get is() {\n    return 'vaadin-grid-column';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Width of the cells for this column.\n       */\n      width: {\n        type: String,\n        value: '100px'\n      },\n\n      /**\n       * Flex grow ratio for the cell widths. When set to 0, cell width is fixed.\n       */\n      flexGrow: {\n        type: Number,\n        value: 1\n      },\n\n      /**\n       * Custom function for rendering the cell content.\n       * Receives three arguments:\n       *\n       * - `root` The cell content DOM element. Append your content to it.\n       * - `column` The `<vaadin-grid-column>` element.\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       *   - `rowData.expanded` Sublevel toggle state.\n       *   - `rowData.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `rowData.selected` Selected state.\n       */\n      renderer: Function,\n\n      /**\n       * Path to an item sub-property whose value gets displayed in the column body cells.\n       * The property name is also shown in the column header if an explicit header or renderer isn't defined.\n       */\n      path: {\n        type: String\n      },\n\n      /**\n       * Automatically sets the width of the column based on the column contents when this is set to `true`.\n       *\n       * For performance reasons the column width is calculated automatically only once when the grid items\n       * are rendered for the first time and the calculation only considers the rows which are currently\n       * rendered in DOM (a bit more than what is currently visible). If the grid is scrolled, or the cell\n       * content changes, the column width might not match the contents anymore.\n       *\n       * Hidden columns are ignored in the calculation and their widths are not automatically updated when\n       * you show a column that was initially hidden.\n       *\n       * You can manually trigger the auto sizing behavior again by calling `grid.recalculateColumnWidths()`.\n       *\n       * The column width may still grow larger when `flexGrow` is not 0.\n       */\n      autoWidth: {\n        type: Boolean,\n        value: false\n      },\n\n      _bodyTemplate: {\n        type: Object\n      },\n\n      _cells: Array\n\n    };\n  }\n\n}\n\ncustomElements.define(GridColumnElement.is, GridColumnElement);\nexport { GridColumnElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * `<vaadin-checkbox>` is a Web Component for customized checkboxes.\n *\n * ```html\n * <vaadin-checkbox>\n *   Make my profile visible\n * </vaadin-checkbox>\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name         | Description\n * ------------------|----------------\n * `checkbox`        | The wrapper element for the native <input type=\"checkbox\">\n * `label`           | The wrapper element in which the component's children, namely the label, is slotted\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|--------------\n * `active`     | Set when the checkbox is pressed down, either with mouse, touch or the keyboard. | `:host`\n * `disabled`   | Set when the checkbox is disabled. | `:host`\n * `focus-ring` | Set when the checkbox is focused using the keyboard. | `:host`\n * `focused`    | Set when the checkbox is focused. | `:host`\n * `indeterminate` | Set when the checkbox is in indeterminate mode. | `:host`\n * `checked` | Set when the checkbox is checked. | `:host`\n * `empty` | Set when there is no label provided. | `label`\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends PolymerElement\n * @mixes ElementMixin\n * @mixes ControlStateMixin\n * @mixes ThemableMixin\n * @mixes GestureEventListeners\n * @demo demo/index.html\n */\nclass CheckboxElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        GestureEventListeners(PolymerElement)))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      label {\n        display: inline-flex;\n        align-items: baseline;\n        outline: none;\n      }\n\n      [part=\"checkbox\"] {\n        position: relative;\n        display: inline-block;\n        flex: none;\n      }\n\n      input[type=\"checkbox\"] {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: inherit;\n        margin: 0;\n      }\n\n      :host([disabled]) {\n        -webkit-tap-highlight-color: transparent;\n      }\n    </style>\n\n    <label>\n      <span part=\"checkbox\">\n        <input type=\"checkbox\" checked=\"{{checked::change}}\" disabled\\$=\"[[disabled]]\" indeterminate=\"{{indeterminate::change}}\" role=\"presentation\" tabindex=\"-1\">\n      </span>\n\n      <span part=\"label\">\n        <slot></slot>\n      </span>\n    </label>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-checkbox';\n  }\n\n  static get version() {\n    return '2.5.0';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * True if the checkbox is checked.\n       * @type {boolean}\n       */\n      checked: {\n        type: Boolean,\n        value: false,\n        notify: true,\n        observer: '_checkedChanged',\n        reflectToAttribute: true\n      },\n\n      /**\n       * Indeterminate state of the checkbox when it's neither checked nor unchecked, but undetermined.\n       * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/checkbox#Indeterminate_state_checkboxes\n       * @type {boolean}\n       */\n      indeterminate: {\n        type: Boolean,\n        notify: true,\n        observer: '_indeterminateChanged',\n        reflectToAttribute: true,\n        value: false\n      },\n\n      /**\n       * The value given to the data submitted with the checkbox's name to the server when the control is inside a form.\n       */\n      value: {\n        type: String,\n        value: 'on'\n      },\n\n      /** @private */\n      _nativeCheckbox: {\n        type: Object\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    /**\n     * @type {string}\n     * Name of the element.\n     */\n    this.name;\n  }\n\n  get name() {\n    return this.checked ? this._storedName : '';\n  }\n\n  set name(name) {\n    this._storedName = name;\n  }\n\n  ready() {\n    super.ready();\n\n    this.setAttribute('role', 'checkbox');\n\n    this._nativeCheckbox = this.shadowRoot.querySelector('input[type=\"checkbox\"]');\n\n    this.addEventListener('click', this._handleClick.bind(this));\n\n    this._addActiveListeners();\n\n    const attrName = this.getAttribute('name');\n    if (attrName) {\n      this.name = attrName;\n    }\n\n    this.shadowRoot.querySelector('[part~=\"label\"]').querySelector('slot')\n      .addEventListener('slotchange', this._updateLabelAttribute.bind(this));\n\n    this._updateLabelAttribute();\n  }\n\n  /** @private */\n  _updateLabelAttribute() {\n    const label = this.shadowRoot.querySelector('[part~=\"label\"]');\n    const assignedNodes = label.firstElementChild.assignedNodes();\n    if (this._isAssignedNodesEmpty(assignedNodes)) {\n      label.setAttribute('empty', '');\n    } else {\n      label.removeAttribute('empty');\n    }\n  }\n\n  /** @private */\n  _isAssignedNodesEmpty(nodes) {\n    // The assigned nodes considered to be empty if there is no slotted content or only one empty text node\n    return nodes.length === 0 ||\n          (nodes.length == 1\n          && nodes[0].nodeType == Node.TEXT_NODE\n          && nodes[0].textContent.trim() === '');\n  }\n\n  /** @private */\n  _checkedChanged(checked) {\n    if (this.indeterminate) {\n      this.setAttribute('aria-checked', 'mixed');\n    } else {\n      this.setAttribute('aria-checked', Boolean(checked));\n    }\n  }\n\n  /** @private */\n  _indeterminateChanged(indeterminate) {\n    if (indeterminate) {\n      this.setAttribute('aria-checked', 'mixed');\n    } else {\n      this.setAttribute('aria-checked', this.checked);\n    }\n  }\n\n  /** @private */\n  _addActiveListeners() {\n    // DOWN\n    this._addEventListenerToNode(this, 'down', (e) => {\n      if (this.__interactionsAllowed(e)) {\n        this.setAttribute('active', '');\n      }\n    });\n\n    // UP\n    this._addEventListenerToNode(this, 'up', () => this.removeAttribute('active'));\n\n    // KEYDOWN\n    this.addEventListener('keydown', e => {\n      if (this.__interactionsAllowed(e) && e.keyCode === 32) {\n        e.preventDefault();\n        this.setAttribute('active', '');\n      }\n    });\n\n    // KEYUP\n    this.addEventListener('keyup', e => {\n      if (this.__interactionsAllowed(e) && e.keyCode === 32) {\n        e.preventDefault();\n        this._toggleChecked();\n        this.removeAttribute('active');\n\n        if (this.indeterminate) {\n          this.indeterminate = false;\n        }\n      }\n    });\n  }\n\n  /**\n   * @return {!HTMLInputElement}\n   * @protected\n   */\n  get focusElement() {\n    return this.shadowRoot.querySelector('input');\n  }\n\n  /**\n   * True if users' interactions (mouse or keyboard)\n   * should toggle the checkbox\n   */\n  __interactionsAllowed(e) {\n    if (this.disabled) {\n      return false;\n    }\n\n    // https://github.com/vaadin/vaadin-checkbox/issues/63\n    if (e.target.localName === 'a') {\n      return false;\n    }\n\n    return true;\n  }\n\n  /** @private */\n  _handleClick(e) {\n    if (this.__interactionsAllowed(e)) {\n      if (!this.indeterminate) {\n        if (e.composedPath()[0] !== this._nativeCheckbox) {\n          e.preventDefault();\n          this._toggleChecked();\n        }\n      } else {\n        /*\n         * Required for IE 11 and Edge.\n         * See issue here: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7344418/\n         */\n        this.indeterminate = false;\n        e.preventDefault();\n        this._toggleChecked();\n      }\n    }\n  }\n\n  /** @protected */\n  _toggleChecked() {\n    this.checked = !this.checked;\n    this.dispatchEvent(new CustomEvent('change', {composed: false, bubbles: true}));\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n}\n\ncustomElements.define(CheckboxElement.is, CheckboxElement);\n\nexport { CheckboxElement };\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-checkbox\" theme-for=\"vaadin-checkbox\">\n  <template>\n    <style include=\"lumo-checkbox-style lumo-checkbox-effects\">\n      /* IE11 only */\n      ::-ms-backdrop,\n      [part=\"checkbox\"] {\n        line-height: 1;\n      }\n    </style>\n  </template>\n</dom-module><dom-module id=\"lumo-checkbox-style\">\n  <template>\n    <style>\n      :host {\n        -webkit-tap-highlight-color: transparent;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        cursor: default;\n        outline: none;\n      }\n\n      [part=\"label\"]:not([empty]) {\n        margin: 0.1875em 0.875em 0.1875em 0.375em;\n      }\n\n      [part=\"checkbox\"] {\n        width: calc(1em + 2px);\n        height: calc(1em + 2px);\n        margin: 0.1875em;\n        position: relative;\n        border-radius: var(--lumo-border-radius-s);\n        background-color: var(--lumo-contrast-20pct);\n        transition: transform 0.2s cubic-bezier(.12, .32, .54, 2), background-color 0.15s;\n        pointer-events: none;\n        line-height: 1.2;\n      }\n\n      :host([indeterminate]) [part=\"checkbox\"],\n      :host([checked]) [part=\"checkbox\"] {\n        background-color: var(--lumo-primary-color);\n      }\n\n      /* Needed to align the checkbox nicely on the baseline */\n      [part=\"checkbox\"]::before {\n        content: \"\\\\2003\";\n      }\n\n      /* Checkmark */\n      [part=\"checkbox\"]::after {\n        content: \"\";\n        display: inline-block;\n        width: 0;\n        height: 0;\n        border: 0 solid var(--lumo-primary-contrast-color);\n        border-width: 0.1875em 0 0 0.1875em;\n        box-sizing: border-box;\n        transform-origin: 0 0;\n        position: absolute;\n        top: 0.8125em;\n        left: 0.5em;\n        transform: scale(0.55) rotate(-135deg);\n        opacity: 0;\n      }\n\n      :host([checked]) [part=\"checkbox\"]::after {\n        opacity: 1;\n        width: 0.625em;\n        height: 1.0625em;\n      }\n\n      /* Indeterminate checkmark */\n\n      :host([indeterminate]) [part=\"checkbox\"]::after {\n        transform: none;\n        opacity: 1;\n        top: 45%;\n        height: 10%;\n        left: 22%;\n        right: 22%;\n        width: auto;\n        border: 0;\n        background-color: var(--lumo-primary-contrast-color);\n        transition: opacity 0.25s;\n      }\n\n      /* Focus ring */\n\n      :host([focus-ring]) [part=\"checkbox\"] {\n        box-shadow: 0 0 0 3px var(--lumo-primary-color-50pct);\n      }\n\n      /* Disabled */\n\n      :host([disabled]) {\n        pointer-events: none;\n        color: var(--lumo-disabled-text-color);\n      }\n\n      :host([disabled]) [part=\"label\"] ::slotted(*) {\n        color: inherit;\n      }\n\n      :host([disabled]) [part=\"checkbox\"] {\n        background-color: var(--lumo-contrast-10pct);\n      }\n\n      :host([disabled]) [part=\"checkbox\"]::after {\n        border-color: var(--lumo-contrast-30pct);\n      }\n\n      :host([indeterminate][disabled]) [part=\"checkbox\"]::after {\n        background-color: var(--lumo-contrast-30pct);\n      }\n\n      /* RTL specific styles */\n\n      :host([dir=\"rtl\"]) [part=\"label\"]:not([empty]) {\n        margin: 0.1875em 0.375em 0.1875em 0.875em;\n      }\n    </style>\n  </template>\n</dom-module><dom-module id=\"lumo-checkbox-effects\">\n  <template>\n    <style>\n      /* Transition the checkmark if activated with the mouse (disabled for grid select-all this way) */\n      :host(:hover) [part=\"checkbox\"]::after {\n        transition: width 0.1s, height 0.25s;\n      }\n\n      /* Used for activation \"halo\" */\n      [part=\"checkbox\"]::before {\n        color: transparent;\n        display: inline-block;\n        width: 100%;\n        height: 100%;\n        border-radius: inherit;\n        background-color: inherit;\n        transform: scale(1.4);\n        opacity: 0;\n        transition: transform 0.1s, opacity 0.8s;\n      }\n\n      /* Hover */\n\n      :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part=\"checkbox\"] {\n        background-color: var(--lumo-contrast-30pct);\n      }\n\n      /* Disable hover for touch devices */\n      @media (pointer: coarse) {\n        :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part=\"checkbox\"] {\n          background-color: var(--lumo-contrast-20pct);\n        }\n      }\n\n      /* Active */\n\n      :host([active]) [part=\"checkbox\"] {\n        transform: scale(0.9);\n        transition-duration: 0.05s;\n      }\n\n      :host([active][checked]) [part=\"checkbox\"] {\n        transform: scale(1.1);\n      }\n\n      :host([active]:not([checked])) [part=\"checkbox\"]::before {\n        transition-duration: 0.01s, 0.01s;\n        transform: scale(0);\n        opacity: 0.4;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { templatize } from '@polymer/polymer/lib/utils/templatize.js';\n/**\n * `vaadin-grid-templatizer` is a helper element for the `vaadin-grid` that is preparing and\n * stamping instances of cells and columns templates\n *\n * @extends PolymerElement\n * @private\n */\nclass GridTemplatizer extends (class extends PolymerElement {}) {\n  static get is() {\n    return 'vaadin-grid-templatizer';\n  }\n\n  static get properties() {\n    return {\n      dataHost: Object,\n\n      template: Object,\n\n      _templateInstances: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      _parentPathValues: {\n        value: function() {\n          return {};\n        }\n      },\n\n      _grid: Object\n    };\n  }\n\n  static get observers() {\n    return [\n      '_templateInstancesChanged(_templateInstances.*, _parentPathValues.*)'\n    ];\n  }\n\n  constructor() {\n    super();\n\n    this._instanceProps = {\n      detailsOpened: true,\n      index: true,\n      item: true,\n      selected: true,\n      expanded: true,\n      level: true\n    };\n  }\n\n  createInstance() {\n    this._ensureTemplatized();\n    const instance = new this._TemplateClass({});\n    this.addInstance(instance);\n\n    return instance;\n  }\n\n  addInstance(instance) {\n    if (this._templateInstances.indexOf(instance) === -1) {\n      this._templateInstances.push(instance);\n      requestAnimationFrame(() => this.notifyPath('_templateInstances.*', this._templateInstances));\n    }\n  }\n\n  removeInstance(instance) {\n    const index = this._templateInstances.indexOf(instance);\n    this.splice('_templateInstances', index, 1);\n  }\n\n  _ensureTemplatized() {\n    if (!this._TemplateClass) {\n      this._TemplateClass = templatize(this.template, this, {\n        instanceProps: this._instanceProps,\n        parentModel: true,\n\n        forwardHostProp: function(prop, value) {\n          this._forwardParentProp(prop, value);\n\n          if (this._templateInstances) {\n            this._templateInstances.forEach(inst => inst.notifyPath(prop, value));\n          }\n        },\n\n        notifyInstanceProp: function(inst, prop, value) {\n          if (prop === 'index' || prop === 'item') {\n            // We dont need a change notification for these.\n            return;\n          }\n\n          const originalProp = `__${prop}__`;\n\n          // Notify for only user-action changes, not for scrolling updates. E. g.,\n          // if `detailsOpened` is different from `__detailsOpened__`, which was set during render.\n          if (inst[originalProp] === value) {\n            return;\n          }\n          inst[originalProp] = value;\n\n          const row = Array.from(this._grid.$.items.children).filter(row => this._grid._itemsEqual(row._item, inst.item))[0];\n          if (row) {\n            Array.from(row.children).forEach(cell => {\n              if (cell._instance) {\n                cell._instance[originalProp] = value;\n                cell._instance.notifyPath(prop, value);\n              }\n            });\n          }\n\n          const itemPrefix = 'item.';\n          if (Array.isArray(this._grid.items) && prop.indexOf(itemPrefix) === 0) {\n            const itemsIndex = this._grid.items.indexOf(inst.item);\n            const path = prop.slice(itemPrefix.length);\n            this._grid.notifyPath(`items.${itemsIndex}.${path}`, value);\n          }\n\n          const gridCallback = `_${prop}InstanceChangedCallback`;\n          if (this._grid && this._grid[gridCallback]) {\n            this._grid[gridCallback](inst, value);\n          }\n        }\n\n      });\n    }\n  }\n\n  _forwardParentProp(prop, value) {\n    this._parentPathValues[prop] = value;\n    this._templateInstances.forEach(inst => inst.notifyPath(prop, value));\n  }\n\n  _templateInstancesChanged(t, p) {\n    let index, count;\n    if (t.path === '_templateInstances') {\n      // Iterate all instances\n      index = 0;\n      count = this._templateInstances.length;\n    } else if (t.path === '_templateInstances.splices') {\n      // Iterate only new instances\n      index = t.value.index;\n      count = t.value.addedCount;\n    } else {\n      return;\n    }\n    Object.keys(this._parentPathValues || {}).forEach(keyName => {\n      for (var i = index; i < index + count; i++) {\n        this._templateInstances[i].set(keyName, this._parentPathValues[keyName]);\n      }\n    });\n  }\n\n}\n\ncustomElements.define(GridTemplatizer.is, GridTemplatizer);\n\nexport { GridTemplatizer as Templatizer };\n"],"sourceRoot":""}