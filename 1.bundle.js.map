{"version":3,"sources":["webpack:///./components/dnd-select-add.js","webpack:///./components/dnd-switch.js","webpack:///./components/views/character/dnd-character-builder-equipment-item-detail.js"],"names":["DndSelectAdd","options","type","Array","model","String","addCallback","Function","value","observer","choices","Number","paren","label","placeholder","multiValue","disabled","Boolean","reflectToAttribute","theme","this","listBox","remove","$","select","requestContentUpdate","isArray","choiceArray","map","v","indexOf","findIndex","o","name","source","filter","selectedValues","i","join","super","ready","setTimeout","async","contentEl","_overlayElement","shadowRoot","querySelector","scrollHeight","addEventListener","e","scrollTop","passive","renderer","root","document","createElement","setAttribute","opened","wasPreviouslySelected","srcElement","getAttribute","scroll","length","splice","selectedOptions","option","item","optionName","innerHTML","appendChild","_assignMenuElement","valueUpdated","connectedCallback","selectChangeHandler","val","selected","undefined","disconnectedCallback","removeEventListener","a","result","customElements","define","DndSwitch","initialValue","checked","notify","secondaryLabel","switchEl","switchEventHandler","dispatchEvent","CustomEvent","detail","bubbles","composed","DndCharacterBuilderEquipmentItemDetail","isEditMode","hasRenderedOutput","hasAC","armorAC","isArmor","isMartial","weaponMagicModifier","itemRarity","itemName","itemWeight","weaponProperties","itemResist","itemQuantity","Object","storedItem","itemType","itemTypes","rarityTypes","damageTypes","resistTypes","weaponPropertyOptions","weaponPropertyValues","editModeHandler","console","error","renderedOutput","hasDescription","_getItemType","armor","ac","acLabel","weaponCategory","weapon","parseInt","bonusWeapon","property","props","prop","propObj","find","trim","rarity","weight","canHaveResist","resist","canHaveQuantity","quantity","canHaveSpell","canHaveSpellMod","spellAttack","bonusSpellAttack","spellDC","bonusSpellSaveDc","ITEM_TYPE_JSON_TO_ABV","newType","isEquipped","isAttuned","hasQuantity","typeVal","entries","key","damages","push","roll","rollDamageIndexAttr","rollDamageIndex","parsedMod","isNaN","propCodes","bind","parsedAC","parsedWeight","parseFloat","parsedQuantity","parsedSpellAttack","parsedSpellDC","bools","bool","sourceJsonToFull"],"mappings":"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","file":"1.bundle.js","sourcesContent":["import { PolymerElement, html } from '@polymer/polymer';\nimport { mergeFeature } from '../util/charBuilder';\nimport { jqEmpty, util_capitalizeAll } from \"../js/utils\";\nimport \"@vaadin/vaadin-select\";\nimport {loadModel} from \"../util/data\";\n\nclass DndSelectAdd extends PolymerElement {\n  static get properties() {\n    return {\n      options: {\n        type: Array\n      },\n      model: {\n        type: String\n      },\n      addCallback: {\n        type: Function\n      },\n      value: {\n        type: String,\n        value: \"\",\n        observer: \"valueUpdated\"\n      },\n      choices: {\n        type: Number,\n        observer: \"choicesUpdated\"\n      },\n      paren: {\n        type: String,\n      },\n      label: {\n        type: String\n      },\n      placeholder: {\n        type: String,\n      },\n      multiValue: {\n        type: String,\n        value: \"\"\n      },\n      disabled: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n      theme: {\n        reflectToAttribute: true,\n        type: String,\n        value: \"\"\n      }\n    }\n  }\n\n  choicesUpdated() {\n    if (this.listBox) {\n      this.listBox.remove();\n      delete this.listBox;\n    }\n    this.$.select.requestContentUpdate();\n  }\n\n  valueUpdated() {\n    if (this.choices) {\n      if (Array.isArray(this.value) && this.options) {\n        const choiceArray = this.value\n          .map(v => {\n            if (this.options.indexOf(v) !== -1) {\n              return this.options.indexOf(v);\n            } else {\n              return this.options.findIndex((o) => {\n                return o.name === v.name && o.source === v.source;\n              });\n            }\n          })\n          .filter(v => { return v !== -1 });\n\n        if (this.listBox) {\n          this.listBox.selectedValues = choiceArray;\n        }\n        this.multiValue = choiceArray.map(i => {\n          let value = this.options[i];\n          return value.name ? value.name : util_capitalizeAll(value) \n        }).join(\", \");\n      } else {\n        if (this.listBox) {\n          this.listBox.selectedValues = [];\n        }\n        this.multiValue = \"\";\n      }\n    } else {\n      if (this.value && this.options) {\n        if (this.value.source) {\n          this.$.select.value = this.options.findIndex(i => { return i.name === this.value.name && i.source === this.value.source || i === this.value.name }) + \"\";\n        } else if (this.value.name) {\n          this.$.select.value = this.options.findIndex(i => { return i.name === this.value.name || i === this.value.name }) + \"\";\n        } else {\n          this.$.select.value = this.options.findIndex(i => { return i.name === this.value || i === this.value }) + \"\";\n        }\n      } else {\n        this.$.select.value = \"\";\n      }\n    }\n  }\n\n  ready() {\n    super.ready();\n\n    setTimeout(async () => {\n      if (this.model) {\n        this.options = await loadModel(this.model);\n      }\n\n      const contentEl = this.$.select._overlayElement.shadowRoot.querySelector('#content');\n      let scrollHeight = 0;\n      \n      contentEl.addEventListener('scroll', (e) => {\n        scrollHeight = contentEl.scrollTop;\n      }, { passive: true });\n\n      this.$.select.renderer = (root, select) => {\n        if (!this.listBox) {\n          this.listBox = document.createElement('vaadin-list-box');\n\n          // setting up for multi-select\n          if (this.choices) {\n            this.listBox.setAttribute(\"multiple\", true);\n\n            this.listBox.addEventListener(\"click\", (e) => {\n              select.opened = true;\n              let wasPreviouslySelected = e.srcElement.getAttribute(\"selected\") !== null\n              contentEl.scroll(0, scrollHeight);\n              setTimeout(() => {\n                if (this.listBox.selectedValues.length > this.choices\n                    && !wasPreviouslySelected) {\n                  this.listBox.selectedValues.splice(this.listBox.selectedValues.length - 2, 1)\n                }\n                let selectedOptions = this.listBox.selectedValues.map(v => { return this.options[v] });\n                this.multiValue = selectedOptions.map(o => { return o.name ? o.name : util_capitalizeAll(o) }).join(', ');\n                if (this.addCallback) {\n                  this.addCallback(selectedOptions);\n                }\n              }, 0);\n            });\n\n          }\n\n          // Adding options\n          if (this.options && this.options.length) {\n            for (let i = 0; i < this.options.length; i ++) {\n              const option = this.options[i],\n                item = document.createElement('vaadin-item');\n              const optionName = option.name || util_capitalizeAll(option);\n              item.innerHTML = `<span style='margin-left: 10px;'>${optionName}</span> ${option.name ? `<span style='font-size: 14px;color: var(--lumo-primary-color-50pct);'>${option.source || ''}</span>` : ''}`\n              item.setAttribute(\"value\", i);\n              this.listBox.appendChild(item);\n            }\n          }\n          root.appendChild(this.listBox);\n          this.$.select._assignMenuElement();\n\n          this.valueUpdated();\n        }\n      };\n    }, 0);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.selectChangeHandler = () => {\n      const val = this.$.select.value;\n      if (val) {\n        if (!this.choices) {\n          const selected = this.options[val];\n          if (this.addCallback) {\n            this.addCallback(selected, this.model);\n          } else {\n            mergeFeature(undefined, selected, this.model);\n          }\n          if (!this.value) {\n            this.$.select.value = \"\";\n          }\n        }\n      }\n    };\n\n    this.$.select.addEventListener(\"change\", this.selectChangeHandler);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.$.select.removeEventListener(\"change\", this.selectChangeHandler);\n  }\n\n  _exists(a) {\n    return !!a;\n  }\n\n  _label(label, choices, paren) {\n    let result = '';\n    if (label) {\n      result = label;\n      if (choices && choices !== 1 && choices !== 100) {\n        result += ` (pick ${choices})`;\n      }\n      if (paren) {\n        result += ` (${paren})`;\n      }\n    }\n    return result;\n  }\n\n  _theme(theme) {\n    return `dark add ${theme}`;\n  }\n  \n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: inline-block;\n        }\n        [slot=\"prefix\"] {\n          width: calc(100% - 46px);\n          padding: 12px;\n          line-height: 1.4;\n        }\n        vaadin-select {\n          width: 100%;\n        }\n        .prefix {\n          white-space: normal;\n          color: var(--lumo-body-text-color);\n        }\n      </style>\n      <vaadin-select id=\"select\" add theme$=\"[[_theme(theme)]]\" label=\"[[_label(label, choices, paren)]]\" placeholder=\"[[placeholder]]\" disabled$=\"[[disabled]]\">\n        <div hidden$=\"[[!_exists(multiValue)]]\" slot=\"prefix\">\n          <span class=\"prefix\">[[multiValue]]</span>\n        </div>\n      </vaadin-select>\n      \n    `;\n  }\n}\ncustomElements.define('dnd-select-add', DndSelectAdd);","import { PolymerElement, html } from \"@polymer/polymer\";\nimport { MDCSwitch } from \"@material/switch\";\n\nclass DndSwitch extends PolymerElement {\n  \n  static get properties() {\n    return {\n      initialValue: {\n        type: Boolean,\n        value: false,\n        observer: 'initValueChange'\n      },\n      checked: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        notify: true\n      },\n      label: {\n        type: String,\n        value: ''\n      },\n      secondaryLabel: {\n        type: String,\n        value: ''\n      },\n      disabled: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      }\n    };\n  }\n\n  initValueChange() {\n    if (this.switchEl) {\n      this.switchEl.checked = this.initialValue;\n      this.checked = this.initialValue;\n    }\n  }\n\n  ready() {\n    super.ready(); \n\n    setTimeout(() => {\n      this.switchEl = new MDCSwitch(this.shadowRoot.querySelector(\".mdc-switch\"));\n  \n      this.switchEl.checked = this.initialValue;\n      this.checked = this.initialValue;\n    }, 10);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.switchEventHandler = () => {\n      this.checked = this.switchEl.checked;\n      this.dispatchEvent(new CustomEvent(\"switch-change\", {\n        detail: {\n          checked: this.switchEl.checked\n        },\n        bubbles: true,\n        composed: true\n      }));\n    };\n    this.shadowRoot.querySelector(\".mdc-switch__native-control\").addEventListener(\"change\", this.switchEventHandler);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.shadowRoot.querySelector(\".mdc-switch__native-control\").removeEventListener(\"change\", this.switchEventHandler);\n  }\n\n  _switchClasses(disabled) {\n    return disabled ? \"mdc-switch mdc-list-item__meta mdc-switch--disabled\" : \"mdc-switch mdc-list-item__meta\";\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles\">\n        :host {\n          display: inline-flex;\n          justify-content: center;\n          align-items: center;\n          text-align: center;\n        }\n        :host([checked]) label.secondary {\n          color: var(--mdc-theme-primary);\n        }\n        :host([checked]) label:not(.secondary) {\n          color: var(--lumo-secondary-text-color);\n        }\n        label {\n          color: var(--mdc-theme-primary);\n          font-weight: 500;\n          font-size: var(--lumo-font-size-s);\n          margin-right: 16px;\n          transition: color 0.2s;\n        }\n        label.secondary {\n          color: var(--lumo-secondary-text-color);\n          margin-right: 0;\n          margin-left: 16px;\n        }\n        :host([extra-padding]) label.secondary {\n          margin-left: 50px;\n        }\n        :host([no-color]) .mdc-switch.mdc-switch--checked .mdc-switch__track {\n          background-color: #000;\n          border-color: #000;\n        }\n        :host([no-color]) .mdc-switch.mdc-switch--checked .mdc-switch__thumb {\n          background-color: #fff;\n          border-color: #fff;\n        }\n        :host([no-color]) .mdc-switch.mdc-switch--checked .mdc-switch__thumb-underlay::before {\n          background-color: #9e9e9e;\n        }\n        :host([no-color]) .mdc-switch.mdc-switch--checked .mdc-switch__thumb-underlay::after {\n          background-color: #9e9e9e;\n        }\n      </style>\n      \n      <label for=\"switch\">[[label]]<slot name=\"label\"></slot></label>\n      <div class$=\"[[_switchClasses(disabled)]]\">\n        <div class=\"mdc-switch__track\"></div>\n        <div class=\"mdc-switch__thumb-underlay\">\n          <div class=\"mdc-switch__thumb\">\n            <input type=\"checkbox\" id=\"switch\" class=\"mdc-switch__native-control\" role=\"switch\" disabled$=\"[[disabled]]\" />\n          </div>\n        </div>\n      </div>\n      <label class=\"secondary\">[[secondaryLabel]]<slot name=\"secondaryLabel\"></slot></label>\n    `;\n  }\n}\n\ncustomElements.define(\"dnd-switch\", DndSwitch);","import { PolymerElement, html } from \"@polymer/polymer\";\nimport {\n  saveCharacter,\n  setItem\n} from \"../../../util/charBuilder\";\nimport { getEditModeChannel, isEditMode } from \"../../../util/editMode\";\nimport { renderSelection } from \"../../../js/items\";\nimport { DAMAGE_TYPES, RARITY_TYPES } from \"../../../util/consts\";\nimport { findInPath, util_capitalizeAll } from \"../../../js/utils\";\nimport \"@vaadin/vaadin-text-field/vaadin-text-field\";\nimport \"@vaadin/vaadin-text-field/vaadin-integer-field\";\nimport \"@vaadin/vaadin-text-field/vaadin-text-area\";\nimport Parser from '../../../util/Parser';\nimport \"../../dnd-select-add\";\nimport \"../../dnd-button\";\nimport \"../../dnd-switch\";\n\n////////\n// Item Modifiers\n// - attachedSpells: []\n// - conditionImmune: []\n// - resist: []\n// - immune: [\n//     \"cold\"\n//   ]\n// - bonusSavingThrow: \"+1\"\n// - bonusAbilityCheck\": \"-2\"\n// - bonusWeapon: \"+1\"\n// - bonusSpellAttack: \"+1\"\n// - bonusSpellDC: \"+1\"\n// - bonusAc: \"+1\"\n// - ac: 2\n// - grantsProficiency: true\n// - critThreshold: 19\n// - recharge: \"dawn\"\n// - rechargeAmount: \"{@dice 1d3}\"\n// - charges: 3\n// - focus: [\"Wizard\"]\n// - optionalfeatures: \"\"\n// - baseItem\": \"longsword|phb\"\n// - miscTags: [\n//     \"CF/W\"\n//   ]\n// - ability: {\n//     \"static\": {\n//       \"con\": 19\n//     }\n//   }\n// - modifySpeed: {\n//     \"static\": {\n//       \"fly\": 150\n//     }\n//   },\n// - modifySpeed: {\n//   \"equal\": {\n//     \"fly\": \"walk\"\n//   }\n// }\n// - sentient: true\n// - curse: true\n// - staff: true\n// - reqAttuneTags: \n// - reqAttune: true\n// - value: 9000\n\n// Ships\n// - crewMin: 6,\n// - crewMax: 10,\n// - vehSpeed: 10,\n// - capPassenger: 30,\n// - capCargo: 10,\n// - travelCost: 200,\n// - shippingCost: 100\n// - seeAlsoVehicle: [\"Apparatus of Kwalish|DMG\"]\nclass DndCharacterBuilderEquipmentItemDetail extends PolymerElement {\n  \n  static get properties() {\n    return {\n      isEditMode: {\n        type: Boolean,\n        value: false\n      },\n      hasRenderedOutput: {\n        type: Boolean,\n        value: false\n      },\n      hasAC: {\n        type: Boolean,\n        value: false\n      },\n      armorAC: {\n        type: Number,\n        value: 0\n      },\n      isArmor: {\n        type: Boolean,\n        value: false\n      },\n      isMartial: {\n        type: Boolean,\n        value: false\n      },\n      weaponMagicModifier: {\n        type: Number,\n        value: 0\n      },\n      itemRarity: {\n        type: String,\n      },\n      itemName: {\n        type: String,\n      },\n      itemWeight: {\n        type: Number,\n        value: 0\n      },\n      weaponProperties: {\n        type: Array,\n      },\n      itemResist: {\n        type: String,\n      },\n      itemQuantity: {\n        type: Number,\n        value: 0\n      },\n      item: {\n        type: Object\n      },\n      storedItem: {\n        type: Object\n      },\n      itemType: {\n        type: String,\n        value: ''\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_itemChanged(item)'\n    ]\n  }\n\n  constructor() {\n    super();\n\n    this.itemTypes = [\n      'Currency',\n      'Armor (Light)',\n      'Armor (Medium)',\n      'Armor (Heavy)',\n      'Melee Weapon',\n      'Ranged Weapon',\n      'Shield',\n      'Adventuring Gear',\n      'Ammunition',\n      'Artisan Tool',\n      'Explosive',\n      'Gaming Set',\n      'Instrument',\n      'Mount',\n      'Potion',\n      'Rod',\n      'Ring',\n      'Scroll',\n      'Spellcasting Focus',\n      'Tool',\n      'Tack and Harness',\n      'Trade Good',\n      'Vehicle',\n      'Wand'\n    ];\n\n    this.rarityTypes = RARITY_TYPES;\n    this.damageTypes = DAMAGE_TYPES;\n    this.resistTypes = ['None', ...DAMAGE_TYPES];\n    this.weaponPropertyOptions = [\n      { name: 'Two-Handed', value: '2H' },\n      { name: 'Ammunition', value: 'A' },\n      { name: 'Finesse', value: 'F' },\n      { name: 'Heavy', value: 'H' },\n      { name: 'Light', value: 'L' },\n      { name: 'Loading', value: 'LD' },\n      { name: 'Reach', value: 'R' },\n      { name: 'Reload', value: 'RLD' },\n      { name: 'Special', value: 'S' },\n      { name: 'Thrown', value: 'T' },\n      { name: 'Versatile', value: 'V' },\n    ]\n    this.weaponPropertyValues = [\n      'Two-Handed',\n      'Ammunition',\n      'Finesse',\n      'Heavy',\n      'Light',\n      'Loading',\n      'Reach',\n      'Reload',\n      'Special',\n      'Thrown',\n      'Versatile'\n    ]\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.editModeHandler = (e) => {\n      this.isEditMode = e.detail.isEditMode;\n    }\n    getEditModeChannel().addEventListener('editModeChange', this.editModeHandler);\n    this.isEditMode = isEditMode();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    getEditModeChannel().removeEventListener('editModeChange', this.editModeHandler);\n  }\n\n  _itemChanged() {\n    if (!this.item) {\n      return;\n    }\n    console.error('itemDetail:', this.item);\n    renderSelection(this.item, this.$.renderedOutput);\n    this.hasDescription = !!this.item.source;\n    this.itemType = this._getItemType();\n    this.hasAC = this.item.type === 'S' || !!this.item.armor;\n    this.armorAC = this.item.ac;\n    this.acLabel = this.itemType === 'Armor (Light)' ? 'AC (+DEX)' : this.itemType === 'Armor (Medium)' ? 'AC (+DEX max 2)' : 'AC';\n    this.isArmor = !!this.item.armor;\n    this.isMartial = this.item.weaponCategory === 'Martial';\n    this.weaponProperties = [];\n    this.weaponMagicModifier = 0;\n    if (this.item.weapon || this.item.weaponCategory) {\n      this.weaponMagicModifier = parseInt(this.item.bonusWeapon, 10);\n      if (this.item.property) {\n        const props = this.item.property.map(prop => {\n          const propObj = this.weaponPropertyOptions.find((option) => option.value === prop.trim());\n          if (propObj) {\n            return propObj.name;\n          }\n        }).filter(prop => !!prop);\n        this.weaponProperties = props;\n      }\n    }\n    this.itemRarity = this.item.rarity;\n    this.itemName = this.item.name || '';\n    this.itemWeight = this.item.weight || null;\n    this.canHaveResist = this.item.armor || this.item.type === 'P' || this.item.type === 'RG';\n    this.itemResist = this.item.resist;\n    this.canHaveQuantity = true;\n    this.itemQuantity = this.item.quantity || 1;\n    this.canHaveSpell = this.item.type === 'SC';\n    this.canHaveSpellMod = true;\n    this.spellAttack = this.item.bonusSpellAttack;\n    this.spellDC = this.item.bonusSpellSaveDc;\n\n    if (this.item.storedItem) {\n      this.storedItem = this.item.storedItem;\n    }\n  }\n\n  _getItemType() {\n    if (this.item) {\n      return Parser.ITEM_TYPE_JSON_TO_ABV[this.item.type];  \n    }\n    return '';\n  }\n\n  _selectItemType() {\n    const newType = this.root.querySelector('#typeSelect').value\n    this.storedItem.armor = false;\n    this.storedItem.weapon = false;\n    this.storedItem.type = '';\n    this.storedItem.isEquipped = false;\n    this.storedItem.isAttuned = false;\n\n    switch (newType) {\n      case 'Armor (Light)':\n        this.storedItem.armor = true;\n        this.storedItem.weaponCategory = null;\n        this.storedItem.type = 'LA';\n        break;\n      case 'Armor (Medium)':\n        this.storedItem.armor = true;\n        this.storedItem.weaponCategory = null;\n        this.storedItem.type = 'MA';\n        break;\n      case 'Armor (Heavy)':\n        this.storedItem.armor = true;\n        this.storedItem.weaponCategory = null;\n        this.storedItem.type = 'HA';\n        break;\n      case 'Ranged Weapon':\n        this.storedItem.weapon = true;\n        this.storedItem.weaponCategory = 'Simple';\n        this.storedItem.type = 'R';\n        this.storedItem.resist = null;\n        break;\n      case 'Melee Weapon':\n        this.storedItem.weapon = true;\n        this.storedItem.weaponCategory = 'Simple';\n        this.storedItem.type = 'M';\n        this.storedItem.resist = null;\n        break;\n      case 'Shield':\n        this.storedItem.type = 'S';\n        this.storedItem.weaponCategory = null;\n        this.storedItem.ac = 2;\n        this.storedItem.resist = null;\n        break;\n      case 'Adventuring Gear':\n        this.storedItem.weaponCategory = null;\n        this.storedItem.type = 'G';\n        this.storedItem.resist = null;\n        break;\n      case 'Currency':\n        this.storedItem.weaponCategory = null;\n        this.storedItem.type = '$'\n        this.storedItem.resist = null;\n        this.storedItem.quantity = 1;\n        this.storedItem.hasQuantity = true;\n        break;\n      default:\n        const typeVal = Object.entries(Parser.ITEM_TYPE_JSON_TO_ABV).find(([key, value]) => value === newType);\n        if (typeVal) {\n          this.storedItem.type = typeVal[0];\n        }\n        if (newType !== 'P' || newType !== 'RG') {\n          this.storedItem.resist = null;\n        }\n        break;\n    }\n    if (!(this.storedItem.type === 'P' || this.storedItem.type === 'A' || this.storedItem.type === 'EXP' || this.storedItem.type === '$')) {\n      this.storedItem.hasQuantity = false;\n    }\n    setItem(this.item);\n  }\n\n  _updateItem() {\n    setItem(this.item);\n  }\n\n  _addDamage() {\n    if (!this.storedItem.damages) {\n      this.storedItem.damages = [];\n    }\n    this.storedItem.damages.push({roll: '', type: ''});\n    setItem(this.item);\n  }\n\n  _removeDamage(e) {\n    const rollDamageEl = findInPath('.roll__damage', e);\n    const rollDamageIndexAttr = rollDamageEl.getAttribute('index');\n    const rollDamageIndex = parseInt(rollDamageIndexAttr, 10);\n    this.storedItem.damages.splice(rollDamageIndex, 1);\n    setItem(this.item);\n  }\n\n  _changeWeaponType() {\n    if (this.item.weapon) {\n      if (this.isMartial) {\n        this.storedItem.weaponCategory = 'Martial';\n      } else {\n        this.storedItem.weaponCategory = 'Simple';\n      }\n      setItem(this.item);\n    }\n  }\n\n  _weaponMagicModifierChange() {\n    let parsedMod = parseInt(this.weaponMagicModifier, 10);\n\n    if (isNaN(parsedMod)) {\n      parsedMod = 0;\n    }\n    this.storedItem.bonusWeapon = parsedMod > 0 ? `+${parsedMod}` : parsedMod;\n    setItem(this.item);\n  }\n\n  _itemRarityChange() {\n    if (this.itemRarity) {\n      this.storedItem.rarity = this.itemRarity;\n      setItem(this.item);\n    }\n  }\n\n  _itemNameChange() {\n    if (this.itemName) {\n      this.storedItem.name = this.itemName;\n      setItem(this.item);\n    }\n  }\n\n  _addWeaponProperty() {\n    return ((props) => {\n      if (props && props.length) {\n        const propCodes = props.map((prop) => {\n          const propObj = this.weaponPropertyOptions.find((option) => option.name === prop.trim());\n          if (propObj) {\n            return propObj.value;\n          }\n        }).filter(prop => !!prop);\n        this.storedItem.property = propCodes;\n        setItem(this.item);\n      }\n    }).bind(this);\n  }\n\n  _armorACChange() {\n    let parsedAC = parseInt(this.armorAC, 10);\n\n    if (isNaN(parsedAC)) {\n      parsedAC = 0;\n    }\n    this.storedItem.ac = parsedAC;\n    setItem(this.item);\n  }\n\n  _itemWeightChange() {\n    let parsedWeight = parseFloat(this.itemWeight, 10);\n\n    if (isNaN(parsedWeight)) {\n      parsedWeight = 0;\n    }\n    this.storedItem.weight = parsedWeight;\n    setItem(this.item);\n\n  }\n\n  _itemResistChange() {\n    if (this.itemResist) {\n      this.storedItem.resist = this.itemResist === 'None' ? null : this.itemResist;\n      setItem(this.item);\n    }\n  }\n\n  _itemQuantityChange() {\n    let parsedQuantity = parseInt(this.itemQuantity, 10);\n\n    if (isNaN(parsedQuantity)) {\n      parsedQuantity = 0;\n    }\n    this.storedItem.quantity = parsedQuantity;\n    this.storedItem.hasQuantity = true;\n    setItem(this.item);\n  }\n\n  _itemSpellAttackChange() {\n    let parsedSpellAttack = parseInt(this.spellAttack, 10);\n\n    if (isNaN(parsedSpellAttack)) {\n      parsedSpellAttack = 0;\n    }\n    this.storedItem.bonusSpellAttack = parsedSpellAttack;\n    setItem(this.item);\n  }\n\n  _itemSpellDCChange() {\n    let parsedSpellDC = parseInt(this.spellDC, 10);\n\n    if (isNaN(parsedSpellDC)) {\n      parsedSpellDC = 0;\n    }\n    this.storedItem.bonusSpellSaveDc = parsedSpellDC;\n    setItem(this.item);\n  }\n\n  _or(...bools) {\n    for (let bool of bools) {\n      if (bool) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  _sourceFull(source) {\n    return source && Parser.sourceJsonToFull(source);\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles my-styles\"></style>\n      <style>\n        :host {}\n        [hidden] {\n          display: none !important;\n        }\n\n        .edit__wrap {\n          margin-right: -10px;\n        }\n        .edit__name {\n          width: calc(65% - 10px);\n          padding-top: 0;\n        }\n        .edit__notes {\n          width: calc(100% - 10px);\n          min-height: 200px;\n        }\n        .edit__checkboxes {\n          display: flex;\n          flex-direction: column;\n          margin: 10px 10px 0 0;\n        }\n\n        .section_heading {\n          margin: 16px 0 0px;\n          font-size: 17px;\n          color: var(--mdc-theme-secondary);\n        }\n\n        .roll__damages {\n          display: flex;\n          flex-direction: column;\n        }\n        .roll__damage {\n          display: flex;\n          margin-right: 10px;\n        }\n        .roll__damage vaadin-text-field,\n        .roll__damage vaadin-select {\n          max-width: 100%;\n        }\n        .roll__damage-roll--edit,\n        .roll__damage-type--edit {\n          width: calc(50% - 40px);\n        }\n        .roll__damage-roll--edit {\n          margin: 0 16px;\n        }\n        .roll__damage-remove {\n          margin: auto -5px 4px;\n        }\n\n        dnd-switch {\n          margin: 10px auto 0;\n          display: block;\n        }\n\n        vaadin-checkbox {\n          width: fit-content;\n        }\n\n        vaadin-select {\n          max-width: calc(50% - 14px);\n        }\n        vaadin-number-field,\n        vaadin-integer-field {\n          width: calc(33% - 12px);\n        }\n        vaadin-text-field,\n        vaadin-text-area,\n        vaadin-integer-field,\n        vaadin-number-field,\n        vaadin-select {\n          margin-right: 10px;\n        }\n        dnd-select-add {\n          width: calc(66% - 22px);\n          margin-right: 10px;\n          margin-left: 10px;\n        }\n\n        .ac-field {\n          width: calc(50% - 14px);\n        }\n        .ac-suffix {\n          font-size: 12px;\n        }\n        .full-width-field {\n          width: calc(100% - 20px);\n        }\n\n        h2 {\n          margin-top: 0;\n          font-size: 24px;\n          margin-bottom: 2px;\n          line-height: 1.2;\n        }\n        .notes-container {\n          margin-top: 16px;\n          line-height: 1.4;\n        }\n        .notes-container__label {\n          font-weight: bold;\n        }\n\n        .stats-wrapper {\n          font-size: 14px;\n          line-height: 1.4;\n          margin-top: 16px;\n        }\n        .stats-wrapper > .statsBlockHead:first-child > .stat-name {\n          margin-top: 0;\n        }\n        .stats-wrapper .statsBlockHead .stat-name {\n          font-size: 22px;\n          margin-bottom: 2px;\n        }\n        .stats-wrapper .statsBlockSubHead .stat-name {\n          font-size: 18px;\n        }\n        .stats-wrapper .text {\n          margin-top: 16px;\n        }\n        .stats-wrapper p {\n          margin-bottom: 8px;\n        }\n        .stats-wrapper .statsInlineHead:last-child {\n          margin-bottom: 0;\n        }\n        .stats-wrapper .statsInlineHead .stat-name {\n          font-size: inherit;\n        }\n        .margin-bottom_large,\n        .stats-wrapper .margin-bottom_med {\n          margin-bottom: 0 !important;\n        }\n        .source {\n          display: block !important;\n          color: var(--lumo-contrast-70pct);\n          font-size: 13px;\n          margin-top: 0px;\n          margin-bottom: 12px;\n        }\n      </style>\n\n      <div hidden$=\"[[!item]]\">\n        <div hidden$=\"[[isEditMode]]\">\n          <h2>[[item.name]]</h2>\n          <div hidden=\"[[!item.source]]\" class=\"source\">[[_sourceFull(item.source)]]</div>\n          <div hidden=\"[[!item.notes]]\" class=\"notes-container\">\n            <span class=\"notes-container__label\">Notes.</span>\n            [[item.notes]]\n          </div>\n          <div id=\"renderedOutput\"></div>\n        </div>\n\n        <template is=\"dom-if\" if=\"[[isEditMode]]\">\n          <div class=\"edit__wrap\">\n            <vaadin-text-field class=\"edit__name\" theme=\"label--secondary\" value=\"{{itemName}}\" label=\"Name\" on-change=\"_itemNameChange\"></vaadin-text-field>\n            <vaadin-number-field theme=\"label--secondary\" has-controls value=\"{{itemWeight}}\" label=\"Weight\" min=\"0\" on-change=\"_itemWeightChange\"></vaadin-number-field>\n\n            <vaadin-select id=\"typeSelect\" value=\"[[itemType]]\" on-change=\"_selectItemType\" label=\"Type\" >\n              <template>\n                <vaadin-list-box>\n                  <template is=\"dom-repeat\" items=\"[[itemTypes]]\">\n                    <vaadin-item>[[item]]</vaadin-item>\n                  </template>\n                </vaadin-list-box>\n              </template>\n            </vaadin-select>\n\n            <vaadin-select id=\"raritySelect\" value=\"{{itemRarity}}\" on-change=\"_itemRarityChange\" label=\"Rarity\" >\n              <template>\n                <vaadin-list-box>\n                  <template is=\"dom-repeat\" items=\"[[rarityTypes]]\">\n                    <vaadin-item>[[item]]</vaadin-item>\n                  </template>\n                </vaadin-list-box>\n              </template>\n            </vaadin-select>\n\n            <div class=\"edit__weapon\" hidden$=\"[[!_or(item.weapon, item.weaponCategory)]]\">\n              <h4 class=\"section_heading\">Weapon</h4>\n              <dnd-select-add choices=\"100\" class=\"full-width-field\" label=\"Weapon Properties\" options=\"[[weaponPropertyValues]]\" value=\"[[weaponProperties]]\" add-callback=\"[[_addWeaponProperty()]]\"></dnd-select-add>\n\n              <dnd-switch label='Simple Weapon' secondary-label='Martial Weapon' initial-value=\"[[isMartial]]\" checked={{isMartial}} on-switch-change=\"_changeWeaponType\" ></dnd-switch>\n\n              <template is=\"dom-repeat\" items=\"[[storedItem.damages]]\" as=\"damage\">\n                <div class=\"roll__damage\" index$=\"[[index]]\">\n                  <dnd-button on-click=\"_removeDamage\" icon=\"remove\" class='roll__damage-remove icon-only'></dnd-button>\n                  <div class=\"roll__damage-roll--edit\">\n                    <vaadin-text-field theme=\"label--secondary\" value=\"{{damage.roll}}\" on-change=\"_updateItem\" label=\"Damage Roll\"></vaadin-text-field>\n                  </div>\n                  <div class=\"roll__damage-type--edit\">\n                    <vaadin-select value=\"{{damage.type}}\" on-change=\"_updateItem\" label=\"Damage Type\" >\n                      <template>\n                        <vaadin-list-box>\n                          <template is=\"dom-repeat\" items=\"[[damageTypes]]\">\n                            <vaadin-item>[[item]]</vaadin-item>\n                          </template>\n                        </vaadin-list-box>\n                      </template>\n                    </vaadin-select>\n                  </div>\n                </div>\n              </template>\n              <dnd-button on-click=\"_addDamage\" label=\"Add Damage\" icon=\"add\" class=\"roll__add-damage\"></dnd-button>\n            </div>\n\n            <vaadin-integer-field class=\"ac-field\" theme=\"label--secondary\"  hidden$=\"[[!hasAC]]\" min=\"0\" max=\"30\" has-controls value=\"{{armorAC}}\" label=\"[[acLabel]]\" on-change=\"_armorACChange\"></vaadin-integer-field>\n\n            <vaadin-integer-field theme=\"label--secondary\" hidden$=\"[[!item.weapon]]\" min=\"0\" max=\"5\" has-controls value=\"{{weaponMagicModifier}}\" label=\"Weapon Mod\" on-change=\"_weaponMagicModifierChange\"></vaadin-integer-field>\n\n            <vaadin-integer-field theme=\"label--secondary\" hidden$=\"[[!canHaveSpellMod]]\" min=\"0\" max=\"5\" has-controls value=\"{{spellAttack}}\" label=\"Spell Attack\" on-change=\"_itemSpellAttackChange\"></vaadin-integer-field>\n\n            <vaadin-integer-field theme=\"label--secondary\" hidden$=\"[[!canHaveSpellMod]]\" min=\"0\" max=\"5\" has-controls value=\"{{spellDC}}\" label=\"Spell DC\" on-change=\"_itemSpellDCChange\"></vaadin-integer-field>\n\n            <vaadin-integer-field theme=\"label--secondary\" hidden$=\"[[!item.hasQuantity]]\" min=\"0\" has-controls value=\"{{itemQuantity}}\" label=\"Quantity\" on-change=\"_itemQuantityChange\"></vaadin-integer-field>\n\n            <vaadin-select hidden$=\"[[!canHaveResist]]\" value=\"{{itemResist}}\" on-change=\"_itemResistChange\" label=\"Resistance\">\n              <template>\n                <vaadin-list-box>\n                  <template is=\"dom-repeat\" items=\"[[resistTypes]]\">\n                    <vaadin-item>[[item]]</vaadin-item>\n                  </template>\n                </vaadin-list-box>\n              </template>\n            </vaadin-select>\n\n            <div class=\"edit__checkboxes\">\n              <vaadin-checkbox hidden$=\"[[!canHaveQuantity]]\" checked=\"{{storedItem.hasQuantity}}\" on-change=\"_updateItem\" label=\"Has Quantity\"></vaadin-checkbox>\n              <vaadin-checkbox hidden$=\"[[!isArmor]]\" checked=\"{{storedItem.stealth}}\" on-change=\"_updateItem\" label=\"Disadvantage on Stealth\"></vaadin-checkbox>\n              <vaadin-checkbox hidden$=\"[[!_or(item.weapon, item.weaponCategory)]]\" checked=\"{{storedItem.forceProficient}}\" on-change=\"_updateItem\" label=\"Force Proficiency\"></vaadin-checkbox>\n              <vaadin-checkbox checked=\"{{storedItem.reqAttune}}\" on-change=\"_updateItem\" label=\"Requires Attunement\"></vaadin-checkbox>\n              <vaadin-checkbox checked=\"{{storedItem.wondrous}}\" on-change=\"_updateItem\" label=\"Wondrous\"></vaadin-checkbox>\n              <vaadin-checkbox hidden$=\"[[!hasDescription]]\" checked=\"{{storedItem.hideDescription}}\" on-change=\"_updateItem\" label=\"Hide Description\"></vaadin-checkbox>\n            </div>\n\n            <vaadin-text-area  theme=\"label--secondary\" class=\"edit__notes\" value=\"{{storedItem.notes}}\" label=\"Notes\" on-blur=\"_updateItem\"></vaadin-text-area>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define(\"dnd-character-builder-equipment-item-detail\", DndCharacterBuilderEquipmentItemDetail);"],"sourceRoot":""}