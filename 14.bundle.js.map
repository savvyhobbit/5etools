{"version":3,"sources":["webpack:///./components/views/character/dnd-character-builder-equipment.js"],"names":["DndCharacterBuilderEquipment","inventory","type","Array","isEditMode","Boolean","value","character","Object","expandedItems","expandedIds","activeItem","isMobile","this","length","filter","item","map","uniqueId","console","error","openedItemID","$","grid","closeItemDetails","undefined","window","scrollTo","originalScrollHeight","e","scrollY","super","connectedCallback","characterChangeHandler","detail","updateFromCharacter","addEventListener","editModeHandler","setTimeout","notifyResize","disconnectedCallback","removeEventListener","ready","_checkBreakpoint","draggedItem","draggedItems","dropMode","dropTargetItem","isChild","container","removeId","storedItem","itemCounter","dropLocation","children","push","dropTargetId","id","finalAddIndex","parseInt","substring","lastIndexOf","parentItemREF","splice","dataProvider","params","callback","startIndex","page","pageSize","parentItem","slice","bind","clearCache","openedItem","openItemDetails","dispatchEvent","CustomEvent","bubbles","composed","data","model","__data","stayClosed","detailsOpenedItems","indexOf","checkboxEl","classList","add","remove","preventDefault","stopPropagation","itemModel","isEquipped","checkbox","target","querySelector","_flashCheckbox","isAttuned","getEventContext","newQuantity","quantity","isNaN","bools","bool","rarity","innerWidth","rowDetailsRenderer","root","rowData","detailsOpened","firstElementChild","innerHTML","detailEl","document","createElement","smallRender","unique","Date","now","appendChild","customElements","define"],"mappings":"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","file":"14.bundle.js","sourcesContent":["import { PolymerElement, html } from \"@polymer/polymer\";\nimport { \n  getCharacterChannel,\n  getSelectedCharacter,\n  getItems,\n  removeItem,\n  canAttuneItem,\n  canEquipItem,\n  toggleItemEquipped,\n  toggleItemAttuned,\n  setItem,\n  spliceItems,\n  isChildItem,\n  getItemAtId,\n  addItem\n} from \"../../../util/charBuilder\";\nimport { getEditModeChannel, isEditMode } from \"../../../util/editMode\";\nimport \"@vaadin/vaadin-checkbox\";\nimport \"@vaadin/vaadin-grid\";\nimport \"@vaadin/vaadin-grid/vaadin-grid-tree-toggle\";\nimport \"@vaadin/vaadin-grid/vaadin-grid-column\";\nimport \"./dnd-character-builder-equipment-item-detail\";\n\nclass DndCharacterBuilderEquipment extends PolymerElement {\n  \n  static get properties() {\n    return {\n      inventory: {\n        type: Array\n      },\n      isEditMode: {\n        type: Boolean,\n        value: false\n      },\n      character: {\n        type: Object,\n      },\n      expandedItems: {\n        type: Array\n      },\n      expandedIds: {\n        type: Array\n      },\n      activeItem: {\n        type: Object,\n      },\n      isMobile: {\n        type: Boolean\n      },\n    };\n  }\n\n  static get observers() {\n    return [\n      '_expandedItemsChange(expandedItems.*)'\n    ]\n  }\n\n  _expandedItemsChange() {\n    if (this.expandedItems && this.expandedItems.length) {\n      this.expandedIds = this.expandedItems.filter(item => !!item).map((item) => item.uniqueId);\n      console.error(this.expandedIds);\n\n      if (this.openedItemID) {\n        this.$.grid.closeItemDetails(this.openedItemID);\n        this.openedItemID = undefined;\n      }\n    }\n    window.scrollTo(0, this.originalScrollHeight);\n  }\n\n  _recordScrollHeight(e) {\n    // Fix reposition issue after tree expand/collapse toggle\n    this.originalScrollHeight = window.scrollY;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.characterChangeHandler = (e) => {\n      let character = e.detail.character;\n      this.updateFromCharacter(character);\n    };\n    \n    this.updateFromCharacter(getSelectedCharacter());\n    getCharacterChannel().addEventListener(\"character-selected\", this.characterChangeHandler);\n\n    this.editModeHandler = (e) => {\n      this.isEditMode = e.detail.isEditMode;\n      if (this.$.grid) {\n        setTimeout(() => {\n          this.$.grid.notifyResize();\n        }, 0);\n      }\n    }\n    getEditModeChannel().addEventListener('editModeChange', this.editModeHandler);\n    this.isEditMode = isEditMode();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    getCharacterChannel().removeEventListener(\"character-selected\", this.characterChangeHandler);\n    getEditModeChannel().removeEventListener('editModeChange', this.editModeHandler);\n  }\n\n  ready() {\n    super.ready();\n    this._checkBreakpoint();\n    window.addEventListener('resize', () => {\n      this._checkBreakpoint();\n    });\n    \n    setTimeout(() => {\n      const grid = this.$.grid;\n\n      // Add Drag and Drop\n      let draggedItem;\n\n      grid.addEventListener('grid-dragstart', function(e) {\n        draggedItem = e.detail.draggedItems[0];\n        grid.dropMode = 'on-top-or-between';\n      });\n\n      grid.addEventListener('grid-dragend', function(e) {\n        draggedItem = grid.dropMode = null;\n      });\n\n      grid.addEventListener('grid-drop', (e) => {\n        const dropTargetItem = e.detail.dropTargetItem;\n        if (draggedItem && draggedItem !== dropTargetItem) {\n\n          // Prevent loops\n          const isChild = isChildItem(draggedItem, dropTargetItem.uniqueId);\n          if (draggedItem.container && isChild) {\n            return;\n          }\n\n          const removeId = draggedItem.storedItem.uniqueId;\n          draggedItem.storedItem.uniqueId = this.character.itemCounter ++;\n\n          // Dropping into container\n          if (e.detail.dropLocation === 'on-top') {\n            if (dropTargetItem.container) {\n              if (dropTargetItem.storedItem && dropTargetItem.storedItem.children) {\n                // Add child item\n                dropTargetItem.storedItem.children.push(draggedItem.storedItem);\n                setItem(dropTargetItem, undefined, true);\n                // Remove original\n                removeItem(removeId);\n              }\n              return;\n            }\n          }\n\n          // Re-ordering items, default action if 'on-top' of non-container\n          if (this.inventory) {\n            // Adjust final add index for dropLocation 'below' or 'above'\n            const dropTargetId = `${dropTargetItem.id}`;\n            let finalAddIndex = parseInt(dropTargetId.substring(dropTargetId.lastIndexOf('_')), 10);\n            if (e.detail.dropLocation === 'below') {\n              finalAddIndex++;\n            }\n\n            if (dropTargetItem.parentItemREF) {\n              // Add child item\n              dropTargetItem.parentItemREF.storedItem.children.splice(finalAddIndex, 0, draggedItem.storedItem);\n              setItem(dropTargetItem.parentItemREF, undefined, true);\n            } else {\n              // Add top-level item\n              spliceItems(finalAddIndex, draggedItem.storedItem);\n            }\n\n            // Remove original item\n            removeItem(removeId);\n          }\n        }\n      });\n\n      // Set Data Provider\n      grid.dataProvider = ((params, callback) => {\n        const startIndex = params.page * params.pageSize;\n        let children = params.parentItem ? params.parentItem.children : this.inventory;\n        if (children && children.length) {\n          const page = children.slice(startIndex, startIndex + params.pageSize);\n          callback(page, children.length);\n        }\n      }).bind(this);\n    }, 0);\n    \n  }\n\n  async updateFromCharacter(character) {\n    if (character) {\n      this.character = character;\n      this.inventory = await getItems(character);\n      console.error('inventory:', this.inventory);\n      const originalScrollHeight = window.scrollY;\n      this.$.grid.clearCache();\n      if (this.openedItemID) {\n        const openedItem = getItemAtId(this.inventory, this.openedItemID.uniqueId);\n        if (openedItem) {\n          this.$.grid.openItemDetails(openedItem);\n        }\n      }\n      if (this.expandedIds) {\n        const expandedItems = this.expandedIds.map((id) => {\n          return getItemAtId(this.inventory, id);\n        });\n        this.expandedItems = expandedItems;\n      }\n      if (this.activeItem) {\n        this.activeItem = getItemAtId(this.inventory, this.activeItem.uniqueId);\n      }\n      window.scrollTo(0, originalScrollHeight);\n      this.dispatchEvent(new CustomEvent(\"loadingChange\", { bubbles: true, composed: true }));\n    }\n  }\n\n  _expandDetails(e) {\n    let data = e.model.__data.item,\n      stayClosed = this.$.grid.detailsOpenedItems.indexOf(data) > -1;\n\n    const originalScrollHeight = window.scrollY;\n\n    for (let item of this.$.grid.detailsOpenedItems) {\n      this.$.grid.closeItemDetails(item);\n    }\n\n    if (stayClosed) {\n      this.$.grid.closeItemDetails(data);\n      this.openedItemID = undefined;\n    } else {\n      this.$.grid.openItemDetails(data);\n      this.openedItemID = data;\n    }\n    this.$.grid.notifyResize();\n    window.scrollTo(0, originalScrollHeight);\n  }\n\n  _flashCheckbox(checkboxEl) {\n    if (checkboxEl) {\n      checkboxEl.classList.add('transition-bg');\n      checkboxEl.classList.add('flash-error');\n      setTimeout(() => {\n        checkboxEl.classList.remove('flash-error');\n        setTimeout(() => {\n          checkboxEl.classList.remove('transition-bg');\n        }, 200);\n      }, 200);\n    }\n  }\n\n  _deleteItem(e) {\n    let uniqueId = e.model.__data.item && e.model.__data.item.uniqueId !== undefined ? e.model.__data.item.uniqueId : undefined;\n    removeItem(uniqueId);\n  }\n\n  async _setItemEquipped(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    let itemModel = e.model.__data.item;\n    let uniqueId = itemModel ? itemModel.uniqueId : undefined;\n    let isEquipped = itemModel ? itemModel.isEquipped : false;\n    \n    if (isEquipped) {\n      toggleItemEquipped(uniqueId);\n    } else if (await canEquipItem(itemModel)) {\n      toggleItemEquipped(uniqueId);\n    } else {\n      let checkbox = e.target.querySelector('vaadin-checkbox')\n      this._flashCheckbox(checkbox)\n    }\n  }\n\n  async _setItemAttuned(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    let itemModel = e.model.__data.item;\n    let uniqueId = itemModel ? itemModel.uniqueId : undefined;\n    let isAttuned = itemModel ? itemModel.isAttuned : false;\n\n    if (isAttuned) {\n      toggleItemAttuned(uniqueId);\n    } else if (await canAttuneItem(itemModel)) {\n      toggleItemAttuned(uniqueId);\n    } else {\n      let checkbox = e.target.querySelector('vaadin-checkbox')\n      this._flashCheckbox(checkbox)\n    }\n  }\n\n  _quantityChange(e) {\n    const item = this.$.grid.getEventContext(e).item;\n    let newQuantity = parseInt(item.quantity, 10);\n    if (isNaN(newQuantity)) {\n      newQuantity = 0;\n    }\n\n    item.storedItem.quantity = newQuantity;\n    setItem(item);\n  }\n\n  _addItem() {\n    addItem({}, false);\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  _or(...bools) {\n    for (let bool of bools) {\n      if (bool) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  _noRarity(rarity) {\n    return !rarity || rarity === 'None';\n  }\n\n  _toggleTheme(item) {\n    return item.children && item.children.length === 0 ? 'no-children' : '';\n  }\n\n  _checkBreakpoint() {\n    const grid = this.$.grid;\n    this.isMobile = window.innerWidth < 921;\n    // Define Row Details\n    if (this.isMobile) {\n      grid.rowDetailsRenderer = ((root, grid, rowData) => {\n        if (rowData.detailsOpened) {\n          if (!root.firstElementChild) {\n            root.innerHTML = '<div class=\"details\"></div>';\n          }\n          if (!this.detailEl) {\n            this.detailEl = document.createElement('dnd-character-builder-equipment-item-detail');\n            this.detailEl.smallRender = true;\n            this.detailEl.unique = Date.now();\n          }\n          root.querySelector('.details').appendChild(this.detailEl);\n          this.detailEl.item = rowData.item;\n        }\n      }).bind(this);\n    } else if (grid.rowDetailsRenderer) {\n      console.error('removing rowDetailsRenderer')\n      grid.rowDetailsRenderer = () => {};\n    }\n  }\n  \n  _isActive(activeItem, item) {\n    return activeItem === item;\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles\"></style>\n      <style>\n        :host {\n          display: block;\n          padding: 14px;\n        }\n        [hidden] {\n          display: none !important;\n        }\n        a {\n          color: var(--mdc-theme-secondary);\n        }\n\n        vaadin-grid {\n          margin-bottom: 200px;\n        }\n\n        .heading {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n          justify-content: space-between;\n          border-bottom: 1px solid var(--lumo-contrast-10pct);\n        }\n        .reference-link:hover {\n          color: var(--mdc-theme-secondary);\n        }\n\n        .col-wrap {\n          display: flex; \n          justify-content: space-between;\n          flex-wrap: wrap;\n        }\n\n        .row-wrap {\n          width: 100%;\n        }\n        .row-wrap:not(:last-child) {\n          margin-bottom: 24px;\n        }\n\n        .row-wrap > *:not(h2):not(:last-child) {\n          margin-bottom: 10px;\n        }\n\n        .no-content {\n          font-size: 14px;\n          font-style: italic;\n        }\n\n        .item-wrap {\n          display: flex;\n          flex-wrap: nowrap;\n          flex-direction: row;\n          justify-content: space-between;\n          align-items: flex-start;\n          padding: 10px 6px;\n          min-height: 28px;\n          border-bottom: 1px solid var(--_lumo-grid-secondary-border-color);\n        }\n        .item-wrap__name-wrap {\n          flex-basis: 100%;\n          min-width: 0;\n          display: flex;\n          flex-direction: column;\n          cursor: pointer;\n        }\n        .item-wrap__name-wrap:hover {\n          color: var(--mdc-theme-secondary);\n        }\n        .item-wrap__name {\n          font-weight: bold;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          position: relative;\n        }\n        .item-wrap__edited,\n        .item-wrap__from {\n          background-color: var(--mdc-theme-text-disabled-on-background);\n          color: var(--mdc-theme-on-secondary);\n          border: none;\n          border-radius: 4px;\n          outline: none;\n          display: inline-block;\n          justify-content: center;\n          white-space: normal;\n          font-size: 10px;\n          padding: 1px 4px;\n          margin-right: 4px;\n          font-style: italic;\n        }\n        .item-wrap__edited {\n          top: -1px;\n          position: relative;\n          font-weight: normal;\n        }\n        .item-wrap__type {\n          font-style: italic;\n          font-size: 12px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          position: relative;\n        }\n        .item-wrap__type--fromBackground {\n          padding-right: 38px;\n        }\n        .item-wrap__type--fromClass {\n          padding-right: 50px;\n        }\n        .item-wrap__close {\n          font-size: 14px;\n          margin-top: 6px;\n          cursor: pointer;\n        }\n        .item-wrap__checkboxes {\n          display: flex;\n          flex-direction: column;\n          width: 80px;\n          flex-grow: 0;\n          flex-shrink: 0;\n          margin-left: auto;\n        }\n        .item-wrap__checkboxes > span {\n          cursor: pointer;\n        }\n        .item-wrap__quantity {\n          display: flex;\n          flex-direction: column;\n          width: 80px;\n          flex-grow: 0;\n          flex-shrink: 0;\n          margin-left: auto;\n        }\n        vaadin-integer-field {\n          margin: -13px 0 8px;\n        }\n        vaadin-checkbox {\n          pointer-events: none;\n          font-size: 13px;\n        }\n        vaadin-checkbox.flash-error {\n          color: var(--mdc-theme-error);\n          transition: color 0.2s ease-out;\n          --lumo-contrast-20pct: var(--mdc-theme-error);\n        }\n        vaadin-checkbox.transition-bg {\n          transition: color 0.2s ease-in;\n        }\n\n        .details {\n          font-size: 14px;\n          width: calc(100% - 30px);\n          margin: 0 auto 13px !important;\n          background: var(--lumo-contrast-10pct);\n          border-radius: 4px;\n          padding: 14px;\n        }\n        \n        .details-row {\n          padding-top: 14px;\n        }\n\n        .details-wrap {\n          display: none;\n          font-size: 14px;\n          background: var(--lumo-contrast-10pct);\n          border-radius: 4px;\n          line-height: 1.5;\n          padding: 14px;\n        }\n\n        @media(min-width: 420px) {\n          .heading {\n            justify-content: flex-start;\n          }\n          .reference-link {\n            margin-left: 8px;\n          }\n        }\n\n        @media(min-width: 921px) {\n          .item-wrap[active] {\n            background: var(--_lumo-grid-selected-row-color);\n          }\n          .row-wrap {\n            width: calc(50% - 10px);\n          }\n          .row-wrap:first-child {\n            margin-bottom: 0;\n          }\n          .details {\n            display: none;\n          }\n          .details-wrap {\n            display: block;\n          }\n        }\n      </style>\n\n      <div class=\"heading\">\n        <h2>Inventory</h2>\n        <a class=\"reference-link mdc-icon-button material-icons\" href=\"#/items\">launch</a>\n      </div>\n      <div class=\"col-wrap\">\n        <div class=\"row-wrap\">\n          <vaadin-grid id=\"grid\" expanded-items=\"{{expandedItems}}\" active-item=\"{{activeItem}}\" height-by-rows rows-draggable theme=\"no-border no-row-borders no-row-padding\" >\n            <vaadin-grid-column>\n              <template>\n                <div class=\"item-wrap\" active$=\"[[_isActive(activeItem, item)]]\">\n                  <vaadin-grid-tree-toggle level$=[[level]] leaf=\"[[!item.container]]\" expanded=\"{{expanded}}\" theme$=[[_toggleTheme(item)]] on-click='_recordScrollHeight'></vaadin-grid-tree-toggle>\n                  <div class=\"item-wrap__name-wrap\" on-click=\"_expandDetails\">\n                    <span class=\"item-wrap__name\">[[item.name]]\n                      <span hidden$=\"[[!item.isEdited]]\" class=\"item-wrap__edited\">Edited</span>\n                    </span>\n                    <span class=\"item-wrap__type\">\n                      <span class=\"item-wrap__from\" hidden$=\"[[!item.fromBackground]]\">BG</span>\n                      <span class=\"item-wrap__from\" hidden$=\"[[!item.fromClass]]\">Class</span>\n                      <span>[[item.typeText]]<span hidden$=\"[[_noRarity(item.rarity, item)]]\">, [[item.rarity]]</span></span>\n                    </span>\n                  </div>\n                  <div hidden$=\"[[item.hasQuantity]]\" class=\"item-wrap__checkboxes\">\n                    <span on-click=\"_setItemEquipped\">\n                      <vaadin-checkbox checked=\"[[item.isEquipped]]\" hidden$=\"[[!item.canEquip]]\">Equip</vaadin-checkbox>\n                    </span>\n                    <span on-click=\"_setItemAttuned\">\n                      <vaadin-checkbox checked=\"[[item.isAttuned]]\" hidden$=\"[[!item.reqAttune]]\">Attune</vaadin-checkbox>\n                    </span>\n                  </div>\n                  <div hidden$=\"[[!item.hasQuantity]]\" class=\"item-wrap__quantity\">\n                    <vaadin-integer-field min=\"0\" value=\"{{item.quantity}}\" theme=\"mini\" has-controls on-change=\"_quantityChange\"></vaadin-integer-field>\n                  </div>\n                  <div class=\"mdc-buttom-icon material-icons item-wrap__close\" on-click=\"_deleteItem\">close</div>\n                </div>\n              </template>\n            </vaadin-grid-column>\n          </vaadin-grid>\n        </div>\n        <template is=\"dom-if\" if=\"[[!isMobile]]\">\n          <div class=\"row-wrap details-row\" hidden$=\"[[!activeItem]]\">\n            <div class=\"details-wrap\">          \n              <dnd-character-builder-equipment-item-detail small-render item=\"{{activeItem}}\"></dnd-character-builder-equipment-item-detail>\n            </div>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define(\"dnd-character-builder-equipment\", DndCharacterBuilderEquipment);"],"sourceRoot":""}