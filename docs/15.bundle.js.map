{"version":3,"sources":["webpack:///./util/animateScroll.js","webpack:///./components/dnd-classes.js","webpack:///./components/views/dnd-classes-view.js"],"names":["scrollToY","y","duration","element","document","scrollingElement","scrollTop","cosParameter","scrollCount","oldTimestamp","window","requestAnimationFrame","step","newTimestamp","Math","PI","cos","classes","type","Object","observer","hash","String","value","itemOpened","loading","Boolean","super","this","then","data","set","connectedCallback","populateHandlers","addEventListener","selectionChangeEventHandler","deselectionChangeEventHandler","$","backToTop","backToTopEventHandler","subclassScrollRepositionHandler","disconnectedCallback","removeEventListener","passive","e","selection","detail","scrollToTop","scrollY","classList","remove","add","subclassEl","shadowRoot","querySelector","subclassOffsetEl","contains","subclassOffsetHeight","top","body","style","height","dispatchEvent","CustomEvent","bubbles","composed","selectedClass","selectedSubclass","indexOf","hashParts","split","slice","isNewClass","prevClass","scrollTo","title","name","customElements","define"],"mappings":"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","file":"15.bundle.js","sourcesContent":["/*\n * https://github.com/Robbendebiene/Sliding-Scroll\n * y: the y coordinate to scroll, 0 = top\n * duration: scroll duration in milliseconds; default is 0 (no transition)\n * element: the html element that should be scrolled ; default is the main scrolling element\n */\nfunction scrollToY (y, duration = 0, element = document.scrollingElement) {\n  // cancel if already on target position\n  if (element.scrollTop === y) return;\n\n  const cosParameter = (element.scrollTop - y) / 2;\n  let scrollCount = 0, oldTimestamp = null;\n\n  function step (newTimestamp) {\n    if (oldTimestamp !== null) {\n      // if duration is 0 scrollCount will be Infinity\n      scrollCount += Math.PI * (newTimestamp - oldTimestamp) / duration;\n      if (scrollCount >= Math.PI) return element.scrollTop = y;\n      element.scrollTop = cosParameter + y + cosParameter * Math.cos(scrollCount);\n    }\n    oldTimestamp = newTimestamp;\n    window.requestAnimationFrame(step);\n  }\n  window.requestAnimationFrame(step);\n}\n\n/*\n * duration: scroll duration in milliseconds; default is 0 (no transition)\n * this function is using the scrollToY function\n */\nfunction scrollToTop(duration = 0) {\n  scrollToY(0, duration, document.scrollingElement);\n}\n\n/*\n * id: the id of the element as a string that should be scrolled to\n * duration: scroll duration in milliseconds; default is 0 (no transition)\n * this function is using the scrollToY function on the main scrolling element\n */\nfunction scrollToId(id, duration = 0) {\n  const offset = Math.round(document.getElementById(id).getBoundingClientRect().top);\n\tscrollToY(document.scrollingElement.scrollTop + offset, duration);\n}\n\n/*\n * element: the node object that should be scrolled to\n * duration: scroll duration in milliseconds; default is 0 (no transition)\n * this function is using the scrollToY function on the main scrolling element\n */\nfunction scrollToElement(element, duration = 0) {\n\tconst offset = Math.round(element.getBoundingClientRect().top);\n\tscrollToY(document.scrollingElement.scrollTop + offset, duration);\n}\n\nexport {\n  scrollToTop,\n  scrollToId,\n  scrollToElement\n}","import {PolymerElement, html} from '@polymer/polymer';\nimport \"./styles/material-styles.js\";\nimport \"./styles/my-styles.js\";\nimport './dnd-svg.js';\nimport { loadModel } from '../util/data.js';\nimport { resolveHash } from '../util/renderTable.js';\nimport { onDataLoad, onClassChange, onSubChange } from \"../js/classes.js\";\nimport { readRouteSelection, routeEventChannel, clearRouteSelection } from '../util/routing.js';\nimport { scrollToTop } from '../util/animateScroll.js';\nimport { jqOffset, jqHeight, throttle } from '../js/utils.js';\n\n\nclass DndClasses extends PolymerElement {\n  static get properties() {\n    return {\n      classes: {\n        type: Object,\n        observer: \"_dataLoaded\"\n      },\n      hash: {\n        type: String,\n        value: ''\n      },\n      itemOpened: {\n        value: false\n      },\n      loading: {\n        type: Boolean,\n        value: true,\n        observer: '_loadingChange'\n      }\n    };\n  }\n\n  static get observers() {\n    return [\"_updateClassFromHash(classes, hash)\"]\n  }\n\n  constructor() {\n    super();\n    this.loading = true;\n    loadModel(\"classes\").then(data => {\n      this.set(\"classes\", data);\n      this.loading = false;\n    });\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.populateHandlers();\n\n    routeEventChannel().addEventListener(\"selection-change\", this.selectionChangeEventHandler);\n    routeEventChannel().addEventListener(\"selection-deselected\", this.deselectionChangeEventHandler);\n    this.$.backToTop.addEventListener(\"click\", this.backToTopEventHandler);\n    window.addEventListener(\"scroll\", this.subclassScrollRepositionHandler);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.deselectionChangeEventHandler();\n    routeEventChannel().removeEventListener(\"selection-change\", this.selectionChangeEventHandler);\n    routeEventChannel().removeEventListener(\"selection-deselected\", this.deselectionChangeEventHandler);\n    this.$.backToTop.removeEventListener(\"click\", this.backToTopEventHandler);\n    window.removeEventListener(\"scroll\", this.subclassScrollRepositionHandler, {passive: true});\n  }\n\n  populateHandlers() {\n    this.selectionChangeEventHandler = (e) => {\n      let selection = e ? e.detail.selection : readRouteSelection();\n      if (selection) {\n        this.set(\"hash\", selection);\n      }\n    };\n    this.selectionChangeEventHandler();\n    this.deselectionChangeEventHandler = () => {\n      this.set(\"hash\", \"\");\n    }\n\n    this.backToTopEventHandler = () => {\n      scrollToTop(400);\n    };\n    this.subclassScrollRepositionHandler = () => {\n      if (window.scrollY > 850) {\n        this.$.backToTop.classList.remove(\"hidden\");\n      } else {\n        this.$.backToTop.classList.add(\"hidden\");\n      }\n      // setSubclassFixation\n      const subclassEl = this.shadowRoot.querySelector(\"#subclasses\"),\n        subclassOffsetEl = this.shadowRoot.querySelector(\"#subclassHeight\");\n\n      // Stores non-closed height\n      if (!subclassEl.classList.contains(\"closed\") || !subclassEl.classList.contains(\"fixed\")) {\n        this.subclassOffsetHeight = jqHeight(subclassEl) + 55 + \"px\";\n      }\n\n      // When we scroll past the subclasses, sets fixed. otherwise removes it.\n      if (jqOffset(subclassOffsetEl).top - document.body.scrollTop < 64) {\n        if (!subclassEl.classList.contains(\"fixed\")) {\n          subclassEl.classList.add(\"fixed\");\n          subclassOffsetEl.style.height = this.subclassOffsetHeight;\n        }\n      } else {\n        subclassEl.classList.remove(\"fixed\");\n        subclassOffsetEl.style.height = \"0\";\n      }\n    };\n  }\n\n  _loadingChange() {\n    this.dispatchEvent(new CustomEvent(\"loading-data\", {\n      bubbles: true,\n      composed: true,\n      detail: {\n        loading: this.loading\n      }\n    }));\n  }\n\n  _dataLoaded() {\n    onDataLoad(this.classes, this.shadowRoot);\n  }\n\n  _updateClassFromHash() {\n    if (this.classes && this.hash) {\n      let selectedClass, selectedSubclass;\n\n      if (this.hash.indexOf(',') > -1) {\n        let hashParts = this.hash.split(',');\n        selectedClass = resolveHash(this.classes, hashParts[0]);\n        selectedSubclass = hashParts.slice(1);\n      } else {\n        selectedClass = resolveHash(this.classes, this.hash);\n      }\n\n      if (selectedClass) {\n        this.itemOpened = true;\n\n        let isNewClass = selectedClass !== this.prevClass;\n        this.prevClass = selectedClass;\n\n        // Only reload the Class\n        if (isNewClass) {\n          window.scrollTo(0,0);\n          onClassChange(selectedClass, this.shadowRoot);\n        }\n        if (selectedSubclass) {\n          onSubChange(selectedSubclass, this.hash, this.shadowRoot);\n        }\n        this.dispatchEvent(new CustomEvent(\"title-change\", {\n          bubbles: true,\n          composed: true,\n          detail: { title: selectedClass.name }\n        }));\n      } else {\n        clearRouteSelection(true);\n      }\n    }\n    if (!this.hash) {\n      this.itemOpened = false;\n    }\n  }\n\n  _clearSelectionHandler() {\n    clearRouteSelection(true);\n  }\n\n  _mainClass() {\n    return this.itemOpened ? \"main item-opened\" : \"main\";\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles my-styles\"></style>\n      <div class$=\"[[_mainClass(itemOpened)]]\">\n\n        <button class=\"mdc-icon-button close-item material-icons\" on-click=\"_clearSelectionHandler\">close</button>\n        <button id=\"backToTop\" class=\"mdc-icon-button mdc-button--raised back-to-top material-icons hidden\">arrow_upward</button>\n\n        <div class=\"class-container\"></div>\n\n        <div class=\"class-page--class-container\">\n\n          <div id=\"subclassHeight\"></div>\n          <div id=\"subclasses\"></div>\n\n          <div id=\"classtable\">\n            <table class=\"table\">\n              <tr id=\"groupHeaders\" class=\"table-row table-row--header\">\n                <th colspan=\"3\"></th>\n                <!-- spacer to match the 3 default cols (level, prof, features) -->\n              </tr>\n              <tr id=\"colHeaders\" class=\"table-row table-row--header\">\n                <th class=\"level table-cell\">Level</th>\n                <th class=\"pb table-cell\">Proficiency Bonus</th>\n                <th class=\"features table-cell\">Features</th>\n              </tr>\n              <tr id=\"level1\" class=\"table-row\">\n                <td class=\"level table-cell\">1st</td>\n                <td class=\"pb table-cell\">+2</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level2\" class=\"table-row\">\n                <td class=\"level table-cell\">2nd</td>\n                <td class=\"pb table-cell\">+2</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level3\" class=\"table-row\">\n                <td class=\"level table-cell\">3rd</td>\n                <td class=\"pb table-cell\">+2</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level4\" class=\"table-row\">\n                <td class=\"level table-cell\">4th</td>\n                <td class=\"pb table-cell\">+2</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level5\" class=\"table-row\">\n                <td class=\"level table-cell\">5th</td>\n                <td class=\"pb table-cell\">+3</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level6\" class=\"table-row\">\n                <td class=\"level table-cell\">6th</td>\n                <td class=\"pb table-cell\">+3</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level7\" class=\"table-row\">\n                <td class=\"level table-cell\">7th</td>\n                <td class=\"pb table-cell\">+3</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level8\" class=\"table-row\">\n                <td class=\"level table-cell\">8th</td>\n                <td class=\"pb table-cell\">+3</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level9\" class=\"table-row\">\n                <td class=\"level table-cell\">9th</td>\n                <td class=\"pb table-cell\">+4</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level10\" class=\"table-row\">\n                <td class=\"level table-cell\">10th</td>\n                <td class=\"pb table-cell\">+4</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level11\" class=\"table-row\">\n                <td class=\"level table-cell\">11th</td>\n                <td class=\"pb table-cell\">+4</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level12\" class=\"table-row\">\n                <td class=\"level table-cell\">12th</td>\n                <td class=\"pb table-cell\">+4</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level13\" class=\"table-row\">\n                <td class=\"level table-cell\">13th</td>\n                <td class=\"pb table-cell\">+5</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level14\" class=\"table-row\">\n                <td class=\"level table-cell\">14th</td>\n                <td class=\"pb table-cell\">+5</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level15\" class=\"table-row\">\n                <td class=\"level table-cell\">15th</td>\n                <td class=\"pb table-cell\">+5</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level16\" class=\"table-row\">\n                <td class=\"level table-cell\">16th</td>\n                <td class=\"pb table-cell\">+5</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level17\" class=\"table-row\">\n                <td class=\"level table-cell\">17th</td>\n                <td class=\"pb table-cell\">+6</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level18\" class=\"table-row\">\n                <td class=\"level table-cell\">18th</td>\n                <td class=\"pb table-cell\">+6</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level19\" class=\"table-row\">\n                <td class=\"level table-cell\">19th</td>\n                <td class=\"pb table-cell\">+6</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level20\" class=\"table-row\">\n                <td class=\"level table-cell\">20th</td>\n                <td class=\"pb table-cell\">+6</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n            </table>\n          </div>\n\n          <div id=\"statsprof\" class=\"stats\">\n            <div id=\"hp\" colspan=\"6\">\n              <h5>Hit Points</h5>\n              <div id=\"hitdice\">\n                <strong>Hit Dice:</strong>\n                <span> </span>\n              </div>\n              <div id=\"hp1stlevel\">\n                <strong>Hit Points at 1st Level:</strong>\n                <span> </span>\n              </div>\n              <div id=\"hphigherlevels\">\n                <strong>Hit Points at Higher Levels:</strong>\n                <span> </span>\n              </div>\n            </div>\n            <div id=\"prof\" colspan=\"6\">\n              <h5>Proficiencies</h5>\n              <span\n                >You are proficient with the following items, in addition to any proficiencies provided by your race or\n                background.</span\n              >\n              <div id=\"armor\">\n                <strong>Armor:</strong>\n                <span> </span>\n              </div>\n              <div id=\"weapons\">\n                <strong>Weapons:</strong>\n                <span> </span>\n              </div>\n              <div id=\"tools\">\n                <strong>Tools:</strong>\n                <span> </span>\n              </div>\n              <div id=\"saves\">\n                <strong>Saving Throws:</strong>\n                <span> </span>\n              </div>\n              <div id=\"skills\">\n                <strong>Skills:</strong>\n                <span> </span>\n              </div>\n              <div id=\"equipment\" colspan=\"6\">\n                <h5>Starting Equipment</h5>\n                <div></div>\n              </div>\n            </div>\n          </div>\n\n          <div id=\"stats\" class=\"stats\">\n            <!-- populate with JS -->\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('dnd-classes', DndClasses);","import {PolymerElement, html} from '@polymer/polymer';\nimport \"../styles/material-styles.js\";\nimport \"../styles/my-styles.js\";\nimport \"../dnd-layout\";\nimport \"../dnd-classes\";\n\nclass DndClassesView extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"material-styles my-styles\"></style>\n      \n      <dnd-classes></dnd-classes>\n    `;\n  }\n}\n\ncustomElements.define('dnd-classes-view', DndClassesView);"],"sourceRoot":""}