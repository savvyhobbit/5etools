{"version":3,"sources":["webpack:///./util/entryrender.js","webpack:///./js/items.js","webpack:///./node_modules/@vaadin/vaadin-checkbox/vaadin-checkbox.js","webpack:///./node_modules/@vaadin/vaadin-grid/theme/lumo/vaadin-grid-sorter-styles.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-sorter.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-sort-column.js","webpack:///./components/views/character/dnd-character-builder-equipment.js"],"names":["EntryRenderer","this","wrapperTag","baseUrl","setWrapperTag","tag","setBaseUrl","url","recursiveEntryRender","entry","textStack","depth","prefix","suffix","forcePrefixSuffix","type","renderPrefix","undefined","handleEntriesOptionsInvocationPatron","self","entries","sort","a","b","name","handleOptions","items","push","style","i","length","source","caption","colLabels","getTableThClassText","rows","j","makeTableTdClassText","colStyles","rowStyles","renderTable","handleInvocation","handlePatron","attributes","renderSuffix","value","getEntryDice","href","path","hash","subhashes","subHash","key","text","renderLink","renderString","incDepth","inlineTitle","nextDepth","styleString","styleClasses","HEAD_2","HEAD_NEG_1","HEAD_0","HEAD_1","subclass","join","getStyleString","dataString","titleString","sourceJsonToFull","DATA_NONE","getDataString","preReqText","prerequisite","headerSpan","tagSplit","char","char2","tagDepth","inTag","out","curStr","charAt","splitByTags","s","string","substr","indexOf","actionToExplanation","skillToExplanation","displayText","others","split","fauxEntry","classMatch","RE_INLINE_CLASS","exec","trim","substring","toAdd","number","faces","String","toRoll","roll","droll","rollable","renderer","renderSelection","item","rootEl","hideFirstLine","querySelector","innerHTML","sourceFull","page","weight","tier","rarity","reqAttune","weaponCategory","dmg1","dmgType","dmgTypeToFull","ac","speed","capacity","carryingcapacity","append","property","properties","prop","window","itemPropertyList","dmg2","range","reload","entryList","renderStack","toLowerCase","remove","$_documentContainer","document","head","appendChild","content","createElement","direction","reflectToAttribute","notify","_order","Number","_isConnected","Boolean","super","ready","addEventListener","_onClick","bind","connectedCallback","disconnectedCallback","isConnected","dispatchEvent","CustomEvent","bubbles","composed","order","e","activeElement","getRootNode","contains","preventDefault","test","navigator","userAgent","root","querySelectorAll","forEach","el","customElements","define","is","headerTemplate","_prepareTemplatizer","$","templatizer","dataHost","header","_generateHeader","classEquipment","inventory","Array","hasClass","hasBackground","isEditMode","characterChangeHandler","character","detail","updateFromCharacter","editModeHandler","removeEventListener","setTimeout","grid","rowDetailsRenderer","rowData","firstElementChild","deets","backgroundEquipment","firstClass","levels","parseClassEquipment","startingEquipment","additionalFromBackground","background","parseBackgroundEquipment","classEquip","default","map","renderStr","goldAlternative","backgroundEntries","equipmentEntry","data","model","__data","stayClosed","detailsOpenedItems","closeItemDetails","openItemDetails","notifyResize","checkboxEl","classList","add","id","stopPropagation","isEquiped","checkbox","target","_flashCheckbox","isAttuned","bools","bool"],"mappings":"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","file":"6.bundle.js","sourcesContent":["import { isNonstandardSource, encodeForHash, ascSort, utils_makeAttChoose } from \"../js/utils.js\";\r\nimport {\r\n  CLSS_NON_STANDARD_SOURCE,\r\n  HASH_LIST_SEP,\r\n  ATB_DATA_SC,\r\n  ATB_DATA_SRC,\r\n  CLSS_SUBCLASS_FEATURE,\r\n\tSRC_MM,\r\n\tSRC_PHB,\r\n\tSRC_DMG\r\n} from \"../util/consts.js\";\r\nimport Parser from \"../util/Parser.js\";\r\n// ENTRY RENDERING =====================================================================================================\r\n/*\r\n * // EXAMPLE USAGE //\r\n *\r\n * const entryRenderer = new EntryRenderer();\r\n *\r\n * const topLevelEntry = mydata[0];\r\n * // prepare an array to hold the string we collect while recursing\r\n * const textStack = [];\r\n *\r\n * // recurse through the entry tree\r\n * entryRenderer.renderEntries(topLevelEntry, textStack);\r\n *\r\n * // render the final product by joining together all the collected strings\r\n * $(\"#myElement\").html(toDisplay.join(\"\"));\r\n */\r\nfunction EntryRenderer() {\r\n\r\n\tthis.wrapperTag = \"div\";\r\n\tthis.baseUrl = \"\";\r\n\r\n\t/**\r\n\t * Set the tag used to group rendered elements\r\n\t * @param tag to use\r\n\t */\r\n\tthis.setWrapperTag = function (tag) {\r\n\t\tthis.wrapperTag = tag;\r\n\t};\r\n\r\n\t/**\r\n\t * Set the base url for rendered links.\r\n\t * Usage: `renderer.setBaseUrl(\"https://www.cool.site/\")` (note the \"http\" prefix and \"/\" suffix)\r\n\t * @param url to use\r\n\t */\r\n\tthis.setBaseUrl = function(url) {\r\n\t\tthis.baseUrl = url;\r\n\t};\r\n\r\n\t/**\r\n\t * Recursively walk down a tree of \"entry\" JSON items, adding to a stack of strings to be finally rendered to the\r\n\t * page. Note that this function does _not_ actually do the rendering, see the example code above for how to display\r\n\t * the result.\r\n\t *\r\n\t * @param entry An \"entry\" usually defined in JSON. A schema is available in tests/schema\r\n\t * @param textStack A reference to an array, which will hold all our strings as we recurse\r\n\t * @param depth The current recursion depth. Optional; default 0, or -1 for type \"section\" entries\r\n\t * @param prefix The (optional) prefix to be added to the textStack before whatever is added by the current call\r\n\t * @param suffix The (optional) suffix to be added to the textStack after whatever is added by the current call\r\n\t * @param forcePrefixSuffix force the prefix and suffix to be added (useful for the first call from external code)\r\n\t */\r\n\tthis.recursiveEntryRender = function(entry, textStack, depth, prefix, suffix, forcePrefixSuffix) {\r\n\t\tdepth = depth === undefined || depth === null ? entry.type === \"section\" ? -1 : 0 : depth;\r\n\t\tprefix = prefix === undefined || prefix === null ? null : prefix;\r\n\t\tsuffix = suffix === undefined || suffix === null ? null : suffix;\r\n\t\tforcePrefixSuffix = forcePrefixSuffix === undefined || forcePrefixSuffix === null ? false : forcePrefixSuffix;\r\n\r\n\t\tif (forcePrefixSuffix) renderPrefix();\r\n\t\tif (typeof entry === \"object\") {\r\n\t\t\t// the root entry (e.g. \"Rage\" in barbarian \"classFeatures\") is assumed to be of type \"entries\"\r\n\t\t\tconst type = entry.type === undefined || entry.type === \"section\" ? \"entries\" : entry.type;\r\n\t\t\tswitch (type) {\r\n\t\t\t\t// TODO add an \"insert box\" type\r\n\r\n\t\t\t\t// recursive\r\n\t\t\t\tcase \"entries\":\r\n\t\t\t\t\thandleEntries(this);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"options\":\r\n\t\t\t\t\thandleOptions(this);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"list\":\r\n\t\t\t\t\tif (entry.items) {\r\n\t\t\t\t\t\ttextStack.push(`<ul ${entry.style ? `class=\"${entry.style}\"` : ''}>`);\r\n\t\t\t\t\t\tfor (let i = 0; i < entry.items.length; i++) {\r\n\t\t\t\t\t\t\tthis.recursiveEntryRender(entry.items[i], textStack, depth + 1, `<li ${isNonstandardSource(entry.items[i].source) ? `class=\"${CLSS_NON_STANDARD_SOURCE}\"` : \"\"}>`, \"</li>\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttextStack.push(\"</ul>\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"table\":\r\n\t\t\t\t\trenderTable(this);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"invocation\":\r\n\t\t\t\t\thandleInvocation(this);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"patron\":\r\n\t\t\t\t\thandlePatron(this);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t// block\r\n\t\t\t\tcase \"abilityDc\":\r\n\t\t\t\t\trenderPrefix();\r\n\t\t\t\t\ttextStack.push(`<span class='spell-ability'><span>${entry.name} save DC</span> = 8 + your proficiency bonus + your ${utils_makeAttChoose(entry.attributes)}</span>`);\r\n\t\t\t\t\trenderSuffix();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"abilityAttackMod\":\r\n\t\t\t\t\tif (prefix !== null) textStack.push(prefix);\r\n\t\t\t\t\ttextStack.push(`<span class='spell-ability'><span>${entry.name} attack modifier</span> = your proficiency bonus + your ${utils_makeAttChoose(entry.attributes)}</span>`);\r\n\t\t\t\t\tif (suffix !== null) textStack.push(suffix);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t// inline\r\n\t\t\t\tcase \"inline\":\r\n\t\t\t\t\tif (entry.entries) {\r\n\t\t\t\t\t\tfor (let i = 0; i < entry.entries.length; i++) {\r\n\t\t\t\t\t\t\tthis.recursiveEntryRender(entry.entries[i], textStack, depth);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"bonus\":\r\n\t\t\t\t\ttextStack.push((entry.value < 0 ? \"\" : \"+\") + entry.value);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"bonusSpeed\":\r\n\t\t\t\t\ttextStack.push((entry.value < 0 ? \"\" : \"+\") + entry.value + \"ft.\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"dice\":\r\n\t\t\t\t\ttextStack.push(EntryRenderer.getEntryDice(entry));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"link\":\r\n\t\t\t\t\trenderLink(this, entry);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"item\":\r\n\t\t\t\t\ttextStack.push(`<li><b>${entry.name}: </b>`);\r\n\t\t\t\t\tthis.recursiveEntryRender(entry.entry, textStack, depth);\r\n\t\t\t\t\ttextStack.push('</li>');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"print\":\r\n\t\t\t\t\ttextStack.push(renderString(entry.entry));\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} else if (typeof entry === \"string\") { // block\r\n\t\t\trenderPrefix();\r\n\t\t\trenderString(this);\r\n\t\t\trenderSuffix();\r\n\t\t} else { // block\r\n\t\t\t// for ints or any other types which do not require specific rendering\r\n\t\t\trenderPrefix();\r\n\t\t\ttextStack.push(entry);\r\n\t\t\trenderSuffix();\r\n\t\t}\r\n\t\tif (forcePrefixSuffix) renderSuffix();\r\n\r\n\t\tfunction renderPrefix() {\r\n\t\t\tif (prefix !== null) {\r\n\t\t\t\ttextStack.push(prefix);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction renderSuffix() {\r\n\t\t\tif (suffix !== null) {\r\n\t\t\t\ttextStack.push(suffix);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction renderTable(self) {\r\n\t\t\t// TODO add handling for rowLabel property\r\n\r\n\t\t\ttextStack.push(\"<table class='table'>\");\r\n\r\n\t\t\tif (entry.caption !== undefined) {\r\n\t\t\t\ttextStack.push(`<caption>${entry.caption}</caption>`);\r\n\t\t\t}\r\n\t\t\ttextStack.push(\"<thead>\");\r\n\t\t\ttextStack.push(\"<tr class='table-row table-row--header'>\");\r\n\r\n\t\t\tif (entry.colLabels) {\r\n\t\t\t\tfor (let i = 0; i < entry.colLabels.length; ++i) {\r\n\t\t\t\t\ttextStack.push(`<th ${getTableThClassText(i)}>${entry.colLabels[i]}</th>`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttextStack.push(\"</tr>\");\r\n\t\t\ttextStack.push(\"</thead>\");\r\n\t\t\ttextStack.push(\"<tbody>\");\r\n\r\n\t\t\tfor (let i = 0; i < entry.rows.length; ++i) {\r\n\t\t\t\ttextStack.push(\"<tr class='table-row'>\");\r\n\t\t\t\tfor (let j = 0; j < entry.rows[i].length; ++j) {\r\n\t\t\t\t\ttextStack.push(`<td ${makeTableTdClassText(j)}>`);\r\n\t\t\t\t\tself.recursiveEntryRender(entry.rows[i][j], textStack, depth + 1);\r\n\t\t\t\t\ttextStack.push(\"</td>\");\r\n\t\t\t\t}\r\n\t\t\t\ttextStack.push(\"</tr>\");\r\n\t\t\t}\r\n\r\n\t\t\ttextStack.push(\"</tbody>\");\r\n\t\t\ttextStack.push(\"</table>\");\r\n\r\n\t\t\tfunction getTableThClassText(i) {\r\n\t\t\t\treturn entry.colStyles === undefined || i >= entry.colStyles.length ? \"class='table-cell'\" :  `class=\"table-cell ${entry.colStyles[i]}\"`;\r\n\t\t\t}\r\n\r\n\t\t\tfunction makeTableTdClassText(i) {\r\n\t\t\t\tif (entry.rowStyles !== undefined) {\r\n\t\t\t\t\treturn entry.rowStyles === undefined || i >= entry.rowStyles.length ? \"class='table-cell'\" : `class=\"table-cell ${entry.rowStyles[i]}\"`;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn getTableThClassText(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction handleEntries(self) {\r\n\t\t\thandleEntriesOptionsInvocationPatron(self, true);\r\n\t\t}\r\n\r\n\t\tfunction handleOptions(self) {\r\n\t\t\tif (entry.entries) {\r\n\t\t\t\tentry.entries = entry.entries.sort((a, b) => a.name && b.name ? ascSort(a.name, b.name) : a.name ? -1 : b.name ? 1 : 0);\r\n\t\t\t\thandleEntriesOptionsInvocationPatron(self, false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction handleInvocation(self) {\r\n\t\t\thandleEntriesOptionsInvocationPatron(self, true);\r\n\t\t}\r\n\r\n\t\tfunction handlePatron(self) {\r\n\t\t\thandleEntriesOptionsInvocationPatron(self, false);\r\n\t\t}\r\n\r\n\t\tfunction handleEntriesOptionsInvocationPatron(self, incDepth) {\r\n\t\t\tconst inlineTitle = depth >= 2;\r\n\t\t\tconst nextDepth = incDepth ? depth+1 : depth;\r\n\t\t\tconst styleString = getStyleString();\r\n\t\t\tconst dataString = getDataString();\r\n\t\t\tconst preReqText = getPreReqText();\r\n\t\t\tconst headerSpan = entry.name !== undefined ? `<span class=\"stat-name\">${entry.name}${isNonstandardSource(entry.source) ? ' (UA)' : ''}${inlineTitle ? \".\" : \"\"}</span> ` : \"\";\r\n\r\n\t\t\tif (entry.entries || entry.name) {\r\n\t\t\t\ttextStack.push(`<${self.wrapperTag} ${dataString} ${styleString}>${headerSpan}${preReqText}`);\r\n\t\t\t\tif (entry.entries) {\r\n\t\t\t\t\tfor (let i = 0; i < entry.entries.length; i++) {\r\n\t\t\t\t\t\tself.recursiveEntryRender(entry.entries[i], textStack, nextDepth, \"<p>\", \"</p>\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttextStack.push(`</${self.wrapperTag}>`);\r\n\t\t\t}\r\n\r\n\t\t\tfunction getStyleString() {\r\n\t\t\t\tconst styleClasses = [];\r\n\t\t\t\tif (isNonstandardSource(entry.source)) styleClasses.push(CLSS_NON_STANDARD_SOURCE);\r\n\t\t\t\tif (inlineTitle && entry.name !== undefined) styleClasses.push(EntryRenderer.HEAD_2);\r\n\t\t\t\telse styleClasses.push(depth === -1 ? EntryRenderer.HEAD_NEG_1 : depth === 0 ? EntryRenderer.HEAD_0 : EntryRenderer.HEAD_1);\r\n\t\t\t\tif ((entry.type === \"invocation\" || entry.type === \"patron\") && entry.subclass !== undefined) styleClasses.push(CLSS_SUBCLASS_FEATURE);\r\n\t\t\t\treturn styleClasses.length > 0 ? `class=\"${styleClasses.join(\" \")}\"` : \"\";\r\n\t\t\t}\r\n\r\n\t\t\tfunction getDataString() {\r\n\t\t\t\tlet dataString = \"\";\r\n\t\t\t\tif (entry.type === \"invocation\" || entry.type === \"patron\") {\r\n\t\t\t\t\tconst titleString = entry.source ? `title=\"Source: ${Parser.sourceJsonToFull(entry.source)}\"` : \"\";\r\n\t\t\t\t\tif (entry.subclass !== undefined) dataString = `${ATB_DATA_SC}=\"${entry.subclass.name}\" ${ATB_DATA_SRC}=\"${entry.subclass.source}\" ${titleString}`;\r\n\t\t\t\t\telse dataString = `${ATB_DATA_SC}=\"${EntryRenderer.DATA_NONE}\" ${ATB_DATA_SRC}=\"${EntryRenderer.DATA_NONE}\" ${titleString}`;\r\n\t\t\t\t}\r\n\t\t\t\treturn dataString;\r\n\t\t\t}\r\n\r\n\t\t\tfunction getPreReqText() {\r\n\t\t\t\tif (entry.prerequisite) return `<span class=\"prerequisite\">Prerequisite: ${entry.prerequisite}</span>`;\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction renderLink(self, entry) {\r\n\t\t\tlet href;\r\n\t\t\tif (entry.href.type === \"internal\") {\r\n\t\t\t\t// baseURL is blank by default\r\n\t\t\t\thref = `${self.baseUrl}${entry.href.path}#`;\r\n\t\t\t\tif (entry.href.hash !== undefined) {\r\n\t\t\t\t\thref += entry.href.hash;\r\n\t\t\t\t\tif (entry.href.subhashes !== undefined) {\r\n\t\t\t\t\t\tfor (let i = 0; i < entry.href.subhashes.length; i++) {\r\n\t\t\t\t\t\t\tconst subHash = entry.href.subhashes[i];\r\n\t\t\t\t\t\t\thref += `,${encodeForHash(subHash.key)}:${encodeForHash(subHash.value)}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (entry.href.type === \"external\") {\r\n\t\t\t\thref = entry.href.url;\r\n\t\t\t}\r\n\t\t\ttextStack.push(`<a href='${href}'>${entry.text}</a>`);\r\n\t\t}\r\n\r\n\t\tfunction renderString(self) {\r\n\t\t\tconst tagSplit = splitByTags();\r\n\t\t\tfor (let i = 0; i < tagSplit.length; i++) {\r\n\t\t\t\tconst s = tagSplit[i];\r\n\t\t\t\tif (s === undefined || s === null || s === \"\") continue;\r\n\t\t\t\tif (s.charAt(0) === \"@\") {\r\n\t\t\t\t\tconst [tag, text] = splitFirstSpace(s);\r\n\r\n\t\t\t\t\tif (tag === \"@bold\" || tag === \"@b\" || tag === \"@italic\" || tag === \"@i\" || tag === \"@skill\" || tag === \"@action\") {\r\n\t\t\t\t\t\tswitch (tag) {\r\n\t\t\t\t\t\t\tcase \"@b\":\r\n\t\t\t\t\t\t\tcase \"@bold\":\r\n\t\t\t\t\t\t\t\ttextStack.push(`<b>`);\r\n\t\t\t\t\t\t\t\tself.recursiveEntryRender(text, textStack, depth);\r\n\t\t\t\t\t\t\t\ttextStack.push(`</b>`);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"@i\":\r\n\t\t\t\t\t\t\tcase \"@italic\":\r\n\t\t\t\t\t\t\t\ttextStack.push(`<i>`);\r\n\t\t\t\t\t\t\t\tself.recursiveEntryRender(text, textStack, depth);\r\n\t\t\t\t\t\t\t\ttextStack.push(`</i>`);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"@action\": // Convert this to a tag once the rules data are more navigable\r\n\t\t\t\t\t\t\t\ttextStack.push(`<span title=\"${Parser.actionToExplanation(text)}\" class=\"explanation\">${text}</span>`);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"@skill\": // Convert this to a tag once the rules data are more navigable\r\n\t\t\t\t\t\t\t\ttextStack.push(`<span title=\"${Parser.skillToExplanation(text)}\" class=\"explanation\">${text}</span>`);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst [name, source, displayText, ...others] = text.split(\"|\");\r\n\t\t\t\t\t\tconst hash = `${name}${source ? `${HASH_LIST_SEP}${source}` : \"\"}`;\r\n\r\n\t\t\t\t\t\tconst fauxEntry = {\r\n\t\t\t\t\t\t\t\"type\": \"link\",\r\n\t\t\t\t\t\t\t\"href\": {\r\n\t\t\t\t\t\t\t\t\"type\": \"internal\",\r\n\t\t\t\t\t\t\t\t\"path\": \"\",\r\n\t\t\t\t\t\t\t\t\"hash\": encodeForHash(hash)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"text\": (displayText ? displayText : name)\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tswitch (tag) {\r\n\t\t\t\t\t\t\tcase \"@spell\":\r\n\t\t\t\t\t\t\t\tif (!source) fauxEntry.href.hash += HASH_LIST_SEP + SRC_PHB;\r\n\t\t\t\t\t\t\t\tfauxEntry.href.hash = \"/spells/\" + fauxEntry.href.hash;\r\n\t\t\t\t\t\t\t\tself.recursiveEntryRender(fauxEntry, textStack, depth);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"@item\":\r\n\t\t\t\t\t\t\t\tif (!source) fauxEntry.href.hash += HASH_LIST_SEP + SRC_DMG;\r\n\t\t\t\t\t\t\t\tfauxEntry.href.hash = \"/items/\" + fauxEntry.href.hash;\r\n\t\t\t\t\t\t\t\tself.recursiveEntryRender(fauxEntry, textStack, depth);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"@condition\":\r\n\t\t\t\t\t\t\t\tif (!source) fauxEntry.href.hash += HASH_LIST_SEP + SRC_PHB;\r\n\t\t\t\t\t\t\t\tfauxEntry.href.hash = \"/conditions/\" + fauxEntry.href.hash;\r\n\t\t\t\t\t\t\t\tself.recursiveEntryRender(fauxEntry, textStack, depth);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"@class\":\r\n\t\t\t\t\t\t\t\tconst classMatch = EntryRenderer.RE_INLINE_CLASS.exec(text);\r\n\t\t\t\t\t\t\t\tif (classMatch) {\r\n\t\t\t\t\t\t\t\t\tfauxEntry.href.hash = classMatch[1].trim(); // TODO pass this in\r\n\t\t\t\t\t\t\t\t\tfauxEntry.href.subhashes = [{\"key\": \"sub\", \"value\": classMatch[2].trim() + \"~phb\"}] // TODO pass this in\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!source) fauxEntry.href.hash += HASH_LIST_SEP + SRC_PHB;\r\n\t\t\t\t\t\t\t\tfauxEntry.href.hash = \"/classes/\" + fauxEntry.href.hash;\r\n\t\t\t\t\t\t\t\tself.recursiveEntryRender(fauxEntry, textStack, depth);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"@creature\":\r\n\t\t\t\t\t\t\t\tif (!source) fauxEntry.href.hash += HASH_LIST_SEP + SRC_MM;\r\n\t\t\t\t\t\t\t\tfauxEntry.href.hash = \"/bestiary/\" + fauxEntry.href.hash;\r\n\t\t\t\t\t\t\t\tself.recursiveEntryRender(fauxEntry, textStack, depth);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"@filter\":\r\n\t\t\t\t\t\t\t\t// todo... maybe\r\n\t\t\t\t\t\t\t\ttextStack.push(name);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"@damage\":\r\n\t\t\t\t\t\t\tcase \"@dice\":\r\n\t\t\t\t\t\t\t\t// todo\r\n\t\t\t\t\t\t\t\ttextStack.push(name);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"@book\":\r\n\t\t\t\t\t\t\t\t//todo\r\n\t\t\t\t\t\t\t\ttextStack.push(name);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"@5etools\":\r\n\t\t\t\t\t\t\t\tif (source.indexOf(\".\") > -1) {\r\n\t\t\t\t\t\t\t\t\tfauxEntry.href.hash = \"/\" + source.substring(0, source.indexOf(\".\"))\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tfauxEntry.href.hash = \"/\" + source;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tself.recursiveEntryRender(fauxEntry, textStack, depth);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttextStack.push(s);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction splitFirstSpace(string) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\tstring.substr(0, string.indexOf(' ')),\r\n\t\t\t\t\tstring.substr(string.indexOf(' ') + 1)\r\n\t\t\t\t]\r\n\t\t\t}\r\n\r\n\t\t\tfunction splitByTags() {\r\n\t\t\t\tlet tagDepth = 0;\r\n\t\t\t\tlet inTag = false;\r\n\t\t\t\tlet char, char2;\r\n\t\t\t\tconst out = [];\r\n\t\t\t\tlet curStr = \"\";\r\n\t\t\t\tfor (let i = 0; i < entry.length; ++i) {\r\n\t\t\t\t\tchar = entry.charAt(i);\r\n\t\t\t\t\tchar2 = i < entry.length-1 ? entry.charAt(i+1) : null;\r\n\r\n\t\t\t\t\tswitch (char) {\r\n\t\t\t\t\t\tcase \"{\":\r\n\t\t\t\t\t\t\tif (char2 === \"@\") {\r\n\t\t\t\t\t\t\t\tif (tagDepth++ > 0) {\r\n\t\t\t\t\t\t\t\t\tcurStr += char;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tout.push(curStr);\r\n\t\t\t\t\t\t\t\t\tinTag = false;\r\n\t\t\t\t\t\t\t\t\tcurStr = \"\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcurStr += char;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"}\":\r\n\t\t\t\t\t\t\tif (--tagDepth === 0) {\r\n\t\t\t\t\t\t\t\tout.push(curStr);\r\n\t\t\t\t\t\t\t\tcurStr = \"\";\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcurStr += char;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tcurStr += char;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (curStr.length > 0) out.push(curStr);\r\n\r\n\t\t\t\treturn out;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nEntryRenderer.getEntryDice = function (entry) {\r\n\t// TODO make droll integration optional\r\n\tlet toAdd;\r\n\tif (entry.number && entry.faces) {\r\n\t\ttoAdd = String(entry.number) + \"d\" + entry.faces;\r\n\t} else if (entry.toRoll && entry.toRoll.length) {\r\n\t\tfor (let roll of entry.toRoll) {\r\n\t\t\ttoAdd = String(roll.number) + \"d\" + roll.faces + \" + \"\r\n\t\t}\r\n\t\ttoAdd = toAdd.substring(0, toAdd.length - 3);\r\n\t}\r\n\tif (typeof droll !== \"undefined\" && entry.rollable === true) {\r\n\t\t// TODO output this somewhere nice\r\n\t\t// TODO make this less revolting\r\n\r\n\t\t// TODO output to small tooltip-stype bubble? Close on mouseout\r\n\t\treturn `<span class='roller unselectable' onclick=\"if (this.rolled) { this.innerHTML = this.innerHTML.split('=')[0].trim()+' = '+droll.roll('${toAdd}').total; } else { this.rolled = true; this.innerHTML += ' = '+droll.roll('${toAdd}').total; }\">${toAdd}</span>`;\r\n\t} else {\r\n\t\treturn toAdd;\r\n\t}\r\n};\r\n\r\nEntryRenderer.RE_INLINE_CLASS = /(.*?) \\((.*?)\\)/;\r\nEntryRenderer.HEAD_NEG_1 = \"statsBlockSectionHead\";\r\nEntryRenderer.HEAD_0 = \"statsBlockHead\";\r\nEntryRenderer.HEAD_1 = \"statsBlockSubHead\";\r\nEntryRenderer.HEAD_2 = \"statsInlineHead\";\r\nEntryRenderer.DATA_NONE = \"data-none\";\r\n\r\nexport default EntryRenderer;","import EntryRenderer from '../util/entryrender.js';\r\nimport Parser from '../util/Parser.js';\r\nimport { utils_makeRoller } from '../js/utils.js';\r\n\r\nconst stats_wrapper = `\r\n\t<div class=\"stats-wrapper margin-bottom_large\">\r\n\t\t<div class=\"margin-bottom_small\">\r\n\t\t\t<span class=\"type\"></span><span class=\"rarity\"></span>\r\n\t\t\t<span class=\"attunement\"></span>\r\n\t\t</div>\r\n\t\t<div class=\"margin-bottom_small\">\r\n\t\t\t<span class=\"value\"></span><span class=\"weight\"></span>\r\n\t\t</div>\r\n\t\t<div class=\"margin-bottom_small\">\r\n\t\t\t<span class=\"damage\"></span>\r\n\t\t\t<span class=\"damageType\"></span>\r\n\t\t\t<span class=\"properties\"></span>\r\n\t\t</div>\r\n\t\t<div class=\"text\"></div>\r\n\t\t<div class=\"margin-bottom_small\">Source: <span class=\"source\"></span></div>\r\n\t</div>`;\r\n\r\nconst renderer = new EntryRenderer();\r\nfunction renderSelection(item, rootEl, hideFirstLine) {\r\n\tconst wrap = rootEl.querySelector(\".selection-wrapper\") || rootEl;\r\n\twrap.innerHTML = stats_wrapper;\r\n\t\r\n\tconst source = item.source;\r\n\tconst sourceFull = Parser.sourceJsonToFull(source);\r\n\trootEl.querySelector(\".stats-wrapper .source\").innerHTML = (`${sourceFull}, page ${item.page}`);\r\n\r\n\trootEl.querySelector(\".stats-wrapper .value\").innerHTML = (item.value ? item.value+(item.weight ? \", \" : \"\") : \"\");\r\n\trootEl.querySelector(\".stats-wrapper .weight\").innerHTML = (item.weight ? item.weight+(item.weight == 1 ? \" lb.\" : \" lbs.\") : \"\");\r\n\trootEl.querySelector(\".stats-wrapper .rarity\").innerHTML = ((item.tier ? \", \"+item.tier : \"\")+(item.rarity ? \", \"+item.rarity : \"\"));\r\n\trootEl.querySelector(\".stats-wrapper .attunement\").innerHTML = (item.reqAttune ? item.reqAttune : \"\");\r\n\trootEl.querySelector(\".stats-wrapper .type\").innerHTML = (item.typeText);\r\n\r\n\trootEl.querySelector(\".stats-wrapper .damage\").innerHTML = (\"\");\r\n\trootEl.querySelector(\".stats-wrapper .damageType\").innerHTML = (\"\");\r\n\tconst type = item.type || \"\";\r\n\tif (item.weaponCategory) {\r\n\t\tif(item.dmg1) rootEl.querySelector(\".stats-wrapper .damage\").innerHTML = (utils_makeRoller(item.dmg1));\r\n\t\tif(item.dmgType) rootEl.querySelector(\".stats-wrapper .damageType\").innerHTML = (Parser.dmgTypeToFull(item.dmgType));\r\n\t} else if (type === \"LA\" ||type === \"MA\"|| type === \"HA\") {\r\n\t\trootEl.querySelector(\".stats-wrapper .damage\").innerHTML = (\"AC \"+item.ac+(type === \"LA\" ? \" + Dex\" : type === \"MA\" ? \" + Dex (max 2)\" : \"\"));\r\n\t} else if (type === \"S\") {\r\n\t\trootEl.querySelector(\".stats-wrapper .damage\").innerHTML = (\"AC +\"+item.ac);\r\n\t} else if (type === \"MNT\" || type === \"VEH\") {\r\n\t\tconst speed=item.speed;\r\n\t\tconst capacity=item.carryingcapacity;\r\n\t\tif (speed) rootEl.querySelector(\".stats-wrapper .damage\").append(\"Speed=\"+speed);\r\n\t\tif (speed && capacity) rootEl.querySelector(\".stats-wrapper .damage\").append(type === \"MNT\" ? \", \" : \"<br>\");\r\n\t\tif (capacity) {\r\n\t\t\trootEl.querySelector(\".stats-wrapper .damage\").append(\"Carrying Capacity=\"+capacity);\r\n\t\t\tif (capacity.indexOf(\"ton\") === -1 && capacity.indexOf(\"passenger\") === -1) rootEl.querySelector(\".stats-wrapper .damage\").append(capacity == 1 ? \" lb.\" : \" lbs.\");\r\n\t\t}\r\n\t}\r\n\r\n\trootEl.querySelector(\".stats-wrapper .properties\").innerHTML = (\"\");\r\n\tif (item.property) {\r\n\t\tconst properties = item.property.split(\",\");\r\n\t\tfor (let i = 0; i < properties.length; i++) {\r\n\t\t\tconst prop = properties[i];\r\n\t\t\tlet a = window.itemPropertyList[prop].name;\r\n\t\t\tif (prop === \"V\") a = `${a} (${utils_makeRoller(item.dmg2)})`;\r\n\t\t\tif (prop === \"T\" || prop === \"A\" || prop === \"AF\") a = `${a} (${item.range}ft.)`;\r\n\t\t\tif (prop === \"RLD\") a = `${a} (${item.reload} shots)`;\r\n\t\t\ta = (i > 0 ? \", \" : item.dmg1 ? \"- \" : \"\") + a;\r\n\t\t\trootEl.querySelector(\".stats-wrapper .properties\").append(a);\r\n\t\t}\r\n\t}\r\n\r\n\tconst entryList = {type: \"entries\", entries: item.entries};\r\n\tconst renderStack = [];\r\n\trenderer.recursiveEntryRender(entryList, renderStack, 1);\r\n\trootEl.querySelector(\".stats-wrapper .text\").innerHTML = (utils_makeRoller(renderStack.join(\"\")).split(item.name.toLowerCase()).join(\"<i>\"+item.name.toLowerCase()+\"</i>\"));\r\n\tif (hideFirstLine) {\r\n\t\trootEl.querySelector(\".margin-bottom_small\").remove();\r\n\t}\r\n}\r\n\r\nexport { renderSelection };","import './theme/lumo/vaadin-checkbox.js';\nexport * from './src/vaadin-checkbox.js';\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-grid-sorter\" theme-for=\"vaadin-grid-sorter\">\n  <template>\n    <style>\n      :host {\n        justify-content: flex-start;\n        align-items: baseline;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        user-select: none;\n      }\n\n      [part=\"content\"] {\n        display: inline-block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      [part=\"indicators\"] {\n        margin-left: var(--lumo-space-s);\n      }\n\n      :host(:not([direction])) [part=\"indicators\"]::before {\n        opacity: 0.2;\n      }\n\n      :host([direction]) {\n        color: var(--lumo-primary-text-color);\n      }\n\n      [part=\"order\"] {\n        font-size: var(--lumo-font-size-xxs);\n        line-height: 1;\n      }\n\n      /* RTL specific styles */\n\n      :host([dir=\"rtl\"]) [part=\"indicators\"] {\n        margin-right: var(--lumo-space-s);\n        margin-left: 0;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/polymer/lib/elements/custom-style.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { DirMixin } from '@vaadin/vaadin-element-mixin/vaadin-dir-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<custom-style>\n  <style>\n    @font-face {\n      font-family: 'vaadin-grid-sorter-icons';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAA0AAAAABuwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAEFAAAABkAAAAcfep+mUdERUYAAAP4AAAAHAAAAB4AJwAOT1MvMgAAAZgAAAA/AAAAYA8TBPpjbWFwAAAB7AAAAFUAAAFeF1fZ4mdhc3AAAAPwAAAACAAAAAgAAAAQZ2x5ZgAAAlgAAABcAAAAnMvguMloZWFkAAABMAAAAC8AAAA2C5Ap72hoZWEAAAFgAAAAHQAAACQGbQPHaG10eAAAAdgAAAAUAAAAHAoAAABsb2NhAAACRAAAABIAAAASAIwAYG1heHAAAAGAAAAAFgAAACAACwAKbmFtZQAAArQAAAECAAACZxWCgKhwb3N0AAADuAAAADUAAABZCrApUXicY2BkYGAA4rDECVrx/DZfGbhZGEDgyqNPOxH0/wNMq5kPALkcDEwgUQBWRA0dAHicY2BkYGA+8P8AAwMLAwgwrWZgZEAFbABY4QM8AAAAeJxjYGRgYOAAQiYGEICQSAAAAi8AFgAAeJxjYGY6yziBgZWBgWkm0xkGBoZ+CM34msGYkZMBFTAKoAkwODAwvmRiPvD/AIMDMxCD1CDJKjAwAgBktQsXAHicY2GAAMZQCM0EwqshbAALxAEKeJxjYGBgZoBgGQZGBhCIAPIYwXwWBhsgzcXAwcAEhIwMCi+Z/v/9/x+sSuElA4T9/4k4K1gHFwMMMILMY2QDYmaoABOQYGJABUA7WBiGNwAAJd4NIQAAAAAAAAAACAAIABAAGAAmAEAATgAAeJyNjLENgDAMBP9tIURJwQCMQccSZgk2i5fIYBDAidJjycXr7x5EPwE2wY8si7jmyBNXGo/bNBerxJNrpxhbO3/fEFpx8ZICpV+ghxJ74fAMe+h7Ox14AbrsHB14nK2QQWrDMBRER4mTkhQK3ZRQKOgCNk7oGQqhhEIX2WSlWEI1BAlkJ5CDdNsj5Ey9Rncdi38ES+jzNJo/HwTgATcoDEthhY3wBHc4CE+pfwsX5F/hGe7Vo/AcK/UhvMSz+mGXKhZU6pww8ISz3oWn1BvhgnwTnuEJf8Jz1OpFeIlX9YULDLdFi4ASHolkSR0iuYdjLak1vAequBhj21D61Nqyi6l3qWybGPjySbPHGScGJl6dP58MYcQRI0bts7mjebBqrFENH7t3qWtj0OuqHnXcW7b0HOTZFnKryRGW2hFX1m0O2vEM3opNMfTau+CS6Z3Vx6veNnEXY6jwDxhsc2gAAHicY2BiwA84GBgYmRiYGJkZmBlZGFkZ2djScyoLMgzZS/MyDQwMwLSrpYEBlIbxjQDrzgsuAAAAAAEAAf//AA94nGNgZGBg4AFiMSBmYmAEQnYgZgHzGAAD6wA2eJxjYGBgZACCKyoz1cD0o087YTQATOcIewAAAA==) format('woff');\n      font-weight: normal;\n      font-style: normal;\n    }\n  </style>\n</custom-style>`;\n\ndocument.head.appendChild($_documentContainer.content);\n/**\n * `<vaadin-grid-sorter>` is a helper element for the `<vaadin-grid>` that provides out-of-the-box UI controls,\n * visual feedback, and handlers for sorting the grid data.\n *\n * #### Example:\n * ```html\n * <vaadin-grid-column>\n *   <template class=\"header\">\n *     <vaadin-grid-sorter path=\"name.first\">First name</vaadin-grid-sorter>\n *   </template>\n *   <template>[[item.name.first]]</template>\n * </vaadin-grid-column>\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `content` | The slotted content wrapper\n * `indicators` | The internal sorter indicators.\n * `order` | The internal sorter order\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `direction` | Sort direction of a sorter | :host\n *\n * @extends PolymerElement\n */\nclass GridSorterElement extends ThemableMixin(DirMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-flex;\n        cursor: pointer;\n        max-width: 100%;\n      }\n\n      [part=\"content\"] {\n        flex: 1 1 auto;\n      }\n\n      [part=\"indicators\"] {\n        position: relative;\n        align-self: center;\n        flex: none;\n      }\n\n      [part=\"order\"] {\n        display: inline;\n        vertical-align: super;\n      }\n\n      [part=\"indicators\"]::before {\n        font-family: 'vaadin-grid-sorter-icons';\n        display: inline-block;\n      }\n\n      :host(:not([direction])) [part=\"indicators\"]::before {\n        content: \"\\\\e901\";\n      }\n\n      :host([direction=asc]) [part=\"indicators\"]::before {\n        content: \"\\\\e900\";\n      }\n\n      :host([direction=desc]) [part=\"indicators\"]::before {\n        content: \"\\\\e902\";\n      }\n    </style>\n\n    <div part=\"content\">\n      <slot></slot>\n    </div>\n    <div part=\"indicators\">\n      <span part=\"order\">[[_getDisplayOrder(_order)]]</span>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid-sorter';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * JS Path of the property in the item used for sorting the data.\n       */\n      path: String,\n\n      /**\n       * How to sort the data.\n       * Possible values are `asc` to use an ascending algorithm, `desc` to sort the data in\n       * descending direction, or `null` for not sorting the data.\n       */\n      direction: {\n        type: String,\n        reflectToAttribute: true,\n        notify: true,\n        value: null\n      },\n\n      _order: {\n        type: Number,\n        value: null\n      },\n\n      _isConnected: {\n        type: Boolean,\n        value: false\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_pathOrDirectionChanged(path, direction, _isConnected)',\n      '_directionOrOrderChanged(direction, _order)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', this._onClick.bind(this));\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n    this._isConnected = true;\n  }\n\n  /** @protected */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._isConnected = false;\n  }\n\n  _pathOrDirectionChanged(path, direction, isConnected) {\n    if (path === undefined || direction === undefined || isConnected === undefined) {\n      return;\n    }\n\n    if (isConnected) {\n      this.dispatchEvent(new CustomEvent('sorter-changed', {bubbles: true, composed: true}));\n    }\n  }\n\n  _getDisplayOrder(order) {\n    return order === null ? '' : order + 1;\n  }\n\n  _onClick(e) {\n    const activeElement = this.getRootNode().activeElement;\n    if (this !== activeElement && this.contains(activeElement)) {\n      // Some focusable content inside the sorter was clicked, do nothing.\n      return;\n    }\n\n    e.preventDefault();\n    if (this.direction === 'asc') {\n      this.direction = 'desc';\n    } else if (this.direction === 'desc') {\n      this.direction = null;\n    } else {\n      this.direction = 'asc';\n    }\n  }\n\n  _directionOrOrderChanged(direction, order) {\n    if (direction === undefined || order === undefined) {\n      return;\n    }\n\n    // Safari has an issue with repainting shadow root element styles when a host attribute changes.\n    // Need this workaround (toggle any inline css property on and off) until the issue gets fixed.\n    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    if (isSafari && this.root) {\n      this.root.querySelectorAll('*').forEach(function(el) {\n        el.style['-webkit-backface-visibility'] = 'visible';\n        el.style['-webkit-backface-visibility'] = '';\n      });\n    }\n  }\n}\n\ncustomElements.define(GridSorterElement.is, GridSorterElement);\n\nexport { GridSorterElement };\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { GridColumnElement } from './vaadin-grid-column.js';\n\nimport './vaadin-grid-sorter.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * `<vaadin-grid-sort-column>` is a helper element for the `<vaadin-grid>`\n * that provides default header template and functionality for sorting.\n *\n * #### Example:\n * ```html\n * <vaadin-grid items=\"[[items]]\">\n *  <vaadin-grid-sort-column path=\"name.first\" direction=\"asc\"></vaadin-grid-sort-column>\n *\n *  <vaadin-grid-column>\n *    ...\n * ```\n *\n * @extends PolymerElement\n */\nclass GridSortColumnElement extends GridColumnElement {\n  static get template() {\n    return html`\n    <template class=\"header\" id=\"headerTemplate\">\n      <vaadin-grid-sorter path=\"[[path]]\" direction=\"{{direction}}\">[[_getHeader(header, path)]]</vaadin-grid-sorter>\n    </template>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid-sort-column';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * JS Path of the property in the item used for sorting the data.\n       */\n      path: String,\n\n      /**\n       * How to sort the data.\n       * Possible values are `asc` to use an ascending algorithm, `desc` to sort the data in\n       * descending direction, or `null` for not sorting the data.\n       */\n      direction: {\n        type: String,\n        notify: true\n      }\n    };\n  }\n\n  _prepareHeaderTemplate() {\n    const headerTemplate = this._prepareTemplatizer(this.$.headerTemplate);\n    // needed to override the dataHost correctly in case internal template is used.\n    headerTemplate.templatizer.dataHost = this;\n    return headerTemplate;\n  }\n\n  _getHeader(header, path) {\n    return header || this._generateHeader(path);\n  }\n}\n\ncustomElements.define(GridSortColumnElement.is, GridSortColumnElement);\n\nexport { GridSortColumnElement };\n","import { PolymerElement, html } from \"@polymer/polymer\";\nimport { \n  getCharacterChannel, \n  getSelectedCharacter, \n  getClassReferences, \n  getBackgroundReference, \n  getItems, \n  removeItem, \n  canAttuneItem, \n  canEquipItem, \n  toggleItemEquiped, \n  toggleItemAttuned \n} from \"../../../util/charBuilder\";\nimport EntryRenderer from '../../../util/entryrender.js'\nimport { getEditModeChannel, isEditMode } from \"../../../util/editMode\";\nimport { jqEmpty, entrySearch } from \"../../../js/utils\";\nimport { renderSelection } from \"../../../js/items\";\nimport \"@vaadin/vaadin-checkbox\";\nimport \"@vaadin/vaadin-grid\";\nimport \"@vaadin/vaadin-grid/vaadin-grid-sort-column\";\n\nclass DndCharacterBuilderEquipment extends PolymerElement {\n  \n  static get properties() {\n    return {\n      classEquipment: {\n        type: String,\n      },\n      inventory: {\n        type: Array\n      },\n      hasClass: {\n        type: Boolean,\n        value: false\n      },\n      hasBackground: {\n        type: Boolean,\n        value: false\n      },\n      isEditMode: {\n        type: Boolean,\n        value: false\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    \n    this.renderer = new EntryRenderer();\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.characterChangeHandler = (e) => {\n      let character = e.detail.character;\n      this.updateFromCharacter(character);\n    };\n    \n    this.updateFromCharacter(getSelectedCharacter());\n    getCharacterChannel().addEventListener(\"character-selected\", this.characterChangeHandler);\n\n    this.editModeHandler = (e) => {\n      this.isEditMode = e.detail.isEditMode;\n    }\n    getEditModeChannel().addEventListener('editModeChange', this.editModeHandler);\n    this.isEditMode = isEditMode();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    getCharacterChannel().removeEventListener(\"character-selected\", this.characterChangeHandler);\n    getEditModeChannel().removeEventListener('editModeChange', this.editModeHandler);\n  }\n\n  ready() {\n    super.ready();\n    \n    setTimeout(() => {\n      const grid = this.$.grid;\n\n      grid.rowDetailsRenderer = ((root, grid, rowData) => {\n        if (!root.firstElementChild) {\n          root.innerHTML =\n          '<div class=\"details\" id=\"stats\"></div>';\n        }\n        const deets = root.querySelector('.details');\n        jqEmpty(deets);\n        renderSelection(rowData.item, deets, true);\n      }).bind(this);\n    }, 0);\n  }\n\n  async updateFromCharacter(character) {\n    this.hasClass = false;\n    this.hasBackground = false;\n    this.$.backgroundEquipment.innerHTML = \"\";\n    this.$.classEquipment.innerHTML = \"\";\n    if (character) {\n      const inventory = await getItems(character);\n\n      let firstClass;\n      if (character.levels && character.levels.length > 0) {\n        const classRefs = await getClassReferences();\n        firstClass = classRefs[character.levels[0].name];\n        this.hasClass = true;\n        // todo Build inventory from class starting.\n        this.$.classEquipment.innerHTML = this.parseClassEquipment(firstClass.startingEquipment);\n      } else {\n        this.$.classEquipment.innerHTML = \"\";\n      }\n\n      if (!firstClass || firstClass.startingEquipment.additionalFromBackground) {\n        const background = await getBackgroundReference();\n        if (background) {\n          this.hasBackground = true;\n          this.$.backgroundEquipment.innerHTML = this.parseBackgroundEquipment(background.entries)\n          if (background.entries) {\n            const equipmentEntry = entrySearch(\"Equipment\", background.entries);\n            // todo Build inventory from background starting.\n          }\n        } else {\n          this.$.backgroundEquipment.innerHTML = \"\";\n        }\n      } else {\n        this.$.backgroundEquipment.innerHTML = \"\";\n      }\n\n      this.inventory = inventory;\n      this.dispatchEvent(new CustomEvent(\"loadingChange\", { bubbles: true, composed: true }));\n    }\n  }\n\n  parseClassEquipment(classEquip) {\n    if (classEquip) {\n      const fromBackground = classEquip.additionalFromBackground\n        ? \"<p>You start with the following items, plus anything provided by your background.</p>\"\n        : \"\";\n      const defList = classEquip.default.length === 0 ? \"\" : `<ul><li>${classEquip.default.map(i => this.renderStr(i)).join(\"</li><li>\")}</ul>`;\n      const goldAlt =\n        classEquip.goldAlternative === undefined\n          ? \"\"\n          : `<p>Alternatively, you may start with ${this.renderStr(classEquip.goldAlternative)} gp to buy your own equipment.</p>`;\n      return `${fromBackground}${defList}${goldAlt}`;\n    }\n  }\n\n  parseBackgroundEquipment(backgroundEntries) {\n    if (backgroundEntries) {\n      const equipmentEntry = entrySearch(\"Equipment\", backgroundEntries);\n      const renderedEquipment = this.renderStr(equipmentEntry.entry);\n      return `<p>${renderedEquipment}</p>`;\n    }\n  }\n\n  renderStr(string) {\n    let renderStack = []\n    this.renderer.recursiveEntryRender(string, renderStack, 0);\n    return renderStack.join(\" \");\n  }\n\n  _expandDetails(e) {\n    let data = e.model.__data.item,\n      stayClosed = this.$.grid.detailsOpenedItems.indexOf(data) > -1;\n\n    for (let item of this.$.grid.detailsOpenedItems) {\n      this.$.grid.closeItemDetails(item);\n    }\n\n    if (stayClosed) {\n      this.$.grid.closeItemDetails(data);\n    } else {\n      this.$.grid.openItemDetails(data);\n    }\n    this.$.grid.notifyResize();\n  }\n\n  _flashCheckbox(checkboxEl) {\n    if (checkboxEl) {\n      checkboxEl.classList.add('transition-bg');\n      checkboxEl.classList.add('flash-error');\n      setTimeout(() => {\n        checkboxEl.classList.remove('flash-error');\n        setTimeout(() => {\n          checkboxEl.classList.remove('transition-bg');\n        }, 200);\n      }, 200);\n    }\n  }\n\n  _deleteItem(e) {\n    let id = e.model.__data.item && e.model.__data.item.id !== undefined ? e.model.__data.item.id : undefined;\n    removeItem(id);\n  }\n\n  async _setItemEquiped(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    let id = e.model.__data.item && e.model.__data.item.id ? e.model.__data.item.id : undefined;\n    let isEquiped = e.model.__data.item && e.model.__data.item.isEquiped ? e.model.__data.item.isEquiped : false;\n    \n    if (isEquiped) {\n      toggleItemEquiped(id);\n    } else if (await canEquipItem(e.model.__data.item)) {\n      toggleItemEquiped(id);\n    } else {\n      let checkbox = e.target.querySelector('vaadin-checkbox')\n      this._flashCheckbox(checkbox)\n    }\n  }\n\n  async _setItemAttuned(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    let id = e.model.__data.item && e.model.__data.item.id ? e.model.__data.item.id : undefined;\n    let isAttuned = e.model.__data.item && e.model.__data.item.isAttuned ? e.model.__data.item.isAttuned : false;\n\n    if (isAttuned) {\n      toggleItemAttuned(id);\n    } else if (await canAttuneItem(e.model.__data.item)) {\n      toggleItemAttuned(id);\n    } else {\n      let checkbox = e.target.querySelector('vaadin-checkbox')\n      this._flashCheckbox(checkbox)\n    }\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  _or(...bools) {\n    for (let bool of bools) {\n      if (bool) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles\"></style>\n      <style>\n        :host {\n          display: block;\n          padding: 14px;\n        }\n        [hidden] {\n          display: none !important;\n        }\n        a {\n          color: var(--mdc-theme-secondary);\n        }\n\n        .heading {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n          justify-content: space-between;\n        }\n\n        .col-wrap {\n          display: flex; \n          justify-content: space-between;\n          flex-wrap: wrap;\n        }\n\n        .row-wrap {\n          width: 100%;\n        }\n        .row-wrap:not(:last-child) {\n          margin-bottom: 24px;\n        }\n\n        .row-wrap > *:not(h2):not(:last-child) {\n          margin-bottom: 10px;\n        }\n\n        .no-content {\n          font-size: 14px;\n          font-style: italic;\n        }\n\n        .item-wrap {\n          display: flex;\n          flex-wrap: nowrap;\n          flex-direction: row;\n          justify-content: space-between;\n          align-items: flex-start;\n          padding: 10px 6px;\n          min-height: 28px;\n        }\n        .item-wrap__name-wrap {\n          flex-basis: 100%;\n          min-width: 0;\n          display: flex;\n          flex-direction: column;\n        }\n        .item-wrap__name {\n          font-weight: bold;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n        .item-wrap__type {\n          font-style: italic;\n          font-size: 12px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n        .item-wrap__close {\n          font-size: 14px;\n          margin-top: 6px;\n          cursor: pointer;\n        }\n        .item-wrap__checkboxes {\n          display: flex;\n          flex-direction: column;\n          width: 80px;\n          flex-grow: 0;\n          flex-shrink: 0;\n        }\n        .item-wrap__checkboxes > span {\n          cursor: pointer;\n        }\n        vaadin-checkbox {\n          pointer-events: none;\n          font-size: 13px;\n        }\n        vaadin-checkbox.flash-error {\n          color: var(--mdc-theme-error);\n          transition: color 0.2s ease-out;\n          --lumo-contrast-20pct: var(--mdc-theme-error);\n        }\n        vaadin-checkbox.transition-bg {\n          transition: color 0.2s ease-in;\n        }\n\n        .details {\n          font-size: 14px;\n          width: calc(100% - 30px);\n          margin: 0 auto 13px !important;\n          background: var(--lumo-contrast-10pct);\n          border-radius: 4px;\n          padding: 14px;\n        }\n        #stats {\n          margin-top: 24px;\n          font-size: 12px;\n        }\n        #stats p {\n          margin-top: 4px;\n          margin-bottom: 16px;\n        }\n        #stats .table {\n          margin-bottom: 24px;\n          border-radius: 4px;\n          box-shadow: 0 0 0 1px var(--mdc-theme-text-divider-on-background);\n        }\n        #stats .subclass-feature .stat-name {\n          color: var(--mdc-theme-primary, '#6200ee');\n        }\n        #stats .statsBlockHead .stat-name {\n          display: block;\n          font-size: 1.6rem;\n          font-weight: normal;\n          line-height: 1.2;\n        }\n        #stats .statsBlockSubHead .stat-name {\n          font-size: 1.2rem;\n          font-weight: normal;\n        }\n        #stats .statsInlineHead {\n          margin-bottom: 16px;\n        }\n        #stats .statsInlineHead .stat-name {\n          font-size: .8rem;\n          font-weight: bold;\n          display: inline;\n        }\n        #stats .statsInlineHead .stat-name + p {\n          display: inline;\n        }\n        #stats .spell-ability {\n          margin: 0 24px;\n          display: block;\n        }\n        #stats .subclass-feature,\n        #stats .class-feature {\n          padding-top: 24px;\n          border-top: 1px solid var(--mdc-theme-text-divider-on-background, 'rgba(0, 0, 0, 0.12)');\n        }\n        #stats a {\n          color: var(--mdc-theme-secondary, '#018786') !important;\n        }\n        #stats ul {\n          padding-left: 24px;\n          list-style: disc;\n        }\n        #stats ul li {\n          margin-bottom: 8px;\n        }\n\n        @media(min-width: 921px) {\n          .row-wrap {\n            width: calc(50% - 10px);\n          }\n          .row-wrap:first-child {\n            margin-bottom: 0;\n          }\n        }\n      </style>\n\n      <div class=\"col-wrap\">\n\n        <div class=\"row-wrap\">\n          <div class=\"heading\">\n            <h2>Inventory</h2>\n            <a class=\"mdc-icon-button material-icons\" href=\"#/items\">launch</a>\n          </div>\n          <vaadin-grid id=\"grid\" items=\"[[inventory]]\" theme=\"no-border no-row-borders no-row-padding\" >\n            <vaadin-grid-sort-column path=\"typeText\" header=\"Type\">\n              <template>\n                <div class=\"item-wrap\">\n                  <div class=\"item-wrap__name-wrap\" on-click=\"_expandDetails\">\n                    <span class=\"item-wrap__name\">[[item.name]]</span>\n                    <span class=\"item-wrap__type\">[[item.typeText]]</span>\n                  </div>\n                  <div class=\"item-wrap__checkboxes\">\n                    <span on-click=\"_setItemEquiped\">\n                      <vaadin-checkbox checked=\"[[item.isEquiped]]\" hidden$=\"[[!item.canEquip]]\">Equip</vaadin-checkbox>\n                    </span>\n                    <span on-click=\"_setItemAttuned\">\n                      <vaadin-checkbox checked=\"[[item.isAttuned]]\" hidden$=\"[[!item.reqAttune]]\">Attune</vaadin-checkbox>\n                    </span>\n                  </div>\n                  <div class=\"mdc-buttom-icon material-icons item-wrap__close\" on-click=\"_deleteItem\">close</div>\n                </div>\n              </template>\n            </vaadin-grid-sort-column>\n          </vaadin-grid>\n        </div>\n\n        <div class=\"row-wrap\">\n          <h2>From Class</h2>\n          <span class=\"no-content\" hidden$=[[hasClass]]>Select a class to see equipment</span>\n          <div id=\"classEquipment\"></div>\n        </div>\n\n        <div class=\"row-wrap\">\n          <h2>From Background</h2>\n          <span class=\"no-content\" hidden$=[[hasBackground]]>Select a background to see equipment</span>\n          <div id=\"backgroundEquipment\"></div>\n        </div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define(\"dnd-character-builder-equipment\", DndCharacterBuilderEquipment);"],"sourceRoot":""}