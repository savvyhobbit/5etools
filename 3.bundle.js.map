{"version":3,"sources":["webpack:///./js/classes.js","webpack:///./util/renderList.js"],"names":["CLSS_ACTIVE","renderer","renderStr","string","renderStack","recursiveEntryRender","join","onDataLoad","classes","rootEl","c","subclasses","sort","a","b","name","sortedClasses","filter","includes","window","classTableDefault","querySelector","innerHTML","items","container","appendChild","listWrapper","htmlString","i","length","curItem","svg","replace","source","Parser","sourceJsonToFull","itemElements","addEventListener","e","tar","target","closest","getAttribute","renderList","onClassChange","curClass","classList","remove","hd","getEntryDice","faces","add","proficiency","map","p","attAbvToFull","sProfs","startingProficiencies","undefined","armor","weapons","w","tools","skills","numString","skillOptions","result","Array","isArray","skill","choose","numberToString","count","from","getSkillProfString","sEquip","startingEquipment","fromBackground","additionalFromBackground","defList","default","goldAlt","goldAlternative","tData","classTableGroups","groupHeaders","colHeaders","levelTrs","spellsFlag","subclassDef","subclassTableGroups","concat","tGroup","hasTitle","title","subclassData","s","append","colLabels","j","lbl","indexOf","rows","tr","k","entry","stack","rowsSpellProgression","combinedLabels","classFeatures","mobileClone","cloneNode","setAttribute","colHeaderEls","querySelectorAll","colHeaderEl","textContent","toLowerCase","subclassIndex","tblLvlFeatures","featureNames","lvlFeatureList","feature","console","error","featureId","featureLinkPart","featureLinkClasses","push","featureLink","preventDefault","getElementById","scrollIntoView","offset","scrollBy","styleClasses","gainSubclassFeature","level","subClass","subclassFeatures","subFeatureList","subFeature","m","entries","childEntry","startsWith","shortName","toggleUAFeatures","subclassPillWrapper","allSourcesToggle","makeGenericTogglePill","subClasses","sc","nonStandardSource","pillText","sourceJsonToAbv","pill","handleSubclassClick","contains","style","display","toggle","HASH_ALL_SOURCES","click","pillActiveClass","pillId","hashKey","defaultActive","isUA","active","isPillActive","outStack","split","hashPart","newHash","handleToggleFeaturesClicks","subclassName","subclassSource","routeSelection","encodedSubClass","subclassLink","subClassStack","substr","hasSubclassHash","nonStandardPills","nonStandardPill","onSubChange","sub","curHash","hideClassFeatures","showAllSources","slice","hideOtherSources","updateClassTableLinks","$toShow","$toHide","$subClassSpanList","classSpan","$this","thisSc","shown","trim","otherSrcSubFeats","shownInTable","v","selectedSCFeatures","selectedSCFeature","otherSrcSubFeat","asInTable","toShow","listEls","el","scs","handleTableGroups","DATA_NONE","subClassEls","subClassEl","cfToggle","toToggleCf","srcToggle","toToggleSrc","hashParts","outParts","part","els","href","prevFeature"],"mappings":"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","file":"3.bundle.js","sourcesContent":["const HASH_SUBCLASS = \"sub:\";\r\nconst HASH_FEATURE = \"f:\";\r\nconst HASH_HIDE_FEATURES = \"hideclassfs:\";\r\nconst HASH_ALL_SOURCES = \"allsrc:\";\r\n\r\nconst CLSS_FEATURE_LINK = \"feature-link\";\r\nconst CLSS_ACTIVE = \"mdc-chip--selected\";\r\nconst CLSS_SUBCLASS_PILL = \"mdc-chip\";\r\nconst CLSS_CLASS_FEATURES_ACTIVE = \"cf-active\";\r\nconst CLSS_OTHER_SOURCES_ACTIVE = \"os-active\";\r\nconst CLSS_SUBCLASS_PREFIX = \"subclass-prefix\";\r\nconst CLSS_CLASS_FEATURE = \"class-feature\";\r\nconst CLSS_GAIN_SUBCLASS_FEATURE = \"gain-subclass-feature\";\r\nconst ID_CLASS_FEATURES_TOGGLE = \"cf-toggle\";\r\nconst ID_OTHER_SOURCES_TOGGLE = \"os-toggle\";\r\n\r\nconst STR_PROF_NONE = \"none\";\r\n\r\nconst ATB_DATA_FEATURE_LINK = \"data-flink\";\r\nconst ATB_DATA_FEATURE_ID = \"data-flink-id\";\r\nconst ATB_DATA_SC_LIST = \"data-subclass-list\";\r\n\r\nimport {\r\n  jqHeight,\r\n  parseHTML,\r\n  ascSort,\r\n  encodeForHash,\r\n  jqAfter,\r\n  jqEmpty,\r\n  isNonstandardSource,\r\n  joinConjunct,\r\n  hasBeenReprinted\r\n} from \"../js/utils.js\";\r\nimport {\r\n  HASH_LIST_SEP,\r\n  HASH_PART_SEP,\r\n  CLSS_SUBCLASS_FEATURE,\r\n  ATB_DATA_SC,\r\n  ATB_DATA_SRC,\r\n  CLSS_NON_STANDARD_SOURCE,\r\n  ATB_DATA_PART_SEP,\r\n  ATB_DATA_LIST_SEP,\r\n  HASH_START\r\n} from \"../util/consts.js\";\r\nimport EntryRenderer from '../util/entryrender.js';\r\nimport Parser from '../util/Parser.js';\r\nimport { setRouteSelection, readRouteSelection } from \"../util/routing.js\";\r\nimport renderGrid from \"../util/renderGrid.js\";\r\nimport renderList from \"../util/renderList.js\";\r\n\r\nconst renderer = new EntryRenderer();\r\nexport { onDataLoad, onClassChange, onSubChange };\r\n\r\nfunction renderStr(string) {\r\n  let renderStack = []\r\n  renderer.recursiveEntryRender(string, renderStack, 0);\r\n  return renderStack.join(\" \");\r\n}\r\n\r\nfunction onDataLoad(classes, rootEl) {\r\n\t// alphabetically sort subclasses\r\n\tfor (const c of classes) {\r\n    if (c.subclasses) {\r\n      c.subclasses = c.subclasses.sort((a, b) => {\r\n        return ascSort(a.name, b.name)\r\n      });\r\n    }\r\n\t}\r\n\r\n  const sortedClasses = classes.filter(c => !c.name.includes('Sidekick'));\r\n\r\n  // store classTable template from inital dom\r\n  window.classTableDefault = rootEl.querySelector(\"#classtable\").innerHTML;\r\n  \r\n  renderList(rootEl, sortedClasses);\r\n}\r\n\r\nfunction onClassChange(curClass, rootEl) {\r\n  rootEl.querySelector(\"#classtable\").innerHTML = window.classTableDefault;\r\n  rootEl.querySelector(\"#subclasses\").classList.remove(\"fixed\");\r\n  rootEl.querySelector(\"#subclasses\").classList.remove(\"closed\");\r\n  rootEl.querySelector(\"#subclasses\").classList.remove(\"hidden\");\r\n  rootEl.querySelector(\".mobile-clone-spells\") && rootEl.querySelector(\".mobile-clone-spells\").remove();\r\n\r\n  // SUMMARY SIDEBAR =================================================================================================\r\n  // hit dice and HP\r\n  if (curClass.hd) {\r\n    rootEl.querySelector(\"#hp\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#hp div#hitdice span\").innerHTML = EntryRenderer.getEntryDice(curClass.hd);\r\n    rootEl.querySelector(\"#hp div#hp1stlevel span\").innerHTML = curClass.hd.faces + \" + your Constitution modifier\";\r\n    rootEl.querySelector(\"#hp div#hphigherlevels span\").innerHTML =\r\n      `${EntryRenderer.getEntryDice(curClass.hd)} (or ${curClass.hd.faces / 2 + 1}) + your Constitution modifier per ${\r\n        curClass.name\r\n      } level after 1st`;\r\n  } else {\r\n    rootEl.querySelector(\"#hp\").classList.add(\"hidden\");\r\n  }\r\n\r\n  // save proficiency\r\n  if (curClass.proficiency) {\r\n    rootEl.querySelector(\"#prof\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#prof div#saves span\").innerHTML = curClass.proficiency.map(p => Parser.attAbvToFull(p)).join(\", \");\r\n  } else {\r\n    rootEl.querySelector(\"#prof\").classList.add(\"hidden\");\r\n  }\r\n\r\n  // starting proficiencies\r\n  const sProfs = curClass.startingProficiencies;\r\n  if (sProfs) {\r\n    rootEl.querySelector(\"#armor\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#weapons\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#tools\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#skills\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"div#armor span\").innerHTML =\r\n      sProfs.armor === undefined\r\n        ? STR_PROF_NONE\r\n        : sProfs.armor.map(a => (a === \"light\" || a === \"medium\" || a === \"heavy\" ? a + \" armor\" : a)).join(\", \");\r\n    rootEl.querySelector(\"div#weapons span\").innerHTML =\r\n      sProfs.weapons === undefined\r\n        ? STR_PROF_NONE\r\n        : sProfs.weapons.map(w => (w === \"simple\" || w === \"martial\" ? w + \" weapons\" : w)).join(\", \");\r\n    rootEl.querySelector(\"div#tools span\").innerHTML =\r\n      sProfs.tools === undefined ? STR_PROF_NONE : sProfs.tools.join(\", \");\r\n    rootEl.querySelector(\"div#skills span\").innerHTML =\r\n      sProfs.skills === undefined ? STR_PROF_NONE : getSkillProfString(sProfs.skills);\r\n  } else {\r\n    rootEl.querySelector(\"#armor\").classList.add(\"hidden\");\r\n    rootEl.querySelector(\"#weapons\").classList.add(\"hidden\");\r\n    rootEl.querySelector(\"#tools\").classList.add(\"hidden\");\r\n    rootEl.querySelector(\"#skills\").classList.add(\"hidden\");\r\n  }\r\n\r\n  function getSkillProfString(skills) {\r\n    let numString, skillOptions, result = '';\r\n    // Different data structure for v2 classes\r\n    if (Array.isArray(skills)) {\r\n      for (let skill of skills) {\r\n        if (skill.choose) {\r\n          numString = Parser.numberToString(skill.choose.count);\r\n          skillOptions = skill.choose.from;\r\n          result += skillOptions.length === 18\r\n            ? `Choose any ${numString}.`\r\n            : `Choose ${numString} from ${joinConjunct(skillOptions, \", \", \", and \")}.`;\r\n        }\r\n      }\r\n    } else {\r\n      numString = Parser.numberToString(skills.choose);\r\n      skillOptions = skills.from;\r\n      result += skillOptions.length === 18\r\n        ? `Choose any ${numString}.`\r\n        : `Choose ${numString} from ${joinConjunct(skillOptions, \", \", \", and \")}.`;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  // starting equipment\r\n  const sEquip = curClass.startingEquipment;\r\n  if (sEquip) {\r\n    rootEl.querySelector(\"#equipment\").classList.remove(\"hidden\");\r\n    const fromBackground = sEquip.additionalFromBackground\r\n      ? \"<p>You start with the following items, plus anything provided by your background.</p>\"\r\n      : \"\";\r\n    const defList = sEquip.default.length === 0 ? \"\" : `<ul><li>${sEquip.default.map(i => renderStr(i)).join(\"</li><li>\")}</ul>`;\r\n    const goldAlt =\r\n      sEquip.goldAlternative === undefined\r\n        ? \"\"\r\n        : `<p>Alternatively, you may start with ${renderStr(sEquip.goldAlternative)} gp to buy your own equipment.</p>`;\r\n    rootEl.querySelector(\"#equipment div\").innerHTML = `${fromBackground}${defList}${goldAlt}`;\r\n  } else {\r\n    rootEl.querySelector(\"#equipment\").classList.add(\"hidden\");\r\n  }\r\n\r\n  // FEATURE TABLE ===================================================================================================\r\n  let tData = curClass.classTableGroups || [];\r\n  const groupHeaders = rootEl.querySelector(\"#groupHeaders\");\r\n  const colHeaders = rootEl.querySelector(\"#colHeaders\");\r\n  const levelTrs = [];\r\n  let spellsFlag = false;\r\n  for (let subclassDef of curClass.subclasses) {\r\n    if (subclassDef.subclassTableGroups) {\r\n      tData = tData.concat(subclassDef.subclassTableGroups);\r\n    }\r\n  }\r\n  if (tData) {\r\n    for (let i = 0; i < tData.length; i++) {\r\n      const tGroup = tData[i];\r\n\r\n      const hasTitle = tGroup.title !== undefined;\r\n      let subclassData = \"\";\r\n      if (tGroup.subclasses !== undefined) {\r\n        subclassData = `${ATB_DATA_SC_LIST}=\"${tGroup.subclasses\r\n          .map(s => s.name+ATB_DATA_PART_SEP+s.source)\r\n          .join(ATB_DATA_LIST_SEP)}\"`;\r\n      }\r\n      groupHeaders.append(parseHTML(\r\n        `<th ${hasTitle ? `class=\"colGroupTitle table-cell\"` : \"\"} colspan=\"${tGroup.colLabels.length}\" ${subclassData}>${\r\n          hasTitle ? tGroup.title : \"\"\r\n        }</th>`, true, true));\r\n\r\n      for (let j = 0; j < tGroup.colLabels.length; j++) {\r\n        let lbl = tGroup.colLabels[j];\r\n        if (lbl.indexOf(\"@\") > -1) {\r\n          let renderStack = []\r\n          renderer.recursiveEntryRender(lbl, renderStack, 0);\r\n          lbl = renderStack.join(\" \");\r\n        }\r\n        colHeaders.append(parseHTML(`<th class=\"centred-col table-cell\" ${subclassData}>${lbl}</th>`, true, true));\r\n      }\r\n\r\n      if (tGroup.rows) {\r\n        for (let j = 0; j < 20; j++) {\r\n          const tr = rootEl.querySelector(`#level${j + 1}`);\r\n          levelTrs[j] = tr;\r\n          for (let k = 0; k < tGroup.rows[j].length; k++) {\r\n            let entry = tGroup.rows[j][k];\r\n            if (entry === 0) entry = \"\\u2014\";\r\n            const stack = [];\r\n            renderer.recursiveEntryRender(entry, stack, \"\", \"\");\r\n            tr.append(parseHTML(`<td class=\"centred-col\" ${subclassData}>${stack.join(\"\")}</td>`, true, true));\r\n          }\r\n        }\r\n      }\r\n      if (tGroup.rowsSpellProgression) {\r\n        for (let j = 0; j < 20; j++) {\r\n          const tr = rootEl.querySelector(`#level${j + 1}`);\r\n          levelTrs[j] = tr;\r\n          for (let k = 0; k < tGroup.rowsSpellProgression[j].length; k++) {\r\n            let entry = tGroup.rowsSpellProgression[j][k];\r\n            if (entry === 0) entry = \"\\u2014\";\r\n            const stack = [];\r\n            renderer.recursiveEntryRender(entry, stack, \"\", \"\");\r\n            tr.append(parseHTML(`<td class=\"centred-col\" ${subclassData}>${stack.join(\"\")}</td>`, true, true));\r\n          }\r\n        }\r\n      }\r\n      let combinedLabels = tGroup.colLabels.join(' ');\r\n      if (\r\n        !spellsFlag &&\r\n        (combinedLabels.indexOf(\"Spells Known\") > -1 ||\r\n          combinedLabels.indexOf(\"Cantrips Known\") > -1 ||\r\n          combinedLabels.indexOf(\"1st\") > -1 ||\r\n          combinedLabels.indexOf(\"Ki Points\") > -1 ||\r\n          combinedLabels.indexOf(\"Rages\") > -1 ||\r\n          combinedLabels.indexOf(\"Talents Known\") > -1)\r\n      ) {\r\n        spellsFlag = true;\r\n      }\r\n    }\r\n  // uses different data structure for Fighter, since no classTableGroups\r\n  } else if (curClass.classFeatures.length) {\r\n    // for each level, find and index the feature cell\r\n    for (let i = 0; i < 20; i++) {\r\n      const tr = rootEl.querySelector(`#level${i + 1}`);\r\n      levelTrs[i] = tr;\r\n    }\r\n  }\r\n\r\n  rootEl.querySelector(\"#classtable\").classList.remove(\"mobile-clone-features\");\r\n  \r\n  // Add second feature table for mobile\r\n  if (spellsFlag) {\r\n    rootEl.querySelector(\"#classtable\").classList.add(\"mobile-clone-features\");\r\n\t\tlet mobileClone = parseHTML('<div class=\"mobile-clone-spells\"></div>');\r\n\t\tmobileClone.append(rootEl.querySelector(\"#classtable\").cloneNode(true));\r\n    mobileClone.querySelector(\"#classtable\").classList.remove(\"mobile-clone-features\");\r\n    mobileClone.querySelector(\"#groupHeaders th:not(.colGroupTitle)\").remove();\r\n    mobileClone.querySelector(\"#groupHeaders .colGroupTitle\") &&\r\n      mobileClone.querySelector(\"#groupHeaders .colGroupTitle\").setAttribute(\"colspan\", \"12\");\r\n\t\tlet colHeaderEls = mobileClone.querySelectorAll(\"#colHeaders th\");\r\n\t\tfor (let colHeaderEl of colHeaderEls) {\r\n      if (colHeaderEl.textContent.toLowerCase().indexOf(\"sneak attack\") > -1) {\r\n        colHeaderEl.innerHTML = '<span title=\"Sneak Attack\">Snk Atk</span>';\r\n      } else if (colHeaderEl.textContent.toLowerCase().indexOf(\"sorcery points\") > -1) {\r\n        colHeaderEl.innerHTML = '<span title=\"Sorcery Points\">SP</span>';\r\n      } else if (colHeaderEl.textContent.toLowerCase().indexOf(\"spells known\") > -1) {\r\n        colHeaderEl.innerHTML = '<span title=\"Spells Known\">S</span>';\r\n      } else if (colHeaderEl.textContent.toLowerCase().indexOf(\"cantrips known\") > -1) {\r\n        colHeaderEl.innerHTML = '<span title=\"Cantrips Known\">C</span>';\r\n      }\r\n\t\t}\r\n    jqAfter(rootEl.querySelector(\"#classtable\"), mobileClone);\r\n  }\r\n\r\n  // FEATURE DESCRIPTIONS ============================================================================================\r\n  const renderStack = [];\r\n  let subclassIndex = 0; // the subclass array is not 20 elements\r\n  for (let i = 0; i < 20; i++) {\r\n    // track class table feature names\r\n    const tblLvlFeatures = levelTrs[i].querySelector(\".features\");\r\n    const featureNames = [];\r\n\r\n    // add class features to render stack\r\n    const lvlFeatureList = curClass.classFeatures[i];\r\n    for (let j = 0; j < lvlFeatureList.length; j++) {\r\n      const feature = lvlFeatureList[j];\r\n      console.error('feature', feature);\r\n      const featureId = HASH_FEATURE + encodeForHash(feature.name) + \"_\" + i;\r\n      const featureLinkPart = HASH_FEATURE + encodeForHash(feature.name) + i;\r\n      const featureLinkClasses = [CLSS_FEATURE_LINK];\r\n      if (isNonstandardSource(feature.source)) featureLinkClasses.push(CLSS_NON_STANDARD_SOURCE);\r\n      const featureLink = parseHTML(\r\n        `<a href=\"#${encodeForHash([curClass.name, curClass.source])}${HASH_PART_SEP}${featureLinkPart}\"\r\n          class=\"${featureLinkClasses.join(\" \")}\"\r\n          ${ATB_DATA_FEATURE_LINK}=\"${featureLinkPart}\"\r\n          ${ATB_DATA_FEATURE_ID}=\"${featureId}\">${feature.name}</a>`\r\n      );\r\n      featureLink.addEventListener(\"click\", function(e) {\r\n        e.preventDefault();\r\n        rootEl.getElementById(featureId).scrollIntoView(true);\r\n        let offset = -84 - jqHeight(rootEl.querySelector(\"#subclasses\"));\r\n        window.scrollBy(0, offset);\r\n      });\r\n      featureNames.push(featureLink);\r\n\r\n      const styleClasses = [CLSS_CLASS_FEATURE];\r\n      if (feature.gainSubclassFeature) {\r\n        styleClasses.push(CLSS_GAIN_SUBCLASS_FEATURE);\r\n      }\r\n\r\n      renderer.recursiveEntryRender(\r\n        feature,\r\n        renderStack,\r\n        0,\r\n        `<div id=\"${featureId}\" class=\"${styleClasses.join(\" \")}\" level=\"${feature.level}\">`,\r\n        `</div>`,\r\n        true\r\n      );\r\n\r\n      // add subclass features to render stack if appropriate\r\n      if (feature.gainSubclassFeature) {\r\n        for (const subClass of curClass.subclasses) {\r\n          if (subClass.subclassFeatures) {\r\n            const subFeatureList = subClass.subclassFeatures[subclassIndex];\r\n\r\n            for (let i = 0; i < subFeatureList.length; i++) {\r\n              const subFeature = subFeatureList[i];\r\n              // if this is not the subclass intro, add the subclass to the feature name\r\n              // this will only be shown if there are multiple subclasses displayed\r\n              if (subFeature.name === undefined) {\r\n                for (let m = 0; m < subFeature.entries.length; m++) {\r\n                  const childEntry = subFeature.entries[m];\r\n                  if (\r\n                    childEntry.name !== undefined &&\r\n                    !childEntry.name.startsWith(`<span class=\"${CLSS_SUBCLASS_PREFIX}\">`)\r\n                  ) {\r\n                    childEntry.name = `<span class=\"${CLSS_SUBCLASS_PREFIX}\">${subClass.name}: </span>${childEntry.name}`;\r\n                  }\r\n                }\r\n              }\r\n\r\n              const styleClasses = [CLSS_SUBCLASS_FEATURE];\r\n              const hideSource =\r\n                isNonstandardSource(subClass.source) || hasBeenReprinted(subClass.shortName, subClass.source);\r\n              if (hideSource) styleClasses.push(CLSS_NON_STANDARD_SOURCE);\r\n              if (i !== 0) styleClasses.push(\"referenced-subclass-feature\");\r\n              renderer.recursiveEntryRender(\r\n                subFeature,\r\n                renderStack,\r\n                0,\r\n                `<div class=\"${styleClasses.join(\" \")}\" ${ATB_DATA_SC}=\"${subClass.name}\" ${ATB_DATA_SRC}=\"${\r\n                  subClass.source\r\n                }\">`,\r\n                `</div>`,\r\n                true\r\n              );\r\n            }\r\n          }\r\n        }\r\n        subclassIndex++;\r\n      }\r\n    }\r\n\r\n    // render class table feature names\r\n    if (featureNames.length === 0) tblLvlFeatures.innerHTML = \"\\u2014\";\r\n    else {\r\n      for (let j = 0; j < featureNames.length; j++) {\r\n        tblLvlFeatures.append(featureNames[j]);\r\n      }\r\n    }\r\n  }\r\n  rootEl.querySelector(\"#stats\").innerHTML = renderStack.join(\"\");\r\n\r\n  // show UA/other features by default\r\n  toggleUAFeatures(true);\r\n\r\n  // CLASS FEATURE/UA/SUBCLASS PILL BUTTONS ==========================================================================\r\n  let subclassPillWrapper = rootEl.querySelector(\"div#subclasses\");\r\n  // remove any from previous class\r\n  jqEmpty(subclassPillWrapper);\r\n  subclassPillWrapper.append(parseHTML(`<div class='title'>Subclasses</div>`));\r\n  subclassPillWrapper.append(parseHTML(`<div class='subclass-wrapper'></div>`));\r\n  subclassPillWrapper = subclassPillWrapper.querySelector('.subclass-wrapper');\r\n\r\n  // show/hide UA/other sources\r\n  const allSourcesToggle = makeGenericTogglePill(\r\n    \"Show UA\",\r\n    CLSS_OTHER_SOURCES_ACTIVE,\r\n    ID_OTHER_SOURCES_TOGGLE,\r\n    HASH_ALL_SOURCES,\r\n    false,\r\n    true\r\n  );\r\n\r\n  // show/hide class features pill\r\n  makeGenericTogglePill(\r\n    \"Class Features\",\r\n    CLSS_CLASS_FEATURES_ACTIVE,\r\n    ID_CLASS_FEATURES_TOGGLE,\r\n    HASH_HIDE_FEATURES,\r\n    true\r\n  );\r\n\r\n  // subclass pills\r\n  if (curClass.subclasses) {\r\n    const subClasses = curClass.subclasses\r\n      .map(sc => ({ name: sc.name, source: sc.source, shortName: sc.shortName }))\r\n      .sort(function(a, b) {\r\n        return ascSort(a.shortName, b.shortName);\r\n      });\r\n    for (let i = 0; i < subClasses.length; i++) {\r\n      const nonStandardSource =\r\n        isNonstandardSource(subClasses[i].source) || hasBeenReprinted(subClasses[i].shortName, subClasses[i].source);\r\n      const styleClasses = [CLSS_ACTIVE, CLSS_SUBCLASS_PILL];\r\n      if (nonStandardSource) styleClasses.push(CLSS_NON_STANDARD_SOURCE);\r\n      const pillText = hasBeenReprinted(subClasses[i].shortName, subClasses[i].source)\r\n        ? `${subClasses[i].shortName} (${Parser.sourceJsonToAbv(subClasses[i].source)})`\r\n        : subClasses[i].shortName;\r\n      const pill = parseHTML(\r\n        `<div class=\"${styleClasses.join(\" \")}\" ${ATB_DATA_SC}=\"${subClasses[i].name}\" ${ATB_DATA_SRC}=\"${\r\n          subClasses[i].source\r\n        }\" title=\"Source: ${Parser.sourceJsonToFull(\r\n          subClasses[i].source\r\n        )}\"><span class='mdc-chip__text'>${pillText}</span></div>`\r\n      );\r\n      pill.addEventListener(\"click\", function() {\r\n        handleSubclassClick(pill.classList.contains(CLSS_ACTIVE), subClasses[i].name, subClasses[i].source);\r\n      });\r\n      if (nonStandardSource) pill.style.display = 'none';\r\n      subclassPillWrapper.append(pill);\r\n    }\r\n    subclassPillWrapper.append(parseHTML(`<div class='tab material-icons'>expand_less</div>`));\r\n\r\n    rootEl.querySelector(\"#subclasses .tab\").addEventListener(\"click\", () => {\r\n      rootEl.querySelector(\"#subclasses\").classList.toggle(\"closed\");\r\n    });\r\n\r\n    // if this is a UA class, toggle the \"All Sources\" button\r\n    const showUA = readRouteSelection().indexOf(HASH_ALL_SOURCES + 'true') > -1 || readRouteSelection().indexOf(HASH_ALL_SOURCES + 'false') === -1\r\n    if (showUA) {\r\n      allSourcesToggle.click();\r\n    }\r\n  } else {\r\n    rootEl.querySelector(\"#subclasses\").classList.add(\"hidden\");\r\n  }\r\n\r\n  // helper functions\r\n  function makeGenericTogglePill(pillText, pillActiveClass, pillId, hashKey, defaultActive, isUA) {\r\n    const pill = parseHTML(`<div id=\"${pillId}\" class=\"mdc-chip\"><span class=\"mdc-chip__text\">${pillText}</span></div>`);\r\n    subclassPillWrapper.append(pill);\r\n    pill.addEventListener(\"click\", function() {\r\n      let active = pill.classList.contains(pillActiveClass);\r\n      if (!defaultActive) active = !active;\r\n      handleToggleFeaturesClicks(active);\r\n      // enable UA features\r\n      if (isUA) {\r\n        toggleUAFeatures(active);\r\n        pill.querySelector('.mdc-chip__text').innerHTML = active ? \"Hide UA\" : \"Show UA\";\r\n      }\r\n    });\r\n    return pill;\r\n\r\n    function handleToggleFeaturesClicks(isPillActive) {\r\n      const outStack = [];\r\n      const split = readRouteSelection().split(HASH_PART_SEP);\r\n\r\n      for (let i = 0; i < split.length; i++) {\r\n        const hashPart = split[i];\r\n        if (!hashPart.startsWith(hashKey)) outStack.push(hashPart);\r\n      }\r\n      if (isPillActive) {\r\n        outStack.push(hashKey + \"true\");\r\n      } else {\r\n        outStack.push(hashKey + \"false\");\r\n      }\r\n      const newHash = outStack.join(HASH_PART_SEP);\r\n      setRouteSelection(newHash, true);\r\n    }\r\n  }\r\n\r\n  function handleSubclassClick(isPillActive, subclassName, subclassSource) {\r\n    const outStack = [];\r\n    const routeSelection = readRouteSelection();\r\n    const split = routeSelection.split(HASH_PART_SEP);\r\n\r\n    const encodedSubClass = encodeForHash([subclassName]);\r\n    const subclassLink = HASH_SUBCLASS + encodedSubClass;\r\n\r\n    if (isPillActive && routeSelection.includes(HASH_SUBCLASS)) {\r\n      for (let i = 0; i < split.length; i++) {\r\n        const hashPart = split[i];\r\n        if (!hashPart.startsWith(HASH_SUBCLASS)) {\r\n\t\t\t\t\toutStack.push(hashPart);\r\n\t\t\t\t} else {\r\n          const subClassStack = [];\r\n          const subClasses = hashPart.substr(HASH_SUBCLASS.length).split(HASH_LIST_SEP);\r\n          for (let j = 0; j < subClasses.length; j++) {\r\n            const subClass = subClasses[j];\r\n            if (subClass !== encodedSubClass) subClassStack.push(subClass);\r\n          }\r\n          if (subClassStack.length > 0) outStack.push(HASH_SUBCLASS + subClassStack.join(HASH_LIST_SEP));\r\n        }\r\n      }\r\n    } else {\r\n      let hasSubclassHash = false;\r\n\r\n      for (let i = 0; i < split.length; i++) {\r\n        const hashPart = split[i];\r\n        if (!hashPart.startsWith(HASH_SUBCLASS)) outStack.push(hashPart);\r\n        else {\r\n          const subClassStack = [];\r\n          const subClasses = hashPart.substr(HASH_SUBCLASS.length).split(HASH_LIST_SEP);\r\n          for (let j = 0; j < subClasses.length; j++) {\r\n            const subClass = subClasses[j];\r\n            if (subClass !== encodedSubClass) subClassStack.push(subClass);\r\n          }\r\n          subClassStack.push(encodedSubClass);\r\n          if (subClassStack.length > 0) outStack.push(HASH_SUBCLASS + subClassStack.join(HASH_LIST_SEP));\r\n\r\n          hasSubclassHash = true;\r\n        }\r\n      }\r\n\r\n      if (!hasSubclassHash) outStack.push(subclassLink);\r\n    }\r\n    const newHash = outStack.join(HASH_PART_SEP);\r\n    setRouteSelection(newHash, true);\r\n  }\r\n\r\n  function toggleUAFeatures(active) {\r\n    let nonStandardPills = rootEl.querySelectorAll(`.${CLSS_NON_STANDARD_SOURCE}`);\r\n    for (let nonStandardPill of nonStandardPills) {\r\n      if (!nonStandardPill.classList.contains(CLSS_SUBCLASS_PILL)) {\r\n        nonStandardPill.style.display = active ? null : 'none';\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction onSubChange(sub, curHash, rootEl) {\r\n\tlet subclasses = null;\r\n\tlet feature = null;\r\n\tlet hideClassFeatures = null;\r\n\tlet showAllSources = null;\r\n\r\n\tfor (let i = 0; i < sub.length; i++) {\r\n\t\tconst hashPart = sub[i];\r\n\r\n\t\tif (hashPart.startsWith(HASH_SUBCLASS)) subclasses = hashPart.slice(HASH_SUBCLASS.length).split(HASH_LIST_SEP);\r\n\t\tif (hashPart.startsWith(HASH_FEATURE)) feature = hashPart;\r\n\t\tif (hashPart.startsWith(HASH_HIDE_FEATURES)) hideClassFeatures = hashPart.slice(HASH_HIDE_FEATURES.length) === \"true\";\r\n\t\tif (hashPart.startsWith(HASH_ALL_SOURCES)) showAllSources = hashPart.slice(HASH_ALL_SOURCES.length) === \"true\";\r\n\t}\r\n\r\n\tconst hideOtherSources = showAllSources === null || showAllSources === false;\r\n\r\n\tif (subclasses !== null) {\r\n\t\tupdateClassTableLinks();\r\n\r\n\t\tconst $toShow = [];\r\n\t\tconst $toHide = [];\r\n\t\tconst $subClassSpanList = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_PILL}`);\r\n\t\tfor (let classSpan of $subClassSpanList) {\r\n\t\t\tconst $this = classSpan;\r\n      const name = $this.getAttribute(ATB_DATA_SC);\r\n\t\t\tconst thisSc = encodeForHash([name]);\r\n\t\t\tlet shown = false;\r\n\r\n\t\t\tfor (let j = 0; j < subclasses.length; j++) {\r\n\t\t\t\tconst sc = subclasses[j];\r\n\t\t\t\tif (sc.trim() === thisSc) {\r\n\t\t\t\t\tshown = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (shown) {\r\n\t\t\t\t$toShow.push($this);\r\n\t\t\t} else {\r\n\t\t\t\t$toHide.push($this);\r\n\t\t\t}\r\n\t\t}\r\n\r\n    const otherSrcSubFeats = rootEl.querySelectorAll(`p.${CLSS_NON_STANDARD_SOURCE}`);\r\n    const shownInTable = [];\r\n\r\n    for (let v of $toShow) {\r\n      v.classList.add(CLSS_ACTIVE);\r\n      let selectedSCFeatures = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_FEATURE}[${ATB_DATA_SC}=\"${v.getAttribute(ATB_DATA_SC)}\"][${ATB_DATA_SRC}=\"${v.getAttribute(ATB_DATA_SRC)}\"]`);\r\n      for (let selectedSCFeature of selectedSCFeatures) {\r\n        selectedSCFeature.style.display = null;\r\n      }\r\n      if (hideOtherSources) {\r\n        for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n          if (\r\n            otherSrcSubFeat.getAttribute(ATB_DATA_SC) === v.getAttribute(ATB_DATA_SC) &&\r\n            otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === v.getAttribute(ATB_DATA_SRC)\r\n          ) {\r\n            otherSrcSubFeat.style.display = \"none\";\r\n          }\r\n        }\r\n      } else {\r\n        for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n          if (\r\n            otherSrcSubFeat.getAttribute(ATB_DATA_SC) === v.getAttribute(ATB_DATA_SC) &&\r\n            otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === v.getAttribute(ATB_DATA_SRC)\r\n          ) {\r\n            otherSrcSubFeat.style.display = null;\r\n          }\r\n        }\r\n      }\r\n\r\n      const asInTable = v.getAttribute(ATB_DATA_SC) + ATB_DATA_PART_SEP + v.getAttribute(ATB_DATA_SRC);\r\n      shownInTable.push(asInTable);\r\n    }\r\n\r\n    for (let v of $toHide) {\r\n      v.classList.remove(CLSS_ACTIVE);\r\n      let selectedSCFeatures = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_FEATURE}[${ATB_DATA_SC}=\"${v.getAttribute(ATB_DATA_SC)}\"][${ATB_DATA_SRC}=\"${v.getAttribute(ATB_DATA_SRC)}\"]`);\r\n      for (let selectedSCFeature of selectedSCFeatures) {\r\n        selectedSCFeature.style.display = 'none';\r\n      }\r\n      for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n        if (\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SC) === v.getAttribute(ATB_DATA_SC) &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === v.getAttribute(ATB_DATA_SRC)\r\n        ) {\r\n          otherSrcSubFeat.style.display = \"none\";\r\n        }\r\n      }\r\n      v.getAttribute(ATB_DATA_SC);\r\n    }\r\n    \r\n    handleTableGroups(shownInTable);\r\n\r\n    if (hideOtherSources) {\r\n      for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n        if (\r\n          !otherSrcSubFeat.classList.contains(CLSS_SUBCLASS_FEATURE) &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SC) === EntryRenderer.DATA_NONE &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === EntryRenderer.DATA_NONE\r\n        ) {\r\n          otherSrcSubFeat.style.display = \"none\";\r\n        }\r\n      }\r\n    } else {\r\n      for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n        if (\r\n          !otherSrcSubFeat.classList.contains(CLSS_SUBCLASS_FEATURE) &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SC) === EntryRenderer.DATA_NONE &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === EntryRenderer.DATA_NONE\r\n        ) {\r\n          otherSrcSubFeat.style.display = null;\r\n        }\r\n      }\r\n    }\r\n\r\n\t\t// show subclass prefixes if we're displaying more than 1 subclass\r\n\t\tlet subClassEls = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_PREFIX}`);\r\n\t\tif ($toShow.length !== 1) {\r\n\t\t\tfor (let subClassEl of subClassEls) {\r\n\t\t\t\tsubClassEl.style.display = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let subClassEl of subClassEls) {\r\n\t\t\t\tsubClassEl.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// hide class features as required\r\n\tconst cfToggle = rootEl.querySelector(`#${ID_CLASS_FEATURES_TOGGLE}`);\r\n\tconst toToggleCf= rootEl.querySelectorAll(`.${CLSS_CLASS_FEATURE}`);\r\n\tif (hideClassFeatures !== null && hideClassFeatures) {\r\n\t\tcfToggle.classList.remove(CLSS_CLASS_FEATURES_ACTIVE);\r\n\t\tfor (let el of toToggleCf) {\r\n\t\t\tif (!el.classList.contains(CLSS_GAIN_SUBCLASS_FEATURE)) {\r\n        el.style.display = \"none\";\r\n      }\r\n\t\t}\r\n\t} else {\r\n\t\tcfToggle.classList.add(CLSS_CLASS_FEATURES_ACTIVE);\r\n\t\tfor (let el of toToggleCf) {\r\n\t\t\tif (!el.classList.contains(CLSS_GAIN_SUBCLASS_FEATURE)) {\r\n        el.style.display = null;\r\n      }\r\n\t\t}\r\n\t}\r\n\r\n\t// show UA/etc content as required\r\n\tconst srcToggle = rootEl.querySelector(`#${ID_OTHER_SOURCES_TOGGLE}`);\r\n\tconst toToggleSrc = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_PILL}.${CLSS_NON_STANDARD_SOURCE}`);\r\n\tif (hideOtherSources) {\r\n\t\tsrcToggle.classList.remove(CLSS_OTHER_SOURCES_ACTIVE);\r\n\t\tfor (let el of toToggleSrc) {\r\n\t\t\tel.style.display = \"none\";\r\n\t\t}\r\n\t} else {\r\n\t\tsrcToggle.classList.add(CLSS_OTHER_SOURCES_ACTIVE);\r\n\t\tfor (let el of toToggleSrc) {\r\n\t\t\tel.style.display = null;\r\n\t\t}\r\n\t}\r\n\r\n\t// scroll to the linked feature if required\r\n\tif (feature !== null && (window.prevFeature === undefined || window.prevFeature !== feature)) {\r\n\t\trootEl.getElementById(rootEl.querySelectorAll(`[${ATB_DATA_FEATURE_LINK}=\"${feature}\"]`).getAttribute(ATB_DATA_FEATURE_ID)).scrollIntoView();\r\n\t\twindow.prevFeature = feature;\r\n\t}\r\n\r\n\tupdateClassTableLinks();\r\n\r\n  function handleTableGroups(toShow) {\r\n    let listEls = rootEl.querySelectorAll(`[${ATB_DATA_SC_LIST}]`);\r\n    for (let el of listEls) {\r\n      const scs = el.getAttribute(ATB_DATA_SC_LIST).split(ATB_DATA_LIST_SEP);\r\n\r\n      for (let shown of toShow) {\r\n        if (scs.includes(shown)) {\r\n          el.style.display = null;\r\n          break;\r\n        }\r\n          el.style.display = 'none';\r\n        }\r\n      }\r\n\t}\r\n\r\n\tfunction updateClassTableLinks () {\r\n\t\tconst hashParts = curHash.slice(1).split(HASH_PART_SEP);\r\n\t\tconst outParts = [];\r\n\t\tfor (let i = 0; i < hashParts.length; i++) {\r\n\t\t\tconst part = hashParts[i];\r\n\t\t\tif (!part.startsWith(HASH_FEATURE)) outParts.push(part);\r\n\t\t}\r\n\t\tlet els = rootEl.querySelectorAll(`.${CLSS_FEATURE_LINK}`);\r\n\t\tfor (let el of els) {\r\n\t\t\tel.href = HASH_START+outParts.join(HASH_PART_SEP)+HASH_PART_SEP+el.getAttribute(ATB_DATA_FEATURE_LINK);\r\n\t\t}\r\n\t}\r\n}\r\n","import { setRouteSelection } from \"./routing\";\nimport { encodeForHash, parseHTML } from \"../js/utils\";\nimport Parser from \"./Parser\";\n\nexport default function renderList(rootEl, items) {\n  const container = rootEl.querySelector('.class-container');\n  container.appendChild(parseHTML(\"<div class='list-container'></div>\"))\n  const listWrapper = container.querySelector('.list-container');\n\n  let htmlString = \"\";\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst curItem = items[i];\n\t\tlet svg = curItem.name.replace(/(\\s|\\(|\\))/g, \"\");\n\t\tlet link = encodeForHash([curItem.name, curItem.source]);\n\n\t\thtmlString += \n\t\t\t`<div class='list-item history-link grid-item__${svg}' data-link='${link}' data-title='${curItem.name}'>\n\t\t\t\t<div>\n\t\t\t\t\t<dnd-svg id='${svg}' default-color class='list-item--image grid-item__${svg}'></dnd-svg>\n\t\t\t\t\t<span class='list-item--text'>${curItem.name}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"list-item--subtext\">${Parser.sourceJsonToFull(curItem.source)}</div>\n\t\t\t</div>`\n\t}\n\tlet itemElements = parseHTML(htmlString);\n\twhile (itemElements.length > 0) {\n\t\titemElements[0].addEventListener(\"click\", (e) => {\n\t\t\tlet tar = e.target.closest(\".list-item\");\n\t\t\tsetRouteSelection(tar.getAttribute(\"data-link\"));\n\t\t});\n\t\tlistWrapper.appendChild(itemElements[0]);\n\t}\n};"],"sourceRoot":""}