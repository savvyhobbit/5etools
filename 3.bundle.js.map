{"version":3,"sources":["webpack:///./js/classes.js","webpack:///./util/renderList.js"],"names":["CLSS_ACTIVE","renderer","renderStr","string","renderStack","recursiveEntryRender","join","onDataLoad","classes","rootEl","c","subclasses","sort","a","b","name","window","classTableDefault","querySelector","innerHTML","items","container","appendChild","listWrapper","htmlString","i","length","curItem","svg","replace","source","itemElements","addEventListener","e","tar","target","closest","getAttribute","renderList","onClassChange","curClass","classList","remove","hd","getEntryDice","faces","add","proficiency","map","p","Parser","attAbvToFull","sProfs","startingProficiencies","undefined","armor","weapons","w","tools","skills","numString","skillOptions","result","Array","isArray","skill","choose","numberToString","count","from","getSkillProfString","sEquip","startingEquipment","fromBackground","additionalFromBackground","defList","default","goldAlt","goldAlternative","tData","classTableGroups","groupHeaders","colHeaders","levelTrs","spellsFlag","subclassDef","subclassTableGroups","concat","tGroup","hasTitle","title","subclassData","s","append","colLabels","j","lbl","indexOf","rows","tr","k","entry","stack","rowsSpellProgression","combinedLabels","classFeatures","mobileClone","cloneNode","setAttribute","colHeaderEls","querySelectorAll","colHeaderEl","textContent","toLowerCase","subclassIndex","tblLvlFeatures","featureNames","lvlFeatureList","feature","featureId","featureLinkPart","featureLinkClasses","push","featureLink","preventDefault","getElementById","scrollIntoView","offset","scrollBy","styleClasses","gainSubclassFeature","subClass","subclassFeatures","subFeatureList","subFeature","m","entries","childEntry","startsWith","shortName","toggleUAFeatures","subclassPillWrapper","allSourcesToggle","makeGenericTogglePill","subClasses","sc","nonStandardSource","pillText","sourceJsonToAbv","pill","sourceJsonToFull","handleSubclassClick","contains","style","display","toggle","HASH_ALL_SOURCES","click","pillActiveClass","pillId","hashKey","defaultActive","isUA","active","isPillActive","outStack","split","hashPart","newHash","handleToggleFeaturesClicks","subclassName","subclassSource","routeSelection","encodedSubClass","subclassLink","includes","subClassStack","substr","hasSubclassHash","nonStandardPills","nonStandardPill","onSubChange","sub","curHash","hideClassFeatures","showAllSources","slice","hideOtherSources","updateClassTableLinks","$toShow","$toHide","$subClassSpanList","classSpan","$this","thisSc","shown","trim","otherSrcSubFeats","shownInTable","v","selectedSCFeatures","selectedSCFeature","otherSrcSubFeat","asInTable","toShow","listEls","el","scs","handleTableGroups","DATA_NONE","subClassEls","subClassEl","cfToggle","toToggleCf","srcToggle","toToggleSrc","hashParts","outParts","part","els","href","prevFeature"],"mappings":"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","file":"3.bundle.js","sourcesContent":["const HASH_SUBCLASS = \"sub:\";\r\nconst HASH_FEATURE = \"f:\";\r\nconst HASH_HIDE_FEATURES = \"hideclassfs:\";\r\nconst HASH_ALL_SOURCES = \"allsrc:\";\r\n\r\nconst CLSS_FEATURE_LINK = \"feature-link\";\r\nconst CLSS_ACTIVE = \"mdc-chip--selected\";\r\nconst CLSS_SUBCLASS_PILL = \"mdc-chip\";\r\nconst CLSS_CLASS_FEATURES_ACTIVE = \"cf-active\";\r\nconst CLSS_OTHER_SOURCES_ACTIVE = \"os-active\";\r\nconst CLSS_SUBCLASS_PREFIX = \"subclass-prefix\";\r\nconst CLSS_CLASS_FEATURE = \"class-feature\";\r\nconst CLSS_GAIN_SUBCLASS_FEATURE = \"gain-subclass-feature\";\r\nconst ID_CLASS_FEATURES_TOGGLE = \"cf-toggle\";\r\nconst ID_OTHER_SOURCES_TOGGLE = \"os-toggle\";\r\n\r\nconst STR_PROF_NONE = \"none\";\r\n\r\nconst ATB_DATA_FEATURE_LINK = \"data-flink\";\r\nconst ATB_DATA_FEATURE_ID = \"data-flink-id\";\r\nconst ATB_DATA_SC_LIST = \"data-subclass-list\";\r\n\r\nimport {\r\n  jqHeight,\r\n  parseHTML,\r\n  ascSort,\r\n  encodeForHash,\r\n  jqAfter,\r\n  jqEmpty,\r\n  isNonstandardSource,\r\n  joinConjunct,\r\n  hasBeenReprinted\r\n} from \"../js/utils.js\";\r\nimport {\r\n  HASH_LIST_SEP,\r\n  HASH_PART_SEP,\r\n  CLSS_SUBCLASS_FEATURE,\r\n  ATB_DATA_SC,\r\n  ATB_DATA_SRC,\r\n  CLSS_NON_STANDARD_SOURCE,\r\n  ATB_DATA_PART_SEP,\r\n  ATB_DATA_LIST_SEP,\r\n  HASH_START\r\n} from \"../util/consts.js\";\r\nimport EntryRenderer from '../util/entryrender.js';\r\nimport Parser from '../util/Parser.js';\r\nimport { setRouteSelection, readRouteSelection } from \"../util/routing.js\";\r\nimport renderGrid from \"../util/renderGrid.js\";\r\nimport renderList from \"../util/renderList.js\";\r\n\r\nconst renderer = new EntryRenderer();\r\nexport { onDataLoad, onClassChange, onSubChange };\r\n\r\nfunction renderStr(string) {\r\n  let renderStack = []\r\n  renderer.recursiveEntryRender(string, renderStack, 0);\r\n  return renderStack.join(\" \");\r\n}\r\n\r\nfunction onDataLoad(classes, rootEl) {\r\n\t// alphabetically sort subclasses\r\n\tfor (const c of classes) {\r\n    if (c.subclasses) {\r\n      c.subclasses = c.subclasses.sort((a, b) => ascSort(a.name, b.name));\r\n    }\r\n\t}\r\n\r\n  // store classTable template from inital dom\r\n  window.classTableDefault = rootEl.querySelector(\"#classtable\").innerHTML;\r\n  \r\n  renderList(rootEl, classes);\r\n}\r\n\r\nfunction onClassChange(curClass, rootEl) {\r\n  rootEl.querySelector(\"#classtable\").innerHTML = window.classTableDefault;\r\n  rootEl.querySelector(\"#subclasses\").classList.remove(\"fixed\");\r\n  rootEl.querySelector(\"#subclasses\").classList.remove(\"closed\");\r\n  rootEl.querySelector(\"#subclasses\").classList.remove(\"hidden\");\r\n  rootEl.querySelector(\".mobile-clone-spells\") && rootEl.querySelector(\".mobile-clone-spells\").remove();\r\n\r\n  // SUMMARY SIDEBAR =================================================================================================\r\n  // hit dice and HP\r\n  if (curClass.hd) {\r\n    rootEl.querySelector(\"#hp\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#hp div#hitdice span\").innerHTML = EntryRenderer.getEntryDice(curClass.hd);\r\n    rootEl.querySelector(\"#hp div#hp1stlevel span\").innerHTML = curClass.hd.faces + \" + your Constitution modifier\";\r\n    rootEl.querySelector(\"#hp div#hphigherlevels span\").innerHTML =\r\n      `${EntryRenderer.getEntryDice(curClass.hd)} (or ${curClass.hd.faces / 2 + 1}) + your Constitution modifier per ${\r\n        curClass.name\r\n      } level after 1st`;\r\n  } else {\r\n    rootEl.querySelector(\"#hp\").classList.add(\"hidden\");\r\n  }\r\n\r\n  // save proficiency\r\n  if (curClass.proficiency) {\r\n    rootEl.querySelector(\"#prof\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#prof div#saves span\").innerHTML = curClass.proficiency.map(p => Parser.attAbvToFull(p)).join(\", \");\r\n  } else {\r\n    rootEl.querySelector(\"#prof\").classList.add(\"hidden\");\r\n  }\r\n\r\n  // starting proficiencies\r\n  const sProfs = curClass.startingProficiencies;\r\n  if (sProfs) {\r\n    rootEl.querySelector(\"#armor\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#weapons\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#tools\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"#skills\").classList.remove(\"hidden\");\r\n    rootEl.querySelector(\"div#armor span\").innerHTML =\r\n      sProfs.armor === undefined\r\n        ? STR_PROF_NONE\r\n        : sProfs.armor.map(a => (a === \"light\" || a === \"medium\" || a === \"heavy\" ? a + \" armor\" : a)).join(\", \");\r\n    rootEl.querySelector(\"div#weapons span\").innerHTML =\r\n      sProfs.weapons === undefined\r\n        ? STR_PROF_NONE\r\n        : sProfs.weapons.map(w => (w === \"simple\" || w === \"martial\" ? w + \" weapons\" : w)).join(\", \");\r\n    rootEl.querySelector(\"div#tools span\").innerHTML =\r\n      sProfs.tools === undefined ? STR_PROF_NONE : sProfs.tools.join(\", \");\r\n    rootEl.querySelector(\"div#skills span\").innerHTML =\r\n      sProfs.skills === undefined ? STR_PROF_NONE : getSkillProfString(sProfs.skills);\r\n  } else {\r\n    rootEl.querySelector(\"#armor\").classList.add(\"hidden\");\r\n    rootEl.querySelector(\"#weapons\").classList.add(\"hidden\");\r\n    rootEl.querySelector(\"#tools\").classList.add(\"hidden\");\r\n    rootEl.querySelector(\"#skills\").classList.add(\"hidden\");\r\n  }\r\n\r\n  function getSkillProfString(skills) {\r\n    let numString, skillOptions, result = '';\r\n    // Different data structure for v2 classes\r\n    if (Array.isArray(skills)) {\r\n      for (let skill of skills) {\r\n        if (skill.choose) {\r\n          numString = Parser.numberToString(skill.choose.count);\r\n          skillOptions = skill.choose.from;\r\n          result += skillOptions.length === 18\r\n            ? `Choose any ${numString}.`\r\n            : `Choose ${numString} from ${joinConjunct(skillOptions, \", \", \", and \")}.`;\r\n        }\r\n      }\r\n    } else {\r\n      numString = Parser.numberToString(skills.choose);\r\n      skillOptions = skills.from;\r\n      result += skillOptions.length === 18\r\n        ? `Choose any ${numString}.`\r\n        : `Choose ${numString} from ${joinConjunct(skillOptions, \", \", \", and \")}.`;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  // starting equipment\r\n  const sEquip = curClass.startingEquipment;\r\n  if (sEquip) {\r\n    rootEl.querySelector(\"#equipment\").classList.remove(\"hidden\");\r\n    const fromBackground = sEquip.additionalFromBackground\r\n      ? \"<p>You start with the following items, plus anything provided by your background.</p>\"\r\n      : \"\";\r\n    const defList = sEquip.default.length === 0 ? \"\" : `<ul><li>${sEquip.default.map(i => renderStr(i)).join(\"</li><li>\")}</ul>`;\r\n    const goldAlt =\r\n      sEquip.goldAlternative === undefined\r\n        ? \"\"\r\n        : `<p>Alternatively, you may start with ${renderStr(sEquip.goldAlternative)} gp to buy your own equipment.</p>`;\r\n    rootEl.querySelector(\"#equipment div\").innerHTML = `${fromBackground}${defList}${goldAlt}`;\r\n  } else {\r\n    rootEl.querySelector(\"#equipment\").classList.add(\"hidden\");\r\n  }\r\n\r\n  // FEATURE TABLE ===================================================================================================\r\n  let tData = curClass.classTableGroups || [];\r\n  const groupHeaders = rootEl.querySelector(\"#groupHeaders\");\r\n  const colHeaders = rootEl.querySelector(\"#colHeaders\");\r\n  const levelTrs = [];\r\n  let spellsFlag = false;\r\n  for (let subclassDef of curClass.subclasses) {\r\n    if (subclassDef.subclassTableGroups) {\r\n      tData = tData.concat(subclassDef.subclassTableGroups);\r\n    }\r\n  }\r\n  if (tData) {\r\n    for (let i = 0; i < tData.length; i++) {\r\n      const tGroup = tData[i];\r\n\r\n      const hasTitle = tGroup.title !== undefined;\r\n      let subclassData = \"\";\r\n      if (tGroup.subclasses !== undefined) {\r\n        subclassData = `${ATB_DATA_SC_LIST}=\"${tGroup.subclasses\r\n          .map(s => s.name+ATB_DATA_PART_SEP+s.source)\r\n          .join(ATB_DATA_LIST_SEP)}\"`;\r\n      }\r\n      groupHeaders.append(parseHTML(\r\n        `<th ${hasTitle ? `class=\"colGroupTitle table-cell\"` : \"\"} colspan=\"${tGroup.colLabels.length}\" ${subclassData}>${\r\n          hasTitle ? tGroup.title : \"\"\r\n        }</th>`, true, true));\r\n\r\n      for (let j = 0; j < tGroup.colLabels.length; j++) {\r\n        let lbl = tGroup.colLabels[j];\r\n        if (lbl.indexOf(\"@\") > -1) {\r\n          let renderStack = []\r\n          renderer.recursiveEntryRender(lbl, renderStack, 0);\r\n          lbl = renderStack.join(\" \");\r\n        }\r\n        colHeaders.append(parseHTML(`<th class=\"centred-col table-cell\" ${subclassData}>${lbl}</th>`, true, true));\r\n      }\r\n\r\n      if (tGroup.rows) {\r\n        for (let j = 0; j < 20; j++) {\r\n          const tr = rootEl.querySelector(`#level${j + 1}`);\r\n          levelTrs[j] = tr;\r\n          for (let k = 0; k < tGroup.rows[j].length; k++) {\r\n            let entry = tGroup.rows[j][k];\r\n            if (entry === 0) entry = \"\\u2014\";\r\n            const stack = [];\r\n            renderer.recursiveEntryRender(entry, stack, \"\", \"\");\r\n            tr.append(parseHTML(`<td class=\"centred-col\" ${subclassData}>${stack.join(\"\")}</td>`, true, true));\r\n          }\r\n        }\r\n      }\r\n      if (tGroup.rowsSpellProgression) {\r\n        for (let j = 0; j < 20; j++) {\r\n          const tr = rootEl.querySelector(`#level${j + 1}`);\r\n          levelTrs[j] = tr;\r\n          for (let k = 0; k < tGroup.rowsSpellProgression[j].length; k++) {\r\n            let entry = tGroup.rowsSpellProgression[j][k];\r\n            if (entry === 0) entry = \"\\u2014\";\r\n            const stack = [];\r\n            renderer.recursiveEntryRender(entry, stack, \"\", \"\");\r\n            tr.append(parseHTML(`<td class=\"centred-col\" ${subclassData}>${stack.join(\"\")}</td>`, true, true));\r\n          }\r\n        }\r\n      }\r\n      let combinedLabels = tGroup.colLabels.join(' ');\r\n      if (\r\n        !spellsFlag &&\r\n        (combinedLabels.indexOf(\"Spells Known\") > -1 ||\r\n          combinedLabels.indexOf(\"Cantrips Known\") > -1 ||\r\n          combinedLabels.indexOf(\"1st\") > -1 ||\r\n          combinedLabels.indexOf(\"Ki Points\") > -1 ||\r\n          combinedLabels.indexOf(\"Rages\") > -1 ||\r\n          combinedLabels.indexOf(\"Talents Known\") > -1)\r\n      ) {\r\n        spellsFlag = true;\r\n      }\r\n    }\r\n  // uses different data structure for Fighter, since no classTableGroups\r\n  } else if (curClass.classFeatures.length) {\r\n    // for each level, find and index the feature cell\r\n    for (let i = 0; i < 20; i++) {\r\n      const tr = rootEl.querySelector(`#level${i + 1}`);\r\n      levelTrs[i] = tr;\r\n    }\r\n  }\r\n\r\n  rootEl.querySelector(\"#classtable\").classList.remove(\"mobile-clone-features\");\r\n  \r\n  // Add second feature table for mobile\r\n  if (spellsFlag) {\r\n    rootEl.querySelector(\"#classtable\").classList.add(\"mobile-clone-features\");\r\n\t\tlet mobileClone = parseHTML('<div class=\"mobile-clone-spells\"></div>');\r\n\t\tmobileClone.append(rootEl.querySelector(\"#classtable\").cloneNode(true));\r\n    mobileClone.querySelector(\"#classtable\").classList.remove(\"mobile-clone-features\");\r\n    mobileClone.querySelector(\"#groupHeaders th:not(.colGroupTitle)\").remove();\r\n    mobileClone.querySelector(\"#groupHeaders .colGroupTitle\") &&\r\n      mobileClone.querySelector(\"#groupHeaders .colGroupTitle\").setAttribute(\"colspan\", \"12\");\r\n\t\tlet colHeaderEls = mobileClone.querySelectorAll(\"#colHeaders th\");\r\n\t\tfor (let colHeaderEl of colHeaderEls) {\r\n      if (colHeaderEl.textContent.toLowerCase().indexOf(\"sneak attack\") > -1) {\r\n        colHeaderEl.innerHTML = '<span title=\"Sneak Attack\">Snk Atk</span>';\r\n      } else if (colHeaderEl.textContent.toLowerCase().indexOf(\"sorcery points\") > -1) {\r\n        colHeaderEl.innerHTML = '<span title=\"Sorcery Points\">SP</span>';\r\n      } else if (colHeaderEl.textContent.toLowerCase().indexOf(\"spells known\") > -1) {\r\n        colHeaderEl.innerHTML = '<span title=\"Spells Known\">S</span>';\r\n      } else if (colHeaderEl.textContent.toLowerCase().indexOf(\"cantrips known\") > -1) {\r\n        colHeaderEl.innerHTML = '<span title=\"Cantrips Known\">C</span>';\r\n      }\r\n\t\t}\r\n    jqAfter(rootEl.querySelector(\"#classtable\"), mobileClone);\r\n  }\r\n\r\n  // FEATURE DESCRIPTIONS ============================================================================================\r\n  const renderStack = [];\r\n  let subclassIndex = 0; // the subclass array is not 20 elements\r\n  for (let i = 0; i < 20; i++) {\r\n    // track class table feature names\r\n    const tblLvlFeatures = levelTrs[i].querySelector(\".features\");\r\n    const featureNames = [];\r\n\r\n    // add class features to render stack\r\n    const lvlFeatureList = curClass.classFeatures[i];\r\n    for (let j = 0; j < lvlFeatureList.length; j++) {\r\n      const feature = lvlFeatureList[j];\r\n      const featureId = HASH_FEATURE + encodeForHash(feature.name) + \"_\" + i;\r\n      const featureLinkPart = HASH_FEATURE + encodeForHash(feature.name) + i;\r\n      const featureLinkClasses = [CLSS_FEATURE_LINK];\r\n      if (isNonstandardSource(feature.source)) featureLinkClasses.push(CLSS_NON_STANDARD_SOURCE);\r\n      const featureLink = parseHTML(\r\n        `<a href=\"#${encodeForHash([curClass.name, curClass.source])}${HASH_PART_SEP}${featureLinkPart}\"\r\n          class=\"${featureLinkClasses.join(\" \")}\"\r\n          ${ATB_DATA_FEATURE_LINK}=\"${featureLinkPart}\"\r\n          ${ATB_DATA_FEATURE_ID}=\"${featureId}\">${feature.name}</a>`\r\n      );\r\n      featureLink.addEventListener(\"click\", function(e) {\r\n        e.preventDefault();\r\n        rootEl.getElementById(featureId).scrollIntoView(true);\r\n        let offset = -84 - jqHeight(rootEl.querySelector(\"#subclasses\"));\r\n        window.scrollBy(0, offset);\r\n      });\r\n      featureNames.push(featureLink);\r\n\r\n      const styleClasses = [CLSS_CLASS_FEATURE];\r\n      if (feature.gainSubclassFeature) {\r\n        styleClasses.push(CLSS_GAIN_SUBCLASS_FEATURE);\r\n      }\r\n\r\n      renderer.recursiveEntryRender(\r\n        feature,\r\n        renderStack,\r\n        0,\r\n        `<div id=\"${featureId}\" class=\"${styleClasses.join(\" \")}\">`,\r\n        `</div>`,\r\n        true\r\n      );\r\n\r\n      // add subclass features to render stack if appropriate\r\n      if (feature.gainSubclassFeature) {\r\n        for (const subClass of curClass.subclasses) {\r\n          if (subClass.subclassFeatures) {\r\n            const subFeatureList = subClass.subclassFeatures[subclassIndex];\r\n\r\n            for (let i = 0; i < subFeatureList.length; i++) {\r\n              const subFeature = subFeatureList[i];\r\n              // if this is not the subclass intro, add the subclass to the feature name\r\n              // this will only be shown if there are multiple subclasses displayed\r\n              if (subFeature.name === undefined) {\r\n                for (let m = 0; m < subFeature.entries.length; m++) {\r\n                  const childEntry = subFeature.entries[m];\r\n                  if (\r\n                    childEntry.name !== undefined &&\r\n                    !childEntry.name.startsWith(`<span class=\"${CLSS_SUBCLASS_PREFIX}\">`)\r\n                  ) {\r\n                    childEntry.name = `<span class=\"${CLSS_SUBCLASS_PREFIX}\">${subClass.name}: </span>${childEntry.name}`;\r\n                  }\r\n                }\r\n              }\r\n\r\n              const styleClasses = [CLSS_SUBCLASS_FEATURE];\r\n              const hideSource =\r\n                isNonstandardSource(subClass.source) || hasBeenReprinted(subClass.shortName, subClass.source);\r\n              if (hideSource) styleClasses.push(CLSS_NON_STANDARD_SOURCE);\r\n              if (i !== 0) styleClasses.push(\"referenced-subclass-feature\");\r\n              renderer.recursiveEntryRender(\r\n                subFeature,\r\n                renderStack,\r\n                0,\r\n                `<div class=\"${styleClasses.join(\" \")}\" ${ATB_DATA_SC}=\"${subClass.name}\" ${ATB_DATA_SRC}=\"${\r\n                  subClass.source\r\n                }\">`,\r\n                `</div>`,\r\n                true\r\n              );\r\n            }\r\n          }\r\n        }\r\n        subclassIndex++;\r\n      }\r\n    }\r\n\r\n    // render class table feature names\r\n    if (featureNames.length === 0) tblLvlFeatures.innerHTML = \"\\u2014\";\r\n    else {\r\n      for (let j = 0; j < featureNames.length; j++) {\r\n        tblLvlFeatures.append(featureNames[j]);\r\n      }\r\n    }\r\n  }\r\n  rootEl.querySelector(\"#stats\").innerHTML = renderStack.join(\"\");\r\n\r\n  // show UA/other features by default\r\n  toggleUAFeatures(true);\r\n\r\n  // CLASS FEATURE/UA/SUBCLASS PILL BUTTONS ==========================================================================\r\n  let subclassPillWrapper = rootEl.querySelector(\"div#subclasses\");\r\n  // remove any from previous class\r\n  jqEmpty(subclassPillWrapper);\r\n  subclassPillWrapper.append(parseHTML(`<div class='title'>Subclasses</div>`));\r\n  subclassPillWrapper.append(parseHTML(`<div class='subclass-wrapper'></div>`));\r\n  subclassPillWrapper = subclassPillWrapper.querySelector('.subclass-wrapper');\r\n\r\n  // show/hide UA/other sources\r\n  const allSourcesToggle = makeGenericTogglePill(\r\n    \"Show UA\",\r\n    CLSS_OTHER_SOURCES_ACTIVE,\r\n    ID_OTHER_SOURCES_TOGGLE,\r\n    HASH_ALL_SOURCES,\r\n    false,\r\n    true\r\n  );\r\n\r\n  // show/hide class features pill\r\n  makeGenericTogglePill(\r\n    \"Class Features\",\r\n    CLSS_CLASS_FEATURES_ACTIVE,\r\n    ID_CLASS_FEATURES_TOGGLE,\r\n    HASH_HIDE_FEATURES,\r\n    true\r\n  );\r\n\r\n  // subclass pills\r\n  if (curClass.subclasses) {\r\n    const subClasses = curClass.subclasses\r\n      .map(sc => ({ name: sc.name, source: sc.source, shortName: sc.shortName }))\r\n      .sort(function(a, b) {\r\n        return ascSort(a.shortName, b.shortName);\r\n      });\r\n    for (let i = 0; i < subClasses.length; i++) {\r\n      const nonStandardSource =\r\n        isNonstandardSource(subClasses[i].source) || hasBeenReprinted(subClasses[i].shortName, subClasses[i].source);\r\n      const styleClasses = [CLSS_ACTIVE, CLSS_SUBCLASS_PILL];\r\n      if (nonStandardSource) styleClasses.push(CLSS_NON_STANDARD_SOURCE);\r\n      const pillText = hasBeenReprinted(subClasses[i].shortName, subClasses[i].source)\r\n        ? `${subClasses[i].shortName} (${Parser.sourceJsonToAbv(subClasses[i].source)})`\r\n        : subClasses[i].shortName;\r\n      const pill = parseHTML(\r\n        `<div class=\"${styleClasses.join(\" \")}\" ${ATB_DATA_SC}=\"${subClasses[i].name}\" ${ATB_DATA_SRC}=\"${\r\n          subClasses[i].source\r\n        }\" title=\"Source: ${Parser.sourceJsonToFull(\r\n          subClasses[i].source\r\n        )}\"><span class='mdc-chip__text'>${pillText}</span></div>`\r\n      );\r\n      pill.addEventListener(\"click\", function() {\r\n        handleSubclassClick(pill.classList.contains(CLSS_ACTIVE), subClasses[i].name, subClasses[i].source);\r\n      });\r\n      if (nonStandardSource) pill.style.display = 'none';\r\n      subclassPillWrapper.append(pill);\r\n    }\r\n    subclassPillWrapper.append(parseHTML(`<div class='tab material-icons'>expand_less</div>`));\r\n\r\n    rootEl.querySelector(\"#subclasses .tab\").addEventListener(\"click\", () => {\r\n      rootEl.querySelector(\"#subclasses\").classList.toggle(\"closed\");\r\n    });\r\n\r\n    // if this is a UA class, toggle the \"All Sources\" button\r\n    const showUA = readRouteSelection().indexOf(HASH_ALL_SOURCES + 'true') > -1 || readRouteSelection().indexOf(HASH_ALL_SOURCES + 'false') === -1\r\n    if (showUA) {\r\n      allSourcesToggle.click();\r\n    }\r\n  } else {\r\n    rootEl.querySelector(\"#subclasses\").classList.add(\"hidden\");\r\n  }\r\n\r\n  // helper functions\r\n  function makeGenericTogglePill(pillText, pillActiveClass, pillId, hashKey, defaultActive, isUA) {\r\n    const pill = parseHTML(`<div id=\"${pillId}\" class=\"mdc-chip\"><span class=\"mdc-chip__text\">${pillText}</span></div>`);\r\n    subclassPillWrapper.append(pill);\r\n    pill.addEventListener(\"click\", function() {\r\n      let active = pill.classList.contains(pillActiveClass);\r\n      if (!defaultActive) active = !active;\r\n      handleToggleFeaturesClicks(active);\r\n      // enable UA features\r\n      if (isUA) {\r\n        toggleUAFeatures(active);\r\n        pill.querySelector('.mdc-chip__text').innerHTML = active ? \"Hide UA\" : \"Show UA\";\r\n      }\r\n    });\r\n    return pill;\r\n\r\n    function handleToggleFeaturesClicks(isPillActive) {\r\n      const outStack = [];\r\n      const split = readRouteSelection().split(HASH_PART_SEP);\r\n\r\n      for (let i = 0; i < split.length; i++) {\r\n        const hashPart = split[i];\r\n        if (!hashPart.startsWith(hashKey)) outStack.push(hashPart);\r\n      }\r\n      if (isPillActive) {\r\n        outStack.push(hashKey + \"true\");\r\n      } else {\r\n        outStack.push(hashKey + \"false\");\r\n      }\r\n      const newHash = outStack.join(HASH_PART_SEP);\r\n      setRouteSelection(newHash, true);\r\n    }\r\n  }\r\n\r\n  function handleSubclassClick(isPillActive, subclassName, subclassSource) {\r\n    const outStack = [];\r\n    const routeSelection = readRouteSelection();\r\n    const split = routeSelection.split(HASH_PART_SEP);\r\n\r\n    const encodedSubClass = encodeForHash([subclassName]);\r\n    const subclassLink = HASH_SUBCLASS + encodedSubClass;\r\n\r\n    if (isPillActive && routeSelection.includes(HASH_SUBCLASS)) {\r\n      for (let i = 0; i < split.length; i++) {\r\n        const hashPart = split[i];\r\n        if (!hashPart.startsWith(HASH_SUBCLASS)) {\r\n\t\t\t\t\toutStack.push(hashPart);\r\n\t\t\t\t} else {\r\n          const subClassStack = [];\r\n          const subClasses = hashPart.substr(HASH_SUBCLASS.length).split(HASH_LIST_SEP);\r\n          for (let j = 0; j < subClasses.length; j++) {\r\n            const subClass = subClasses[j];\r\n            if (subClass !== encodedSubClass) subClassStack.push(subClass);\r\n          }\r\n          if (subClassStack.length > 0) outStack.push(HASH_SUBCLASS + subClassStack.join(HASH_LIST_SEP));\r\n        }\r\n      }\r\n    } else {\r\n      let hasSubclassHash = false;\r\n\r\n      for (let i = 0; i < split.length; i++) {\r\n        const hashPart = split[i];\r\n        if (!hashPart.startsWith(HASH_SUBCLASS)) outStack.push(hashPart);\r\n        else {\r\n          const subClassStack = [];\r\n          const subClasses = hashPart.substr(HASH_SUBCLASS.length).split(HASH_LIST_SEP);\r\n          for (let j = 0; j < subClasses.length; j++) {\r\n            const subClass = subClasses[j];\r\n            if (subClass !== encodedSubClass) subClassStack.push(subClass);\r\n          }\r\n          subClassStack.push(encodedSubClass);\r\n          if (subClassStack.length > 0) outStack.push(HASH_SUBCLASS + subClassStack.join(HASH_LIST_SEP));\r\n\r\n          hasSubclassHash = true;\r\n        }\r\n      }\r\n\r\n      if (!hasSubclassHash) outStack.push(subclassLink);\r\n    }\r\n    const newHash = outStack.join(HASH_PART_SEP);\r\n    setRouteSelection(newHash, true);\r\n  }\r\n\r\n  function toggleUAFeatures(active) {\r\n    let nonStandardPills = rootEl.querySelectorAll(`.${CLSS_NON_STANDARD_SOURCE}`);\r\n    for (let nonStandardPill of nonStandardPills) {\r\n      if (!nonStandardPill.classList.contains(CLSS_SUBCLASS_PILL)) {\r\n        nonStandardPill.style.display = active ? null : 'none';\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction onSubChange(sub, curHash, rootEl) {\r\n\tlet subclasses = null;\r\n\tlet feature = null;\r\n\tlet hideClassFeatures = null;\r\n\tlet showAllSources = null;\r\n\r\n\tfor (let i = 0; i < sub.length; i++) {\r\n\t\tconst hashPart = sub[i];\r\n\r\n\t\tif (hashPart.startsWith(HASH_SUBCLASS)) subclasses = hashPart.slice(HASH_SUBCLASS.length).split(HASH_LIST_SEP);\r\n\t\tif (hashPart.startsWith(HASH_FEATURE)) feature = hashPart;\r\n\t\tif (hashPart.startsWith(HASH_HIDE_FEATURES)) hideClassFeatures = hashPart.slice(HASH_HIDE_FEATURES.length) === \"true\";\r\n\t\tif (hashPart.startsWith(HASH_ALL_SOURCES)) showAllSources = hashPart.slice(HASH_ALL_SOURCES.length) === \"true\";\r\n\t}\r\n\r\n\tconst hideOtherSources = showAllSources === null || showAllSources === false;\r\n\r\n\tif (subclasses !== null) {\r\n\t\tupdateClassTableLinks();\r\n\r\n\t\tconst $toShow = [];\r\n\t\tconst $toHide = [];\r\n\t\tconst $subClassSpanList = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_PILL}`);\r\n\t\tfor (let classSpan of $subClassSpanList) {\r\n\t\t\tconst $this = classSpan;\r\n      const name = $this.getAttribute(ATB_DATA_SC);\r\n\t\t\tconst thisSc = encodeForHash([name]);\r\n\t\t\tlet shown = false;\r\n\r\n\t\t\tfor (let j = 0; j < subclasses.length; j++) {\r\n\t\t\t\tconst sc = subclasses[j];\r\n\t\t\t\tif (sc.trim() === thisSc) {\r\n\t\t\t\t\tshown = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (shown) {\r\n\t\t\t\t$toShow.push($this);\r\n\t\t\t} else {\r\n\t\t\t\t$toHide.push($this);\r\n\t\t\t}\r\n\t\t}\r\n\r\n    const otherSrcSubFeats = rootEl.querySelectorAll(`p.${CLSS_NON_STANDARD_SOURCE}`);\r\n    const shownInTable = [];\r\n\r\n    for (let v of $toShow) {\r\n      v.classList.add(CLSS_ACTIVE);\r\n      let selectedSCFeatures = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_FEATURE}[${ATB_DATA_SC}=\"${v.getAttribute(ATB_DATA_SC)}\"][${ATB_DATA_SRC}=\"${v.getAttribute(ATB_DATA_SRC)}\"]`);\r\n      for (let selectedSCFeature of selectedSCFeatures) {\r\n        selectedSCFeature.style.display = null;\r\n      }\r\n      if (hideOtherSources) {\r\n        for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n          if (\r\n            otherSrcSubFeat.getAttribute(ATB_DATA_SC) === v.getAttribute(ATB_DATA_SC) &&\r\n            otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === v.getAttribute(ATB_DATA_SRC)\r\n          ) {\r\n            otherSrcSubFeat.style.display = \"none\";\r\n          }\r\n        }\r\n      } else {\r\n        for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n          if (\r\n            otherSrcSubFeat.getAttribute(ATB_DATA_SC) === v.getAttribute(ATB_DATA_SC) &&\r\n            otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === v.getAttribute(ATB_DATA_SRC)\r\n          ) {\r\n            otherSrcSubFeat.style.display = null;\r\n          }\r\n        }\r\n      }\r\n\r\n      const asInTable = v.getAttribute(ATB_DATA_SC) + ATB_DATA_PART_SEP + v.getAttribute(ATB_DATA_SRC);\r\n      shownInTable.push(asInTable);\r\n    }\r\n\r\n    for (let v of $toHide) {\r\n      v.classList.remove(CLSS_ACTIVE);\r\n      let selectedSCFeatures = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_FEATURE}[${ATB_DATA_SC}=\"${v.getAttribute(ATB_DATA_SC)}\"][${ATB_DATA_SRC}=\"${v.getAttribute(ATB_DATA_SRC)}\"]`);\r\n      for (let selectedSCFeature of selectedSCFeatures) {\r\n        selectedSCFeature.style.display = 'none';\r\n      }\r\n      for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n        if (\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SC) === v.getAttribute(ATB_DATA_SC) &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === v.getAttribute(ATB_DATA_SRC)\r\n        ) {\r\n          otherSrcSubFeat.style.display = \"none\";\r\n        }\r\n      }\r\n      v.getAttribute(ATB_DATA_SC);\r\n    }\r\n    \r\n    handleTableGroups(shownInTable);\r\n\r\n    if (hideOtherSources) {\r\n      for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n        if (\r\n          !otherSrcSubFeat.classList.contains(CLSS_SUBCLASS_FEATURE) &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SC) === EntryRenderer.DATA_NONE &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === EntryRenderer.DATA_NONE\r\n        ) {\r\n          otherSrcSubFeat.style.display = \"none\";\r\n        }\r\n      }\r\n    } else {\r\n      for (let otherSrcSubFeat of otherSrcSubFeats) {\r\n        if (\r\n          !otherSrcSubFeat.classList.contains(CLSS_SUBCLASS_FEATURE) &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SC) === EntryRenderer.DATA_NONE &&\r\n          otherSrcSubFeat.getAttribute(ATB_DATA_SRC) === EntryRenderer.DATA_NONE\r\n        ) {\r\n          otherSrcSubFeat.style.display = null;\r\n        }\r\n      }\r\n    }\r\n\r\n\t\t// show subclass prefixes if we're displaying more than 1 subclass\r\n\t\tlet subClassEls = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_PREFIX}`);\r\n\t\tif ($toShow.length !== 1) {\r\n\t\t\tfor (let subClassEl of subClassEls) {\r\n\t\t\t\tsubClassEl.style.display = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let subClassEl of subClassEls) {\r\n\t\t\t\tsubClassEl.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// hide class features as required\r\n\tconst cfToggle = rootEl.querySelector(`#${ID_CLASS_FEATURES_TOGGLE}`);\r\n\tconst toToggleCf= rootEl.querySelectorAll(`.${CLSS_CLASS_FEATURE}`);\r\n\tif (hideClassFeatures !== null && hideClassFeatures) {\r\n\t\tcfToggle.classList.remove(CLSS_CLASS_FEATURES_ACTIVE);\r\n\t\tfor (let el of toToggleCf) {\r\n\t\t\tif (!el.classList.contains(CLSS_GAIN_SUBCLASS_FEATURE)) {\r\n        el.style.display = \"none\";\r\n      }\r\n\t\t}\r\n\t} else {\r\n\t\tcfToggle.classList.add(CLSS_CLASS_FEATURES_ACTIVE);\r\n\t\tfor (let el of toToggleCf) {\r\n\t\t\tif (!el.classList.contains(CLSS_GAIN_SUBCLASS_FEATURE)) {\r\n        el.style.display = null;\r\n      }\r\n\t\t}\r\n\t}\r\n\r\n\t// show UA/etc content as required\r\n\tconst srcToggle = rootEl.querySelector(`#${ID_OTHER_SOURCES_TOGGLE}`);\r\n\tconst toToggleSrc = rootEl.querySelectorAll(`.${CLSS_SUBCLASS_PILL}.${CLSS_NON_STANDARD_SOURCE}`);\r\n\tif (hideOtherSources) {\r\n\t\tsrcToggle.classList.remove(CLSS_OTHER_SOURCES_ACTIVE);\r\n\t\tfor (let el of toToggleSrc) {\r\n\t\t\tel.style.display = \"none\";\r\n\t\t}\r\n\t} else {\r\n\t\tsrcToggle.classList.add(CLSS_OTHER_SOURCES_ACTIVE);\r\n\t\tfor (let el of toToggleSrc) {\r\n\t\t\tel.style.display = null;\r\n\t\t}\r\n\t}\r\n\r\n\t// scroll to the linked feature if required\r\n\tif (feature !== null && (window.prevFeature === undefined || window.prevFeature !== feature)) {\r\n\t\trootEl.getElementById(rootEl.querySelectorAll(`[${ATB_DATA_FEATURE_LINK}=\"${feature}\"]`).getAttribute(ATB_DATA_FEATURE_ID)).scrollIntoView();\r\n\t\twindow.prevFeature = feature;\r\n\t}\r\n\r\n\tupdateClassTableLinks();\r\n\r\n  function handleTableGroups(toShow) {\r\n    let listEls = rootEl.querySelectorAll(`[${ATB_DATA_SC_LIST}]`);\r\n    for (let el of listEls) {\r\n      const scs = el.getAttribute(ATB_DATA_SC_LIST).split(ATB_DATA_LIST_SEP);\r\n\r\n      for (let shown of toShow) {\r\n        if (scs.includes(shown)) {\r\n          el.style.display = null;\r\n          break;\r\n        }\r\n          el.style.display = 'none';\r\n        }\r\n      }\r\n\t}\r\n\r\n\tfunction updateClassTableLinks () {\r\n\t\tconst hashParts = curHash.slice(1).split(HASH_PART_SEP);\r\n\t\tconst outParts = [];\r\n\t\tfor (let i = 0; i < hashParts.length; i++) {\r\n\t\t\tconst part = hashParts[i];\r\n\t\t\tif (!part.startsWith(HASH_FEATURE)) outParts.push(part);\r\n\t\t}\r\n\t\tlet els = rootEl.querySelectorAll(`.${CLSS_FEATURE_LINK}`);\r\n\t\tfor (let el of els) {\r\n\t\t\tel.href = HASH_START+outParts.join(HASH_PART_SEP)+HASH_PART_SEP+el.getAttribute(ATB_DATA_FEATURE_LINK);\r\n\t\t}\r\n\t}\r\n}\r\n","import { setRouteSelection } from \"./routing\";\nimport { encodeForHash, parseHTML } from \"../js/utils\";\n\nexport default function renderList(rootEl, items) {\n  const container = rootEl.querySelector('.class-container');\n  container.appendChild(parseHTML(\"<div class='list-container'></div>\"))\n  const listWrapper = container.querySelector('.list-container');\n\n  let htmlString = \"\";\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst curItem = items[i];\n\t\tlet svg = curItem.name.replace(/(\\s|\\(|\\))/g, \"\");\n\t\tlet link = encodeForHash([curItem.name, curItem.source]);\n\n\t\thtmlString += \n\t\t\t`<div class='list-item history-link grid-item__${svg}' data-link='${link}' data-title='${curItem.name}'>\n\t\t\t\t<div>\n\t\t\t\t\t<dnd-svg id='${svg}' default-color class='list-item--image grid-item__${svg}'></dnd-svg>\n\t\t\t\t\t<span class='list-item--text'>${curItem.name}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"list-item--subtext\">${curItem.source}</div>\n\t\t\t</div>`\n\t}\n\tlet itemElements = parseHTML(htmlString);\n\twhile (itemElements.length > 0) {\n\t\titemElements[0].addEventListener(\"click\", (e) => {\n\t\t\tlet tar = e.target.closest(\".list-item\");\n\t\t\tsetRouteSelection(tar.getAttribute(\"data-link\"));\n\t\t});\n\t\tlistWrapper.appendChild(itemElements[0]);\n\t}\n};"],"sourceRoot":""}