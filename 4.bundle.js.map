{"version":3,"sources":["webpack:///./node_modules/@vaadin/vaadin-checkbox/src/vaadin-checkbox.js","webpack:///./node_modules/@vaadin/vaadin-checkbox/theme/lumo/vaadin-checkbox-styles.js","webpack:///./node_modules/@vaadin/vaadin-grid/theme/lumo/vaadin-grid-styles.js","webpack:///./node_modules/@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/iron-list.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-scroller.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-a11y-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-active-item-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-array-data-provider-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column-resizing-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-data-provider-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-dynamic-columns-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-event-context-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-filter-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-row-details-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-scroll-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-selection-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-sort-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-styling-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-drag-and-drop-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-keyboard-navigation-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column-reordering-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-outer-scroller.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-styles.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-templatizer.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column.js"],"names":["CheckboxElement","checked","type","Boolean","value","notify","observer","reflectToAttribute","indeterminate","String","_nativeCheckbox","Object","super","this","name","_storedName","ready","setAttribute","shadowRoot","querySelector","addEventListener","_handleClick","bind","_addActiveListeners","attrName","getAttribute","_updateLabelAttribute","label","assignedNodes","firstElementChild","_isAssignedNodesEmpty","removeAttribute","nodes","length","nodeType","Node","TEXT_NODE","textContent","trim","_addEventListenerToNode","e","__interactionsAllowed","keyCode","preventDefault","_toggleChecked","disabled","target","localName","composedPath","dispatchEvent","CustomEvent","composed","bubbles","customElements","define","is","$_documentContainer","document","head","appendChild","content","IronScrollTargetBehavior","properties","scrollTarget","HTMLElement","_defaultScrollTarget","observers","_shouldHaveListener","_scrollTargetChanged","isAttached","_oldScrollTarget","_toggleScrollListener","_doc","domHost","$","ownerDocument","_isValidScrollTarget","_scrollHandler","documentElement","window","pageYOffset","scrollTop","pageXOffset","scrollLeft","top","scrollTo","left","scroll","leftOrOptions","innerWidth","offsetWidth","innerHeight","offsetHeight","yes","eventTarget","_boundScrollHandler","removeEventListener","toggleScrollListener","IOS","navigator","userAgent","match","IOS_TOUCH_SCROLLING","ANIMATION_FRAME","IDLE_TIME","MICRO_TASK","PolymerIronList","behaviors","_ratio","_scrollerPaddingTop","_scrollPosition","_physicalSize","_physicalAverage","_physicalAverageCount","_physicalTop","_virtualCount","_estScrollHeight","_scrollHeight","_viewportHeight","_viewportWidth","_physicalItems","_physicalSizes","_firstVisibleIndexVal","_collection","_lastVisibleIndexVal","_maxPages","_focusedVirtualIndex","_itemsPerRow","_rowHeight","_templateCost","_virtualStart","_physicalCount","grid","_physicalRows","_scrollOffset","virtualCount","_convertIndexToCompleteRow","Math","max","val","_clamp","_maxVirtualStart","_virtualStartVal","_physicalStartVal","_physicalStart","_physicalCountVal","Infinity","idx","physicalOffset","_iterateItems","pidx","vidx","_getPhysicalSizeIncrement","min","firstVisibleIndex","_estRowsInView","_scrollBottom","attached","_debounce","_render","listen","detached","unlisten","updateViewportBoundaries","styles","getComputedStyle","parseInt","_isRTL","direction","items","_scrollTargetHeight","_updateGridMetrics","_maxScrollTop","_scrollTop","delta","isScrollingDown","abs","idxAdjustment","round","floor","_update","reusables","_getReusables","physicalTop","indexes","_increasePoolIfNeeded","fromTop","ith","offsetContent","physicalItemHeight","idxs","protectedOffsetContent","_hiddenContentSize","virtualStart","virtualEnd","_virtualEnd","physicalCount","bottom","_physicalBottom","scrollBottom","_physicalEnd","push","itemSet","movingUp","_manageFocus","_assignModels","_updateMetrics","pop","_positionItems","_updateScrollerSize","_isClientFull","count","nextPhysicalCount","nextIncrease","ts","performance","now","apply","_createPool","i","_isIndexRendered","_getPhysicalIndex","_optPhysicalSize","_isVisible","_itemsChanged","change","path","_physicalIndexForKey","_resetScrollPosition","_removeFocusedItem","fn","rtn","arguments","_computeVidx","call","flush","newPhysicalSize","oldPhysicalSize","prevAvgCount","prevPhysicalAvg","ceil","_adjustScrollPosition","y","translate3d","deltaHeight","pos","forceUpdate","_virtualRowCount","style","height","scrollToIndex","currentTopItem","currentVirtualItem","targetOffsetTop","hiddenContentSize","_resetAverage","_resizeHandler","v","cb","asyncModule","_debouncers","debounce","size","Number","_vidxOffset","connectedCallback","item","index","_warnPrivateAPIAccess","_pendingScrollToIndex","borderTopWidth","_scrollingToIndex","_effectiveSize","table","scrollHeight","_accessIronListAPI","_adjustVirtualIndexOffset","row","Array","from","children","filter","child","headerOffset","getBoundingClientRect","header","fvi","fviOffset","_firstVisibleIndex","isArray","maxVirtualItems","_edge","_ie","_scrollToIndex","_focusedItemIndex","_itemsFocusable","contains","activeElement","cellIndex","parentElement","indexOf","focus","requestAnimationFrame","rePosition","isNaN","transform","_canPopulate","_initialPoolCreated","_debounceIncreasePool","remainingPhysicalSize","estimatedMissingRowCount","__reorderChildNodes","childNodes","reduce","inOrder","current","currentIndex","array","sort","row1","row2","forEach","fragment","createDocumentFragment","physicalItems","_createScrollerRows","inst","_getRowTarget","slot","_updateHeaderFooterMetrics","notifyResize","el","_toggleAttribute","_updateScrollerItem","oldOffset","_afterScroll","_noScale","scale","offset","threshold","maxShift","maxOffset","_warnPrivateAPIAccessAsyncEnabled","returnValue","_debouncerWarnPrivateAPIAccess","_debounceRender","apiName","console","warn","lastVisibleIndex","A11yMixin","superClass","_columnTree","level","some","col","_headerTemplate","headerRenderer","undefined","bodyColumns","_a11yGetHeaderRowCount","_a11yGetFooterRowCount","_a11yUpdateHeaderRows","_a11yUpdateFooterRows","headerRow","footer","footerRow","selected","cell","detailsOpened","hasAttribute","detailsCell","id","colspan","querySelectorAll","sorter","cellContent","parentNode","assignedSlot","ActiveItemMixin","activeItem","scroller","_onClick","_activateItem","model","detail","clickedItem","_itemsEqual","defaultPrevented","_content","getRootNode","_isFocusable","__getRowModel","isFocusableElement","element","splices","dataProvider","_arrayDataProvider","clearCache","_ensureFirstPageLoaded","opts","slice","_filters","_checkPaths","_filter","sortOrders","_sorters","_multiSort","start","page","pageSize","end","arrayToCheck","action","result","parentProperty","replace","get","a","b","map","_compare","p","n","toString","_normalizeEmptyValue","filterValueLowercase","toLowerCase","_onHeaderTrack","handle","column","_column","prototype","_childColumns","_order","hidden","columnRowCells","targetCell","minWidth","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","marginLeft","marginRight","maxWidth","__isRTL","x","right","width","flexGrow","state","resizedColumn","ItemCache","parentCache","parentItem","itemCaches","effectiveSize","pendingRequests","keys","isLoading","cache","scaledIndex","getCacheAndIndex","_isExpanded","prev","curr","subCache","updateSize","_loadPage","thisLevelIndex","expandedIndex","loading","readOnly","_cache","itemIdPath","expandedItems","_updateItem","ensureSubCacheForScaledIndex","_getPageForIndex","expandItem","collapseItem","__expandedKeys","has","getItemId","__cacheExpandedKeys","Set","add","splice","_getItemIndexInArray","_hasData","_setLoading","params","_mapSorters","filters","_mapFilters","currentItems","_item","itemsIndex","itemIndex","cachedItem","getItemForIndex","__itemsReceived","_instance","_setPendingProperty","oldPageSize","oldDataProvider","_debouncerCheckSize","after","_checkSize","hadData","item1","item2","_addNodeObserver","columns","getFlattenedNodes","_isColumnElement","_getChildColumns","concat","c","_hasColumnGroups","_flattenColumnGroups","columnTree","_getColumnTree","_arrayEquals","_observer","info","rowDetailsTemplate","addedNodes","classList","_rowDetailsTemplate","removedNodes","_updateColumnTree","_debouncerCheckImports","_checkImports","arr1","arr2","l","elementName","_updateFirstAndLastColumnForRow","node","ELEMENT_NODE","test","EventContextMixin","event","context","section","assign","FilterMixin","_filterChanged","stopPropagation","detailsOpenedItems","rowDetailsRenderer","Function","_detailsCells","Error","templatizer","_grid","dataHost","template","_updateRow","_a11yUpdateRowDetailsOpened","_toggleDetailsCell","changeRecord","_isDetailsOpened","detailsHidden","hiddenChanged","_renderer","removeProperty","createInstance","innerHTML","root","setProperty","instance","_detailsOpenedInstanceChangedCallback","openItemDetails","closeItemDetails","SCROLL_PERIOD","WHEEL_SCROLLING","SCROLLING","IGNORE_WHEEL","_frozenCells","_scrollbarWidth","scrollDiv","createElement","overflow","position","body","scrollbarWidth","clientWidth","removeChild","_rowWithFocusedElement","Element","_deltaYAcc","_scrollLineHeight","_getScrollLineHeight","fontSize","display","_scrollPageHeight","clientHeight","_wheelScrolling","_debouncerWheelScrolling","_timeouts","_onWheel","outerscroller","outerScrolling","stopImmediatePropagation","ctrlKey","_hasScrolledAncestor","deltaX","deltaY","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","_wheelAnimationFrame","_debouncerWheelAnimationFrame","momentum","_canScroll","_hasResidualMomentum","_ignoreNewWheel","_debouncerIgnoreNewWheel","_previousMomentum","scrollWidth","_scrollingFrame","_debounceScrolling","cancelAnimationFrame","_reorderRows","_scrollPeriodFrame","_debounceScrollPeriod","_translateStationaryElements","_scheduleScrolling","os","_ios","passthrough","syncOuterScroller","overScroll","_updateOverflow","_debounceOverflow","adjustedVirtualStart","targetRow","targetPhysicalIndex","insertBefore","_debouncerCacheElements","_updateScrollerMeasurements","_updateLastFrozen","__scrollerMetrics","columnsRow","lastFrozen","_lastFrozen","frozen","_getTranslate","_scrollLeft","__getNormalizedScrollLeft","frozenCellTransform","outersizer","fixedsizer","SelectionMixin","selectedItems","_isSelected","selectItem","deselectItem","_selectedInstanceChangedCallback","multiSort","_previousSorters","_onSorterChanged","ShadyDOM","run","sorters","_removeArrayItem","unshift","JSON","stringify","_a11yUpdateSorters","StylingMixin","cellClassNameGenerator","cellClassGenerator","generateCellClassNames","_generateCellClassNames","rowData","__generatedClasses","className","remove","split","DropMode","DropLocation","DragAndDropMixin","dropMode","rowsDraggable","dragFilter","dropFilter","__dndAutoScrollThreshold","_onDragStart","_onDragEnd","_onDragOver","_onDragLeave","_onDrop","_safari","exec","rowRect","dataTransfer","setDragImage","clientX","clientY","rows","__getViewportRows","setData","__formatDefaultTransferData","updateStyles","draggedItems","setDragData","data","setDraggedItemsCount","originalEvent","_clearDragStyles","_dropLocation","_dragOverItem","__dndAutoScroll","dropAbove","__dndAutoScrolling","headerBottom","footerTop","topDiff","bottomDiff","scrollTopDelta","setTimeout","dragData","types","getData","cancelable","dropTargetItem","dropLocation","join","filterDragAndDrop","_filterDragAndDrop","dragDisabled","dropDisabled","KeyboardNavigationMixin","_headerFocusable","_footerFocusable","_navigatingIsHidden","_focusedColumnOrder","_android","_onKeyDown","_onKeyUp","_onFocusIn","_onFocusOut","_onCellFocusIn","_onCellFocusOut","_isMousedown","focusable","oldFocusable","keyGroup","key","_detectInteracting","indexOfChildElement","visibleItemsCount","_lastVisibleIndex","dx","dy","activeCell","columnIndex","isRowDetails","_elementMatches","activeRow","activeRowGroup","maxRowIndex","rowIndex","dstRowIndex","dstIsRowDetails","dstItem","_getColumns","dstColumns","dstSortedColumnOrders","maxOrderedColumnIndex","orderedColumnIndex","dstOrderedColumnIndex","_ensureScrolledToIndex","dstColumnIndex","acc","dstRow","dstCell","_scrollHorizontallyToCell","dstRect","tableIndex","rowGroup","localTarget","localTargetIsTextInput","wantInteracting","_parseEventPath","focusTarget","srcElement","step","tabOrder","focusexit","_predictFocusStepTarget","shiftKey","itemsFocusTarget","focusedItemRow","wasNavigating","click","rootTarget","_activeRowGroup","_detectFocusedItemIndex","columnTreeLevel","firstVisibleIndexRow","dstCellRect","dstCellIndex","tableRect","leftBoundary","rightBoundary","query","matches","columnReorderingAllowed","_orderBaseScope","_onTrackEvent","_reorderGhost","_onTouchStart","_onTouchMove","_onTouchEnd","_onContextMenu","_startTouchReorderTimeout","_onTrackStart","touches","_draggedColumn","clearTimeout","_onTrackEnd","headerCell","_touchDevice","_onTrack","_cellFromPoint","childElementCount","_setSiblingsReorderStatus","_reorderStatus","_updateGhost","visibility","_updateGhostPosition","_autoScroller","targetColumn","_getTargetColumn","_isSwapAllowed","_isSwappableByPosition","_swapColumnOrders","_lastDragClientX","_getColumnsInOrder","elementFromPoint","eventClientX","eventClientY","ghostRect","targetLeft","targetTop","_left","_top","_getInnerText","ghost","propertyName","status","sibling","rightDiff","leftDiff","async","column1","column2","differentColumns","sameParent","sameFrozen","sourceCellRect","targetRect","_updateFirstAndLastColumn","draggedColumn","candidate","scrollHandler","noScrollbars","_syncScrollTarget","_onMouseMove","webkitOverflowScrolling","_","offsetY","offsetX","VaadinGridStyles","safari","firefox","scrollingStyles","register","TOUCH_DEVICE","createEvent","_this","MSStream","platform","maxTouchPoints","CSS","supports","_firefox","heightByRows","_recalculateColumnWidthOnceLoadingFinished","_onAnimationEnd","recalculateColumnWidths","oldValue","newValue","attributeChangedCallback","__hasRowsWithClientHeight","cols","_origFlexGrow","_currentWidth","_allCells","cellWidth","autoWidth","_recalculateColumnWidths","notifyPath","_cells","_resetKeyboardNavigation","tagName","slotName","_contentIndex","chrome","mouseUpListener","isColumnRow","noNotify","contentsFragment","_vacant","_createCell","_configureDetailsCell","_a11ySetRowDetailsCell","_emptyCells","__updateHeaderFooterRowVisibility","_frozenCellsChanged","visibleRowCells","footerRenderer","_footerTemplate","_preventScrollerRotatingCellFocus","_a11yUpdateRowRowindex","_getItem","_renderColumnTree","_a11yUpdateRowSelected","_a11yUpdateRowLevel","expanded","owner","__detailsOpened__","__selected__","__level__","__expanded__","setProperties","_debouncerUpdateHeights","_updateDetailsCellHeights","headerHeight","footerHeight","borderBottomWidth","animationName","bool","_getIndexLevel","_renderHeaderAndFooter","_debouncerForceReflow","GridTemplatizer","_templateInstances","_parentPathValues","_instanceProps","_ensureTemplatized","_TemplateClass","addInstance","instanceProps","parentModel","forwardHostProp","prop","_forwardParentProp","notifyInstanceProp","originalProp","gridCallback","t","addedCount","keyName","set","ColumnBaseMixin","resizable","parent","textAlign","_headerCell","_footerCell","_bodyTemplate","_templateObserver","callback","disconnectedCallback","_findHostGrid","_gridValue","_prepareHeaderTemplate","_prepareFooterTemplate","_prepareBodyTemplate","_prepareTemplatizer","_findTemplate","__runRenderer","renderer","args","cells","_template","__setColumnTemplateOrRenderer","headerTemplate","footerTemplate","footerCell","_selectFirstTemplate","_rootDataHost","_columnPropChanged","order","__forceReflow","bodyTemplate","hasHeaderText","__setTextContent","pathRenderer","_generateHeader","substr","lastIndexOf","toUpperCase","reorderStatus","existingHandle","textAlignFallback","_previousHidden","_debouncerHiddenChanged","GridColumnElement"],"mappings":"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","file":"4.bundle.js","sourcesContent":["/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * `<vaadin-checkbox>` is a Web Component for customized checkboxes.\n *\n * ```html\n * <vaadin-checkbox>\n *   Make my profile visible\n * </vaadin-checkbox>\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name         | Description\n * ------------------|----------------\n * `checkbox`        | The wrapper element for the native <input type=\"checkbox\">\n * `label`           | The wrapper element in which the component's children, namely the label, is slotted\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|--------------\n * `active`     | Set when the checkbox is pressed down, either with mouse, touch or the keyboard. | `:host`\n * `disabled`   | Set when the checkbox is disabled. | `:host`\n * `focus-ring` | Set when the checkbox is focused using the keyboard. | `:host`\n * `focused`    | Set when the checkbox is focused. | `:host`\n * `indeterminate` | Set when the checkbox is in indeterminate mode. | `:host`\n * `checked` | Set when the checkbox is checked. | `:host`\n * `empty` | Set when there is no label provided. | `label`\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends PolymerElement\n * @mixes ElementMixin\n * @mixes ControlStateMixin\n * @mixes ThemableMixin\n * @mixes GestureEventListeners\n * @demo demo/index.html\n */\nclass CheckboxElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        GestureEventListeners(PolymerElement)))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      label {\n        display: inline-flex;\n        align-items: baseline;\n        outline: none;\n      }\n\n      [part=\"checkbox\"] {\n        position: relative;\n        display: inline-block;\n        flex: none;\n      }\n\n      input[type=\"checkbox\"] {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: inherit;\n        margin: 0;\n      }\n\n      :host([disabled]) {\n        -webkit-tap-highlight-color: transparent;\n      }\n    </style>\n\n    <label>\n      <span part=\"checkbox\">\n        <input type=\"checkbox\" checked=\"{{checked::change}}\" disabled\\$=\"[[disabled]]\" indeterminate=\"{{indeterminate::change}}\" role=\"presentation\" tabindex=\"-1\">\n      </span>\n\n      <span part=\"label\">\n        <slot></slot>\n      </span>\n    </label>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-checkbox';\n  }\n\n  static get version() {\n    return '2.5.0';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * True if the checkbox is checked.\n       * @type {boolean}\n       */\n      checked: {\n        type: Boolean,\n        value: false,\n        notify: true,\n        observer: '_checkedChanged',\n        reflectToAttribute: true\n      },\n\n      /**\n       * Indeterminate state of the checkbox when it's neither checked nor unchecked, but undetermined.\n       * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/checkbox#Indeterminate_state_checkboxes\n       * @type {boolean}\n       */\n      indeterminate: {\n        type: Boolean,\n        notify: true,\n        observer: '_indeterminateChanged',\n        reflectToAttribute: true,\n        value: false\n      },\n\n      /**\n       * The value given to the data submitted with the checkbox's name to the server when the control is inside a form.\n       */\n      value: {\n        type: String,\n        value: 'on'\n      },\n\n      /** @private */\n      _nativeCheckbox: {\n        type: Object\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    /**\n     * @type {string}\n     * Name of the element.\n     */\n    this.name;\n  }\n\n  get name() {\n    return this.checked ? this._storedName : '';\n  }\n\n  set name(name) {\n    this._storedName = name;\n  }\n\n  ready() {\n    super.ready();\n\n    this.setAttribute('role', 'checkbox');\n\n    this._nativeCheckbox = this.shadowRoot.querySelector('input[type=\"checkbox\"]');\n\n    this.addEventListener('click', this._handleClick.bind(this));\n\n    this._addActiveListeners();\n\n    const attrName = this.getAttribute('name');\n    if (attrName) {\n      this.name = attrName;\n    }\n\n    this.shadowRoot.querySelector('[part~=\"label\"]').querySelector('slot')\n      .addEventListener('slotchange', this._updateLabelAttribute.bind(this));\n\n    this._updateLabelAttribute();\n  }\n\n  /** @private */\n  _updateLabelAttribute() {\n    const label = this.shadowRoot.querySelector('[part~=\"label\"]');\n    const assignedNodes = label.firstElementChild.assignedNodes();\n    if (this._isAssignedNodesEmpty(assignedNodes)) {\n      label.setAttribute('empty', '');\n    } else {\n      label.removeAttribute('empty');\n    }\n  }\n\n  /** @private */\n  _isAssignedNodesEmpty(nodes) {\n    // The assigned nodes considered to be empty if there is no slotted content or only one empty text node\n    return nodes.length === 0 ||\n          (nodes.length == 1\n          && nodes[0].nodeType == Node.TEXT_NODE\n          && nodes[0].textContent.trim() === '');\n  }\n\n  /** @private */\n  _checkedChanged(checked) {\n    if (this.indeterminate) {\n      this.setAttribute('aria-checked', 'mixed');\n    } else {\n      this.setAttribute('aria-checked', Boolean(checked));\n    }\n  }\n\n  /** @private */\n  _indeterminateChanged(indeterminate) {\n    if (indeterminate) {\n      this.setAttribute('aria-checked', 'mixed');\n    } else {\n      this.setAttribute('aria-checked', this.checked);\n    }\n  }\n\n  /** @private */\n  _addActiveListeners() {\n    // DOWN\n    this._addEventListenerToNode(this, 'down', (e) => {\n      if (this.__interactionsAllowed(e)) {\n        this.setAttribute('active', '');\n      }\n    });\n\n    // UP\n    this._addEventListenerToNode(this, 'up', () => this.removeAttribute('active'));\n\n    // KEYDOWN\n    this.addEventListener('keydown', e => {\n      if (this.__interactionsAllowed(e) && e.keyCode === 32) {\n        e.preventDefault();\n        this.setAttribute('active', '');\n      }\n    });\n\n    // KEYUP\n    this.addEventListener('keyup', e => {\n      if (this.__interactionsAllowed(e) && e.keyCode === 32) {\n        e.preventDefault();\n        this._toggleChecked();\n        this.removeAttribute('active');\n\n        if (this.indeterminate) {\n          this.indeterminate = false;\n        }\n      }\n    });\n  }\n\n  /**\n   * @return {!HTMLInputElement}\n   * @protected\n   */\n  get focusElement() {\n    return this.shadowRoot.querySelector('input');\n  }\n\n  /**\n   * True if users' interactions (mouse or keyboard)\n   * should toggle the checkbox\n   */\n  __interactionsAllowed(e) {\n    if (this.disabled) {\n      return false;\n    }\n\n    // https://github.com/vaadin/vaadin-checkbox/issues/63\n    if (e.target.localName === 'a') {\n      return false;\n    }\n\n    return true;\n  }\n\n  /** @private */\n  _handleClick(e) {\n    if (this.__interactionsAllowed(e)) {\n      if (!this.indeterminate) {\n        if (e.composedPath()[0] !== this._nativeCheckbox) {\n          e.preventDefault();\n          this._toggleChecked();\n        }\n      } else {\n        /*\n         * Required for IE 11 and Edge.\n         * See issue here: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7344418/\n         */\n        this.indeterminate = false;\n        e.preventDefault();\n        this._toggleChecked();\n      }\n    }\n  }\n\n  /** @protected */\n  _toggleChecked() {\n    this.checked = !this.checked;\n    this.dispatchEvent(new CustomEvent('change', {composed: false, bubbles: true}));\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n}\n\ncustomElements.define(CheckboxElement.is, CheckboxElement);\n\nexport { CheckboxElement };\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-checkbox\" theme-for=\"vaadin-checkbox\">\n  <template>\n    <style include=\"lumo-checkbox-style lumo-checkbox-effects\">\n      /* IE11 only */\n      ::-ms-backdrop,\n      [part=\"checkbox\"] {\n        line-height: 1;\n      }\n    </style>\n  </template>\n</dom-module><dom-module id=\"lumo-checkbox-style\">\n  <template>\n    <style>\n      :host {\n        -webkit-tap-highlight-color: transparent;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        cursor: default;\n        outline: none;\n      }\n\n      [part=\"label\"]:not([empty]) {\n        margin: 0.1875em 0.875em 0.1875em 0.375em;\n      }\n\n      [part=\"checkbox\"] {\n        width: calc(1em + 2px);\n        height: calc(1em + 2px);\n        margin: 0.1875em;\n        position: relative;\n        border-radius: var(--lumo-border-radius-s);\n        background-color: var(--lumo-contrast-20pct);\n        transition: transform 0.2s cubic-bezier(.12, .32, .54, 2), background-color 0.15s;\n        pointer-events: none;\n        line-height: 1.2;\n      }\n\n      :host([indeterminate]) [part=\"checkbox\"],\n      :host([checked]) [part=\"checkbox\"] {\n        background-color: var(--lumo-primary-color);\n      }\n\n      /* Needed to align the checkbox nicely on the baseline */\n      [part=\"checkbox\"]::before {\n        content: \"\\\\2003\";\n      }\n\n      /* Checkmark */\n      [part=\"checkbox\"]::after {\n        content: \"\";\n        display: inline-block;\n        width: 0;\n        height: 0;\n        border: 0 solid var(--lumo-primary-contrast-color);\n        border-width: 0.1875em 0 0 0.1875em;\n        box-sizing: border-box;\n        transform-origin: 0 0;\n        position: absolute;\n        top: 0.8125em;\n        left: 0.5em;\n        transform: scale(0.55) rotate(-135deg);\n        opacity: 0;\n      }\n\n      :host([checked]) [part=\"checkbox\"]::after {\n        opacity: 1;\n        width: 0.625em;\n        height: 1.0625em;\n      }\n\n      /* Indeterminate checkmark */\n\n      :host([indeterminate]) [part=\"checkbox\"]::after {\n        transform: none;\n        opacity: 1;\n        top: 45%;\n        height: 10%;\n        left: 22%;\n        right: 22%;\n        width: auto;\n        border: 0;\n        background-color: var(--lumo-primary-contrast-color);\n        transition: opacity 0.25s;\n      }\n\n      /* Focus ring */\n\n      :host([focus-ring]) [part=\"checkbox\"] {\n        box-shadow: 0 0 0 3px var(--lumo-primary-color-50pct);\n      }\n\n      /* Disabled */\n\n      :host([disabled]) {\n        pointer-events: none;\n        color: var(--lumo-disabled-text-color);\n      }\n\n      :host([disabled]) [part=\"label\"] ::slotted(*) {\n        color: inherit;\n      }\n\n      :host([disabled]) [part=\"checkbox\"] {\n        background-color: var(--lumo-contrast-10pct);\n      }\n\n      :host([disabled]) [part=\"checkbox\"]::after {\n        border-color: var(--lumo-contrast-30pct);\n      }\n\n      :host([indeterminate][disabled]) [part=\"checkbox\"]::after {\n        background-color: var(--lumo-contrast-30pct);\n      }\n\n      /* RTL specific styles */\n\n      :host([dir=\"rtl\"]) [part=\"label\"]:not([empty]) {\n        margin: 0.1875em 0.375em 0.1875em 0.875em;\n      }\n    </style>\n  </template>\n</dom-module><dom-module id=\"lumo-checkbox-effects\">\n  <template>\n    <style>\n      /* Transition the checkmark if activated with the mouse (disabled for grid select-all this way) */\n      :host(:hover) [part=\"checkbox\"]::after {\n        transition: width 0.1s, height 0.25s;\n      }\n\n      /* Used for activation \"halo\" */\n      [part=\"checkbox\"]::before {\n        color: transparent;\n        display: inline-block;\n        width: 100%;\n        height: 100%;\n        border-radius: inherit;\n        background-color: inherit;\n        transform: scale(1.4);\n        opacity: 0;\n        transition: transform 0.1s, opacity 0.8s;\n      }\n\n      /* Hover */\n\n      :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part=\"checkbox\"] {\n        background-color: var(--lumo-contrast-30pct);\n      }\n\n      /* Disable hover for touch devices */\n      @media (pointer: coarse) {\n        :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part=\"checkbox\"] {\n          background-color: var(--lumo-contrast-20pct);\n        }\n      }\n\n      /* Active */\n\n      :host([active]) [part=\"checkbox\"] {\n        transform: scale(0.9);\n        transition-duration: 0.05s;\n      }\n\n      :host([active][checked]) [part=\"checkbox\"] {\n        transform: scale(1.1);\n      }\n\n      :host([active]:not([checked])) [part=\"checkbox\"]::before {\n        transition-duration: 0.01s, 0.01s;\n        transform: scale(0);\n        opacity: 0.4;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport '@vaadin/vaadin-checkbox/theme/lumo/vaadin-checkbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-grid\" theme-for=\"vaadin-grid\">\n  <template>\n    <style>\n      :host {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size-m);\n        line-height: var(--lumo-line-height-s);\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n        box-sizing: border-box;\n        -webkit-text-size-adjust: 100%;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n\n        /* For internal use only */\n        --_lumo-grid-border-color: var(--lumo-contrast-20pct);\n        --_lumo-grid-secondary-border-color: var(--lumo-contrast-10pct);\n        --_lumo-grid-border-width: 1px;\n        --_lumo-grid-selected-row-color: var(--lumo-primary-color-10pct);\n      }\n\n      /* No (outer) border */\n\n      :host(:not([theme~=\"no-border\"])) {\n        border: var(--_lumo-grid-border-width) solid var(--_lumo-grid-border-color);\n      }\n\n      /* Cell styles */\n\n      [part~=\"cell\"] {\n        min-height: var(--lumo-size-m);\n        background-color: var(--lumo-base-color);\n      }\n\n      [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n        cursor: default;\n        padding: var(--lumo-space-xs) var(--lumo-space-m);\n      }\n\n      /* Apply row borders by default and introduce the \"no-row-borders\" variant */\n      :host(:not([theme~=\"no-row-borders\"])) [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n        border-top: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);\n      }\n\n      /* Hide first body row top border */\n      :host(:not([theme~=\"no-row-borders\"])) [part=\"row\"][first] [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n        border-top: 0;\n        min-height: calc(var(--lumo-size-m) - var(--_lumo-grid-border-width));\n      }\n\n      /* Focus-ring */\n\n      [part~=\"cell\"]:focus {\n        outline: none;\n      }\n\n      :host([navigating]) [part~=\"cell\"]:focus::before {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        pointer-events: none;\n        box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      /* Drag and Drop styles */\n      :host([dragover])::after {\n        content: \"\";\n        position: absolute;\n        z-index: 100;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        pointer-events: none;\n        box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      [part~=\"row\"][dragover] {\n        z-index: 100 !important;\n      }\n\n      [part~=\"row\"][dragover] [part~=\"cell\"] {\n        overflow: visible;\n      }\n\n      [part~=\"row\"][dragover] [part~=\"cell\"]::after {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        height: calc(var(--_lumo-grid-border-width) + 2px);\n        pointer-events: none;\n        background: var(--lumo-primary-color-50pct);\n      }\n\n      :host([theme~=\"no-row-borders\"]) [dragover] [part~=\"cell\"]::after {\n        height: 2px;\n      }\n\n      [part~=\"row\"][dragover=\"below\"] [part~=\"cell\"]::after {\n        top: 100%;\n        bottom: auto;\n        margin-top: -1px;\n      }\n\n      [part~=\"row\"][dragover=\"above\"] [part~=\"cell\"]::after {\n        top: auto;\n        bottom: 100%;\n        margin-bottom: -1px;\n      }\n\n      [part~=\"row\"][details-opened][dragover=\"below\"] [part~=\"cell\"]:not([part~=\"details-cell\"])::after,\n      [part~=\"row\"][details-opened][dragover=\"above\"] [part~=\"details-cell\"]::after {\n        display: none;\n      }\n\n      [part~=\"row\"][dragover][dragover=\"on-top\"] [part~=\"cell\"]::after {\n        height: 100%;\n      }\n\n      [part~=\"row\"][dragstart] {\n        /* Add bottom-space to the row so the drag number doesn't get clipped. Needed for IE/Edge */\n        border-bottom: 100px solid transparent;\n        z-index: 100 !important;\n        opacity: 0.9;\n      }\n\n      [part~=\"row\"][dragstart] [part~=\"cell\"] {\n        border: none !important;\n        box-shadow: none !important;\n      }\n\n      [part~=\"row\"][dragstart] [part~=\"cell\"][last-column] {\n        border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;\n      }\n\n      [part~=\"row\"][dragstart] [part~=\"cell\"][first-column] {\n        border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);\n      }\n\n      [ios] [part~=\"row\"][dragstart] [part~=\"cell\"] {\n        background: var(--lumo-primary-color-50pct);\n      }\n\n      #scroller:not([ios]) [part~=\"row\"][dragstart]:not([dragstart=\"\"])::after {\n        display: block;\n        position: absolute;\n        left: var(--_grid-drag-start-x);\n        top: var(--_grid-drag-start-y);\n        z-index: 100;\n        content: attr(dragstart);\n        align-items: center;\n        justify-content: center;\n        box-sizing: border-box;\n        padding: calc(var(--lumo-space-xs) * 0.8);\n        color: var(--lumo-error-contrast-color);\n        background-color: var(--lumo-error-color);\n        border-radius: var(--lumo-border-radius-m);\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size-xxs);\n        line-height: 1;\n        font-weight: 500;\n        text-transform: initial;\n        letter-spacing: initial;\n        min-width: calc(var(--lumo-size-s) * 0.7);\n        text-align: center;\n      }\n\n      /* Headers and footers */\n\n      [part~=\"header-cell\"] ::slotted(vaadin-grid-cell-content),\n      [part~=\"footer-cell\"] ::slotted(vaadin-grid-cell-content),\n      [part~=\"reorder-ghost\"] {\n        font-size: var(--lumo-font-size-s);\n        font-weight: 500;\n      }\n\n      [part~=\"footer-cell\"] ::slotted(vaadin-grid-cell-content) {\n        font-weight: 400;\n      }\n\n      [part=\"row\"]:only-child [part~=\"header-cell\"] {\n        min-height: var(--lumo-size-xl);\n      }\n\n      /* Header borders */\n\n      /* Hide first header row top border */\n      :host(:not([theme~=\"no-row-borders\"])) [part=\"row\"]:first-child [part~=\"header-cell\"] {\n        border-top: 0;\n      }\n\n      [part=\"row\"]:last-child [part~=\"header-cell\"] {\n        border-bottom: var(--_lumo-grid-border-width) solid transparent;\n      }\n\n      :host(:not([theme~=\"no-row-borders\"])) [part=\"row\"]:last-child [part~=\"header-cell\"] {\n        border-bottom-color: var(--_lumo-grid-secondary-border-color);\n      }\n\n      /* Overflow uses a stronger border color */\n      :host([overflow~=\"top\"]) [part=\"row\"]:last-child [part~=\"header-cell\"] {\n        border-bottom-color: var(--_lumo-grid-border-color);\n      }\n\n      /* Footer borders */\n\n      [part=\"row\"]:first-child [part~=\"footer-cell\"] {\n        border-top: var(--_lumo-grid-border-width) solid transparent;\n      }\n\n      :host(:not([theme~=\"no-row-borders\"])) [part=\"row\"]:first-child [part~=\"footer-cell\"] {\n        border-top-color: var(--_lumo-grid-secondary-border-color);\n      }\n\n      /* Overflow uses a stronger border color */\n      :host([overflow~=\"bottom\"]) [part=\"row\"]:first-child [part~=\"footer-cell\"] {\n        border-top-color: var(--_lumo-grid-border-color);\n      }\n\n      /* Column reordering */\n\n      :host([reordering]) [part~=\"cell\"] {\n        background: linear-gradient(var(--lumo-shade-20pct), var(--lumo-shade-20pct)) var(--lumo-base-color);\n      }\n\n      :host([reordering]) [part~=\"cell\"][reorder-status=\"allowed\"] {\n        background: var(--lumo-base-color);\n      }\n\n      :host([reordering]) [part~=\"cell\"][reorder-status=\"dragging\"] {\n        background: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct)) var(--lumo-base-color);\n      }\n\n      [part~=\"reorder-ghost\"] {\n        opacity: 0.85;\n        box-shadow: var(--lumo-box-shadow-s);\n        /* TODO Use the same styles as for the cell element (reorder-ghost copies styles from the cell element) */\n        padding: var(--lumo-space-s) var(--lumo-space-m) !important;\n      }\n\n      /* Column resizing */\n\n      [part=\"resize-handle\"] {\n        width: 3px;\n        background-color: var(--lumo-primary-color-50pct);\n        opacity: 0;\n        transition: opacity 0.2s;\n      }\n\n      :host(:not([reordering])) *:not([column-resizing]) [part~=\"cell\"]:hover [part=\"resize-handle\"],\n      [part=\"resize-handle\"]:active {\n        opacity: 1;\n        transition-delay: 0.15s;\n      }\n\n      /* Column borders */\n\n      :host([theme~=\"column-borders\"]) [part~=\"cell\"]:not([last-column]):not([part~=\"details-cell\"]) {\n        border-right: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);\n      }\n\n      /* Frozen columns */\n\n      [last-frozen] {\n        border-right: var(--_lumo-grid-border-width) solid transparent;\n        overflow: hidden;\n      }\n\n      :host([overflow~=\"left\"]) [part~=\"cell\"][last-frozen]:not([part~=\"details-cell\"]) {\n        border-right-color: var(--_lumo-grid-border-color);\n      }\n\n      /* Row stripes */\n\n      :host([theme~=\"row-stripes\"]) [part~=\"row\"]:not([odd]) [part~=\"body-cell\"],\n      :host([theme~=\"row-stripes\"]) [part~=\"row\"]:not([odd]) [part~=\"details-cell\"] {\n        background-image: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct));\n        background-repeat: repeat-x;\n      }\n\n      /* Selected row */\n\n      /* Raise the selected rows above unselected rows (so that box-shadow can cover unselected rows) */\n      :host(:not([reordering])) [part~=\"row\"][selected] {\n        z-index: 1;\n      }\n\n      :host(:not([reordering])) [part~=\"row\"][selected] [part~=\"body-cell\"]:not([part~=\"details-cell\"]) {\n        background-image: linear-gradient(var(--_lumo-grid-selected-row-color), var(--_lumo-grid-selected-row-color));\n        background-repeat: repeat;\n      }\n\n      /* Cover the border of an unselected row */\n      :host(:not([theme~=\"no-row-borders\"])) [part~=\"row\"][selected] [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n        box-shadow: 0 var(--_lumo-grid-border-width) 0 0 var(--_lumo-grid-selected-row-color);\n      }\n\n      /* Compact */\n\n      :host([theme~=\"compact\"]) [part=\"row\"]:only-child [part~=\"header-cell\"] {\n        min-height: var(--lumo-size-m);\n      }\n\n      :host([theme~=\"compact\"]) [part~=\"cell\"] {\n        min-height: var(--lumo-size-s);\n      }\n\n      :host([theme~=\"compact\"]) [part=\"row\"][first] [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n        min-height: calc(var(--lumo-size-s) - var(--_lumo-grid-border-width));\n      }\n\n      :host([theme~=\"compact\"]) [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n        padding: var(--lumo-space-xs) var(--lumo-space-s);\n      }\n\n      /* Wrap cell contents */\n\n      :host([theme~=\"wrap-cell-content\"]) [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n        white-space: normal;\n      }\n\n      /* RTL specific styles */\n\n      :host([dir=\"rtl\"]) [part~=\"row\"][dragstart] [part~=\"cell\"][last-column] {\n        border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);\n      }\n\n      :host([dir=\"rtl\"]) [part~=\"row\"][dragstart] [part~=\"cell\"][first-column] {\n        border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;\n      }\n\n      :host([dir=\"rtl\"][theme~=\"column-borders\"]) [part~=\"cell\"]:not([last-column]):not([part~=\"details-cell\"]) {\n        border-right: none;\n        border-left: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);\n      }\n\n      :host([dir=\"rtl\"]) [last-frozen] {\n        border-right: none;\n        border-left: var(--_lumo-grid-border-width) solid transparent;\n      }\n\n      :host([dir=\"rtl\"][overflow~=\"right\"]) [part~=\"cell\"][last-frozen]:not([part~=\"details-cell\"]) {\n        border-left-color: var(--_lumo-grid-border-color);\n      }\n    </style>\n  </template>\n</dom-module><dom-module theme-for=\"vaadin-checkbox\" id=\"vaadin-grid-select-all-checkbox-lumo\">\n  <template>\n    <style>\n      :host(.vaadin-grid-select-all-checkbox) {\n        font-size: var(--lumo-font-size-m);\n      }\n   </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\n\n/**\n * `Polymer.IronScrollTargetBehavior` allows an element to respond to scroll\n * events from a designated scroll target.\n *\n * Elements that consume this behavior can override the `_scrollHandler`\n * method to add logic on the scroll event.\n *\n * @demo demo/scrolling-region.html Scrolling Region\n * @demo demo/document.html Document Element\n * @polymerBehavior\n */\nexport const IronScrollTargetBehavior = {\n\n  properties: {\n\n    /**\n     * Specifies the element that will handle the scroll event\n     * on the behalf of the current element. This is typically a reference to an\n     *element, but there are a few more posibilities:\n     *\n     * ### Elements id\n     *\n     *```html\n     * <div id=\"scrollable-element\" style=\"overflow: auto;\">\n     *  <x-element scroll-target=\"scrollable-element\">\n     *    <!-- Content-->\n     *  </x-element>\n     * </div>\n     *```\n     * In this case, the `scrollTarget` will point to the outer div element.\n     *\n     * ### Document scrolling\n     *\n     * For document scrolling, you can use the reserved word `document`:\n     *\n     *```html\n     * <x-element scroll-target=\"document\">\n     *   <!-- Content -->\n     * </x-element>\n     *```\n     *\n     * ### Elements reference\n     *\n     *```js\n     * appHeader.scrollTarget = document.querySelector('#scrollable-element');\n     *```\n     *\n     * @type {HTMLElement}\n     * @default document\n     */\n    scrollTarget: {\n      type: HTMLElement,\n      value: function() {\n        return this._defaultScrollTarget;\n      }\n    }\n  },\n\n  observers: ['_scrollTargetChanged(scrollTarget, isAttached)'],\n\n  /**\n   * True if the event listener should be installed.\n   */\n  _shouldHaveListener: true,\n\n  _scrollTargetChanged: function(scrollTarget, isAttached) {\n    var eventTarget;\n\n    if (this._oldScrollTarget) {\n      this._toggleScrollListener(false, this._oldScrollTarget);\n      this._oldScrollTarget = null;\n    }\n    if (!isAttached) {\n      return;\n    }\n    // Support element id references\n    if (scrollTarget === 'document') {\n      this.scrollTarget = this._doc;\n\n    } else if (typeof scrollTarget === 'string') {\n      var domHost = this.domHost;\n\n      this.scrollTarget = domHost && domHost.$ ?\n          domHost.$[scrollTarget] :\n          dom(this.ownerDocument).querySelector('#' + scrollTarget);\n\n    } else if (this._isValidScrollTarget()) {\n      this._oldScrollTarget = scrollTarget;\n      this._toggleScrollListener(this._shouldHaveListener, scrollTarget);\n    }\n  },\n\n  /**\n   * Runs on every scroll event. Consumer of this behavior may override this\n   * method.\n   *\n   * @protected\n   */\n  _scrollHandler: function scrollHandler() {},\n\n  /**\n   * The default scroll target. Consumers of this behavior may want to customize\n   * the default scroll target.\n   *\n   * @type {Element}\n   */\n  get _defaultScrollTarget() {\n    return this._doc;\n  },\n\n  /**\n   * Shortcut for the document element\n   *\n   * @type {Element}\n   */\n  get _doc() {\n    return this.ownerDocument.documentElement;\n  },\n\n  /**\n   * Gets the number of pixels that the content of an element is scrolled\n   * upward.\n   *\n   * @type {number}\n   */\n  get _scrollTop() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.pageYOffset :\n                                               this.scrollTarget.scrollTop;\n    }\n    return 0;\n  },\n\n  /**\n   * Gets the number of pixels that the content of an element is scrolled to the\n   * left.\n   *\n   * @type {number}\n   */\n  get _scrollLeft() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.pageXOffset :\n                                               this.scrollTarget.scrollLeft;\n    }\n    return 0;\n  },\n\n  /**\n   * Sets the number of pixels that the content of an element is scrolled\n   * upward.\n   *\n   * @type {number}\n   */\n  set _scrollTop(top) {\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(window.pageXOffset, top);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollTop = top;\n    }\n  },\n\n  /**\n   * Sets the number of pixels that the content of an element is scrolled to the\n   * left.\n   *\n   * @type {number}\n   */\n  set _scrollLeft(left) {\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(left, window.pageYOffset);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollLeft = left;\n    }\n  },\n\n  /**\n   * Scrolls the content to a particular place.\n   *\n   * @method scroll\n   * @param {number|!{left: number, top: number}} leftOrOptions The left position or scroll options\n   * @param {number=} top The top position\n   * @return {void}\n   */\n  scroll: function(leftOrOptions, top) {\n    var left;\n\n    if (typeof leftOrOptions === 'object') {\n      left = leftOrOptions.left;\n      top = leftOrOptions.top;\n    } else {\n      left = leftOrOptions;\n    }\n\n    left = left || 0;\n    top = top || 0;\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(left, top);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollLeft = left;\n      this.scrollTarget.scrollTop = top;\n    }\n  },\n\n  /**\n   * Gets the width of the scroll target.\n   *\n   * @type {number}\n   */\n  get _scrollTargetWidth() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.innerWidth :\n                                               this.scrollTarget.offsetWidth;\n    }\n    return 0;\n  },\n\n  /**\n   * Gets the height of the scroll target.\n   *\n   * @type {number}\n   */\n  get _scrollTargetHeight() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.innerHeight :\n                                               this.scrollTarget.offsetHeight;\n    }\n    return 0;\n  },\n\n  /**\n   * Returns true if the scroll target is a valid HTMLElement.\n   *\n   * @return {boolean}\n   */\n  _isValidScrollTarget: function() {\n    return this.scrollTarget instanceof HTMLElement;\n  },\n\n  _toggleScrollListener: function(yes, scrollTarget) {\n    var eventTarget = scrollTarget === this._doc ? window : scrollTarget;\n    if (yes) {\n      if (!this._boundScrollHandler) {\n        this._boundScrollHandler = this._scrollHandler.bind(this);\n        eventTarget.addEventListener('scroll', this._boundScrollHandler);\n      }\n    } else {\n      if (this._boundScrollHandler) {\n        eventTarget.removeEventListener('scroll', this._boundScrollHandler);\n        this._boundScrollHandler = null;\n      }\n    }\n  },\n\n  /**\n   * Enables or disables the scroll event listener.\n   *\n   * @param {boolean} yes True to add the event, False to remove it.\n   */\n  toggleScrollListener: function(yes) {\n    this._shouldHaveListener = yes;\n    this._toggleScrollListener(yes, this.scrollTarget);\n  }\n\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/**\n\nThis is a fork of <iron-list> for <vaadin-grid>'s internal purposes only!\nTo update:\n1. Get the most recent code from https://github.com/PolymerElements/iron-list/\n2. Remove the  <dom-module id=\"iron-list\"> to avoid collisions with actual <iron-list>\n3. Change \"Polymer({\" to \"window.PolymerIronList = Polymer.Class({\" to expose the class\n3.1. Add @namespace\n4. Optional: Remove all properties and functions not needed by <vaadin-grid>\n5. Profit!\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { IronScrollTargetBehavior } from '@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js';\nimport { animationFrame, idlePeriod, microTask } from '@polymer/polymer/lib/utils/async.js';\nimport { Class } from '@polymer/polymer/lib/legacy/class.js';\nimport { flush, enqueueDebouncer } from '@polymer/polymer/lib/utils/flush.js';\nimport { flush as flush$0 } from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nvar IOS = navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/);\nvar IOS_TOUCH_SCROLLING = IOS && IOS[1] >= 8;\nvar DEFAULT_PHYSICAL_COUNT = 3;\nvar ANIMATION_FRAME = animationFrame;\nvar IDLE_TIME = idlePeriod;\nvar MICRO_TASK = microTask;\n\nexport const PolymerIronList = Class({\n\n  behaviors: [\n    IronResizableBehavior,\n    IronScrollTargetBehavior\n  ],\n\n  /**\n   * The ratio of hidden tiles that should remain in the scroll direction.\n   * Recommended value ~0.5, so it will distribute tiles evenly in both directions.\n   */\n  _ratio: 0.5,\n\n  /**\n   * The padding-top value for the list.\n   */\n  _scrollerPaddingTop: 0,\n\n  /**\n   * This value is the same as `scrollTop`.\n   */\n  _scrollPosition: 0,\n\n  /**\n   * The sum of the heights of all the tiles in the DOM.\n   */\n  _physicalSize: 0,\n\n  /**\n   * The average `offsetHeight` of the tiles observed till now.\n   */\n  _physicalAverage: 0,\n\n  /**\n   * The number of tiles which `offsetHeight` > 0 observed until now.\n   */\n  _physicalAverageCount: 0,\n\n  /**\n   * The Y position of the item rendered in the `_physicalStart`\n   * tile relative to the scrolling list.\n   */\n  _physicalTop: 0,\n\n  /**\n   * The number of items in the list.\n   */\n  _virtualCount: 0,\n\n  /**\n   * The estimated scroll height based on `_physicalAverage`\n   */\n  _estScrollHeight: 0,\n\n  /**\n   * The scroll height of the dom node\n   */\n  _scrollHeight: 0,\n\n  /**\n   * The height of the list. This is referred as the viewport in the context of list.\n   */\n  _viewportHeight: 0,\n\n  /**\n   * The width of the list. This is referred as the viewport in the context of list.\n   */\n  _viewportWidth: 0,\n\n  /**\n   * An array of DOM nodes that are currently in the tree\n   * @type {?Array<!TemplatizerNode>}\n   */\n  _physicalItems: null,\n\n  /**\n   * An array of heights for each item in `_physicalItems`\n   * @type {?Array<number>}\n   */\n  _physicalSizes: null,\n\n  /**\n   * A cached value for the first visible index.\n   * See `firstVisibleIndex`\n   * @type {?number}\n   */\n  _firstVisibleIndexVal: null,\n\n  /**\n   * A Polymer collection for the items.\n   * @type {?Polymer.Collection}\n   */\n  _collection: null,\n\n  /**\n   * A cached value for the last visible index.\n   * See `lastVisibleIndex`\n   * @type {?number}\n   */\n  _lastVisibleIndexVal: null,\n\n  /**\n   * The max number of pages to render. One page is equivalent to the height of the list.\n   */\n  _maxPages: 2,\n\n  /**\n   * The virtual index of the focused item.\n   */\n  _focusedVirtualIndex: -1,\n\n  /**\n   * The maximum items per row\n   */\n  _itemsPerRow: 1,\n\n  /**\n   * The height of the row in grid layout.\n   */\n  _rowHeight: 0,\n\n  /**\n   * The cost of stamping a template in ms.\n   */\n  _templateCost: 0,\n\n  /**\n   * The bottom of the physical content.\n   */\n  get _physicalBottom() {\n    return this._physicalTop + this._physicalSize;\n  },\n\n  /**\n   * The bottom of the scroll.\n   */\n  get _scrollBottom() {\n    return this._scrollPosition + this._viewportHeight;\n  },\n\n  /**\n   * The n-th item rendered in the last physical item.\n   */\n  get _virtualEnd() {\n    return this._virtualStart + this._physicalCount - 1;\n  },\n\n  /**\n   * The height of the physical content that isn't on the screen.\n   */\n  get _hiddenContentSize() {\n    var size = this.grid ? this._physicalRows * this._rowHeight : this._physicalSize;\n    return size - this._viewportHeight;\n  },\n\n  /**\n   * The maximum scroll top value.\n   */\n  get _maxScrollTop() {\n    return this._estScrollHeight - this._viewportHeight + this._scrollOffset;\n  },\n\n  /**\n   * The largest n-th value for an item such that it can be rendered in `_physicalStart`.\n   */\n  get _maxVirtualStart() {\n    var virtualCount = this._convertIndexToCompleteRow(this._virtualCount);\n    return Math.max(0, virtualCount - this._physicalCount);\n  },\n\n  set _virtualStart(val) {\n    val = this._clamp(val, 0, this._maxVirtualStart);\n    if (this.grid) {\n      val = val - (val % this._itemsPerRow);\n    }\n    this._virtualStartVal = val;\n  },\n\n  get _virtualStart() {\n    return this._virtualStartVal || 0;\n  },\n\n  /**\n   * The k-th tile that is at the top of the scrolling list.\n   */\n  set _physicalStart(val) {\n    val = val % this._physicalCount;\n    if (val < 0) {\n      val = this._physicalCount + val;\n    }\n    if (this.grid) {\n      val = val - (val % this._itemsPerRow);\n    }\n    this._physicalStartVal = val;\n  },\n\n  get _physicalStart() {\n    return this._physicalStartVal || 0;\n  },\n\n  /**\n   * The k-th tile that is at the bottom of the scrolling list.\n   */\n  get _physicalEnd() {\n    return (this._physicalStart + this._physicalCount - 1) % this._physicalCount;\n  },\n\n  set _physicalCount(val) {\n    this._physicalCountVal = val;\n  },\n\n  get _physicalCount() {\n    return this._physicalCountVal || 0;\n  },\n\n  /**\n   * An optimal physical size such that we will have enough physical items\n   * to fill up the viewport and recycle when the user scrolls.\n   *\n   * This default value assumes that we will at least have the equivalent\n   * to a viewport of physical items above and below the user's viewport.\n   */\n  get _optPhysicalSize() {\n    return this._viewportHeight === 0 ? Infinity : this._viewportHeight * this._maxPages;\n  },\n\n  /**\n   * True if the current list is visible.\n   */\n  get _isVisible() {\n    return Boolean(this.offsetWidth || this.offsetHeight);\n  },\n\n  /**\n   * Gets the index of the first visible item in the viewport.\n   *\n   * @type {number}\n   */\n  get firstVisibleIndex() {\n    var idx = this._firstVisibleIndexVal;\n    if (idx == null) {\n      var physicalOffset = this._physicalTop + this._scrollOffset;\n\n      idx = this._iterateItems(function(pidx, vidx) {\n        physicalOffset += this._getPhysicalSizeIncrement(pidx);\n\n        if (physicalOffset > this._scrollPosition) {\n          return this.grid ? vidx - (vidx % this._itemsPerRow) : vidx;\n        }\n        // Handle a partially rendered final row in grid mode\n        if (this.grid && this._virtualCount - 1 === vidx) {\n          return vidx - (vidx % this._itemsPerRow);\n        }\n      }) || 0;\n      this._firstVisibleIndexVal = idx;\n    }\n    return idx;\n  },\n\n  /**\n   * Gets the index of the last visible item in the viewport.\n   *\n   * @type {number}\n   */\n  get lastVisibleIndex() {\n    var idx = this._lastVisibleIndexVal;\n    if (idx == null) {\n      if (this.grid) {\n        idx = Math.min(this._virtualCount, this.firstVisibleIndex + this._estRowsInView * this._itemsPerRow - 1);\n      } else {\n        var physicalOffset = this._physicalTop + this._scrollOffset;\n        this._iterateItems(function(pidx, vidx) {\n          if (physicalOffset < this._scrollBottom) {\n            idx = vidx;\n          }\n          physicalOffset += this._getPhysicalSizeIncrement(pidx);\n        });\n      }\n      this._lastVisibleIndexVal = idx;\n    }\n    return idx;\n  },\n\n  get _scrollOffset() {\n    return this._scrollerPaddingTop;\n  },\n\n  attached: function() {\n    this._debounce('_render', this._render, ANIMATION_FRAME);\n    // `iron-resize` is fired when the list is attached if the event is added\n    // before attached causing unnecessary work.\n    this.listen(this, 'iron-resize', '_resizeHandler');\n  },\n\n  detached: function() {\n    this.unlisten(this, 'iron-resize', '_resizeHandler');\n  },\n\n  /**\n   * Invoke this method if you dynamically update the viewport's\n   * size or CSS padding.\n   *\n   * @method updateViewportBoundaries\n   */\n  updateViewportBoundaries: function() {\n    var styles = window.getComputedStyle(this);\n    this._scrollerPaddingTop = this.scrollTarget === this ? 0 : parseInt(styles['padding-top'], 10);\n    this._isRTL = Boolean(styles.direction === 'rtl');\n    this._viewportWidth = this.$.items.offsetWidth;\n    this._viewportHeight = this._scrollTargetHeight;\n    this.grid && this._updateGridMetrics();\n  },\n\n  /**\n   * Recycles the physical items when needed.\n   */\n  _scrollHandler: function() {\n    var scrollTop = Math.max(0, Math.min(this._maxScrollTop, this._scrollTop));\n    var delta = scrollTop - this._scrollPosition;\n    var isScrollingDown = delta >= 0;\n    // Track the current scroll position.\n    this._scrollPosition = scrollTop;\n    // Clear indexes for first and last visible indexes.\n    this._firstVisibleIndexVal = null;\n    this._lastVisibleIndexVal = null;\n    // Random access.\n    if (Math.abs(delta) > this._physicalSize && this._physicalSize > 0) {\n      delta = delta - this._scrollOffset;\n      var idxAdjustment = Math.round(delta / this._physicalAverage) * this._itemsPerRow;\n      this._virtualStart = this._virtualStart + idxAdjustment;\n      this._physicalStart = this._physicalStart + idxAdjustment;\n      // Estimate new physical offset.\n      this._physicalTop = Math.floor(this._virtualStart / this._itemsPerRow) * this._physicalAverage;\n      this._update();\n    } else if (this._physicalCount > 0) {\n      var reusables = this._getReusables(isScrollingDown);\n      if (isScrollingDown) {\n        this._physicalTop = reusables.physicalTop;\n        this._virtualStart = this._virtualStart + reusables.indexes.length;\n        this._physicalStart = this._physicalStart + reusables.indexes.length;\n      } else {\n        this._virtualStart = this._virtualStart - reusables.indexes.length;\n        this._physicalStart = this._physicalStart - reusables.indexes.length;\n      }\n      this._update(reusables.indexes, isScrollingDown ? null : reusables.indexes);\n      this._debounce('_increasePoolIfNeeded', this._increasePoolIfNeeded.bind(this, 0), MICRO_TASK);\n    }\n  },\n\n  /**\n   * Returns an object that contains the indexes of the physical items\n   * that might be reused and the physicalTop.\n   *\n   * @param {boolean} fromTop If the potential reusable items are above the scrolling region.\n   */\n  _getReusables: function(fromTop) {\n    var ith, offsetContent, physicalItemHeight;\n    var idxs = [];\n    var protectedOffsetContent = this._hiddenContentSize * this._ratio;\n    var virtualStart = this._virtualStart;\n    var virtualEnd = this._virtualEnd;\n    var physicalCount = this._physicalCount;\n    var top = this._physicalTop + this._scrollOffset;\n    var bottom = this._physicalBottom + this._scrollOffset;\n    var scrollTop = this._scrollTop;\n    var scrollBottom = this._scrollBottom;\n\n    if (fromTop) {\n      ith = this._physicalStart;\n      offsetContent = scrollTop - top;\n    } else {\n      ith = this._physicalEnd;\n      offsetContent = bottom - scrollBottom;\n    }\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      physicalItemHeight = this._getPhysicalSizeIncrement(ith);\n      offsetContent = offsetContent - physicalItemHeight;\n      if (idxs.length >= physicalCount || offsetContent <= protectedOffsetContent) {\n        break;\n      }\n      if (fromTop) {\n        // Check that index is within the valid range.\n        if (virtualEnd + idxs.length + 1 >= this._virtualCount) {\n          break;\n        }\n        // Check that the index is not visible.\n        if (top + physicalItemHeight >= scrollTop - this._scrollOffset) {\n          break;\n        }\n        idxs.push(ith);\n        top = top + physicalItemHeight;\n        ith = (ith + 1) % physicalCount;\n      } else {\n        // Check that index is within the valid range.\n        if (virtualStart - idxs.length <= 0) {\n          break;\n        }\n        // Check that the index is not visible.\n        if (top + this._physicalSize - physicalItemHeight <= scrollBottom) {\n          break;\n        }\n        idxs.push(ith);\n        top = top - physicalItemHeight;\n        ith = (ith === 0) ? physicalCount - 1 : ith - 1;\n      }\n    }\n    return {indexes: idxs, physicalTop: top - this._scrollOffset};\n  },\n\n  /**\n   * Update the list of items, starting from the `_virtualStart` item.\n   * @param {!Array<number>=} itemSet\n   * @param {!Array<number>=} movingUp\n   */\n  _update: function(itemSet, movingUp) {\n    if ((itemSet && itemSet.length === 0) || this._physicalCount === 0) {\n      return;\n    }\n    this._manageFocus();\n    this._assignModels(itemSet);\n    this._updateMetrics(itemSet);\n    // Adjust offset after measuring.\n    if (movingUp) {\n      while (movingUp.length) {\n        var idx = movingUp.pop();\n        this._physicalTop -= this._getPhysicalSizeIncrement(idx);\n      }\n    }\n    this._positionItems();\n    this._updateScrollerSize();\n  },\n\n  _isClientFull: function() {\n    return this._scrollBottom != 0 && this._physicalBottom - 1 >= this._scrollBottom &&\n        this._physicalTop <= this._scrollPosition;\n  },\n\n  /**\n   * Increases the pool size.\n   */\n  _increasePoolIfNeeded: function(count) {\n    var nextPhysicalCount = this._clamp(this._physicalCount + count,\n      DEFAULT_PHYSICAL_COUNT, this._virtualCount - this._virtualStart);\n    nextPhysicalCount = this._convertIndexToCompleteRow(nextPhysicalCount);\n    var delta = nextPhysicalCount - this._physicalCount;\n    var nextIncrease = Math.round(this._physicalCount * 0.5);\n\n    if (delta < 0) {\n      return;\n    }\n    if (delta > 0) {\n      var ts = window.performance.now();\n      // Concat arrays in place.\n      [].push.apply(this._physicalItems, this._createPool(delta));\n      // Push 0s into physicalSizes. Can't use Array.fill because IE11 doesn't support it.\n      for (var i = 0; i < delta; i++) {\n        this._physicalSizes.push(0);\n      }\n      this._physicalCount = this._physicalCount + delta;\n      // Update the physical start if it needs to preserve the model of the focused item.\n      // In this situation, the focused item is currently rendered and its model would\n      // have changed after increasing the pool if the physical start remained unchanged.\n      if (this._physicalStart > this._physicalEnd &&\n          this._isIndexRendered(this._focusedVirtualIndex) &&\n          this._getPhysicalIndex(this._focusedVirtualIndex) < this._physicalEnd) {\n        this._physicalStart = this._physicalStart + delta;\n      }\n      this._update();\n      this._templateCost = (window.performance.now() - ts) / delta;\n      nextIncrease = Math.round(this._physicalCount * 0.5);\n    }\n    // The upper bounds is not fixed when dealing with a grid that doesn't\n    // fill it's last row with the exact number of items per row.\n    if (this._virtualEnd >= this._virtualCount - 1 || nextIncrease === 0) {\n      // Do nothing.\n    } else if (!this._isClientFull()) {\n      this._debounce(\n        '_increasePoolIfNeeded',\n        this._increasePoolIfNeeded.bind(\n          this,\n          nextIncrease\n        ), MICRO_TASK);\n    } else if (this._physicalSize < this._optPhysicalSize) {\n      // Yield and increase the pool during idle time until the physical size is optimal.\n      this._debounce(\n        '_increasePoolIfNeeded',\n        this._increasePoolIfNeeded.bind(\n          this,\n          this._clamp(Math.round(50 / this._templateCost), 1, nextIncrease)\n        ), IDLE_TIME);\n    }\n  },\n\n  /**\n   * Renders the a new list.\n   */\n  _render: function() {\n    if (!this.isAttached || !this._isVisible) {\n      return;\n    }\n    if (this._physicalCount !== 0) {\n      var reusables = this._getReusables(true);\n      this._physicalTop = reusables.physicalTop;\n      this._virtualStart = this._virtualStart + reusables.indexes.length;\n      this._physicalStart = this._physicalStart + reusables.indexes.length;\n      this._update(reusables.indexes);\n      this._update();\n      this._increasePoolIfNeeded(0);\n    } else if (this._virtualCount > 0) {\n      // Initial render\n      this.updateViewportBoundaries();\n      this._increasePoolIfNeeded(DEFAULT_PHYSICAL_COUNT);\n    }\n  },\n\n  /**\n   * Called when the items have changed. That is, reassignments\n   * to `items`, splices or updates to a single item.\n   */\n  _itemsChanged: function(change) {\n    if (change.path === 'items') {\n      this._virtualStart = 0;\n      this._physicalTop = 0;\n      this._virtualCount = this.items ? this.items.length : 0;\n      this._collection = this.items && undefined ?\n        undefined.get(this.items) : null;\n      this._physicalIndexForKey = {};\n      this._firstVisibleIndexVal = null;\n      this._lastVisibleIndexVal = null;\n      this._physicalCount = this._physicalCount || 0;\n      this._physicalItems = this._physicalItems || [];\n      this._physicalSizes = this._physicalSizes || [];\n      this._physicalStart = 0;\n      if (this._scrollTop > this._scrollOffset) {\n        this._resetScrollPosition(0);\n      }\n      this._removeFocusedItem();\n      this._debounce('_render', this._render, ANIMATION_FRAME);\n    }\n  },\n\n  /**\n   * Executes a provided function per every physical index in `itemSet`\n   * `itemSet` default value is equivalent to the entire set of physical indexes.\n   *\n   * @param {!function(number, number)} fn\n   * @param {!Array<number>=} itemSet\n   */\n  _iterateItems: function(fn, itemSet) {\n    var pidx, vidx, rtn, i;\n\n    if (arguments.length === 2 && itemSet) {\n      for (i = 0; i < itemSet.length; i++) {\n        pidx = itemSet[i];\n        vidx = this._computeVidx(pidx);\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n    } else {\n      pidx = this._physicalStart;\n      vidx = this._virtualStart;\n      for (; pidx < this._physicalCount; pidx++, vidx++) {\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n      for (pidx = 0; pidx < this._physicalStart; pidx++, vidx++) {\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n    }\n  },\n\n  /**\n   * Returns the virtual index for a given physical index\n   *\n   * @param {number} pidx Physical index\n   * @return {number}\n   */\n  _computeVidx: function(pidx) {\n    if (pidx >= this._physicalStart) {\n      return this._virtualStart + (pidx - this._physicalStart);\n    }\n    return this._virtualStart + (this._physicalCount - this._physicalStart) + pidx;\n  },\n\n  /**\n   * Updates the height for a given set of items.\n   *\n   * @param {!Array<number>=} itemSet\n   */\n  _updateMetrics: function(itemSet) {\n    // Make sure we distributed all the physical items\n    // so we can measure them.\n    flush ? flush() : flush$0();\n\n    var newPhysicalSize = 0;\n    var oldPhysicalSize = 0;\n    var prevAvgCount = this._physicalAverageCount;\n    var prevPhysicalAvg = this._physicalAverage;\n\n    this._iterateItems(function(pidx, vidx) {\n      oldPhysicalSize += this._physicalSizes[pidx];\n      this._physicalSizes[pidx] = this._physicalItems[pidx].offsetHeight;\n      newPhysicalSize += this._physicalSizes[pidx];\n      this._physicalAverageCount += this._physicalSizes[pidx] ? 1 : 0;\n    }, itemSet);\n\n    if (this.grid) {\n      this._updateGridMetrics();\n      this._physicalSize = Math.ceil(this._physicalCount / this._itemsPerRow) * this._rowHeight;\n    } else {\n      oldPhysicalSize = (this._itemsPerRow === 1) ?\n        oldPhysicalSize :\n        Math.ceil(this._physicalCount / this._itemsPerRow) * this._rowHeight;\n      this._physicalSize = this._physicalSize + newPhysicalSize - oldPhysicalSize;\n      this._itemsPerRow = 1;\n    }\n    // Update the average if it measured something.\n    if (this._physicalAverageCount !== prevAvgCount) {\n      this._physicalAverage = Math.round(\n        ((prevPhysicalAvg * prevAvgCount) + newPhysicalSize) /\n        this._physicalAverageCount);\n    }\n  },\n\n  /**\n   * Updates the position of the physical items.\n   */\n  _positionItems: function() {\n    this._adjustScrollPosition();\n\n    var y = this._physicalTop;\n\n    this._iterateItems(function(pidx, vidx) {\n      this.translate3d(0, y + 'px', 0, this._physicalItems[pidx]);\n      y += this._physicalSizes[pidx];\n    });\n  },\n\n  _getPhysicalSizeIncrement: function(pidx) {\n    if (!this.grid) {\n      return this._physicalSizes[pidx];\n    }\n    if (this._computeVidx(pidx) % this._itemsPerRow !== this._itemsPerRow - 1) {\n      return 0;\n    }\n    return this._rowHeight;\n  },\n\n  /**\n   * Adjusts the scroll position when it was overestimated.\n   */\n  _adjustScrollPosition: function() {\n    var deltaHeight = this._virtualStart === 0 ? this._physicalTop : Math.min(this._scrollPosition + this._physicalTop, 0);\n    // Note: the delta can be positive or negative.\n    if (deltaHeight !== 0) {\n      this._physicalTop = this._physicalTop - deltaHeight;\n      var scrollTop = this._scrollTop;\n      // juking scroll position during interial scrolling on iOS is no bueno\n      if (!IOS_TOUCH_SCROLLING && scrollTop > 0) {\n        this._resetScrollPosition(scrollTop - deltaHeight);\n      }\n    }\n  },\n\n  /**\n   * Sets the position of the scroll.\n   */\n  _resetScrollPosition: function(pos) {\n    if (this.scrollTarget && pos >= 0) {\n      this._scrollTop = pos;\n      this._scrollPosition = this._scrollTop;\n    }\n  },\n\n  /**\n   * Sets the scroll height, that's the height of the content,\n   *\n   * @param {boolean=} forceUpdate If true, updates the height no matter what.\n   */\n  _updateScrollerSize: function(forceUpdate) {\n    if (this.grid) {\n      this._estScrollHeight = this._virtualRowCount * this._rowHeight;\n    } else {\n      this._estScrollHeight = (this._physicalBottom +\n          Math.max(this._virtualCount - this._physicalCount - this._virtualStart, 0) * this._physicalAverage);\n    }\n    forceUpdate = forceUpdate || this._scrollHeight === 0;\n    forceUpdate = forceUpdate || this._scrollPosition >= this._estScrollHeight - this._physicalSize;\n    forceUpdate = forceUpdate || this.grid && this.$.items.style.height < this._estScrollHeight;\n    // Amortize height adjustment, so it won't trigger large repaints too often.\n    if (forceUpdate || Math.abs(this._estScrollHeight - this._scrollHeight) >= this._viewportHeight) {\n      this.$.items.style.height = this._estScrollHeight + 'px';\n      this._scrollHeight = this._estScrollHeight;\n    }\n  },\n\n  /**\n   * Scroll to a specific index in the virtual list regardless\n   * of the physical items in the DOM tree.\n   *\n   * @method scrollToIndex\n   * @param {number} idx The index of the item\n   */\n  scrollToIndex: function(idx) {\n    if (typeof idx !== 'number' || idx < 0 || idx > this.items.length - 1) {\n      return;\n    }\n    flush ? flush() : flush$0();\n    // Items should have been rendered prior scrolling to an index.\n    if (this._physicalCount === 0) {\n      return;\n    }\n    idx = this._clamp(idx, 0, this._virtualCount - 1);\n    // Update the virtual start only when needed.\n    if (!this._isIndexRendered(idx) || idx >= this._maxVirtualStart) {\n      this._virtualStart = this.grid ? (idx - this._itemsPerRow * 2) : (idx - 1);\n    }\n    this._manageFocus();\n    this._assignModels();\n    this._updateMetrics();\n    // Estimate new physical offset.\n    this._physicalTop = Math.floor(this._virtualStart / this._itemsPerRow) * this._physicalAverage;\n\n    var currentTopItem = this._physicalStart;\n    var currentVirtualItem = this._virtualStart;\n    var targetOffsetTop = 0;\n    var hiddenContentSize = this._hiddenContentSize;\n    // scroll to the item as much as we can.\n    while (currentVirtualItem < idx && targetOffsetTop <= hiddenContentSize) {\n      targetOffsetTop = targetOffsetTop + this._getPhysicalSizeIncrement(currentTopItem);\n      currentTopItem = (currentTopItem + 1) % this._physicalCount;\n      currentVirtualItem++;\n    }\n    this._updateScrollerSize(true);\n    this._positionItems();\n    this._resetScrollPosition(this._physicalTop + this._scrollOffset + targetOffsetTop);\n    this._increasePoolIfNeeded(0);\n    // clear cached visible index.\n    this._firstVisibleIndexVal = null;\n    this._lastVisibleIndexVal = null;\n  },\n\n  /**\n   * Reset the physical average and the average count.\n   */\n  _resetAverage: function() {\n    this._physicalAverage = 0;\n    this._physicalAverageCount = 0;\n  },\n\n  /**\n   * A handler for the `iron-resize` event triggered by `IronResizableBehavior`\n   * when the element is resized.\n   */\n  _resizeHandler: function() {\n    this._debounce('_render', function() {\n      // clear cached visible index.\n      this._firstVisibleIndexVal = null;\n      this._lastVisibleIndexVal = null;\n      // Skip the resize event on touch devices when the address bar slides up.\n      this.updateViewportBoundaries();\n      if (this._isVisible) {\n        // Reinstall the scroll event listener.\n        this.toggleScrollListener(true);\n        this._resetAverage();\n        this._render();\n      } else {\n        // Uninstall the scroll event listener.\n        this.toggleScrollListener(false);\n      }\n    }, ANIMATION_FRAME);\n  },\n\n  /**\n   * Converts a random index to the index of the item that completes it's row.\n   * Allows for better order and fill computation when grid == true.\n   */\n  _convertIndexToCompleteRow: function(idx) {\n    // when grid == false _itemPerRow can be unset.\n    this._itemsPerRow = this._itemsPerRow || 1;\n    return this.grid ? Math.ceil(idx / this._itemsPerRow) * this._itemsPerRow : idx;\n  },\n\n  _isIndexRendered: function(idx) {\n    return idx >= this._virtualStart && idx <= this._virtualEnd;\n  },\n\n  _getPhysicalIndex: function(vidx) {\n    return (this._physicalStart + (vidx - this._virtualStart)) % this._physicalCount;\n  },\n\n  _clamp: function(v, min, max) {\n    return Math.min(max, Math.max(min, v));\n  },\n\n  _debounce: function(name, cb, asyncModule) {\n    this._debouncers = this._debouncers || {};\n    this._debouncers[name] = Debouncer.debounce(\n      this._debouncers[name],\n      asyncModule,\n      cb.bind(this));\n    enqueueDebouncer(this._debouncers[name]);\n  }\n\n});\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\n\nimport { animationFrame } from '@polymer/polymer/lib/utils/async.js';\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\nimport { PolymerIronList } from './iron-list.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\n/**\n * This Element is used internally by vaadin-grid.\n *\n * @private\n */\nclass GridScrollerElement extends PolymerIronList {\n\n  static get is() {\n    return 'vaadin-grid-scroller';\n  }\n\n  static get properties() {\n    return {\n      size: {\n        type: Number,\n        notify: true\n      },\n      _vidxOffset: {\n        value: 0\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_effectiveSizeChanged(_effectiveSize)'\n    ];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._scrollHandler();\n  }\n\n  /**\n  * @protected\n  */\n  _updateScrollerItem(item, index) {}\n  /**\n  * @protected\n  */\n  _afterScroll() {}\n  /**\n  * @protected\n  */\n  _getRowTarget() {}\n  /**\n  * @protected\n  */\n  _createScrollerRows() {}\n  /**\n  * @protected\n  */\n  _canPopulate() {}\n\n  /**\n  * @private\n  */\n  scrollToIndex(index) {\n    this._warnPrivateAPIAccess('scrollToIndex');\n\n    if (index > 0) {\n      this._pendingScrollToIndex = null;\n    }\n    if (!parseInt(this.$.items.style.borderTopWidth) && index > 0) {\n      // Schedule another scroll to be invoked once init is complete\n      this._pendingScrollToIndex = index;\n    }\n\n    this._scrollingToIndex = true;\n    index = Math.min(Math.max(index, 0), this._effectiveSize - 1);\n    this.$.table.scrollTop = index / this._effectiveSize * (this.$.table.scrollHeight - this.$.table.offsetHeight);\n    this._scrollHandler();\n\n    if (this._accessIronListAPI(() => this._maxScrollTop) && this._virtualCount < this._effectiveSize) {\n      this._adjustVirtualIndexOffset(1000000);\n    }\n\n    this._accessIronListAPI(() => super.scrollToIndex(index - this._vidxOffset));\n    this._scrollHandler();\n\n    // Ensure scroll position\n    const row = Array.from(this.$.items.children).filter(child => child.index === index)[0];\n    if (row) {\n      const headerOffset = row.getBoundingClientRect().top - this.$.header.getBoundingClientRect().bottom;\n      if (Math.abs(headerOffset) > 1) {\n        this.$.table.scrollTop += headerOffset;\n        this._scrollHandler();\n      }\n    }\n\n    this._scrollingToIndex = false;\n  }\n\n  _effectiveSizeChanged(size) {\n    let fvi; // first visible (adjusted) index\n    let fviOffset = 0;\n    this._iterateItems((pidx, vidx) => {\n      if (vidx === this._firstVisibleIndex) {\n        const row = this._physicalItems[pidx];\n        fvi = row.index;\n        fviOffset = row.getBoundingClientRect().top;\n      }\n    });\n\n    if (this.items && size < this.items.length) {\n      // Size was reduced, scroll to 0 first\n      this._scrollTop = 0;\n    }\n    if (!Array.isArray(this.items)) {\n      // Edge/IE seems to have the lowest maximum\n      const maxVirtualItems = this._edge || this._ie ? 30000 : 100000;\n      this.items = {length: Math.min(size, maxVirtualItems)};\n    }\n\n    this._accessIronListAPI(() => super._itemsChanged({path: 'items'}));\n\n    this._virtualCount = Math.min(this.items.length, size) || 0;\n\n    if (this._scrollTop === 0) {\n      this._accessIronListAPI(() => this._scrollToIndex(Math.min(size - 1, fvi)));\n      this._iterateItems((pidx, vidx) => {\n        const row = this._physicalItems[pidx];\n        if (row.index === fvi) {\n          this.$.table.scrollTop += Math.round(row.getBoundingClientRect().top - fviOffset);\n        }\n        // Restore keyboard focus to the right cell\n        if (row.index === this._focusedItemIndex && this._itemsFocusable && this.$.items.contains(this.shadowRoot.activeElement)) {\n          const cellIndex = Array.from(this._itemsFocusable.parentElement.children).indexOf(this._itemsFocusable);\n          row.children[cellIndex].focus();\n        }\n      });\n    }\n    this._assignModels();\n    requestAnimationFrame(() => this._update());\n  }\n\n  _positionItems() {\n    this._adjustScrollPosition();\n\n    let rePosition;\n    if (isNaN(this._physicalTop)) {\n      rePosition = true;\n      this._physicalTop = 0;\n    }\n\n    let y = this._physicalTop;\n    this._iterateItems((pidx, vidx) => {\n      this._physicalItems[pidx].style.transform = `translateY(${y}px)`;\n      y += this._physicalSizes[pidx];\n    });\n\n    if (rePosition) {\n      this._scrollToIndex(0);\n    }\n  }\n\n  _increasePoolIfNeeded(count) {\n    if ((count === 0 && this._scrollingToIndex) || !this._canPopulate() || !this._effectiveSize) {\n      return;\n    }\n\n    if (!this._initialPoolCreated) {\n      this._initialPoolCreated = true;\n      super._increasePoolIfNeeded(25);\n    } else if (this._optPhysicalSize !== Infinity) {\n      this._debounceIncreasePool = Debouncer.debounce(\n        this._debounceIncreasePool,\n        animationFrame,\n        () => {\n          this._updateMetrics();\n          const remainingPhysicalSize = this._optPhysicalSize - this._physicalSize;\n          let estimatedMissingRowCount = Math.ceil(remainingPhysicalSize / this._physicalAverage);\n\n          if (this._physicalCount + estimatedMissingRowCount > this._effectiveSize) {\n            // Do not increase the physical item count above the this._effectiveSize\n            estimatedMissingRowCount = Math.max(0, this._effectiveSize - this._physicalCount);\n          }\n\n          if (this._physicalSize && estimatedMissingRowCount > 0 && this._optPhysicalSize !== Infinity) {\n            super._increasePoolIfNeeded(estimatedMissingRowCount);\n            // Ensure the rows are in order after increasing pool\n            this.__reorderChildNodes();\n          }\n        });\n    }\n  }\n\n  __reorderChildNodes() {\n    const childNodes = Array.from(this.$.items.childNodes);\n    const rowsInOrder = !!childNodes.reduce((inOrder, current, currentIndex, array) => {\n      if (currentIndex === 0 || array[currentIndex - 1].index === current.index - 1) {\n        return inOrder;\n      }\n    }, true);\n\n    if (!rowsInOrder) {\n      childNodes.sort((row1, row2) => {\n        return row1.index - row2.index;\n      }).forEach(row => this.$.items.appendChild(row));\n    }\n  }\n\n  _createPool(size) {\n    const fragment = document.createDocumentFragment();\n    const physicalItems = this._createScrollerRows(size);\n\n    physicalItems.forEach(inst => fragment.appendChild(inst));\n    this._getRowTarget().appendChild(fragment);\n\n    // Weird hack needed to get Safari to actually distribute slots\n    const content = this.querySelector('[slot]');\n    if (content) {\n      const slot = content.getAttribute('slot');\n      content.setAttribute('slot', 'foo-bar');\n      content.setAttribute('slot', slot);\n    }\n\n    this._updateHeaderFooterMetrics();\n\n    afterNextRender(this, () => this.notifyResize());\n    return physicalItems;\n  }\n\n  /**\n   * Assigns the data models to a given set of items.\n   * @param {!Array<number>=} itemSet\n   */\n  _assignModels(itemSet) {\n    this._iterateItems((pidx, vidx) => {\n      const el = this._physicalItems[pidx];\n      this._toggleAttribute('hidden', vidx >= this._effectiveSize, el);\n      this._updateScrollerItem(el, vidx + (this._vidxOffset || 0));\n    }, itemSet);\n  }\n\n  _scrollHandler() {\n    const delta = this.$.table.scrollTop - this._scrollPosition;\n    this._accessIronListAPI(super._scrollHandler);\n    const oldOffset = this._vidxOffset;\n    if (this._accessIronListAPI(() => this._maxScrollTop) && this._virtualCount < this._effectiveSize) {\n      this._adjustVirtualIndexOffset(delta);\n    }\n    if (this._vidxOffset !== oldOffset) {\n      this._update();\n    }\n    this._afterScroll();\n  }\n\n  _adjustVirtualIndexOffset(delta) {\n    if (Math.abs(delta) > 10000) {\n      if (this._noScale) {\n        this._noScale = false;\n        return;\n      }\n      const scale = this.$.table.scrollTop / (this.$.table.scrollHeight - this.$.table.offsetHeight);\n      const offset = scale * this._effectiveSize;\n      this._vidxOffset = Math.round(offset - scale * this._virtualCount);\n    } else {\n      // Make sure user can always swipe/wheel scroll to the start and end\n      const oldOffset = this._vidxOffset || 0;\n      const threshold = 1000;\n      const maxShift = 100;\n      // At start\n      if (this._scrollTop === 0) {\n        this._vidxOffset = 0;\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(0);\n        }\n      } else if (this.firstVisibleIndex < threshold && this._vidxOffset > 0) {\n        this._vidxOffset -= Math.min(this._vidxOffset, maxShift);\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(this.firstVisibleIndex + (oldOffset - this._vidxOffset));\n        }\n        this._noScale = true;\n      }\n      // At end\n      const maxOffset = this._effectiveSize - this._virtualCount;\n      if (this._scrollTop >= this._maxScrollTop && this._maxScrollTop > 0) {\n        this._vidxOffset = maxOffset;\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(this._virtualCount);\n        }\n      } else if (this.firstVisibleIndex > this._virtualCount - threshold && this._vidxOffset < maxOffset) {\n        this._vidxOffset += Math.min(maxOffset - this._vidxOffset, maxShift);\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(this.firstVisibleIndex - (this._vidxOffset - oldOffset));\n        }\n        this._noScale = true;\n      }\n    }\n  }\n\n  _accessIronListAPI(cb) {\n    this._warnPrivateAPIAccessAsyncEnabled = false;\n    const returnValue = cb.apply(this);\n    this._debouncerWarnPrivateAPIAccess = Debouncer.debounce(\n      this._debouncerWarnPrivateAPIAccess,\n      animationFrame,\n      () => this._warnPrivateAPIAccessAsyncEnabled = true\n    );\n    return returnValue;\n  }\n\n  /* Allow iron-list to access its APIs from debounced callbacks without warns */\n  _debounceRender(cb, asyncModule) {\n    super._debounceRender(() => this._accessIronListAPI(cb), asyncModule);\n  }\n\n  /* Warn when iron-list APIs are being accessed directly */\n  _warnPrivateAPIAccess(apiName) {\n    if (this._warnPrivateAPIAccessAsyncEnabled) {\n      console.warn(`Accessing private API (${apiName})!`);\n    }\n  }\n\n  _render() {\n    this._accessIronListAPI(super._render);\n  }\n\n  _createFocusBackfillItem() { /* Ignore */ }\n  _multiSelectionChanged() { /* Ignore */ }\n  clearSelection() { /* Ignore */ }\n  _itemsChanged() { /* Ignore */ }\n  _manageFocus() { /* Ignore */ }\n  _removeFocusedItem() { /* Ignore */ }\n\n  get _firstVisibleIndex() {\n    return this._accessIronListAPI(() => super.firstVisibleIndex);\n  }\n  get _lastVisibleIndex() {\n    return this._accessIronListAPI(() => super.lastVisibleIndex);\n  }\n  _scrollToIndex(index) {\n    this._accessIronListAPI(() => this.scrollToIndex(index));\n  }\n  get firstVisibleIndex() {\n    this._warnPrivateAPIAccess('firstVisibleIndex'); return super.firstVisibleIndex;\n  }\n  set firstVisibleIndex(value) {\n    this._warnPrivateAPIAccess('firstVisibleIndex'); super.firstVisibleIndex = value;\n  }\n  get lastVisibleIndex() {\n    this._warnPrivateAPIAccess('lastVisibleIndex'); return super.lastVisibleIndex;\n  }\n  set lastVisibleIndex(value) {\n    this._warnPrivateAPIAccess('lastVisibleIndex'); super.lastVisibleIndex = value;\n  }\n  updateViewportBoundaries() {\n    this._warnPrivateAPIAccess('updateViewportBoundaries'); super.updateViewportBoundaries.apply(this, arguments);\n  }\n  _resizeHandler() {\n    super._resizeHandler();\n    flush();\n  }\n}\n\ncustomElements.define(GridScrollerElement.is, GridScrollerElement);\n\nexport { GridScrollerElement as ScrollerElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const A11yMixin = superClass => class A11yMixin extends superClass {\n  static get observers() {\n    return [\n      '_a11yUpdateGridSize(size, _columnTree, _columnTree.*)'\n    ];\n  }\n\n  _a11yGetHeaderRowCount(_columnTree) {\n    return _columnTree.filter(level => level.some(col => col._headerTemplate || col.headerRenderer || col.path || col.header)).length;\n  }\n\n  _a11yGetFooterRowCount(_columnTree) {\n    return _columnTree.filter(level => level.some(col => col._headerTemplate || col.headerRenderer)).length;\n  }\n\n  _a11yUpdateGridSize(size, _columnTree) {\n    if (size === undefined || _columnTree === undefined) {\n      return;\n    }\n\n    const bodyColumns = _columnTree[_columnTree.length - 1];\n    this.$.table.setAttribute(\n      'aria-rowcount',\n      size + this._a11yGetHeaderRowCount(_columnTree) + this._a11yGetFooterRowCount(_columnTree)\n    );\n    this.$.table.setAttribute('aria-colcount', bodyColumns && bodyColumns.length || 0);\n\n    this._a11yUpdateHeaderRows();\n    this._a11yUpdateFooterRows();\n  }\n\n  _a11yUpdateHeaderRows() {\n    Array.from(this.$.header.children).forEach((headerRow, index) =>\n      headerRow.setAttribute('aria-rowindex', index + 1)\n    );\n  }\n\n  _a11yUpdateFooterRows() {\n    Array.from(this.$.footer.children).forEach((footerRow, index) =>\n      footerRow.setAttribute(\n        'aria-rowindex',\n        this._a11yGetHeaderRowCount(this._columnTree) + this.size + index + 1\n      )\n    );\n  }\n\n  _a11yUpdateRowRowindex(row, index) {\n    row.setAttribute('aria-rowindex', index + this._a11yGetHeaderRowCount(this._columnTree) + 1);\n  }\n\n  _a11yUpdateRowSelected(row, selected) {\n    // Jaws reads selection only for rows, NVDA only for cells\n    row.setAttribute('aria-selected', Boolean(selected));\n    Array.from(row.children).forEach(cell =>\n      cell.setAttribute('aria-selected', Boolean(selected))\n    );\n  }\n\n  _a11yUpdateRowLevel(row, level) {\n    row.setAttribute('aria-level', level + 1);\n  }\n\n  _a11yUpdateRowDetailsOpened(row, detailsOpened) {\n    Array.from(row.children).forEach(cell => {\n      if (typeof detailsOpened === 'boolean') {\n        cell.setAttribute('aria-expanded', detailsOpened);\n      } else {\n        if (cell.hasAttribute('aria-expanded')) {\n          cell.removeAttribute('aria-expanded');\n        }\n      }\n    });\n  }\n\n  _a11ySetRowDetailsCell(row, detailsCell) {\n    Array.from(row.children).forEach(cell => {\n      if (cell !== detailsCell) {\n        cell.setAttribute('aria-controls', detailsCell.id);\n      }\n    });\n  }\n\n  _a11yUpdateCellColspan(cell, colspan) {\n    cell.setAttribute('aria-colspan', Number(colspan));\n  }\n\n  _a11yUpdateSorters() {\n    Array.from(this.querySelectorAll('vaadin-grid-sorter')).forEach(sorter => {\n      let cellContent = sorter.parentNode;\n      while (cellContent && cellContent.localName !== 'vaadin-grid-cell-content') {\n        cellContent = cellContent.parentNode;\n      }\n      if (cellContent && cellContent.assignedSlot) {\n        const cell = cellContent.assignedSlot.parentNode;\n        cell.setAttribute('aria-sort', {\n          'asc': 'ascending',\n          'desc': 'descending'\n        }[String(sorter.direction)] || 'none');\n      }\n    });\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const ActiveItemMixin = superClass => class ActiveItemMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * The item user has last interacted with. Turns to `null` after user deactivates\n       * the item by re-interacting with the currently active item.\n       */\n      activeItem: {\n        type: Object,\n        notify: true,\n        value: null\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n\n    this.$.scroller.addEventListener('click', this._onClick.bind(this));\n    this.addEventListener('cell-activate', this._activateItem.bind(this));\n  }\n\n  _activateItem(e) {\n    const model = e.detail.model;\n    const clickedItem = model ? model.item : null;\n\n    if (clickedItem) {\n      this.activeItem = !this._itemsEqual(this.activeItem, clickedItem) ? clickedItem : null;\n    }\n  }\n\n  // we need to listen to click instead of tap because on mobile safari, the\n  // document.activeElement has not been updated (focus has not been shifted)\n  // yet at the point when tap event is being executed.\n  _onClick(e) {\n    if (e.defaultPrevented) {\n      // Something has handled this click already, e. g., <vaadin-grid-sorter>\n      return;\n    }\n\n    const path = e.composedPath();\n    const cell = path[path.indexOf(this.$.table) - 3];\n    if (!cell || cell.getAttribute('part').indexOf('details-cell') > -1) {\n      return;\n    }\n    const cellContent = cell._content;\n\n    const activeElement = this.getRootNode().activeElement;\n    const cellContentHasFocus = cellContent.contains(activeElement) &&\n      // MSIE bug: flex children receive focus. Make type & attributes check.\n      (!this._ie || this._isFocusable(activeElement));\n    if (!cellContentHasFocus && !this._isFocusable(e.target)) {\n      this.dispatchEvent(new CustomEvent('cell-activate', {detail: {\n        model: this.__getRowModel(cell.parentElement)\n      }}));\n    }\n  }\n\n  _isFocusable(target) {\n    if (!target.parentNode) {\n      return false;\n    }\n    const focusables = Array.from(target.parentNode\n      .querySelectorAll('[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]'))\n      .filter(element => element.getAttribute('part') !== 'cell body-cell');\n\n    const isFocusableElement = focusables.indexOf(target) !== -1;\n    return !target.disabled && isFocusableElement;\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Base } from '@polymer/polymer/polymer-legacy.js';\n\n/**\n * @polymerMixin\n */\nexport const ArrayDataProviderMixin = superClass => class ArrayDataProviderMixin extends superClass {\n\n  static get properties() {\n\n    return {\n      /**\n       * An array containing the items which will be stamped to the column template\n       * instances.\n       */\n      items: Array\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_itemsChanged(items, items.*, isAttached)'\n    ];\n  }\n\n  _itemsChanged(items, splices, isAttached) {\n    if (!isAttached) {\n      return;\n    }\n    if (!Array.isArray(items)) {\n      if (items === undefined || items === null) {\n        this.size = 0;\n      }\n      if (this.dataProvider === this._arrayDataProvider) {\n        this.dataProvider = undefined;\n      }\n      return;\n    }\n\n    this.size = items.length;\n    this.dataProvider = this.dataProvider || this._arrayDataProvider;\n    this.clearCache();\n    this._ensureFirstPageLoaded();\n  }\n\n  _arrayDataProvider(opts, cb) {\n    let items = (Array.isArray(this.items) ? this.items : []).slice(0);\n\n    if (this._filters && this._checkPaths(this._filters, 'filtering', items)) {\n      items = this._filter(items);\n    }\n\n    this.size = items.length;\n\n    if (opts.sortOrders.length && this._checkPaths(this._sorters, 'sorting', items)) {\n      items = items.sort(this._multiSort.bind(this));\n    }\n\n    const start = opts.page * opts.pageSize;\n    const end = start + opts.pageSize;\n    const slice = items.slice(start, end);\n    cb(slice, items.length);\n  }\n\n  /**\n   * Check array of filters/sorters for paths validity, console.warn invalid items\n   * @param {Array}  arrayToCheck The array of filters/sorters to check\n   * @param {string} action       The name of action to include in warning (filtering, sorting)\n   * @param {Array}  items\n   */\n  _checkPaths(arrayToCheck, action, items) {\n    if (!items.length) {\n      return false;\n    }\n\n    let result = true;\n\n    for (var i in arrayToCheck) {\n      const path = arrayToCheck[i].path;\n\n      // skip simple paths\n      if (!path || path.indexOf('.') === -1) {\n        continue;\n      }\n\n      const parentProperty = path.replace(/\\.[^\\.]*$/, ''); // a.b.c -> a.b\n      if (Base.get(parentProperty, items[0]) === undefined) {\n        console.warn(`Path \"${path}\" used for ${action} does not exist in all of the items, ${action} is disabled.`);\n        result = false;\n      }\n    }\n\n    return result;\n  }\n\n  _multiSort(a, b) {\n    return this._sorters.map(sort => {\n      if (sort.direction === 'asc') {\n        return this._compare(Base.get(sort.path, a), Base.get(sort.path, b));\n      } else if (sort.direction === 'desc') {\n        return this._compare(Base.get(sort.path, b), Base.get(sort.path, a));\n      }\n      return 0;\n    }).reduce((p, n) => {\n      return p ? p : n;\n    }, 0);\n  }\n\n  _normalizeEmptyValue(value) {\n    if ([undefined, null].indexOf(value) >= 0) {\n      return '';\n    } else if (isNaN(value)) {\n      return value.toString();\n    } else {\n      return value;\n    }\n  }\n\n  _compare(a, b) {\n    a = this._normalizeEmptyValue(a);\n    b = this._normalizeEmptyValue(b);\n\n    if (a < b) {\n      return -1;\n    }\n    if (a > b) {\n      return 1;\n    }\n    return 0;\n  }\n\n  _filter(items) {\n    return items.filter((item, index) => {\n      return this._filters.filter(filter => {\n        const value = this._normalizeEmptyValue(Base.get(filter.path, item));\n        const filterValueLowercase = this._normalizeEmptyValue(filter.value).toString().toLowerCase();\n        return value.toString().toLowerCase().indexOf(filterValueLowercase) === -1;\n      }).length === 0;\n    });\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\n\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\n\n/**\n * @polymerMixin\n */\nexport const ColumnResizingMixin = superClass => class ColumnResizingMixin extends GestureEventListeners(superClass) {\n\n  ready() {\n    super.ready();\n    const scroller = this.$.scroller;\n    addListener(scroller, 'track', this._onHeaderTrack.bind(this));\n\n    // Disallow scrolling while resizing\n    scroller.addEventListener('touchmove', e => scroller.hasAttribute('column-resizing') && e.preventDefault());\n\n    // Disable contextmenu on any resize separator.\n    scroller.addEventListener('contextmenu', e => e.target.getAttribute('part') == 'resize-handle' && e.preventDefault());\n\n    // Disable native cell focus when resizing\n    scroller.addEventListener('mousedown', e => e.target.getAttribute('part') === 'resize-handle' && e.preventDefault());\n  }\n\n  _onHeaderTrack(e) {\n    const handle = e.target;\n    if (handle.getAttribute('part') === 'resize-handle') {\n      const cell = handle.parentElement;\n      let column = cell._column;\n\n      this._toggleAttribute('column-resizing', true, this.$.scroller);\n\n      // Get the target column to resize\n      while (column.localName === 'vaadin-grid-column-group') {\n        column = Array.prototype.slice.call(column._childColumns, 0)\n          .sort(function(a, b) {\n            return a._order - b._order;\n          })\n          .filter(function(column) {\n            return !column.hidden;\n          }).pop();\n      }\n\n      const columnRowCells = Array.from(this.$.header.querySelectorAll('[part~=\"row\"]:last-child [part~=\"cell\"]'));\n      var targetCell = columnRowCells.filter(cell => cell._column === column)[0];\n      // Resize the target column\n      if (targetCell.offsetWidth) {\n        var style = window.getComputedStyle(targetCell);\n        var minWidth = 10 + parseInt(style.paddingLeft) + parseInt(style.paddingRight) + parseInt(style.borderLeftWidth)\n          + parseInt(style.borderRightWidth) + parseInt(style.marginLeft) + parseInt(style.marginRight);\n        const maxWidth = targetCell.offsetWidth + (this.__isRTL ? targetCell.getBoundingClientRect().left - e.detail.x :\n          e.detail.x - targetCell.getBoundingClientRect().right);\n        column.width = Math.max(minWidth, maxWidth) + 'px';\n        column.flexGrow = 0;\n      }\n      // Fix width and flex-grow for all preceding columns\n      columnRowCells\n        .sort(\n          function(a, b) {\n            return a._column._order - b._column._order;\n          })\n        .forEach(function(cell, index, array) {\n          if (index < array.indexOf(targetCell)) {\n            cell._column.width = cell.offsetWidth + 'px';\n            cell._column.flexGrow = 0;\n          }\n        });\n\n      if (e.detail.state === 'end') {\n        this._toggleAttribute('column-resizing', false, this.$.scroller);\n        this.dispatchEvent(new CustomEvent('column-resize', {\n          detail: {resizedColumn: column}\n        }));\n      }\n\n      // Notify resize\n      this._resizeHandler();\n    }\n  }\n\n  /**\n  * Fired when a column in the grid is resized by the user.\n  *\n  * @event column-resize\n  * @param {Object} detail\n  * @param {Object} detail.resizedColumn the column that was resized\n  */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\n\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\n\nexport const ItemCache = class ItemCache {\n\n  constructor(grid, parentCache, parentItem) {\n    this.grid = grid;\n    this.parentCache = parentCache;\n    this.parentItem = parentItem;\n    this.itemCaches = {};\n    this.items = {};\n    this.effectiveSize = 0;\n    this.size = 0;\n    this.pendingRequests = {};\n  }\n\n  isLoading() {\n    return Object.keys(this.pendingRequests).length || Object.keys(this.itemCaches).filter(index => {\n      return this.itemCaches[index].isLoading();\n    })[0];\n  }\n\n  getItemForIndex(index) {\n    const {cache, scaledIndex} = this.getCacheAndIndex(index);\n    return cache.items[scaledIndex];\n  }\n\n  updateSize() {\n    this.effectiveSize = (!this.parentItem || this.grid._isExpanded(this.parentItem)) ?\n      this.size + Object.keys(this.itemCaches).reduce((prev, curr) => {\n        const subCache = this.itemCaches[curr];\n        subCache.updateSize();\n        return prev + subCache.effectiveSize;\n      }, 0) :\n      0;\n  }\n\n  ensureSubCacheForScaledIndex(scaledIndex) {\n    if (!this.itemCaches[scaledIndex]) {\n      const subCache = new ItemCache(this.grid, this, this.items[scaledIndex]);\n      this.itemCaches[scaledIndex] = subCache;\n      this.grid._loadPage(0, subCache);\n    }\n  }\n\n  getCacheAndIndex(index) {\n    let thisLevelIndex = index;\n    const keys = Object.keys(this.itemCaches);\n    for (var i = 0; i < keys.length; i++) {\n      const expandedIndex = Number(keys[i]);\n      const subCache = this.itemCaches[expandedIndex];\n      if (thisLevelIndex <= expandedIndex) {\n        return {cache: this, scaledIndex: thisLevelIndex};\n      } else if (thisLevelIndex <= expandedIndex + subCache.effectiveSize) {\n        return subCache.getCacheAndIndex(thisLevelIndex - expandedIndex - 1);\n      }\n      thisLevelIndex -= subCache.effectiveSize;\n    }\n    return {cache: this, scaledIndex: thisLevelIndex};\n  }\n\n};\n\n/**\n * @polymerMixin\n */\nexport const DataProviderMixin = superClass => class DataProviderMixin extends superClass {\n\n  static get properties() {\n    return {\n\n      /**\n       * Number of items fetched at a time from the dataprovider.\n       */\n      pageSize: {\n        type: Number,\n        value: 50,\n        observer: '_pageSizeChanged'\n      },\n\n      /**\n       * Function that provides items lazily. Receives arguments `params`, `callback`\n       *\n       * `params.page` Requested page index\n       *\n       * `params.pageSize` Current page size\n       *\n       * `params.filters` Currently applied filters\n       *\n       * `params.sortOrders` Currently applied sorting orders\n       *\n       * `params.parentItem` When tree is used, and sublevel items\n       * are requested, reference to parent item of the requested sublevel.\n       * Otherwise `undefined`.\n       *\n       * `callback(items, size)` Callback function with arguments:\n       *   - `items` Current page of items\n       *   - `size` Total number of items. When tree sublevel items\n       *     are requested, total number of items in the requested sublevel.\n       *     Optional when tree is not used, required for tree.\n       */\n      dataProvider: {\n        type: Object,\n        notify: true,\n        observer: '_dataProviderChanged'\n      },\n\n      /**\n       * `true` while data is being requested from the data provider.\n       */\n      loading: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        reflectToAttribute: true\n      },\n\n      _cache: {\n        type: Object,\n        value: function() {\n          const cache = new ItemCache(this);\n          return cache;\n        }\n      },\n\n      /**\n       * Path to an item sub-property that identifies the item.\n       */\n      itemIdPath: {\n        type: String,\n        value: null\n      },\n\n      /**\n       * An array that contains the expanded items.\n       */\n      expandedItems: {\n        type: Object,\n        notify: true,\n        value: () => []\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_sizeChanged(size)',\n      '_itemIdPathChanged(itemIdPath)',\n      '_expandedItemsChanged(expandedItems.*)'\n    ];\n  }\n\n  _sizeChanged(size) {\n    const delta = size - this._cache.size;\n    this._cache.size += delta;\n    this._cache.effectiveSize += delta;\n    this._effectiveSize = this._cache.effectiveSize;\n  }\n\n  _getItem(index, el) {\n    if (index >= this._effectiveSize) {\n      return;\n    }\n\n    el.index = index;\n    const {cache, scaledIndex} = this._cache.getCacheAndIndex(index);\n    const item = cache.items[scaledIndex];\n    if (item) {\n      this._toggleAttribute('loading', false, el);\n      this._updateItem(el, item);\n      if (this._isExpanded(item)) {\n        cache.ensureSubCacheForScaledIndex(scaledIndex);\n      }\n    } else {\n      this._toggleAttribute('loading', true, el);\n      this._loadPage(this._getPageForIndex(scaledIndex), cache);\n    }\n\n  }\n\n  _expandedInstanceChangedCallback(inst, value) {\n    if (inst.item === undefined) {\n      return;\n    }\n    if (value) {\n      this.expandItem(inst.item);\n    } else {\n      this.collapseItem(inst.item);\n    }\n  }\n\n  /**\n   * Returns a value that identifies the item. Uses `itemIdPath` if available.\n   * Can be customized by overriding.\n   */\n  getItemId(item) {\n    return this.itemIdPath ? this.get(this.itemIdPath, item) : item;\n  }\n\n  _isExpanded(item) {\n    return this.__expandedKeys.has(this.getItemId(item));\n  }\n\n  _expandedItemsChanged(e) {\n    this.__cacheExpandedKeys();\n    this._cache.updateSize();\n    this._effectiveSize = this._cache.effectiveSize;\n    this._assignModels();\n  }\n\n  _itemIdPathChanged(e) {\n    this.__cacheExpandedKeys();\n  }\n\n  __cacheExpandedKeys() {\n    if (this.expandedItems) {\n      this.__expandedKeys = new Set();\n      this.expandedItems.forEach(item => {\n        this.__expandedKeys.add(this.getItemId(item));\n      });\n    }\n  }\n\n  /**\n   * Expands the given item tree.\n   */\n  expandItem(item) {\n    if (!this._isExpanded(item)) {\n      this.push('expandedItems', item);\n    }\n  }\n\n  /**\n   * Collapses the given item tree.\n   */\n  collapseItem(item) {\n    if (this._isExpanded(item)) {\n      this.splice('expandedItems', this._getItemIndexInArray(item, this.expandedItems), 1);\n    }\n  }\n\n  _getIndexLevel(index) {\n    let {cache} = this._cache.getCacheAndIndex(index);\n    let level = 0;\n    while (cache.parentCache) {\n      cache = cache.parentCache;\n      level++;\n    }\n    return level;\n  }\n\n  _canPopulate() {\n    return this._hasData && this._columnTree;\n  }\n\n  _loadPage(page, cache) {\n    // make sure same page isn't requested multiple times.\n    if (!cache.pendingRequests[page] && this.dataProvider) {\n      this._setLoading(true);\n      cache.pendingRequests[page] = true;\n      const params = {\n        page,\n        pageSize: this.pageSize,\n        sortOrders: this._mapSorters(),\n        filters: this._mapFilters(),\n        parentItem: cache.parentItem\n      };\n\n      this.dataProvider(params, (items, size) => {\n        if (size !== undefined) {\n          cache.size = size;\n        } else {\n          if (params.parentItem) {\n            cache.size = items.length;\n          }\n        }\n\n        const currentItems = Array.from(this.$.items.children).map(row => row._item);\n\n        // Populate the cache with new items\n        items.forEach((item, itemsIndex) => {\n          const itemIndex = page * this.pageSize + itemsIndex;\n          cache.items[itemIndex] = item;\n          if (this._isExpanded(item) && currentItems.indexOf(item) > -1) {\n            // Force synchronous data request for expanded item sub-cache\n            cache.ensureSubCacheForScaledIndex(itemIndex);\n          }\n        });\n\n        this._hasData = true;\n\n        delete cache.pendingRequests[page];\n\n        this._setLoading(false);\n        this._cache.updateSize();\n        this._effectiveSize = this._cache.effectiveSize;\n\n        Array.from(this.$.items.children)\n          .filter(row => !row.hidden)\n          .forEach(row => {\n            const cachedItem = this._cache.getItemForIndex(row.index);\n            if (cachedItem) {\n              this._toggleAttribute('loading', false, row);\n              this._updateItem(row, cachedItem);\n            }\n          });\n\n        this._increasePoolIfNeeded(0);\n\n        this.__itemsReceived();\n      });\n    }\n  }\n\n  _getPageForIndex(index) {\n    return Math.floor(index / this.pageSize);\n  }\n\n  /**\n   * Clears the cached pages and reloads data from dataprovider when needed.\n   */\n  clearCache() {\n    this._cache = new ItemCache(this);\n    Array.from(this.$.items.children).forEach(row => {\n      Array.from(row.children).forEach(cell => {\n        // Force data system to pick up subproperty changes\n        cell._instance && cell._instance._setPendingProperty('item', {}, false);\n      });\n    });\n    this._cache.size = this.size || 0;\n    this._cache.updateSize();\n    this._hasData = false;\n    this._assignModels();\n\n    if (!this._effectiveSize) {\n      this._loadPage(0, this._cache);\n    }\n  }\n\n  _pageSizeChanged(pageSize, oldPageSize) {\n    if (oldPageSize !== undefined && pageSize !== oldPageSize) {\n      this.clearCache();\n    }\n  }\n\n  _checkSize() {\n    if (this.size === undefined && this._effectiveSize === 0) {\n      console.warn(\n        'The <vaadin-grid> needs the total number of items' +\n        ' in order to display rows. Set the total number of items' +\n        ' to the `size` property, or provide the total number of items' +\n        ' in the second argument of the `dataProvider`s `callback` call.'\n      );\n    }\n  }\n\n  _dataProviderChanged(dataProvider, oldDataProvider) {\n    if (oldDataProvider !== undefined) {\n      this.clearCache();\n    }\n\n    if (dataProvider && this.items && this.items.length) {\n      // Fixes possibly invalid cached lastVisibleIndex value in <iron-list>\n      this._scrollToIndex(this._firstVisibleIndex);\n    }\n\n    this._ensureFirstPageLoaded();\n\n    this._debouncerCheckSize = Debouncer.debounce(\n      this._debouncerCheckSize,\n      timeOut.after(2000),\n      this._checkSize.bind(this));\n\n    this._scrollHandler();\n  }\n\n  _ensureFirstPageLoaded() {\n    if (!this._hasData) {\n      // load data before adding rows to make sure they have content when\n      // rendered for the first time.\n      this._loadPage(0, this._cache, () => {\n        const hadData = this._hasData;\n        this._hasData = true;\n        if (!hadData) {\n          this.notifyResize();\n        }\n      });\n    }\n  }\n\n  _itemsEqual(item1, item2) {\n    return this.getItemId(item1) === this.getItemId(item2);\n  }\n\n  _getItemIndexInArray(item, array) {\n    let result = -1;\n    array.forEach((i, idx) => {\n      if (this._itemsEqual(i, item)) {\n        result = idx;\n      }\n    });\n    return result;\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { FlattenedNodesObserver } from '@polymer/polymer/lib/utils/flattened-nodes-observer.js';\n\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n/**\n * @polymerMixin\n */\nexport const DynamicColumnsMixin = superClass => class DynamicColumnsMixin extends superClass {\n\n  ready() {\n    super.ready();\n    this._addNodeObserver();\n  }\n\n  _hasColumnGroups(columns) {\n    for (let i = 0; i < columns.length; i++) {\n      if (columns[i].localName === 'vaadin-grid-column-group') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  _getChildColumns(el) {\n    return FlattenedNodesObserver.getFlattenedNodes(el).filter(this._isColumnElement);\n  }\n\n  _flattenColumnGroups(columns) {\n    return columns.map(col => {\n      if (col.localName === 'vaadin-grid-column-group') {\n        return this._getChildColumns(col);\n      } else {\n        return [col];\n      }\n    }).reduce((prev, curr) => {\n      return prev.concat(curr);\n    }, []);\n  }\n\n  _getColumnTree() {\n    var rootColumns = FlattenedNodesObserver.getFlattenedNodes(this).filter(this._isColumnElement);\n    var _columnTree = [];\n\n    for (var c = rootColumns; ;) {\n      _columnTree.push(c);\n      if (!this._hasColumnGroups(c)) {\n        break;\n      }\n      c = this._flattenColumnGroups(c);\n    }\n\n    return _columnTree;\n  }\n\n  _updateColumnTree() {\n    var columnTree = this._getColumnTree();\n    if (!this._arrayEquals(columnTree, this._columnTree)) {\n      this._columnTree = columnTree;\n    }\n  }\n\n  _addNodeObserver() {\n    this._observer = new FlattenedNodesObserver(this, info => {\n\n      const rowDetailsTemplate = info.addedNodes.filter(n => n.localName === 'template' && n.classList.contains('row-details'))[0];\n      if (rowDetailsTemplate && this._rowDetailsTemplate !== rowDetailsTemplate) {\n        this._rowDetailsTemplate = rowDetailsTemplate;\n      }\n\n      if (info.addedNodes.filter(this._isColumnElement).length > 0 ||\n        info.removedNodes.filter(this._isColumnElement).length > 0) {\n        this._updateColumnTree();\n      }\n\n      this._debouncerCheckImports = Debouncer.debounce(\n        this._debouncerCheckImports,\n        timeOut.after(2000),\n        this._checkImports.bind(this));\n\n      this._ensureFirstPageLoaded();\n    });\n  }\n\n  _arrayEquals(arr1, arr2) {\n    if (!arr1 || !arr2 || arr1.length != arr2.length) {\n      return false;\n    }\n\n    for (var i = 0, l = arr1.length; i < l; i++) {\n      // Check if we have nested arrays\n      if (arr1[i] instanceof Array && arr2[i] instanceof Array) {\n        // recurse into the nested arrays\n        if (!this._arrayEquals(arr1[i], arr2[i])) {\n          return false;\n        }\n      } else if (arr1[i] != arr2[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  _checkImports() {\n    [\n      'vaadin-grid-column-group',\n      'vaadin-grid-filter',\n      'vaadin-grid-filter-column',\n      'vaadin-grid-tree-toggle',\n      'vaadin-grid-selection-column',\n      'vaadin-grid-sort-column',\n      'vaadin-grid-sorter'\n    ].forEach(elementName => {\n      var element = this.querySelector(elementName);\n      if (element && !(element instanceof PolymerElement)) {\n        console.warn(`Make sure you have imported the required module for <${elementName}> element.`);\n      }\n    });\n  }\n\n  _updateFirstAndLastColumn() {\n    Array.from(this.shadowRoot.querySelectorAll('tr')).forEach(row => this._updateFirstAndLastColumnForRow(row));\n  }\n\n  _updateFirstAndLastColumnForRow(row) {\n    Array.from(row.querySelectorAll('[part~=\"cell\"]:not([part~=\"details-cell\"])'))\n      .sort((a, b) => {\n        return a._column._order - b._column._order;\n      }).forEach((cell, cellIndex, children) => {\n        this._toggleAttribute('first-column', cellIndex === 0, cell);\n        this._toggleAttribute('last-column', cellIndex === children.length - 1, cell);\n      });\n  }\n\n  _isColumnElement(node) {\n    return node.nodeType === Node.ELEMENT_NODE && /\\bcolumn\\b/.test(node.localName);\n  }\n};\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const EventContextMixin = superClass => class EventContextMixin extends superClass {\n\n  /**\n   * Returns an object with context information about the event target:\n   * - `item`: the data object corresponding to the targeted row (not specified when targeting header or footer)\n   * - `column`: the column element corresponding to the targeted cell (not specified when targeting row details)\n   * - `section`: whether the event targeted the body, header, footer or details of the grid\n   *\n   * These additional properties are included when `item` is specified:\n   * - `index`: the index of the item\n   * - `selected`: the selected state of the item\n   * - `detailsOpened`: whether the row details are open for the item\n   * - `expanded`: the expanded state of the tree toggle\n   * - `level`: the tree hierarchy level\n   *\n   * The returned object is populated only when a grid cell, header, footer or row details is found in `event.composedPath()`.\n   * This means mostly mouse and keyboard events. If such a grid part is not found in the path, an empty object is returned.\n   * This may be the case eg. if the event is fired on the `<vaadin-grid>` element and not any deeper in the DOM, or if\n   * the event targets the empty part of the grid body.\n   */\n  getEventContext(event) {\n\n    const context = {};\n\n    const path = event.composedPath();\n    const cell = path[path.indexOf(this.$.table) - 3];\n\n    if (!cell) {\n      return context;\n    }\n\n    context.section = ['body', 'header', 'footer', 'details']\n      .filter(section => cell.getAttribute('part').indexOf(section) > -1)[0];\n\n    if (cell._column) {\n      context.column = cell._column;\n    }\n\n    if (context.section === 'body' || context.section === 'details') {\n      Object.assign(context, this.__getRowModel(cell.parentElement));\n    }\n\n    return context;\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const FilterMixin = superClass => class FilterMixin extends superClass {\n\n  static get properties() {\n    return {\n      _filters: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('filter-changed', this._filterChanged.bind(this));\n  }\n\n  _filterChanged(e) {\n    if (this._filters.indexOf(e.target) === -1) {\n      this._filters.push(e.target);\n    }\n\n    e.stopPropagation();\n\n    if (this.dataProvider) {\n      this.clearCache();\n    }\n  }\n\n  _mapFilters() {\n    return this._filters.map(filter => {\n      return {\n        path: filter.path,\n        value: filter.value\n      };\n    });\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Templatizer } from './vaadin-grid-templatizer.js';\n\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\n\n/**\n * @polymerMixin\n */\nexport const RowDetailsMixin = superClass => class RowDetailsMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * An array containing references to items with open row details.\n       */\n      detailsOpenedItems: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      _rowDetailsTemplate: Object,\n\n      /**\n       * Custom function for rendering the content of the row details.\n       * Receives three arguments:\n       *\n       * - `root` The row details content DOM element. Append your content to it.\n       * - `grid` The `<vaadin-grid>` element.\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       */\n      rowDetailsRenderer: Function,\n\n      _detailsCells: {\n        type: Array,\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_detailsOpenedItemsChanged(detailsOpenedItems.*, _rowDetailsTemplate, rowDetailsRenderer)',\n      '_rowDetailsTemplateOrRendererChanged(_rowDetailsTemplate, rowDetailsRenderer)'\n    ];\n  }\n\n  _rowDetailsTemplateOrRendererChanged(rowDetailsTemplate, rowDetailsRenderer) {\n    if (rowDetailsTemplate && rowDetailsRenderer) {\n      throw new Error('You should only use either a renderer or a template for row details');\n    }\n    if (rowDetailsTemplate || rowDetailsRenderer) {\n      if (rowDetailsTemplate && !rowDetailsTemplate.templatizer) {\n        var templatizer = new Templatizer();\n        templatizer._grid = this;\n        templatizer.dataHost = this.dataHost;\n        templatizer.template = rowDetailsTemplate;\n        rowDetailsTemplate.templatizer = templatizer;\n      }\n\n      if (this._columnTree) {\n        // Only update the rows if the column tree has already been initialized\n        Array.from(this.$.items.children).forEach(row => {\n          if (!row.querySelector('[part~=details-cell]')) {\n            this._updateRow(row, this._columnTree[this._columnTree.length - 1]);\n            this._a11yUpdateRowDetailsOpened(row, false);\n          }\n          // Clear any old template instances\n          delete row.querySelector('[part~=details-cell]')._instance;\n        });\n      }\n\n      if (this.detailsOpenedItems.length) {\n        Array.from(this.$.items.children).forEach(this._toggleDetailsCell, this);\n        this._update();\n      }\n    }\n  }\n\n  _detailsOpenedItemsChanged(changeRecord, rowDetailsTemplate, rowDetailsRenderer) {\n    if (changeRecord.path === 'detailsOpenedItems.length' || !changeRecord.value) {\n      // Lets avoid duplicate work of both .splices and .length updates.\n      return;\n    }\n    Array.from(this.$.items.children).forEach(row => {\n      this._toggleDetailsCell(row, row._item);\n      this._a11yUpdateRowDetailsOpened(row, this._isDetailsOpened(row._item));\n      this._toggleAttribute('details-opened', this._isDetailsOpened(row._item), row);\n    });\n  }\n\n  _configureDetailsCell(cell) {\n    cell.setAttribute('part', 'cell details-cell');\n    // Freeze the details cell, so that it does not scroll horizontally\n    // with the normal cells. This way it looks less weird.\n    this._toggleAttribute('frozen', true, cell);\n  }\n\n  _toggleDetailsCell(row, item) {\n    const cell = row.querySelector('[part~=\"details-cell\"]');\n    if (!cell) {\n      return;\n    }\n    const detailsHidden = !this._isDetailsOpened(item);\n    const hiddenChanged = !!cell.hidden !== detailsHidden;\n\n    if (!cell._instance && !cell._renderer || cell.hidden !== detailsHidden) {\n      cell.hidden = detailsHidden;\n      if (detailsHidden) {\n        row.style.removeProperty('padding-bottom');\n      } else {\n        if (this.rowDetailsRenderer) {\n          cell._renderer = this.rowDetailsRenderer;\n          cell._renderer.call(this, cell._content, this, {index: row.index, item: item});\n        } else if (this._rowDetailsTemplate && !cell._instance) {\n          // Stamp the template\n          cell._instance = this._rowDetailsTemplate.templatizer.createInstance();\n          cell._content.innerHTML = '';\n          cell._content.appendChild(cell._instance.root);\n          this._updateItem(row, item);\n        }\n\n        flush();\n        row.style.setProperty('padding-bottom', `${cell.offsetHeight}px`);\n\n        requestAnimationFrame(() => this.notifyResize());\n      }\n    }\n    if (hiddenChanged) {\n      this._updateMetrics();\n      this._positionItems();\n    }\n  }\n\n  _updateDetailsCellHeights() {\n    Array.from(this.$.items.querySelectorAll('[part~=\"details-cell\"]:not([hidden])')).forEach(cell => {\n      cell.parentElement.style.setProperty('padding-bottom', `${cell.offsetHeight}px`);\n    });\n  }\n\n  _isDetailsOpened(item) {\n    return this.detailsOpenedItems && this._getItemIndexInArray(item, this.detailsOpenedItems) !== -1;\n  }\n\n  /**\n   * Open the details row of a given item.\n   */\n  openItemDetails(item) {\n    if (!this._isDetailsOpened(item)) {\n      this.push('detailsOpenedItems', item);\n    }\n  }\n\n  /**\n   * Close the details row of a given item.\n   */\n  closeItemDetails(item) {\n    if (this._isDetailsOpened(item)) {\n      this.splice('detailsOpenedItems', this._getItemIndexInArray(item, this.detailsOpenedItems), 1);\n    }\n  }\n\n  _detailsOpenedInstanceChangedCallback(instance, value) {\n    if (super._detailsOpenedInstanceChangedCallback) {\n      super._detailsOpenedInstanceChangedCallback(instance, value);\n    }\n    if (value) {\n      this.openItemDetails(instance.item);\n    } else {\n      this.closeItemDetails(instance.item);\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\n\nimport { timeOut, animationFrame, microTask } from '@polymer/polymer/lib/utils/async.js';\n\n/**\n * @polymerMixin\n */\nexport const ScrollMixin = superClass => class ScrollMixin extends superClass {\n\n  get _timeouts() {\n    return {\n      SCROLL_PERIOD: 1000,\n      WHEEL_SCROLLING: 200,\n      SCROLLING: 100,\n      IGNORE_WHEEL: 500\n    };\n  }\n\n  static get properties() {\n    return {\n\n      // Cached array of frozen cells\n      _frozenCells: {\n        type: Array,\n        value: function() {\n          return [];\n        },\n      },\n\n      _scrollbarWidth: {\n        type: Number,\n        value: function() {\n          // Create the measurement node\n          var scrollDiv = document.createElement('div');\n          scrollDiv.style.width = '100px';\n          scrollDiv.style.height = '100px';\n          scrollDiv.style.overflow = 'scroll';\n          scrollDiv.style.position = 'absolute';\n          scrollDiv.style.top = '-9999px';\n          document.body.appendChild(scrollDiv);\n          // Get the scrollbar width\n          var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n          // Delete the DIV\n          document.body.removeChild(scrollDiv);\n          return scrollbarWidth;\n        }\n      },\n\n      _rowWithFocusedElement: Element,\n\n      _deltaYAcc: {\n        type: Number,\n        value: 0\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_scrollHeightUpdated(_estScrollHeight)',\n      '_scrollViewportHeightUpdated(_viewportHeight)'\n    ];\n  }\n\n  // Override (from iron-scroll-target-behavior) to avoid document scroll\n  set _scrollTop(top) {\n    this.$.table.scrollTop = top;\n  }\n\n  get _scrollTop() {\n    return this.$.table.scrollTop;\n  }\n\n  constructor() {\n    super();\n    this._scrollLineHeight = this._getScrollLineHeight();\n  }\n\n  /**\n   * @returns {Number|undefined} - The browser's default font-size in pixels\n   */\n  _getScrollLineHeight() {\n    const el = document.createElement('div');\n    el.style.fontSize = 'initial';\n    el.style.display = 'none';\n    document.body.appendChild(el);\n    const fontSize = window.getComputedStyle(el).fontSize;\n    document.body.removeChild(el);\n    return fontSize ? window.parseInt(fontSize) : undefined;\n  }\n\n  _scrollViewportHeightUpdated(_viewportHeight) {\n    this._scrollPageHeight = _viewportHeight - this.$.header.clientHeight - this.$.footer.clientHeight - this._scrollLineHeight;\n  }\n\n  ready() {\n    super.ready();\n    this.scrollTarget = this.$.table;\n\n    this.addEventListener('wheel', e => {\n      this._wheelScrolling = true;\n      this._debouncerWheelScrolling = Debouncer.debounce(\n        this._debouncerWheelScrolling,\n        timeOut.after(this._timeouts.WHEEL_SCROLLING),\n        () => this._wheelScrolling = false\n      );\n      this._onWheel(e);\n    });\n\n    this.$.table.addEventListener('scroll', e => {\n      if (this.$.outerscroller.outerScrolling) {\n        e.stopImmediatePropagation();\n      }\n    }, true);\n\n    this.$.items.addEventListener('focusin', (e) => {\n      const itemsIndex = e.composedPath().indexOf(this.$.items);\n      this._rowWithFocusedElement = e.composedPath()[itemsIndex - 1];\n    });\n    this.$.items.addEventListener('focusout', () => this._rowWithFocusedElement = undefined);\n  }\n\n  /**\n   * Scroll to a specific row index in the virtual list. Note that the row index is\n   * not always the same for any particular item. For example, sorting/filtering/expanding\n   * or collapsing hierarchical items can affect the row index related to an item.\n   *\n   * @param {number} index Row index to scroll to\n   */\n  scrollToIndex(index) {\n    this._accessIronListAPI(() => super.scrollToIndex(index));\n  }\n\n  _onWheel(e) {\n    if (e.ctrlKey || this._hasScrolledAncestor(e.target, e.deltaX, e.deltaY)) {\n      return;\n    }\n\n    const table = this.$.table;\n\n    let deltaY = e.deltaY;\n    if (e.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n      // Scrolling by \"lines of text\" instead of pixels\n      deltaY *= this._scrollLineHeight;\n    } else if (e.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n      // Scrolling by \"pages\" instead of pixels\n      deltaY *= this._scrollPageHeight;\n    }\n\n    if (this._wheelAnimationFrame) {\n      // Skip new wheel events while one is being processed\n      this._deltaYAcc += deltaY;\n      e.preventDefault();\n      return;\n    }\n\n    deltaY += this._deltaYAcc;\n    this._deltaYAcc = 0;\n\n    this._wheelAnimationFrame = true;\n    this._debouncerWheelAnimationFrame = Debouncer.debounce(\n      this._debouncerWheelAnimationFrame,\n      animationFrame,\n      () => this._wheelAnimationFrame = false\n    );\n\n    var momentum = Math.abs(e.deltaX) + Math.abs(deltaY);\n\n    if (this._canScroll(table, e.deltaX, deltaY)) {\n      e.preventDefault();\n      table.scrollTop += deltaY;\n      table.scrollLeft += e.deltaX;\n      this._scrollHandler();\n      this._hasResidualMomentum = true;\n\n      this._ignoreNewWheel = true;\n      this._debouncerIgnoreNewWheel = Debouncer.debounce(\n        this._debouncerIgnoreNewWheel,\n        timeOut.after(this._timeouts.IGNORE_WHEEL),\n        () => this._ignoreNewWheel = false\n      );\n    } else if (this._hasResidualMomentum && momentum <= this._previousMomentum || this._ignoreNewWheel) {\n      e.preventDefault();\n    } else if (momentum > this._previousMomentum) {\n      this._hasResidualMomentum = false;\n    }\n    this._previousMomentum = momentum;\n  }\n\n  /**\n   * Determines if the element has an ancestor prior to this\n   * cell content that handles the scroll delta\n   */\n  _hasScrolledAncestor(el, deltaX, deltaY) {\n    if (el.localName === 'vaadin-grid-cell-content') {\n      return false;\n    } else if (this._canScroll(el, deltaX, deltaY)\n      && ['auto', 'scroll'].indexOf(getComputedStyle(el).overflow) !== -1) {\n      return true;\n    } else if (el !== this && el.parentElement) {\n      return this._hasScrolledAncestor(el.parentElement, deltaX, deltaY);\n    }\n  }\n\n  /**\n   * Determines if the the given scroll deltas can be applied to the element\n   * (fully or partially)\n   */\n  _canScroll(el, deltaX, deltaY) {\n    return (deltaY > 0 && el.scrollTop < el.scrollHeight - el.offsetHeight) ||\n    (deltaY < 0 && el.scrollTop > 0) ||\n    (deltaX > 0 && el.scrollLeft < el.scrollWidth - el.offsetWidth) ||\n    (deltaX < 0 && el.scrollLeft > 0);\n  }\n\n  _scheduleScrolling() {\n    if (!this._scrollingFrame) {\n      // Defer setting state attributes to avoid Edge hiccups\n      this._scrollingFrame = requestAnimationFrame(() => this._toggleAttribute('scrolling', true, this.$.scroller));\n    }\n    this._debounceScrolling = Debouncer.debounce(\n      this._debounceScrolling,\n      timeOut.after(this._timeouts.SCROLLING),\n      () => {\n        cancelAnimationFrame(this._scrollingFrame);\n        delete this._scrollingFrame;\n        this._toggleAttribute('scrolling', false, this.$.scroller);\n        if (!this.$.outerscroller.outerScrolling) {\n          this._reorderRows();\n        }\n      }\n    );\n\n    if (!this._scrollPeriodFrame) {\n      this._scrollPeriodFrame = requestAnimationFrame(() => this._toggleAttribute('scroll-period', true, this.$.scroller));\n    }\n    this._debounceScrollPeriod = Debouncer.debounce(\n      this._debounceScrollPeriod,\n      timeOut.after(this._timeouts.SCROLL_PERIOD),\n      () => {\n        cancelAnimationFrame(this._scrollPeriodFrame);\n        delete this._scrollPeriodFrame;\n        this._toggleAttribute('scroll-period', false, this.$.scroller);\n      }\n    );\n  }\n\n  _afterScroll() {\n    this._translateStationaryElements();\n\n    if (!this.hasAttribute('reordering')) {\n      this._scheduleScrolling();\n    }\n\n    const os = this.$.outerscroller;\n    if (!this._ios && (this._wheelScrolling || os.passthrough)) {\n      os.syncOuterScroller();\n    }\n\n    if (this._ios) {\n      // Enable vertical rubberband feedback\n      const overScroll = Math.max(-os.scrollTop, 0) ||\n        Math.min(0, os.scrollHeight - os.scrollTop - os.offsetHeight);\n      this.$.items.style.transform = `translateY(${overScroll}px)`;\n    }\n\n    this._updateOverflow();\n  }\n\n  _updateOverflow() {\n    // Set overflow styling attributes\n    let overflow = '';\n    const table = this.$.table;\n    if (table.scrollTop < table.scrollHeight - table.clientHeight) {\n      overflow += ' bottom';\n    }\n\n    if (table.scrollTop > 0) {\n      overflow += ' top';\n    }\n\n    if (table.scrollLeft < table.scrollWidth - table.clientWidth) {\n      overflow += ' right';\n    }\n\n    if (table.scrollLeft > 0) {\n      overflow += ' left';\n    }\n\n    this._debounceOverflow = Debouncer.debounce(\n      this._debounceOverflow,\n      animationFrame,\n      () => {\n        const value = overflow.trim();\n        if (value.length > 0 && this.getAttribute('overflow') !== value) {\n          this.setAttribute('overflow', value);\n        } else if (value.length == 0 && this.hasAttribute('overflow')) {\n          this.removeAttribute('overflow');\n        }\n      }\n    );\n  }\n\n  // correct order needed for preserving correct tab order between cell contents.\n  _reorderRows() {\n    const body = this.$.items;\n    const items = body.querySelectorAll('tr');\n    if (!items.length) {\n      return;\n    }\n\n    const adjustedVirtualStart = this._virtualStart + this._vidxOffset;\n\n    // Which row to use as a target?\n    const targetRow = this._rowWithFocusedElement || Array.from(items).filter(row => !row.hidden)[0];\n    if (!targetRow) {\n      // All rows are hidden, don't reorder\n      return;\n    }\n\n    // Where the target row should be?\n    const targetPhysicalIndex = targetRow.index - adjustedVirtualStart;\n\n    // Reodrer the DOM elements to keep the target row at the target physical index\n    const delta = Array.from(items).indexOf(targetRow) - targetPhysicalIndex;\n    if (delta > 0) {\n      for (let i = 0; i < delta; i++) {\n        body.appendChild(items[i]);\n      }\n    } else if (delta < 0) {\n      for (let i = items.length + delta; i < items.length; i++) {\n        body.insertBefore(items[i], items[0]);\n      }\n    }\n  }\n\n  _frozenCellsChanged() {\n    this._debouncerCacheElements = Debouncer.debounce(\n      this._debouncerCacheElements,\n      microTask,\n      () => {\n        Array.from(this.root.querySelectorAll('[part~=\"cell\"]')).forEach(function(cell) {\n          cell.style.transform = '';\n        });\n        this._frozenCells = Array.prototype.slice.call(this.$.table.querySelectorAll('[frozen]'));\n        this._updateScrollerMeasurements();\n        this._translateStationaryElements();\n      }\n    );\n    this._updateLastFrozen();\n  }\n\n  _updateScrollerMeasurements() {\n    if (this._frozenCells.length > 0 && this.__isRTL) {\n      this.__scrollerMetrics = {\n        scrollWidth: this.$.outerscroller.scrollWidth,\n        clientWidth: this.$.outerscroller.clientWidth\n      };\n    }\n  }\n\n  _updateLastFrozen() {\n    if (!this._columnTree) {\n      return;\n    }\n\n    const columnsRow = this._columnTree[this._columnTree.length - 1].slice(0);\n    columnsRow.sort((a, b) => {\n      return a._order - b._order;\n    });\n    const lastFrozen = columnsRow.reduce((prev, col, index) => {\n      col._lastFrozen = false;\n      return col.frozen && !col.hidden ? index : prev;\n    }, undefined);\n    if (lastFrozen !== undefined) {\n      columnsRow[lastFrozen]._lastFrozen = true;\n    }\n  }\n\n  _translateStationaryElements() {\n    if (this._edge && !this._scrollbarWidth) {\n      // Fixed mode (Tablet Edge)\n      this.$.items.style.transform =\n      this._getTranslate(-this._scrollLeft || 0, -this._scrollTop || 0);\n\n      this.$.footer.style.transform = this.$.header.style.transform =\n      this._getTranslate(-this._scrollLeft || 0, 0);\n    } else {\n      this.$.footer.style.transform = this.$.header.style.transform = this._getTranslate(0, this._scrollTop);\n    }\n\n    if (this._frozenCells.length > 0) {\n      const x = this.__isRTL ?\n        this.__getNormalizedScrollLeft(this.$.table) + this.__scrollerMetrics.clientWidth -\n        this.__scrollerMetrics.scrollWidth\n        : this._scrollLeft;\n      var frozenCellTransform = this._getTranslate(x, 0);\n      for (var i = 0; i < this._frozenCells.length; i++) {\n        this._frozenCells[i].style.transform = frozenCellTransform;\n      }\n    }\n  }\n\n  _getTranslate(x, y) {\n    return 'translate(' + x + 'px,' + y + 'px)';\n  }\n\n  _scrollHeightUpdated(_estScrollHeight) {\n    this.$.outersizer.style.top = this.$.fixedsizer.style.top = _estScrollHeight + 'px';\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const SelectionMixin = superClass => class SelectionMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * An array that contains the selected items.\n       */\n      selectedItems: {\n        type: Object,\n        notify: true,\n        value: () => []\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_selectedItemsChanged(selectedItems.*)'\n    ];\n  }\n\n  _isSelected(item) {\n    return this.selectedItems && this._getItemIndexInArray(item, this.selectedItems) > -1;\n  }\n\n  /**\n   * Selects the given item.\n   *\n   * @method selectItem\n   * @param {Object} item The item object\n   */\n  selectItem(item) {\n    if (!this._isSelected(item)) {\n      this.push('selectedItems', item);\n    }\n  }\n\n  /**\n   * Deselects the given item if it is already selected.\n   *\n   * @method deselect\n   * @param {Object} item The item object\n   */\n  deselectItem(item) {\n    const index = this._getItemIndexInArray(item, this.selectedItems);\n    if (index > -1) {\n      this.splice('selectedItems', index, 1);\n    }\n  }\n\n  /**\n   * Toggles the selected state of the given item.\n   *\n   * @method toggle\n   * @param {Object} item The item object\n   */\n  _toggleItem(item) {\n    const index = this._getItemIndexInArray(item, this.selectedItems);\n    if (index === -1) {\n      this.selectItem(item);\n    } else {\n      this.deselectItem(item);\n    }\n  }\n\n  _selectedItemsChanged(e) {\n    if (this.$.items.children.length && (e.path === 'selectedItems' || e.path === 'selectedItems.splices')) {\n      Array.from(this.$.items.children).forEach(row => {\n        this._updateItem(row, row._item);\n      });\n    }\n  }\n\n  _selectedInstanceChangedCallback(instance, value) {\n    if (super._selectedInstanceChangedCallback) {\n      super._selectedInstanceChangedCallback(instance, value);\n    }\n    if (value) {\n      this.selectItem(instance.item);\n    } else {\n      this.deselectItem(instance.item);\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { microTask } from '@polymer/polymer/lib/utils/async.js';\n\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n/**\n * @polymerMixin\n */\nexport const SortMixin = superClass => class SortMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * When `true`, all `<vaadin-grid-sorter>` are applied for sorting.\n       */\n      multiSort: {\n        type: Boolean,\n        value: false\n      },\n\n      _sorters: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      _previousSorters: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('sorter-changed', this._onSorterChanged);\n\n    // With Polymer 2 & shady the 'sorter-changed' listener isn't guaranteed to be registered\n    // before child <vaadin-grid-sorter>'s upgrade and fire the events. The following\n    // makes sure that 'sorter-changed' is fired for all <vaadin-grid-sorter> elements\n    // after this (<vaadin-grid>) is ready (and the listeners are active).\n    if (window.ShadyDOM) {\n      microTask.run(() => {\n        const sorters = this.querySelectorAll('vaadin-grid-sorter');\n        Array.from(sorters).forEach((sorter) => {\n          // Don't try to fire if the sorter hasn't been upgraded yet\n          if (sorter instanceof PolymerElement) {\n            sorter.dispatchEvent(new CustomEvent('sorter-changed', {bubbles: true, composed: true}));\n          }\n        });\n      });\n    }\n  }\n\n  _onSorterChanged(e) {\n    const sorter = e.target;\n\n    this._removeArrayItem(this._sorters, sorter);\n    sorter._order = null;\n\n    if (this.multiSort) {\n      if (sorter.direction) {\n        this._sorters.unshift(sorter);\n      }\n\n      this._sorters.forEach((sorter, index) => sorter._order = this._sorters.length > 1 ? index : null, this);\n    } else {\n      if (sorter.direction) {\n        this._sorters.forEach(sorter => {\n          sorter._order = null;\n          sorter.direction = null;\n        });\n        this._sorters = [sorter];\n      }\n    }\n\n    e.stopPropagation();\n\n    if (this.dataProvider &&\n      // No need to clear cache if sorters didn't change\n      JSON.stringify(this._previousSorters) !== JSON.stringify(this._mapSorters())) {\n      this.clearCache();\n    }\n\n    this._a11yUpdateSorters();\n\n    this._previousSorters = this._mapSorters();\n  }\n\n  _mapSorters() {\n    return this._sorters.map(sorter => {\n      return {\n        path: sorter.path,\n        direction: sorter.direction\n      };\n    });\n  }\n\n  _removeArrayItem(array, item) {\n    const index = array.indexOf(item);\n    if (index > -1) {\n      array.splice(index, 1);\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const StylingMixin = superClass => class StylingMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * A function that allows generating CSS class names for grid cells\n       * based on their row and column. The return value should be the generated\n       * class name as a string, or multiple class names separated by whitespace\n       * characters.\n       *\n       * Receives two arguments:\n       * - `column` The `<vaadin-grid-column>` element (`undefined` for details-cell).\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       *   - `rowData.expanded` Sublevel toggle state.\n       *   - `rowData.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `rowData.selected` Selected state.\n       */\n      cellClassNameGenerator: Function\n    };\n  }\n\n  static get observers() {\n    return [\n      '__cellClassNameGeneratorChanged(cellClassNameGenerator)'\n    ];\n  }\n\n  __cellClassNameGeneratorChanged(cellClassGenerator) {\n    this.generateCellClassNames();\n  }\n\n  /**\n   * Runs the `cellClassNameGenerator` for the visible cells.\n   * If the generator depends on varying conditions, you need to\n   * call this function manually in order to update the styles when\n   * the conditions change.\n   */\n  generateCellClassNames() {\n    Array.from(this.$.items.children).filter(row => !row.hidden).forEach(\n      row => this._generateCellClassNames(row, this.__getRowModel(row)));\n  }\n\n  _generateCellClassNames(row, rowData) {\n    Array.from(row.children).forEach(cell => {\n      if (cell.__generatedClasses) {\n        cell.__generatedClasses.forEach(className => cell.classList.remove(className));\n      }\n      if (this.cellClassNameGenerator) {\n        const result = this.cellClassNameGenerator(cell._column, rowData);\n        cell.__generatedClasses = result && result.split(' ').filter(className => className.length > 0);\n        if (cell.__generatedClasses) {\n          cell.__generatedClasses.forEach(className => cell.classList.add(className));\n        }\n      }\n    });\n  }\n};\n","/**\n@license\nCopyright (c) 2019 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nconst DropMode = {\n  BETWEEN: 'between',\n  ON_TOP: 'on-top',\n  ON_TOP_OR_BETWEEN: 'on-top-or-between',\n  ON_GRID: 'on-grid'\n};\n\nconst DropLocation = {\n  ON_TOP: 'on-top',\n  ABOVE: 'above',\n  BELOW: 'below',\n  EMPTY: 'empty'\n};\n\n/**\n * @polymerMixin\n */\nexport const DragAndDropMixin = superClass => class DragAndDropMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * Defines the locations within the Grid row where an element can be dropped.\n       *\n       * Possible values are:\n       * - `between`: The drop event can happen between Grid rows.\n       * - `on-top`: The drop event can happen on top of Grid rows.\n       * - `on-top-or-between`: The drop event can happen either on top of or between Grid rows.\n       * - `on-grid`: The drop event will not happen on any specific row, it will show the drop target outline around the whole grid.\n       */\n      dropMode: String,\n\n      /**\n       * Marks the grid's rows to be available for dragging.\n       */\n      rowsDraggable: Boolean,\n\n      /**\n       * A function that filters dragging of specific grid rows. The return value should be false\n       * if dragging of the row should be disabled.\n       *\n       * Receives one argument:\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       *   - `rowData.expanded` Sublevel toggle state.\n       *   - `rowData.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `rowData.selected` Selected state.\n       */\n      dragFilter: Function,\n\n      /**\n       * A function that filters dropping on specific grid rows. The return value should be false\n       * if dropping on the row should be disabled.\n       *\n       * Receives one argument:\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       *   - `rowData.expanded` Sublevel toggle state.\n       *   - `rowData.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `rowData.selected` Selected state.\n       */\n      dropFilter: Function,\n\n      __dndAutoScrollThreshold: {\n        value: 50\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    this.$.table.addEventListener('dragstart', this._onDragStart.bind(this));\n    this.$.table.addEventListener('dragend', this._onDragEnd.bind(this));\n    this.$.table.addEventListener('dragover', this._onDragOver.bind(this));\n    this.$.table.addEventListener('dragleave', this._onDragLeave.bind(this));\n    this.$.table.addEventListener('drop', this._onDrop.bind(this));\n    this.$.table.addEventListener('dragenter', e => {\n      if (this.dropMode) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    });\n\n  }\n\n  _onDragStart(e) {\n    if (this.rowsDraggable) {\n      let row = e.target;\n      if (row.localName === 'vaadin-grid-cell-content') {\n        // The draggable node is the cell content element on browsers that support native shadow\n        row = row.assignedSlot.parentNode.parentNode;\n      }\n      if (row.parentNode !== this.$.items) {\n        return;\n      }\n\n      e.stopPropagation();\n      this._toggleAttribute('dragging-rows', true, this);\n\n      if (this._safari) {\n        // Safari doesn't get proper drag images from transformed\n        // elements so we need to switch to top temporarily\n        const transform = row.style.transform;\n        row.style.top = /translateY\\((.*)\\)/.exec(transform)[1];\n        row.style.transform = 'none';\n        requestAnimationFrame(() => {\n          row.style.top = '';\n          row.style.transform = transform;\n        });\n      }\n\n      const rowRect = row.getBoundingClientRect();\n      if (!window.ShadyDOM) {\n        if (this._ios) {\n          e.dataTransfer.setDragImage(row);\n        } else {\n          e.dataTransfer.setDragImage(row, e.clientX - rowRect.left, e.clientY - rowRect.top);\n        }\n\n      }\n\n      let rows = [row];\n      if (this._isSelected(row._item)) {\n        rows = this.__getViewportRows()\n          .filter(row => this._isSelected(row._item))\n          .filter(row => !this.dragFilter || this.dragFilter(this.__getRowModel(row)));\n      }\n\n      // Set the default transfer data\n      e.dataTransfer.setData('text', this.__formatDefaultTransferData(rows));\n\n      row.setAttribute('dragstart', rows.length > 1 ? rows.length : '');\n      this.updateStyles({\n        '--_grid-drag-start-x': `${e.clientX - rowRect.left + 20}px`,\n        '--_grid-drag-start-y': `${e.clientY - rowRect.top + 10}px`\n      });\n\n      requestAnimationFrame(() => {\n        row.removeAttribute('dragstart');\n        this.updateStyles({'--_grid-drag-start-x': '', '--_grid-drag-start-y': ''});\n      });\n\n      const event = new CustomEvent('grid-dragstart', {\n        detail: {\n          draggedItems: rows.map(row => row._item),\n          setDragData: (type, data) => e.dataTransfer.setData(type, data),\n          setDraggedItemsCount: count => row.setAttribute('dragstart', count)\n        }\n      });\n      event.originalEvent = e;\n      this.dispatchEvent(event);\n    }\n  }\n\n  _onDragEnd(e) {\n    this._toggleAttribute('dragging-rows', false, this);\n    e.stopPropagation();\n    const event = new CustomEvent('grid-dragend');\n    event.originalEvent = e;\n    this.dispatchEvent(event);\n  }\n\n  _onDragLeave(e) {\n    e.stopPropagation();\n    this._clearDragStyles();\n  }\n\n  _onDragOver(e) {\n\n    if (this.dropMode) {\n      this._dropLocation = undefined;\n      this._dragOverItem = undefined;\n\n      if (this.__dndAutoScroll(e.clientY)) {\n        this._clearDragStyles();\n        return;\n      }\n\n      let row = e.composedPath().filter(node => node.localName === 'tr')[0];\n\n      if (!this._effectiveSize || this.dropMode === DropMode.ON_GRID) {\n        // The grid is empty or \"on-grid\" drop mode was used, always default to \"empty\"\n        this._dropLocation = DropLocation.EMPTY;\n      } else if (!row || row.parentNode !== this.$.items) {\n        // The dragover didn't occur on a body row but the grid has items\n        if (row) {\n          // The dragover occurred over a header/footer row\n          return;\n        } else if (this.dropMode === DropMode.BETWEEN || this.dropMode === DropMode.ON_TOP_OR_BETWEEN) {\n          // The drop mode allows setting the last row as the drag over item\n          row = Array.from(this.$.items.children).filter(row => !row.hidden).pop();\n          this._dropLocation = DropLocation.BELOW;\n        } else {\n          // Drop mode on-top used but the dragover didn't occur over one of the existing rows\n          return;\n        }\n      } else {\n        // The dragover occurred on a body row, determine the drop location from coordinates\n        const rowRect = row.getBoundingClientRect();\n\n        this._dropLocation = DropLocation.ON_TOP;\n\n        if (this.dropMode === DropMode.BETWEEN) {\n          const dropAbove = e.clientY - rowRect.top < rowRect.bottom - e.clientY;\n          this._dropLocation = dropAbove ? DropLocation.ABOVE : DropLocation.BELOW;\n\n        } else if (this.dropMode === DropMode.ON_TOP_OR_BETWEEN) {\n          if (e.clientY - rowRect.top < rowRect.height / 3) {\n            this._dropLocation = DropLocation.ABOVE;\n          } else if (e.clientY - rowRect.top > (rowRect.height / 3) * 2) {\n            this._dropLocation = DropLocation.BELOW;\n          }\n        }\n      }\n\n      if (row && row.hasAttribute('drop-disabled')) {\n        this._dropLocation = undefined;\n        return;\n      }\n\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (this._dropLocation === DropLocation.EMPTY) {\n        this._toggleAttribute('dragover', true, this);\n      } else if (row) {\n        this._dragOverItem = row._item;\n        if (row.getAttribute('dragover') !== this._dropLocation) {\n          row.setAttribute('dragover', this._dropLocation);\n        }\n      } else {\n        this._clearDragStyles();\n      }\n    }\n  }\n\n  __dndAutoScroll(clientY) {\n    if (this.__dndAutoScrolling) {\n      return true;\n    }\n\n    const headerBottom = this.$.header.getBoundingClientRect().bottom;\n    const footerTop = this.$.footer.getBoundingClientRect().top;\n    const topDiff = headerBottom - clientY + this.__dndAutoScrollThreshold;\n    const bottomDiff = clientY - footerTop + this.__dndAutoScrollThreshold;\n    let scrollTopDelta = 0;\n\n    if (bottomDiff > 0) {\n      scrollTopDelta = bottomDiff * 2;\n    } else if (topDiff > 0) {\n      scrollTopDelta = -topDiff * 2;\n    }\n\n    if (scrollTopDelta) {\n      const scrollTop = this.$.table.scrollTop;\n      this.$.table.scrollTop += scrollTopDelta;\n      const scrollTopChanged = scrollTop !== this.$.table.scrollTop;\n      if (scrollTopChanged) {\n        this.__dndAutoScrolling = true;\n        // Disallow more auto-scrolls within 20ms\n        setTimeout(() => this.__dndAutoScrolling = false, 20);\n        this._scrollHandler();\n        return true;\n      }\n    }\n  }\n\n  __getViewportRows() {\n    const headerBottom = this.$.header.getBoundingClientRect().bottom;\n    const footerTop = this.$.footer.getBoundingClientRect().top;\n    return Array.from(this.$.items.children)\n      .filter(row => {\n        const rowRect = row.getBoundingClientRect();\n        return rowRect.bottom > headerBottom && rowRect.top < footerTop;\n      });\n  }\n\n  _clearDragStyles() {\n    this.removeAttribute('dragover');\n    Array.from(this.$.items.children).forEach(row => row.removeAttribute('dragover'));\n  }\n\n  _onDrop(e) {\n    if (this.dropMode) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const dragData = e.dataTransfer.types && Array.from(e.dataTransfer.types).map(type => {\n        return {\n          type,\n          data: e.dataTransfer.getData(type)\n        };\n      });\n\n      this._clearDragStyles();\n\n      const event = new CustomEvent('grid-drop', {\n        bubbles: e.bubbles,\n        cancelable: e.cancelable,\n        detail: {\n          dropTargetItem: this._dragOverItem,\n          dropLocation: this._dropLocation,\n          dragData\n        }\n      });\n      event.originalEvent = e;\n      this.dispatchEvent(event);\n    }\n  }\n\n  __formatDefaultTransferData(rows) {\n    return rows\n      .map(row => {\n        return Array.from(row.children)\n          .filter(cell => !cell.hidden && cell.getAttribute('part').indexOf('details-cell') === -1)\n          .sort((a, b) => {\n            return a._column._order > b._column._order ? 1 : -1;\n          })\n          .map(cell => cell._content.textContent.trim())\n          .filter(content => content)\n          .join('\\t');\n      })\n      .join('\\n');\n  }\n\n  _dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter) {\n    this.filterDragAndDrop();\n  }\n\n  /**\n   * Runs the `dragFilter` and `dropFilter` hooks for the visible cells.\n   * If the filter depends on varying conditions, you may need to\n   * call this function manually in order to update the draggability when\n   * the conditions change.\n   */\n  filterDragAndDrop() {\n    Array.from(this.$.items.children).filter(row => !row.hidden).forEach(\n      row => {\n        this._filterDragAndDrop(row, this.__getRowModel(row));\n      }\n    );\n  }\n\n  _filterDragAndDrop(row, rowData) {\n    const dragDisabled = !this.rowsDraggable || (this.dragFilter && !this.dragFilter(rowData));\n    const dropDisabled = !this.dropMode || (this.dropFilter && !this.dropFilter(rowData));\n\n    const draggableElements = window.ShadyDOM\n      ? [row]\n      : Array.from(row.children).map(cell => cell._content);\n\n    draggableElements.forEach(e => {\n      if (dragDisabled) {\n        e.removeAttribute('draggable');\n      } else {\n        e.setAttribute('draggable', true);\n      }\n    });\n\n    this._toggleAttribute('drag-disabled', dragDisabled, row);\n    this._toggleAttribute('drop-disabled', dropDisabled, row);\n  }\n\n  /**\n   * Fired when starting to drag grid rows.\n   *\n   * @event grid-dragstart\n   * @param {Object} originalEvent The native dragstart event\n   * @param {Object} detail\n   * @param {Object} detail.draggedItems the items in the visible viewport that are dragged\n   * @param {Function} detail.setDraggedItemsCount Overrides the default number shown in the drag image on multi row drag.\n   * Parameter is of type number.\n   * @param {Function} detail.setDragData Sets dataTransfer data for the drag operation.\n   * Note that \"text\" is the only data type supported by all the browsers the grid currently supports (including IE11).\n   * The function takes two parameters:\n   * - type:string The type of the data\n   * - data:string The data\n   */\n\n  /**\n   * Fired when the dragging of the rows ends.\n   *\n   * @event grid-dragend\n   * @param {Object} originalEvent The native dragend event\n   */\n\n  /**\n   * Fired when a drop occurs on top of the grid.\n   *\n   * @event grid-drop\n   * @param {Object} originalEvent The native drop event\n   * @param {Object} detail\n   * @param {Object} detail.dropTargetItem The item of the grid row on which the drop occurred.\n   * @param {string} detail.dropLocation The position at which the drop event took place relative to a row.\n   * Depending on the dropMode value, the drop location can be one of the following\n   * - `on-top`: when the drop occurred on top of the row\n   * - `above`: when the drop occurred above the row\n   * - `below`: when the drop occurred below the row\n   * - `empty`: when the drop occurred over the grid, not relative to any specific row\n   * @param {string} detail.dragData An array of items with the payload as a string representation as the\n   * `data` property and the type of the data as `type` property.\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const KeyboardNavigationMixin = superClass => class KeyboardNavigationMixin extends superClass {\n  static get properties() {\n    return {\n      _headerFocusable: {\n        type: Object,\n        observer: '_focusableChanged'\n      },\n      _itemsFocusable: {\n        type: Object,\n        observer: '_focusableChanged'\n      },\n      _footerFocusable: {\n        type: Object,\n        observer: '_focusableChanged'\n      },\n      _navigatingIsHidden: Boolean,\n      _focusedItemIndex: {\n        type: Number,\n        value: 0\n      },\n      _focusedColumnOrder: Number\n    };\n  }\n\n  ready() {\n    super.ready();\n\n    if (this._ios || this._android) {\n      // Disable keyboard navigation on mobile devices\n      return;\n    }\n\n    this.addEventListener('keydown', this._onKeyDown);\n    this.addEventListener('keyup', this._onKeyUp);\n\n    this.addEventListener('focusin', this._onFocusIn);\n    this.addEventListener('focusout', this._onFocusOut);\n\n    // When focus goes from cell to another cell, focusin/focusout events do\n    // not escape the grids shadowRoot, thus listening inside the shadowRoot.\n    this.$.table.addEventListener('focusin', this._onCellFocusIn.bind(this));\n    this.$.table.addEventListener('focusout', this._onCellFocusOut.bind(this));\n\n    this.addEventListener('mousedown', () => {\n      this._toggleAttribute('navigating', false, this);\n      this._isMousedown = true;\n    });\n    this.addEventListener('mouseup', () => this._isMousedown = false);\n  }\n\n  _focusableChanged(focusable, oldFocusable) {\n    if (oldFocusable) {\n      oldFocusable.setAttribute('tabindex', '-1');\n    }\n    if (focusable) {\n      focusable.setAttribute('tabindex', '0');\n    }\n  }\n\n  _onKeyDown(e) {\n    // Ensure standard key value, unified across browsers\n    let key = e.key;\n    if (key === 'Up' || key === 'Down' || key === 'Left' || key === 'Right') {\n      // MSIE & Edge\n      key = 'Arrow' + key;\n    }\n    if (key === 'Esc') {\n      // MSIE & Edge\n      key = 'Escape';\n    }\n    if (key === 'Spacebar') {\n      // MSIE\n      key = ' ';\n    }\n\n    let keyGroup;\n    switch (key) {\n      case 'ArrowUp':\n      case 'ArrowDown':\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'PageUp':\n      case 'PageDown':\n      case 'Home':\n      case 'End':\n        keyGroup = 'Navigation';\n        break;\n      case 'Enter':\n      case 'Escape':\n      case 'F2':\n        keyGroup = 'Interaction';\n        break;\n      case 'Tab':\n        keyGroup = 'Tab';\n        break;\n      case ' ':\n        keyGroup = 'Space';\n        break;\n    }\n\n    this._detectInteracting(e);\n    if (this.hasAttribute('interacting') && keyGroup !== 'Interaction') {\n      // When in the interacting mode, only the Interaction keys are handled.\n      keyGroup = undefined;\n    }\n\n    if (keyGroup) {\n      this[`_on${keyGroup}KeyDown`](e, key);\n    }\n  }\n\n  _ensureScrolledToIndex(index) {\n    const targetRowInDom = Array.from(this.$.items.children).filter(child => child.index === index)[0];\n    if (!targetRowInDom) {\n      this._scrollToIndex(index);\n    }\n  }\n\n  _onNavigationKeyDown(e, key) {\n    e.preventDefault();\n\n    function indexOfChildElement(el) {\n      return Array.prototype.indexOf.call(el.parentNode.children, el);\n    }\n\n    const visibleItemsCount = this._lastVisibleIndex - this._firstVisibleIndex - 1;\n\n    let dx = 0, dy = 0;\n    switch (key) {\n      case 'ArrowRight':\n        dx = this.__isRTL ? -1 : 1;\n        break;\n      case 'ArrowLeft':\n        dx = this.__isRTL ? 1 : -1;\n        break;\n      case 'Home':\n        dx = -Infinity;\n        e.ctrlKey && (dy = -Infinity);\n        break;\n      case 'End':\n        dx = Infinity;\n        e.ctrlKey && (dy = Infinity);\n        break;\n      case 'ArrowDown':\n        dy = 1;\n        break;\n      case 'ArrowUp':\n        dy = -1;\n        break;\n      case 'PageDown':\n        dy = visibleItemsCount;\n        break;\n      case 'PageUp':\n        dy = -visibleItemsCount;\n        break;\n    }\n\n    const activeCell = e.composedPath()[0];\n    const columnIndex = indexOfChildElement(activeCell);\n    const isRowDetails = this._elementMatches(activeCell, '[part~=\"details-cell\"]');\n\n    const activeRow = activeCell.parentNode;\n\n    const activeRowGroup = activeRow.parentNode;\n    const maxRowIndex = (activeRowGroup === this.$.items ? this._effectiveSize : activeRowGroup.children.length) - 1;\n\n    // Body rows have index property, otherwise DOM child index of the row is used.\n    const rowIndex = (activeRowGroup === this.$.items) ?\n      (this._focusedItemIndex !== undefined ? this._focusedItemIndex : activeRow.index) :\n      indexOfChildElement(activeRow);\n\n    // Index of the destination row\n    let dstRowIndex = Math.max(0, Math.min(rowIndex + dy, maxRowIndex));\n\n    // Row details navigation logic\n    let dstIsRowDetails = false;\n    if (activeRowGroup === this.$.items) {\n      const item = activeRow._item;\n      const dstItem = this._cache.getItemForIndex(dstRowIndex);\n      // Should we navigate to row details?\n      if (isRowDetails) {\n        dstIsRowDetails = dy === 0;\n      } else {\n        dstIsRowDetails = dy === 1 && this._isDetailsOpened(item) ||\n          dy === -1 && dstRowIndex !== rowIndex && this._isDetailsOpened(dstItem);\n      }\n      // Should we navigate between details and regular cells of the same row?\n      if (dstIsRowDetails !== isRowDetails &&\n          (dy === 1 && dstIsRowDetails || dy === -1 && !dstIsRowDetails)) {\n        dstRowIndex = rowIndex;\n      }\n    }\n\n    // Header and footer could have hidden rows, e. g., if none of the columns\n    // or groups on the given column tree level define template. Skip them\n    // in vertical keyboard navigation.\n    if (activeRowGroup !== this.$.items) {\n      if (dstRowIndex > rowIndex) {\n        while (\n          dstRowIndex < maxRowIndex &&\n          activeRowGroup.children[dstRowIndex].hidden\n        ) {\n          dstRowIndex++;\n        }\n      } else if (dstRowIndex < rowIndex) {\n        while (\n          dstRowIndex > 0 &&\n          activeRowGroup.children[dstRowIndex].hidden\n        ) {\n          dstRowIndex--;\n        }\n      }\n    }\n\n    // _focusedColumnOrder is memoized  this is to ensure predictable\n    // navigation when entering and leaving detail and column group cells.\n    if (this._focusedColumnOrder === undefined) {\n      if (isRowDetails) {\n        this._focusedColumnOrder = 0;\n      } else {\n        this._focusedColumnOrder = this._getColumns(activeRowGroup, rowIndex).filter(c => !c.hidden)[columnIndex]._order;\n      }\n    }\n\n    // Find orderedColumnIndex  the index of order closest matching the\n    // original _focusedColumnOrder in the sorted array of orders\n    // of the visible columns on the destination row.\n    const dstColumns = this._getColumns(activeRowGroup, dstRowIndex).filter(c => !c.hidden);\n    const dstSortedColumnOrders = dstColumns.map(c => c._order)\n      .sort((b, a) => (b - a));\n    const maxOrderedColumnIndex = dstSortedColumnOrders.length - 1;\n    const orderedColumnIndex = dstSortedColumnOrders.indexOf(\n      dstSortedColumnOrders.slice(0).sort((b, a) =>\n        Math.abs(b - this._focusedColumnOrder) - Math.abs(a - this._focusedColumnOrder)\n      )[0]\n    );\n\n    // Index of the destination column order\n    const dstOrderedColumnIndex = (dy === 0 && isRowDetails) ? orderedColumnIndex :\n      Math.max(0, Math.min(orderedColumnIndex + dx, maxOrderedColumnIndex));\n\n    if (dstOrderedColumnIndex !== orderedColumnIndex) {\n      // Horizontal movement invalidates stored _focusedColumnOrder\n      this._focusedColumnOrder = undefined;\n    }\n\n    // Ensure correct vertical scroll position, destination row is visible\n    if (activeRowGroup === this.$.items) {\n      this._ensureScrolledToIndex(dstRowIndex);\n    }\n\n    // This has to be set after scrolling, otherwise it can be removed by\n    // `_preventScrollerRotatingCellFocus(item, index)` during scrolling.\n    this._toggleAttribute('navigating', true, this);\n\n    const columnIndexByOrder = dstColumns.reduce((acc, col, i) => (acc[col._order] = i, acc), {});\n    const dstColumnIndex = columnIndexByOrder[dstSortedColumnOrders[dstOrderedColumnIndex]];\n\n    // For body rows, use index property to find destination row, otherwise use DOM child index\n    const dstRow = activeRowGroup === this.$.items ?\n      Array.from(activeRowGroup.children).filter(el => el.index === dstRowIndex)[0] :\n      activeRowGroup.children[dstRowIndex];\n    if (!dstRow) {\n      return;\n    }\n\n    // Here we go!\n    const dstCell = dstIsRowDetails ?\n      Array.from(dstRow.children)\n        .filter(el => this._elementMatches(el, '[part~=\"details-cell\"]'))[0] :\n      dstRow.children[dstColumnIndex];\n    this._scrollHorizontallyToCell(dstCell);\n    if (activeRowGroup === this.$.items) {\n      // When scrolling with repeated keydown, sometimes FocusEvent listeners\n      // are too late to update _focusedItemIndex. Ensure next keydown\n      // listener invocation gets updated _focusedItemIndex value.\n      this._focusedItemIndex = dstRowIndex;\n    }\n\n    if (activeRowGroup === this.$.items) {\n      const dstRect = dstCell.getBoundingClientRect();\n      const footerTop = this.$.footer.getBoundingClientRect().top;\n      const headerBottom = this.$.header.getBoundingClientRect().bottom;\n      if (dstRect.bottom > footerTop) {\n        this.$.table.scrollTop += dstRect.bottom - footerTop;\n        this._scrollHandler();\n      } else if (dstRect.top < headerBottom) {\n        this.$.table.scrollTop -= headerBottom - dstRect.top;\n        this._scrollHandler();\n      }\n    }\n\n    dstCell.focus();\n  }\n\n  _parseEventPath(path) {\n    const tableIndex = path.indexOf(this.$.table);\n    return {\n      rowGroup: path[tableIndex - 1],\n      row: path[tableIndex - 2],\n      cell: path[tableIndex - 3]\n    };\n  }\n\n  _onInteractionKeyDown(e, key) {\n    const localTarget = e.composedPath()[0];\n    const localTargetIsTextInput = localTarget.localName === 'input' &&\n      !/^(button|checkbox|color|file|image|radio|range|reset|submit)$/i.test(localTarget.type);\n\n    let wantInteracting;\n    switch (key) {\n      case 'Enter':\n        wantInteracting = this.hasAttribute('interacting') ? !localTargetIsTextInput : true;\n        break;\n      case 'Escape':\n        wantInteracting = false;\n        break;\n      case 'F2':\n        wantInteracting = !this.hasAttribute('interacting');\n        break;\n    }\n\n    const {cell} = this._parseEventPath(e.composedPath());\n\n    if (this.hasAttribute('interacting') !== wantInteracting) {\n      if (wantInteracting) {\n        const focusTarget = cell._content.querySelector('[focus-target]') ||\n          cell._content.firstElementChild;\n        if (focusTarget) {\n          e.preventDefault();\n          focusTarget.focus();\n          this._toggleAttribute('interacting', true, this);\n          this._toggleAttribute('navigating', false, this);\n        }\n      } else {\n        e.preventDefault();\n        this._focusedColumnOrder = undefined;\n        cell.focus();\n        this._toggleAttribute('interacting', false, this);\n        this._toggleAttribute('navigating', true, this);\n      }\n    }\n  }\n\n  _predictFocusStepTarget(srcElement, step) {\n    const tabOrder = [\n      this.$.table,\n      this._headerFocusable,\n      this._itemsFocusable,\n      this._footerFocusable,\n      this.$.focusexit\n    ];\n\n    let index = tabOrder.indexOf(srcElement);\n\n    index += step;\n    while (index >= 0 && index <= tabOrder.length - 1 &&\n        (!tabOrder[index] || tabOrder[index].parentNode.hidden)) {\n      index += step;\n    }\n\n    return tabOrder[index];\n  }\n\n  _onTabKeyDown(e) {\n    const focusTarget = this._predictFocusStepTarget(e.composedPath()[0], e.shiftKey ? -1 : 1);\n\n    if (focusTarget === this.$.table) {\n      // The focus is about to exit the grid to the top.\n      this.$.table.focus();\n    } else if (focusTarget === this.$.focusexit) {\n      // The focus is about to exit the grid to the bottom.\n      this.$.focusexit.focus();\n    } else if (focusTarget === this._itemsFocusable) {\n      let itemsFocusTarget = focusTarget;\n      const targetRow = this._itemsFocusable.parentNode;\n      this._ensureScrolledToIndex(this._focusedItemIndex);\n      if (targetRow.index !== this._focusedItemIndex) {\n        // The target row, which is about to be focused next, has been\n        // assigned with a new index since last focus, probably because of\n        // scrolling. Focus the row for the stored focused item index instead.\n        const columnIndex = Array.from(targetRow.children).indexOf(this._itemsFocusable);\n        const focusedItemRow = Array.from(this.$.items.children)\n          .filter(row => row.index === this._focusedItemIndex)[0];\n        if (focusedItemRow) {\n          itemsFocusTarget = focusedItemRow.children[columnIndex];\n        }\n      }\n      e.preventDefault();\n      itemsFocusTarget.focus();\n    } else {\n      e.preventDefault();\n      focusTarget.focus();\n    }\n\n    this._toggleAttribute('navigating', true, this);\n  }\n\n  _onSpaceKeyDown(e) {\n    e.preventDefault();\n\n    const cell = e.composedPath()[0];\n    if (!cell._content || !cell._content.firstElementChild) {\n      this.dispatchEvent(new CustomEvent('cell-activate', {detail: {\n        model: this.__getRowModel(cell.parentElement)\n      }}));\n    }\n  }\n\n  /** @private */\n  _onKeyUp(e) {\n    if (!/^( |SpaceBar)$/.test(e.key)) {\n      return;\n    }\n\n    e.preventDefault();\n\n    const cell = e.composedPath()[0];\n    if (cell._content && cell._content.firstElementChild) {\n      const wasNavigating = this.hasAttribute('navigating');\n      cell._content.firstElementChild.click();\n      this._toggleAttribute('navigating', wasNavigating, this);\n    }\n  }\n\n  _onFocusIn(e) {\n    if (!this._isMousedown) {\n      this._toggleAttribute('navigating', true, this);\n    }\n\n    const rootTarget = e.composedPath()[0];\n\n    if (rootTarget === this.$.table ||\n        rootTarget === this.$.focusexit) {\n      // The focus enters the top (bottom) of the grid, meaning that user has\n      // tabbed (shift-tabbed) into the grid. Move the focus to\n      // the first (the last) focusable.\n      this._predictFocusStepTarget(\n        rootTarget,\n        rootTarget === this.$.table ? 1 : -1\n      ).focus();\n      this._toggleAttribute('interacting', false, this);\n    } else {\n      this._detectInteracting(e);\n    }\n  }\n\n  _onFocusOut(e) {\n    this._toggleAttribute('navigating', false, this);\n    this._detectInteracting(e);\n  }\n\n  _onCellFocusIn(e) {\n    this._detectInteracting(e);\n\n    if (e.composedPath().indexOf(this.$.table) === 3) {\n      const cell = e.composedPath()[0];\n      this._activeRowGroup = cell.parentNode.parentNode;\n      if (this._activeRowGroup === this.$.header) {\n        this._headerFocusable = cell;\n      } else if (this._activeRowGroup === this.$.items) {\n        this._itemsFocusable = cell;\n      } else if (this._activeRowGroup === this.$.footer) {\n        this._footerFocusable = cell;\n      }\n      // Inform cell content of the focus (used in <vaadin-grid-sorter>)\n      cell._content.dispatchEvent(new CustomEvent('cell-focusin', {bubbles: false}));\n    }\n\n    this._detectFocusedItemIndex(e);\n  }\n\n  _onCellFocusOut(e) {\n    if (e.composedPath().indexOf(this.$.table) === 3) {\n      const cell = e.composedPath()[0];\n      // Inform cell content of the focus (used in <vaadin-grid-sorter>)\n      cell._content.dispatchEvent(new CustomEvent('cell-focusout', {bubbles: false}));\n    }\n  }\n\n  _detectInteracting(e) {\n    this._toggleAttribute('interacting',\n      e.composedPath().some(el => el.localName === 'vaadin-grid-cell-content'),\n      this);\n  }\n\n  _detectFocusedItemIndex(e) {\n    const {rowGroup, row} = this._parseEventPath(e.composedPath());\n    if (rowGroup === this.$.items) {\n      this._focusedItemIndex = row.index;\n    }\n  }\n\n  _preventScrollerRotatingCellFocus(item, index) {\n    if (item.index === this._focusedItemIndex && this.hasAttribute('navigating') && this._activeRowGroup === this.$.items) {\n      // Focused item has went, hide navigation mode\n      this._navigatingIsHidden = true;\n      this._toggleAttribute('navigating', false, this);\n    }\n    if (index === this._focusedItemIndex && this._navigatingIsHidden) {\n      // Focused item is back, restore navigation mode\n      this._navigatingIsHidden = false;\n      this._toggleAttribute('navigating', true, this);\n    }\n  }\n\n  _getColumns(rowGroup, rowIndex) {\n    let columnTreeLevel = this._columnTree.length - 1;\n    if (rowGroup === this.$.header) {\n      columnTreeLevel = rowIndex;\n    } else if (rowGroup === this.$.footer) {\n      columnTreeLevel = this._columnTree.length - 1 - rowIndex;\n    }\n    return this._columnTree[columnTreeLevel];\n  }\n\n  _resetKeyboardNavigation() {\n    if (this.$.header.firstElementChild) {\n      this._headerFocusable = Array.from(this.$.header.firstElementChild.children).filter(el => !el.hidden)[0];\n    }\n\n    if (this.$.items.firstElementChild) {\n      const firstVisibleIndexRow = this._iterateItems((pidx, vidx) => {\n        if (this._firstVisibleIndex === vidx) {\n          return this.$.items.children[pidx];\n        }\n      });\n      if (firstVisibleIndexRow) {\n        this._itemsFocusable = Array.from(firstVisibleIndexRow.children).filter(el => !el.hidden)[0];\n      }\n    }\n\n    if (this.$.footer.firstElementChild) {\n      this._footerFocusable = Array.from(this.$.footer.firstElementChild.children).filter(el => !el.hidden)[0];\n    }\n  }\n\n  _scrollHorizontallyToCell(dstCell) {\n    if (dstCell.hasAttribute('frozen') || this._elementMatches(dstCell, '[part~=\"details-cell\"]')) {\n      // These cells are, by design, always visible, no need to scroll.\n      return;\n    }\n\n    const dstCellRect = dstCell.getBoundingClientRect();\n    const dstRow = dstCell.parentNode;\n    const dstCellIndex = Array.from(dstRow.children).indexOf(dstCell);\n    const tableRect = this.$.table.getBoundingClientRect();\n    let leftBoundary = tableRect.left, rightBoundary = tableRect.right;\n    for (let i = dstCellIndex - 1; i >= 0; i--) {\n      const cell = dstRow.children[i];\n      if (cell.hasAttribute('hidden') ||\n          this._elementMatches(cell, '[part~=\"details-cell\"]')) {\n        continue;\n      }\n      if (cell.hasAttribute('frozen')) {\n        leftBoundary = cell.getBoundingClientRect().right;\n        break;\n      }\n    }\n    for (let i = dstCellIndex + 1; i < dstRow.children.length; i++) {\n      const cell = dstRow.children[i];\n      if (cell.hasAttribute('hidden') ||\n          this._elementMatches(cell, '[part~=\"details-cell\"]')) {\n        continue;\n      }\n      if (cell.hasAttribute('frozen')) {\n        rightBoundary = cell.getBoundingClientRect().left;\n        break;\n      }\n    }\n\n    if (dstCellRect.left < leftBoundary) {\n      this.$.table.scrollLeft += Math.round(dstCellRect.left - leftBoundary);\n    }\n    if (dstCellRect.right > rightBoundary) {\n      this.$.table.scrollLeft += Math.round(dstCellRect.right - rightBoundary);\n    }\n  }\n\n  _elementMatches(el, query) {\n    return el.matches ? el.matches(query) :\n      Array.from(el.parentNode.querySelectorAll(query)).indexOf(el) !== -1;\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\n\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\nimport { dom } from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport { useShadow } from '@polymer/polymer/lib/utils/settings.js';\n\n/**\n * @polymerMixin\n */\nexport const ColumnReorderingMixin = superClass => class ColumnReorderingMixin extends GestureEventListeners(superClass) {\n\n  static get properties() {\n    return {\n      /**\n       * Set to true to allow column reordering.\n       */\n      columnReorderingAllowed: {\n        type: Boolean,\n        value: false\n      },\n\n      _orderBaseScope: {\n        type: Number,\n        value: 10000000\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateOrders(_columnTree, _columnTree.*)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    addListener(this, 'track', this._onTrackEvent);\n    this._reorderGhost = this.shadowRoot.querySelector('[part=\"reorder-ghost\"]');\n\n    this.addEventListener('touchstart', this._onTouchStart.bind(this));\n    this.addEventListener('touchmove', this._onTouchMove.bind(this));\n    this.addEventListener('touchend', this._onTouchEnd.bind(this));\n    this.addEventListener('contextmenu', this._onContextMenu.bind(this));\n  }\n\n  _onContextMenu(e) {\n    if (this.hasAttribute('reordering')) {\n      e.preventDefault();\n    }\n  }\n\n  _onTouchStart(e) {\n    // Touch event, delay activation by 100ms\n    this._startTouchReorderTimeout = setTimeout(() => {\n      this._onTrackStart({\n        detail: {\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY\n        }\n      });\n    }, 100);\n  }\n\n  _onTouchMove(e) {\n    if (this._draggedColumn) {\n      e.preventDefault();\n    }\n    clearTimeout(this._startTouchReorderTimeout);\n  }\n\n  _onTouchEnd() {\n    clearTimeout(this._startTouchReorderTimeout);\n    this._onTrackEnd();\n  }\n\n  _onTrackEvent(e) {\n    if (e.detail.state === 'start') {\n      const path = e.composedPath();\n      const headerCell = path[path.indexOf(this.$.header) - 2];\n      if (!headerCell || !headerCell._content) {\n        // Not a header column\n        return;\n      }\n\n      const activeElement = this.getRootNode().activeElement;\n      if (headerCell._content.contains(this.getRootNode().activeElement)\n          && (!this._ie || !this._isFocusable(activeElement))) {\n        // Something was focused inside the cell\n        return;\n      }\n\n      if (this.$.scroller.hasAttribute('column-resizing')) {\n        // Resizing is in progress\n        return;\n      }\n\n      if (!this._touchDevice) {\n        // Not a touch device\n        this._onTrackStart(e);\n      }\n    } else if (e.detail.state === 'track') {\n      this._onTrack(e);\n    } else if (e.detail.state === 'end') {\n      this._onTrackEnd(e);\n    }\n  }\n\n  _onTrackStart(e) {\n    if (!this.columnReorderingAllowed) {\n      return;\n    }\n\n    // Cancel reordering if there are draggable nodes on the event path\n    const path = e.path || dom(e).path;\n    if (path && path.filter(node => node.hasAttribute && node.hasAttribute('draggable'))[0]) {\n      return;\n    }\n\n    const headerCell = this._cellFromPoint(e.detail.x, e.detail.y);\n    if (!headerCell || headerCell.getAttribute('part').indexOf('header-cell') === -1) {\n      return;\n    }\n\n    this._toggleAttribute('reordering', true, this);\n    this._draggedColumn = headerCell._column;\n    while (this._draggedColumn.parentElement.childElementCount === 1) {\n      // This is the only column in the group, drag the whole group instead\n      this._draggedColumn = this._draggedColumn.parentElement;\n    }\n    this._setSiblingsReorderStatus(this._draggedColumn, 'allowed');\n    this._draggedColumn._reorderStatus = 'dragging';\n\n    this._updateGhost(headerCell);\n    this._reorderGhost.style.visibility = 'visible';\n    this._updateGhostPosition(e.detail.x, this._touchDevice ? e.detail.y - 50 : e.detail.y);\n    this._autoScroller();\n  }\n\n  _onTrack(e) {\n    if (!this._draggedColumn) {\n      // Reordering didnt start. Skip this event.\n      return;\n    }\n\n    const targetCell = this._cellFromPoint(e.detail.x, e.detail.y);\n    if (!targetCell) {\n      return;\n    }\n\n    const targetColumn = this._getTargetColumn(targetCell, this._draggedColumn);\n    if (this._isSwapAllowed(this._draggedColumn, targetColumn) &&\n      this._isSwappableByPosition(targetColumn, e.detail.x)) {\n      this._swapColumnOrders(this._draggedColumn, targetColumn);\n    }\n\n    this._updateGhostPosition(e.detail.x, this._touchDevice ? e.detail.y - 50 : e.detail.y);\n    this._lastDragClientX = e.detail.x;\n  }\n\n  _onTrackEnd() {\n    if (!this._draggedColumn) {\n      // Reordering didnt start. Skip this event.\n      return;\n    }\n\n    this._toggleAttribute('reordering', false, this);\n    this._draggedColumn._reorderStatus = '';\n    this._setSiblingsReorderStatus(this._draggedColumn, '');\n    this._draggedColumn = null;\n    this._lastDragClientX = null;\n    this._reorderGhost.style.visibility = 'hidden';\n\n    this.dispatchEvent(new CustomEvent('column-reorder', {detail: {\n      columns: this._getColumnsInOrder()\n    }}));\n  }\n\n  _getColumnsInOrder() {\n    return this._columnTree.slice(0).pop()\n      .filter(c => !c.hidden)\n      .sort((b, a) => (b._order - a._order));\n  }\n\n  _cellFromPoint(x, y) {\n    x = x || 0;\n    y = y || 0;\n    if (!this._draggedColumn) {\n      this._toggleAttribute('no-content-pointer-events', true, this.$.scroller);\n    }\n    let cell;\n    if (useShadow) {\n      cell = this.shadowRoot.elementFromPoint(x, y);\n    } else {\n      cell = document.elementFromPoint(x, y);\n\n      // Workaround a FF58 bug\n      if (cell.localName === 'vaadin-grid-cell-content') {\n        cell = cell.assignedSlot.parentNode;\n      }\n\n    }\n    this._toggleAttribute('no-content-pointer-events', false, this.$.scroller);\n\n    // Make sure the element is actually a cell\n    if (cell && cell._column) {\n      return cell;\n    }\n  }\n\n  _updateGhostPosition(eventClientX, eventClientY) {\n    const ghostRect = this._reorderGhost.getBoundingClientRect();\n    // // This is where we want to position the ghost\n    const targetLeft = eventClientX - ghostRect.width / 2;\n    const targetTop = eventClientY - ghostRect.height / 2;\n    // Current position\n    const _left = parseInt(this._reorderGhost._left || 0);\n    const _top = parseInt(this._reorderGhost._top || 0);\n    // Reposition the ghost\n    this._reorderGhost._left = _left - (ghostRect.left - targetLeft);\n    this._reorderGhost._top = _top - (ghostRect.top - targetTop);\n    this._reorderGhost.style.transform = `translate(${this._reorderGhost._left}px, ${this._reorderGhost._top}px)`;\n  }\n\n  _getInnerText(e) {\n    if (e.localName) {\n      // Custom implementation needed since IE11 doesn't respect the spec in case of hidden elements\n      if (getComputedStyle(e).display === 'none') {\n        return '';\n      } else {\n        return Array.from(e.childNodes).map(n => this._getInnerText(n)).join('');\n      }\n    } else {\n      return e.textContent;\n    }\n  }\n\n  _updateGhost(cell) {\n    const ghost = this._reorderGhost;\n    ghost.textContent = this._getInnerText(cell._content);\n    const style = window.getComputedStyle(cell);\n    ['boxSizing', 'display', 'width', 'height', 'background', 'alignItems', 'padding', 'border', 'flex-direction', 'overflow']\n      .forEach(propertyName => ghost.style[propertyName] = style[propertyName]);\n    return ghost;\n  }\n\n  _updateOrders(columnTree, splices) {\n    if (columnTree === undefined || splices === undefined) {\n      return;\n    }\n\n    // Reset all column orders\n    columnTree[0].forEach((column, index) => column._order = 0);\n    // Set order numbers to top-level columns\n    columnTree[0].forEach((column, index) => column._order = (index + 1) * this._orderBaseScope);\n  }\n\n  _setSiblingsReorderStatus(column, status) {\n    Array.from(column.parentNode.children)\n      .filter(child => /column/.test(child.localName) && this._isSwapAllowed(child, column))\n      .forEach(sibling => sibling._reorderStatus = status);\n  }\n\n  _autoScroller() {\n    if (this._lastDragClientX) {\n      const rightDiff = this._lastDragClientX - this.getBoundingClientRect().right + 50;\n      const leftDiff = this.getBoundingClientRect().left - this._lastDragClientX + 50;\n\n      if (rightDiff > 0) {\n        this.$.table.scrollLeft += rightDiff / 10;\n      } else if (leftDiff > 0) {\n        this.$.table.scrollLeft -= leftDiff / 10;\n      }\n      this._scrollHandler();\n    }\n\n    if (this._draggedColumn) {\n      this.async(this._autoScroller, 10);\n    }\n  }\n\n  _isSwapAllowed(column1, column2) {\n    if (column1 && column2) {\n      const differentColumns = column1 !== column2;\n      const sameParent = column1.parentElement === column2.parentElement;\n      const sameFrozen = column1.frozen === column2.frozen;\n      return differentColumns && sameParent && sameFrozen;\n    }\n  }\n\n  _isSwappableByPosition(targetColumn, clientX) {\n    const targetCell =\n      Array.from(this.$.header.querySelectorAll('tr:not([hidden]) [part~=\"cell\"]')).filter(cell => targetColumn.contains(cell._column))[0];\n    const sourceCellRect = this.$.header.querySelector('tr:not([hidden]) [reorder-status=dragging]').getBoundingClientRect();\n    const targetRect = targetCell.getBoundingClientRect();\n    if (targetRect.left > sourceCellRect.left) {\n      return clientX > targetRect.right - sourceCellRect.width;\n    } else {\n      return clientX < targetRect.left + sourceCellRect.width;\n    }\n  }\n\n  _swapColumnOrders(column1, column2) {\n    const _order = column1._order;\n    column1._order = column2._order;\n    column2._order = _order;\n    this._updateLastFrozen();\n    this._updateFirstAndLastColumn();\n  }\n\n  _getTargetColumn(targetCell, draggedColumn) {\n    if (targetCell && draggedColumn) {\n      let candidate = targetCell._column;\n      while (candidate.parentElement !== draggedColumn.parentElement && candidate !== this) {\n        candidate = candidate.parentElement;\n      }\n      if (candidate.parentElement === draggedColumn.parentElement) {\n        return candidate;\n      } else {\n        return targetCell._column;\n      }\n    }\n  }\n\n  /**\n   * Fired when the columns in the grid are reordered.\n   *\n   * @event column-reorder\n   * @param {Object} detail\n   * @param {Object} detail.columns the columns in the new order\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * This Element is used internally by vaadin-grid.\n *\n * @private\n */\nclass GridOuterScrollerElement extends (class extends PolymerElement {}) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n        height: 100%;\n        width: 100%;\n        position: absolute;\n        top: 0;\n        box-sizing: border-box;\n        overflow: auto;\n      }\n\n      :host([passthrough]) {\n        pointer-events: none;\n      }\n    </style>\n\n    <slot></slot>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid-outer-scroller';\n  }\n\n  static get properties() {\n    return {\n\n      scrollTarget: {\n        type: Object\n      },\n\n      scrollHandler: {\n        type: Object\n      },\n\n      passthrough: {\n        type: Boolean,\n        reflectToAttribute: true,\n        value: true\n      },\n\n      outerScrolling: Boolean,\n\n      noScrollbars: Boolean,\n\n      _touchDevice: Boolean\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('scroll', () => this._syncScrollTarget());\n    this.parentElement.addEventListener('mousemove', this._onMouseMove.bind(this));\n\n    // for some reason scroll bars are hidden in iOS if this style is\n    // added in stylesheets or before attaching.\n    this.style.webkitOverflowScrolling = 'touch';\n\n    this.addEventListener('mousedown', _ => this.outerScrolling = true);\n    this.addEventListener('mouseup', _ => {\n      this.outerScrolling = false;\n      this.scrollHandler._scrollHandler();\n    });\n  }\n\n  _onMouseMove(e) {\n    // Ignore mousemove events on touch devices\n    if (!this._touchDevice) {\n      if (this.noScrollbars && this.parentElement.hasAttribute('scroll-period')) {\n        this.passthrough = e.offsetY <= this.clientHeight - 20 && e.offsetX <= this.clientWidth - 20;\n      } else {\n        this.passthrough = e.offsetY <= this.clientHeight && e.offsetX <= this.clientWidth;\n      }\n    }\n  }\n\n  syncOuterScroller() {\n    this.scrollTop = this.scrollTarget.scrollTop;\n    this.scrollLeft = this.scrollTarget.scrollLeft;\n  }\n\n  _syncScrollTarget() {\n    requestAnimationFrame(() => {\n      this.scrollTarget.scrollTop = this.scrollTop;\n      this.scrollTarget.scrollLeft = this.scrollLeft;\n      this.scrollHandler._scrollHandler();\n    });\n\n  }\n}\n\ncustomElements.define(GridOuterScrollerElement.is, GridOuterScrollerElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/lib/elements/dom-module.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nconst VaadinGridStyles = document.createElement('dom-module');\n\n// NOTE(web-padawan): https://github.com/vaadin/vaadin-grid/issues/1514\nVaadinGridStyles.appendChild(\n  html`\n  <style>\n    @keyframes vaadin-grid-appear {\n      to {\n        opacity: 1;\n      }\n    }\n\n    :host {\n      display: block;\n      animation: 1ms vaadin-grid-appear;\n      height: 400px;\n      flex: 1 1 auto;\n      align-self: stretch;\n      position: relative;\n    }\n\n    :host([hidden]) {\n      display: none !important;\n    }\n\n    #scroller {\n      display: block;\n      transform: translateY(0);\n      width: auto;\n      height: auto;\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n    }\n\n    :host([height-by-rows]) {\n      height: auto;\n      align-self: flex-start;\n      flex-grow: 0;\n      width: 100%;\n    }\n\n    :host([height-by-rows]) #scroller {\n      width: 100%;\n      height: 100%;\n      position: relative;\n    }\n\n    #table {\n      display: block;\n      width: 100%;\n      height: 100%;\n      overflow: auto;\n      z-index: -2;\n      position: relative;\n      outline: none;\n    }\n\n    #header {\n      display: block;\n      position: absolute;\n      top: 0;\n      width: 100%;\n    }\n\n    th {\n      text-align: inherit;\n    }\n\n    /* Safari doesn't work with \"inherit\" */\n    [safari] th {\n      text-align: initial;\n    }\n\n    #footer {\n      display: block;\n      position: absolute;\n      bottom: 0;\n      width: 100%;\n    }\n\n    #items {\n      display: block;\n      width: 100%;\n      position: relative;\n      z-index: -1;\n    }\n\n    #items,\n    #outersizer,\n    #fixedsizer {\n      border-top: 0 solid transparent;\n      border-bottom: 0 solid transparent;\n    }\n\n    [part~=\"row\"] {\n      display: flex;\n      width: 100%;\n      box-sizing: border-box;\n      margin: 0;\n    }\n\n    [part~=\"row\"][loading] [part~=\"body-cell\"] ::slotted(vaadin-grid-cell-content) {\n      opacity: 0;\n    }\n\n    #items [part~=\"row\"] {\n      position: absolute;\n    }\n\n    #items [part~=\"row\"]:empty {\n      height: 1em;\n    }\n\n    [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n      flex-shrink: 0;\n      flex-grow: 1;\n      box-sizing: border-box;\n      display: flex;\n      width: 100%;\n      position: relative;\n      align-items: center;\n      padding: 0;\n      white-space: nowrap;\n    }\n\n    [part~=\"details-cell\"] {\n      position: absolute;\n      bottom: 0;\n      width: 100%;\n      box-sizing: border-box;\n      padding: 0;\n    }\n\n    [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n      display: block;\n      width: 100%;\n      box-sizing: border-box;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    [hidden] {\n      display: none !important;\n    }\n\n    [frozen] {\n      z-index: 2;\n      will-change: transform;\n    }\n\n    #outerscroller {\n      /* Needed (at least) for Android Chrome */\n      z-index: 0;\n    }\n\n    #scroller:not([safari]) #outerscroller {\n      /* Needed for Android Chrome (#1020). Can't be applied to Safari\n      since it would re-introduce the sub-pixel overflow bug (#853) */\n      will-change: transform;\n    }\n\n    [no-scrollbars]:not([safari]):not([firefox]) #outerscroller,\n    [no-scrollbars][safari] #table,\n    [no-scrollbars][firefox] #table {\n      overflow: hidden;\n    }\n\n    [no-scrollbars]:not([safari]):not([firefox]) #outerscroller {\n      pointer-events: none;\n    }\n\n    /* Reordering styles */\n    :host([reordering]) [part~=\"cell\"] ::slotted(vaadin-grid-cell-content),\n    :host([reordering]) [part~=\"resize-handle\"],\n    #scroller[no-content-pointer-events] [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n      pointer-events: none;\n    }\n\n    [part~=\"reorder-ghost\"] {\n      visibility: hidden;\n      position: fixed;\n      pointer-events: none;\n      opacity: 0.5;\n\n      /* Prevent overflowing the grid in Firefox */\n      top: 0;\n      left: 0;\n    }\n\n    :host([reordering]) {\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n\n    #scroller[ie][column-reordering-allowed] [part~=\"header-cell\"] {\n      -ms-user-select: none;\n    }\n\n    :host([reordering]) #outerscroller {\n      -webkit-overflow-scrolling: auto !important;\n    }\n\n    /* Resizing styles */\n    [part~=\"resize-handle\"] {\n      position: absolute;\n      top: 0;\n      right: 0;\n      height: 100%;\n      cursor: col-resize;\n      z-index: 1;\n    }\n\n    [part~=\"resize-handle\"]::before {\n      position: absolute;\n      content: \"\";\n      height: 100%;\n      width: 35px;\n      transform: translateX(-50%);\n    }\n\n    [last-column] [part~=\"resize-handle\"]::before,\n    [last-frozen] [part~=\"resize-handle\"]::before {\n      width: 18px;\n      transform: none;\n      right: 0;\n    }\n\n    #scroller[column-resizing] {\n      -ms-user-select: none;\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n\n    /* Sizer styles */\n    .sizer {\n      display: flex;\n      position: relative;\n      width: 100%;\n      visibility: hidden;\n    }\n\n    .sizer [part~=\"details-cell\"] {\n      display: none !important;\n    }\n\n    .sizer [part~=\"cell\"][hidden] {\n      display: none !important;\n    }\n\n    .sizer [part~=\"cell\"] {\n      display: block;\n      flex-shrink: 0;\n      line-height: 0;\n      margin-top: -1em;\n      height: 0 !important;\n      min-height: 0 !important;\n      max-height: 0 !important;\n      padding: 0 !important;\n    }\n\n    .sizer [part~=\"cell\"]::before {\n      content: \"-\";\n    }\n\n    .sizer [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n      display: none !important;\n    }\n\n    /* Fixed mode (Tablet Edge) */\n    #fixedsizer {\n      position: absolute;\n    }\n\n    :not([edge][no-scrollbars]) #fixedsizer {\n      display: none;\n    }\n\n    [edge][no-scrollbars] {\n      /* Any value other than none for the transform results in the creation of both a stacking context and\n      a containing block. The object acts as a containing block for fixed positioned descendants. */\n      transform: translateZ(0);\n      overflow: hidden;\n    }\n\n    [edge][no-scrollbars] #header,\n    [edge][no-scrollbars] #footer {\n      position: fixed;\n    }\n\n    [edge][no-scrollbars] #items {\n      position: fixed;\n      width: 100%;\n      will-change: transform;\n    }\n\n    /* RTL specific styles */\n\n    :host([dir=\"rtl\"]) [part~=\"reorder-ghost\"] {\n      left: auto;\n      right: 0;\n    }\n\n    :host([dir=\"rtl\"]) [part~=\"resize-handle\"] {\n      left: 0;\n      right: auto;\n    }\n\n    :host([dir=\"rtl\"]) [part~=\"resize-handle\"]::before {\n      transform: translateX(50%);\n    }\n\n    :host([dir=\"rtl\"]) [last-column] [part~=\"resize-handle\"]::before,\n    :host([dir=\"rtl\"]) [last-frozen] [part~=\"resize-handle\"]::before {\n      left: 0;\n      right: auto;\n    }\n  </style>\n`);\n\nconst safari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nconst firefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\nif (safari || firefox) {\n  const scrollingStyles = document.createElement('style');\n  scrollingStyles.textContent = `\n    [scrolling][safari] #outerscroller,\n    [scrolling][firefox] #outerscroller {\n      pointer-events: auto;\n    }\n\n    [ios] #outerscroller {\n      pointer-events: auto;\n      z-index: -3;\n    }\n\n    [ios][scrolling] #outerscroller {\n      z-index: 0;\n    }\n\n    [ios] [frozen] {\n      will-change: auto;\n    }\n  `;\n  VaadinGridStyles.querySelector('template').content.appendChild(scrollingStyles);\n}\n\nVaadinGridStyles.register('vaadin-grid-styles');\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ScrollerElement } from './vaadin-grid-scroller.js';\nimport { A11yMixin } from './vaadin-grid-a11y-mixin.js';\nimport { ActiveItemMixin } from './vaadin-grid-active-item-mixin.js';\nimport { ArrayDataProviderMixin } from './vaadin-grid-array-data-provider-mixin.js';\nimport { ColumnResizingMixin } from './vaadin-grid-column-resizing-mixin.js';\nimport { DataProviderMixin } from './vaadin-grid-data-provider-mixin.js';\nimport { DynamicColumnsMixin } from './vaadin-grid-dynamic-columns-mixin.js';\nimport { EventContextMixin } from './vaadin-grid-event-context-mixin.js';\nimport { FilterMixin } from './vaadin-grid-filter-mixin.js';\nimport { RowDetailsMixin } from './vaadin-grid-row-details-mixin.js';\nimport { ScrollMixin } from './vaadin-grid-scroll-mixin.js';\nimport { SelectionMixin } from './vaadin-grid-selection-mixin.js';\nimport { SortMixin } from './vaadin-grid-sort-mixin.js';\nimport { StylingMixin } from './vaadin-grid-styling-mixin.js';\nimport { DragAndDropMixin } from './vaadin-grid-drag-and-drop-mixin.js';\nimport { KeyboardNavigationMixin } from './vaadin-grid-keyboard-navigation-mixin.js';\nimport { ColumnReorderingMixin } from './vaadin-grid-column-reordering-mixin.js';\nimport './vaadin-grid-column.js';\nimport './vaadin-grid-outer-scroller.js';\nimport './vaadin-grid-styles.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { beforeNextRender, afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut, animationFrame } from '@polymer/polymer/lib/utils/async.js';\n\nconst TOUCH_DEVICE = (() => {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\n/**\n *\n * `<vaadin-grid>` is a free, high quality data grid / data table Web Component. The content of the\n * the grid can be populated in two ways: imperatively by using renderer callback function and\n * declaratively by using Polymer's Templates.\n *\n * ### Quick Start\n *\n * Start with an assigning an array to the [`items`](#/elements/vaadin-grid#property-items) property to visualize your data.\n *\n * Use the [`<vaadin-grid-column>`](#/elements/vaadin-grid-column) element to configure the grid columns. Set `path` and `header`\n * shorthand properties for the columns to define what gets rendered in the cells of the column.\n *\n * #### Example:\n * ```html\n * <vaadin-grid>\n *   <vaadin-grid-column path=\"name.first\" header=\"First name\"></vaadin-grid-column>\n *   <vaadin-grid-column path=\"name.last\" header=\"Last name\"></vaadin-grid-column>\n *   <vaadin-grid-column path=\"email\"></vaadin-grid-column>\n * </vaadin-grid>\n * ```\n *\n * For custom content `vaadin-grid-column` element provides you with three types of `renderer` callback functions: `headerRenderer`,\n * `renderer` and `footerRenderer`.\n *\n * Each of those renderer functions provides `root`, `column`, `rowData` arguments when applicable.\n * Generate DOM content, append it to the `root` element and control the state\n * of the host element by accessing `column`. Before generating new content,\n * users are able to check if there is already content in `root` for reusing it.\n *\n * Renderers are called on initialization of new column cells and each time the\n * related row data is updated. DOM generated during the renderer call can be reused\n * in the next renderer call and will be provided with the `root` argument.\n * On first call it will be empty.\n *\n * #### Example:\n * ```html\n * <vaadin-grid>\n *   <vaadin-grid-column></vaadin-grid-column>\n *   <vaadin-grid-column></vaadin-grid-column>\n *   <vaadin-grid-column></vaadin-grid-column>\n * </vaadin-grid>\n * ```\n * ```js\n * const grid = document.querySelector('vaadin-grid');\n * grid.items = [{'name': 'John', 'surname': 'Lennon', 'role': 'singer'},\n *               {'name': 'Ringo', 'surname': 'Starr', 'role': 'drums'}];\n *\n * const columns = grid.querySelectorAll('vaadin-grid-column');\n *\n * columns[0].headerRenderer = function(root) {\n *   root.textContent = 'Name';\n * };\n * columns[0].renderer = function(root, column, rowData) {\n *   root.textContent = rowData.item.name;\n * };\n *\n * columns[1].headerRenderer = function(root) {\n *   root.textContent = 'Surname';\n * };\n * columns[1].renderer = function(root, column, rowData) {\n *   root.textContent = rowData.item.surname;\n * };\n *\n * columns[2].headerRenderer = function(root) {\n *   root.textContent = 'Role';\n * };\n * columns[2].renderer = function(root, column, rowData) {\n *   root.textContent = rowData.item.role;\n * };\n * ```\n *\n * Alternatively, the content can be provided with Polymer's Templates:\n *\n * #### Example:\n * ```html\n * <vaadin-grid items='[{\"name\": \"John\", \"surname\": \"Lennon\", \"role\": \"singer\"},\n * {\"name\": \"Ringo\", \"surname\": \"Starr\", \"role\": \"drums\"}]'>\n *   <vaadin-grid-column>\n *     <template class=\"header\">Name</template>\n *     <template>[[item.name]]</template>\n *   </vaadin-grid-column>\n *   <vaadin-grid-column>\n *     <template class=\"header\">Surname</template>\n *     <template>[[item.surname]]</template>\n *   </vaadin-grid-column>\n *   <vaadin-grid-column>\n *     <template class=\"header\">Role</template>\n *     <template>[[item.role]]</template>\n *   </vaadin-grid-column>\n * </vaadin-grid>\n * ```\n *\n * The following helper elements can be used for further customization:\n * - [`<vaadin-grid-column-group>`](#/elements/vaadin-grid-column-group)\n * - [`<vaadin-grid-filter>`](#/elements/vaadin-grid-filter)\n * - [`<vaadin-grid-sorter>`](#/elements/vaadin-grid-sorter)\n * - [`<vaadin-grid-selection-column>`](#/elements/vaadin-grid-selection-column)\n * - [`<vaadin-grid-tree-toggle>`](#/elements/vaadin-grid-tree-toggle)\n *\n * __Note that the helper elements must be explicitly imported.__\n * If you want to import everything at once you can use the `all-imports.html` bundle.\n *\n * A column template can be decorated with one the following class names to specify its purpose\n * - `header`: Marks a header template\n * - `footer`: Marks a footer template\n * - `row-details`: Marks a row details template\n *\n * The following built-in template variables can be bound to inside the column templates:\n * - `[[index]]`: Number representing the row index\n * - `[[item]]` and it's sub-properties: Data object (provided by a data provider / items array)\n * - `{{selected}}`: True if the item is selected (can be two-way bound)\n * - `{{detailsOpened}}`: True if the item has row details opened (can be two-way bound)\n * - `{{expanded}}`: True if the item has tree sublevel expanded (can be two-way bound)\n * - `[[level]]`: Number of the tree sublevel of the item, first level-items have 0\n *\n * ### Lazy Loading with Function Data Provider\n *\n * In addition to assigning an array to the items property, you can alternatively\n * provide the `<vaadin-grid>` data through the\n * [`dataProvider`](#/elements/vaadin-grid#property-dataProvider) function property.\n * The `<vaadin-grid>` calls this function lazily, only when it needs more data\n * to be displayed.\n *\n * See the [`dataProvider`](#/elements/vaadin-grid#property-dataProvider) in\n * the API reference below for the detailed data provider arguments description,\n * and the Assigning Data page in the demos.\n *\n * __Note that expanding the tree grid's item will trigger a call to the `dataProvider`.__\n *\n * __Also, note that when using function data providers, the total number of items\n * needs to be set manually. The total number of items can be returned\n * in the second argument of the data provider callback:__\n *\n * ```javascript\n * grid.dataProvider = function(params, callback) {\n *   var url = 'https://api.example/data' +\n *       '?page=' + params.page +        // the requested page index\n *       '&per_page=' + params.pageSize; // number of items on the page\n *   var xhr = new XMLHttpRequest();\n *   xhr.onload = function() {\n *     var response = JSON.parse(xhr.responseText);\n *     callback(\n *       response.employees, // requested page of items\n *       response.totalSize  // total number of items\n *     );\n *   };\n *   xhr.open('GET', url, true);\n *   xhr.send();\n * };\n * ```\n *\n * __Alternatively, you can use the `size` property to set the total number of items:__\n *\n * ```javascript\n * grid.size = 200; // The total number of items\n * grid.dataProvider = function(params, callback) {\n *   var url = 'https://api.example/data' +\n *       '?page=' + params.page +        // the requested page index\n *       '&per_page=' + params.pageSize; // number of items on the page\n *   var xhr = new XMLHttpRequest();\n *   xhr.onload = function() {\n *     var response = JSON.parse(xhr.responseText);\n *     callback(response.employees);\n *   };\n *   xhr.open('GET', url, true);\n *   xhr.send();\n * };\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `row` | Row in the internal table\n * `cell` | Cell in the internal table\n * `header-cell` | Header cell in the internal table\n * `body-cell` | Body cell in the internal table\n * `footer-cell` | Footer cell in the internal table\n * `details-cell` | Row details cell in the internal table\n * `resize-handle` | Handle for resizing the columns\n * `reorder-ghost` | Ghost element of the header cell being dragged\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `loading` | Set when the grid is loading data from data provider | :host\n * `interacting` | Keyboard navigation in interaction mode | :host\n * `navigating` | Keyboard navigation in navigation mode | :host\n * `overflow` | Set when rows are overflowing the grid viewport. Possible values: `top`, `bottom`, `left`, `right` | :host\n * `reordering` | Set when the grid's columns are being reordered | :host\n * `dragover` | Set when the grid (not a specific row) is dragged over | :host\n * `dragging-rows` : Set when grid rows are dragged  | :host\n * `reorder-status` | Reflects the status of a cell while columns are being reordered | cell\n * `frozen` | Frozen cell | cell\n * `last-frozen` | Last frozen cell | cell\n* * `first-column` | First visible cell on a row | cell\n * `last-column` | Last visible cell on a row | cell\n * `selected` | Selected row | row\n * `expanded` | Expanded row | row\n * `details-opened` | Row with details open | row\n * `loading` | Row that is waiting for data from data provider | row\n * `odd` | Odd row | row\n * `first` | The first body row | row\n * `dragstart` | Set for one frame when drag of a row is starting. The value is a number when multiple rows are dragged | row\n * `dragover` | Set when the row is dragged over | row\n * `drag-disabled` | Set to a row that isn't available for dragging | row\n * `drop-disabled` | Set to a row that can't be dropped on top of | row\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends PolymerElement\n * @mixes ThemableMixin\n * @mixes Grid.A11yMixin\n * @mixes Grid.ActiveItemMixin\n * @mixes Grid.ArrayDataProviderMixin\n * @mixes Grid.ColumnResizingMixin\n * @mixes Grid.DataProviderMixin\n * @mixes Grid.DynamicColumnsMixin\n * @mixes Grid.FilterMixin\n * @mixes Grid.RowDetailsMixin\n * @mixes Grid.ScrollMixin\n * @mixes Grid.SelectionMixin\n * @mixes Grid.SortMixin\n * @mixes Grid.KeyboardNavigationMixin\n * @mixes Grid.ColumnReorderingMixin\n * @mixes Grid.EventContextMixin\n * @mixes Grid.StylingMixin\n * @mixes Grid.DragAndDropMixin\n * @demo demo/index.html\n */\nclass GridElement extends\n  ElementMixin(\n    ThemableMixin(\n      DataProviderMixin(\n        ArrayDataProviderMixin(\n          DynamicColumnsMixin(\n            ActiveItemMixin(\n              ScrollMixin(\n                SelectionMixin(\n                  SortMixin(\n                    RowDetailsMixin(\n                      KeyboardNavigationMixin(\n                        A11yMixin(\n                          FilterMixin(\n                            ColumnReorderingMixin(\n                              ColumnResizingMixin(\n                                EventContextMixin(\n                                  DragAndDropMixin(\n                                    StylingMixin(\n                                      ScrollerElement)))))))))))))))))) {\n  static get template() {\n    return html`\n    <style include=\"vaadin-grid-styles\"></style>\n\n    <div id=\"scroller\" no-scrollbars\\$=\"[[!_scrollbarWidth]]\" wheel-scrolling\\$=\"[[_wheelScrolling]]\" safari\\$=\"[[_safari]]\" ios\\$=\"[[_ios]]\" loading\\$=\"[[loading]]\" edge\\$=\"[[_edge]]\" firefox\\$=\"[[_firefox]]\" ie\\$=\"[[_ie]]\" column-reordering-allowed\\$=\"[[columnReorderingAllowed]]\">\n\n      <table id=\"table\" role=\"grid\" aria-multiselectable=\"true\" tabindex=\"0\">\n        <caption id=\"fixedsizer\" class=\"sizer\" part=\"row\"></caption>\n        <thead id=\"header\" role=\"rowgroup\"></thead>\n        <tbody id=\"items\" role=\"rowgroup\"></tbody>\n        <tfoot id=\"footer\" role=\"rowgroup\"></tfoot>\n      </table>\n\n      <div part=\"reorder-ghost\"></div>\n      <vaadin-grid-outer-scroller id=\"outerscroller\" _touch-device=\"[[_touchDevice]]\" scroll-target=\"[[scrollTarget]]\" scroll-handler=\"[[_this]]\" no-scrollbars=\"[[!_scrollbarWidth]]\">\n        <div id=\"outersizer\" class=\"sizer\" part=\"row\"></div>\n      </vaadin-grid-outer-scroller>\n    </div>\n\n    <!-- The template needs at least one slot or else shady doesn't distribute -->\n    <slot name=\"nodistribute\"></slot>\n\n    <div id=\"focusexit\" tabindex=\"0\"></div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid';\n  }\n\n  static get version() {\n    return '5.6.6';\n  }\n\n  static get observers() {\n    return [\n      '_columnTreeChanged(_columnTree, _columnTree.*)'\n    ];\n  }\n\n  static get properties() {\n    return {\n\n      _this: {\n        type: Object,\n        value: function() {\n          return this;\n        }\n      },\n\n      _safari: {\n        type: Boolean,\n        value: /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n      },\n\n      _ios: {\n        type: Boolean,\n        value: (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream)\n          || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)\n      },\n\n      _edge: {\n        type: Boolean,\n        value: typeof CSS !== 'undefined' && CSS.supports('(-ms-ime-align:auto)')\n      },\n\n      _ie: {\n        type: Boolean,\n        value: !!(navigator.userAgent.match(/Trident/) && !navigator.userAgent.match(/MSIE/))\n      },\n\n      _firefox: {\n        type: Boolean,\n        value: navigator.userAgent.toLowerCase().indexOf('firefox') > -1\n      },\n\n      _android: {\n        type: Boolean,\n        value: /android/i.test(navigator.userAgent)\n      },\n\n      _touchDevice: {\n        type: Boolean,\n        value: TOUCH_DEVICE\n      },\n\n      /**\n       * If true, the grid's height is defined by its rows.\n       *\n       * Effectively, this disables the grid's virtual scrolling so that all the rows are rendered in the DOM at once.\n       * If the grid has a large number of items, using the feature is discouraged to avoid performance issues.\n       */\n      heightByRows: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        observer: '_heightByRowsChanged'\n      },\n      _recalculateColumnWidthOnceLoadingFinished: {\n        type: Boolean,\n        value: true\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this.addEventListener('animationend', this._onAnimationEnd);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.recalculateColumnWidths();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n    if (name === 'dir') {\n      this.__isRTL = newValue === 'rtl';\n      this._updateScrollerMeasurements();\n    }\n  }\n\n  __hasRowsWithClientHeight() {\n    return !!Array.from(this.$.items.children).filter(row => row.clientHeight).length;\n  }\n\n  __itemsReceived() {\n    if (this._recalculateColumnWidthOnceLoadingFinished\n      && !this._cache.isLoading()\n      && this.__hasRowsWithClientHeight()) {\n      this._recalculateColumnWidthOnceLoadingFinished = false;\n      this.recalculateColumnWidths();\n    }\n  }\n\n  /**\n   * @param {Array<Vaadin.GridColumnElement>} cols the columns to auto size based on their content width\n   */\n  _recalculateColumnWidths(cols) {\n    // Note: The `cols.forEach()` loops below could be implemented as a single loop but this has been\n    // split for performance reasons to batch these similar actions [write/read] together to avoid\n    // unnecessary layout trashing.\n\n    // [write] Set automatic width for all cells (breaks column alignment)\n    cols.forEach(col => {\n      col.width = 'auto';\n      col._origFlexGrow = col.flexGrow;\n      col.flexGrow = 0;\n    });\n    // [read] Measure max cell width in each column\n    cols.forEach(col => {\n      col._currentWidth = 0;\n      // Note: _allCells only contains cells which are currently rendered in DOM\n      col._allCells.forEach(c => {\n        // Add 1px buffer to the offset width to avoid too narrow columns (sub-pixel rendering)\n        const cellWidth = c.offsetWidth + 1;\n        col._currentWidth = Math.max(col._currentWidth, cellWidth);\n      });\n    });\n    // [write] Set column widths to fit widest measured content\n    cols.forEach(col => {\n      col.width = `${col._currentWidth}px`;\n      col.flexGrow = col._origFlexGrow;\n      col._currentWidth = undefined;\n      col._origFlexGrow = undefined;\n    });\n  }\n\n  /**\n   * Updates the `width` of all columns which have `autoWidth` set to `true`.\n   */\n  recalculateColumnWidths() {\n    if (!this._columnTree) {\n      return; // No columns\n    }\n    if (this._cache.isLoading()) {\n      this._recalculateColumnWidthOnceLoadingFinished = true;\n    } else {\n      const cols = this._getColumns().filter(col => !col.hidden && col.autoWidth);\n      this._recalculateColumnWidths(cols);\n\n    }\n  }\n\n  _createScrollerRows(count) {\n    const rows = [];\n    for (var i = 0; i < count; i++) {\n      const row = document.createElement('tr');\n      row.setAttribute('part', 'row');\n      row.setAttribute('role', 'row');\n      if (this._columnTree) {\n        this._updateRow(row, this._columnTree[this._columnTree.length - 1], 'body', false, true);\n      }\n      rows.push(row);\n    }\n\n    if (this._columnTree) {\n      this._columnTree[this._columnTree.length - 1].forEach(c => c.notifyPath && c.notifyPath('_cells.*', c._cells));\n    }\n\n    beforeNextRender(this, () => {\n      this._updateFirstAndLastColumn();\n      this._resetKeyboardNavigation();\n    });\n    return rows;\n  }\n\n  _getRowTarget() {\n    return this.$.items;\n  }\n\n  _createCell(tagName) {\n    const contentId = this._contentIndex = this._contentIndex + 1 || 0;\n    const slotName = 'vaadin-grid-cell-content-' + contentId;\n\n    const cellContent = document.createElement('vaadin-grid-cell-content');\n    cellContent.setAttribute('slot', slotName);\n\n    const cell = document.createElement(tagName);\n    cell.id = slotName.replace('-content-', '-');\n    cell.setAttribute('tabindex', '-1');\n    cell.setAttribute('role', tagName === 'td' ? 'gridcell' : 'columnheader');\n\n    const slot = document.createElement('slot');\n    slot.setAttribute('name', slotName);\n\n    cell.appendChild(slot);\n\n    cell._content = cellContent;\n\n    // With native Shadow DOM, mousedown on slotted element does not focus\n    // focusable slot wrapper, that is why cells are not focused with\n    // mousedown. Workaround: listen for mousedown and focus manually.\n    cellContent.addEventListener('mousedown', () => {\n      if (window.chrome) {\n        // Chrome bug: focusing before mouseup prevents text selection, see http://crbug.com/771903\n        const mouseUpListener = () => {\n          if (!cellContent.contains(this.getRootNode().activeElement)) {\n            cell.focus();\n          }\n          // If focus is in the cell content  respect it, do not change.\n          document.removeEventListener('mouseup', mouseUpListener, true);\n        };\n        document.addEventListener('mouseup', mouseUpListener, true);\n      } else {\n        // Focus on mouseup, on the other hand, removes selection on Safari.\n        // Watch out sync focus removal issue, only async focus works here.\n        setTimeout(() => {\n          if (!cellContent.contains(this.getRootNode().activeElement)) {\n            cell.focus();\n          }\n        });\n      }\n    });\n\n    return cell;\n  }\n\n  _updateRow(row, columns, section, isColumnRow, noNotify) {\n    section = section || 'body';\n\n    const contentsFragment = document.createDocumentFragment();\n\n    Array.from(row.children).forEach(cell => cell._vacant = true);\n    row.innerHTML = '';\n    if (row.id !== 'outersizer' && row.id !== 'fixedsizer') {\n      row.hidden = true;\n    }\n    columns\n      .filter(column => !column.hidden)\n      .forEach((column, index, cols) => {\n        let cell;\n\n        if (section === 'body') {\n        // Body\n          column._cells = column._cells || [];\n          cell = column._cells.filter(cell => cell._vacant)[0];\n          if (!cell) {\n            cell = this._createCell('td');\n            column._cells.push(cell);\n          }\n          cell.setAttribute('part', 'cell body-cell');\n          row.appendChild(cell);\n\n          if (index === cols.length - 1 && (this._rowDetailsTemplate || this.rowDetailsRenderer)) {\n          // Add details cell as last cell to body rows\n            this._detailsCells = this._detailsCells || [];\n            const detailsCell = this._detailsCells.filter(cell => cell._vacant)[0] || this._createCell('td');\n            if (this._detailsCells.indexOf(detailsCell) === -1) {\n              this._detailsCells.push(detailsCell);\n            }\n            if (!detailsCell._content.parentElement) {\n              contentsFragment.appendChild(detailsCell._content);\n            }\n            this._configureDetailsCell(detailsCell);\n            row.appendChild(detailsCell);\n            this._a11ySetRowDetailsCell(row, detailsCell);\n            detailsCell._vacant = false;\n          }\n\n          if (column.notifyPath && !noNotify) {\n            column.notifyPath('_cells.*', column._cells);\n          }\n        } else {\n        // Header & footer\n          const tagName = section === 'header' ? 'th' : 'td';\n          if (isColumnRow || column.localName === 'vaadin-grid-column-group') {\n            cell = column[`_${section}Cell`] || this._createCell(tagName);\n            cell._column = column;\n            row.appendChild(cell);\n            column[`_${section}Cell`] = cell;\n          } else {\n            column._emptyCells = column._emptyCells || [];\n            cell = column._emptyCells.filter(cell => cell._vacant)[0] || this._createCell(tagName);\n            cell._column = column;\n            row.appendChild(cell);\n            if (column._emptyCells.indexOf(cell) === -1) {\n              column._emptyCells.push(cell);\n            }\n          }\n          cell.setAttribute('part', `cell ${section}-cell`);\n          this.__updateHeaderFooterRowVisibility(row);\n        }\n\n        if (!cell._content.parentElement) {\n          contentsFragment.appendChild(cell._content);\n        }\n        cell._vacant = false;\n        cell._column = column;\n      });\n\n    // Might be empty if only cache was used\n    this.appendChild(contentsFragment);\n\n    this._frozenCellsChanged();\n    this._updateFirstAndLastColumnForRow(row);\n  }\n\n  __updateHeaderFooterRowVisibility(row) {\n    if (!row) {\n      return;\n    }\n\n    const visibleRowCells = Array.from(row.children).filter(cell => {\n      const column = cell._column;\n      if (column._emptyCells && column._emptyCells.indexOf(cell) > -1) {\n        // The cell is an \"empty cell\"  -> doesn't block hiding the row\n        return false;\n      }\n      if (row.parentElement === this.$.header) {\n        if (column.headerRenderer || column._headerTemplate) {\n          // The cell is the header cell of a column that has a header renderer\n          // or a header template -> row should be visible\n          return true;\n        }\n        if (column.header === null) {\n          // The column header is explicilty set to null -> doesn't block hiding the row\n          return false;\n        }\n        if (column.path || column.header !== undefined) {\n          // The column has an explicit non-null header or a path that generates a header\n          // -> row should be visible\n          return true;\n        }\n      } else {\n        if (column.footerRenderer || column._footerTemplate) {\n          // The cell is the footer cell of a column that has a footer renderer\n          // or a footer template -> row should be visible\n          return true;\n        }\n      }\n    });\n\n    if (row.hidden !== !visibleRowCells.length) {\n      row.hidden = !visibleRowCells.length;\n      this.notifyResize();\n    }\n  }\n\n  _updateScrollerItem(row, index) {\n    this._preventScrollerRotatingCellFocus(row, index);\n\n    if (!this._columnTree) {\n      return;\n    }\n\n    this._toggleAttribute('first', index === 0, row);\n    this._toggleAttribute('odd', index % 2, row);\n    this._a11yUpdateRowRowindex(row, index);\n    this._getItem(index, row);\n  }\n\n  _columnTreeChanged(columnTree, splices) {\n    this._renderColumnTree(columnTree);\n    this.recalculateColumnWidths();\n  }\n\n  _renderColumnTree(columnTree) {\n    Array.from(this.$.items.children).forEach((row) => this._updateRow(row, columnTree[columnTree.length - 1], null, false, true));\n\n    while (this.$.header.children.length < columnTree.length) {\n      const headerRow = document.createElement('tr');\n      headerRow.setAttribute('part', 'row');\n      headerRow.setAttribute('role', 'row');\n      this.$.header.appendChild(headerRow);\n\n      const footerRow = document.createElement('tr');\n      footerRow.setAttribute('part', 'row');\n      footerRow.setAttribute('role', 'row');\n      this.$.footer.appendChild(footerRow);\n    }\n    while (this.$.header.children.length > columnTree.length) {\n      this.$.header.removeChild(this.$.header.firstElementChild);\n      this.$.footer.removeChild(this.$.footer.firstElementChild);\n    }\n\n    Array.from(this.$.header.children)\n      .forEach((headerRow, index) => this._updateRow(headerRow, columnTree[index], 'header', index === columnTree.length - 1));\n\n    Array.from(this.$.footer.children)\n      .forEach((footerRow, index) => this._updateRow(footerRow, columnTree[columnTree.length - 1 - index], 'footer', index === 0));\n\n    // Sizer rows\n    this._updateRow(this.$.outersizer, columnTree[columnTree.length - 1], null, false, true);\n    this._updateRow(this.$.fixedsizer, columnTree[columnTree.length - 1]);\n\n    this._resizeHandler();\n    this._frozenCellsChanged();\n    this._updateFirstAndLastColumn();\n    this._resetKeyboardNavigation();\n    this._a11yUpdateHeaderRows();\n    this._a11yUpdateFooterRows();\n  }\n\n  _updateItem(row, item) {\n    row._item = item;\n    const model = this.__getRowModel(row);\n\n    this._toggleAttribute('selected', model.selected, row);\n    this._a11yUpdateRowSelected(row, model.selected);\n    this._a11yUpdateRowLevel(row, model.level);\n    this._toggleAttribute('expanded', model.expanded, row);\n    if (this._rowDetailsTemplate || this.rowDetailsRenderer) {\n      this._toggleDetailsCell(row, item);\n    }\n    this._generateCellClassNames(row, model);\n    this._filterDragAndDrop(row, model);\n\n    Array.from(row.children).forEach(cell => {\n      if (cell._renderer) {\n        const owner = cell._column || this;\n        cell._renderer.call(owner, cell._content, owner, model);\n      } else if (cell._instance) {\n        cell._instance.__detailsOpened__ = model.detailsOpened;\n        cell._instance.__selected__ = model.selected;\n        cell._instance.__level__ = model.level;\n        cell._instance.__expanded__ = model.expanded;\n        cell._instance.setProperties(model);\n      }\n    });\n\n    this._debouncerUpdateHeights = Debouncer.debounce(this._debouncerUpdateHeights,\n      timeOut.after(1), () => {\n        this._updateMetrics();\n        this._positionItems();\n        this._updateScrollerSize();\n      }\n    );\n  }\n\n  _resizeHandler() {\n    this._updateDetailsCellHeights();\n    this._accessIronListAPI(super._resizeHandler, true);\n    this._updateScrollerMeasurements();\n    this._updateHeaderFooterMetrics();\n  }\n\n  _updateHeaderFooterMetrics() {\n    const headerHeight = this.$.header.clientHeight + 'px';\n    const footerHeight = this.$.footer.clientHeight + 'px';\n    [this.$.outersizer, this.$.fixedsizer, this.$.items].forEach(element => {\n      element.style.borderTopWidth = headerHeight;\n      element.style.borderBottomWidth = footerHeight;\n    });\n\n    afterNextRender(this.$.header, () => {\n      if (this._pendingScrollToIndex) {\n        this._scrollToIndex(this._pendingScrollToIndex);\n      }\n    });\n  }\n\n  _onAnimationEnd(e) {\n    // ShadyCSS applies scoping suffixes to animation names\n    if (e.animationName.indexOf('vaadin-grid-appear') === 0) {\n      this._render();\n      this._updateHeaderFooterMetrics();\n      e.stopPropagation();\n      this.notifyResize();\n      this.__itemsReceived();\n    }\n  }\n\n  _toggleAttribute(name, bool, node) {\n    if (node.hasAttribute(name) === !bool) {\n      if (bool) {\n        node.setAttribute(name, '');\n      } else {\n        node.removeAttribute(name);\n      }\n    }\n  }\n\n  __getRowModel(row) {\n    return {\n      index: row.index,\n      item: row._item,\n      level: this._getIndexLevel(row.index),\n      expanded: this._isExpanded(row._item),\n      selected: this._isSelected(row._item),\n      detailsOpened:\n        !!(this._rowDetailsTemplate || this.rowDetailsRenderer) && this._isDetailsOpened(row._item)\n    };\n  }\n\n  /**\n   * Manually invoke existing renderers for all the columns\n   * (header, footer and body cells) and opened row details.\n   */\n  render() {\n    if (this._columnTree) {\n      // header and footer renderers\n      this._columnTree.forEach(level => {\n        level.forEach(column => column._renderHeaderAndFooter());\n      });\n\n      // body and row details renderers\n      this._update();\n    }\n  }\n\n  /**\n   * Updates the computed metrics and positioning of internal grid parts\n   * (row/details cell positioning etc). Needs to be invoked whenever the sizing of grid\n   * content changes asynchronously to ensure consistent appearance (e.g. when a\n   * contained image whose bounds aren't known beforehand finishes loading).\n   */\n  notifyResize() {\n    super.notifyResize();\n  }\n\n  _heightByRowsChanged(value, oldValue) {\n    if (value || oldValue) {\n      this.notifyResize();\n    }\n  }\n\n  __forceReflow() {\n    this._debouncerForceReflow = Debouncer.debounce(this._debouncerForceReflow,\n      animationFrame, () => {\n        this.$.scroller.style.overflow = 'hidden';\n        setTimeout(() => this.$.scroller.style.overflow = '');\n      }\n    );\n  }\n}\n\ncustomElements.define(GridElement.is, GridElement);\nexport { GridElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { templatize } from '@polymer/polymer/lib/utils/templatize.js';\n/**\n * `vaadin-grid-templatizer` is a helper element for the `vaadin-grid` that is preparing and\n * stamping instances of cells and columns templates\n *\n * @extends PolymerElement\n * @private\n */\nclass GridTemplatizer extends (class extends PolymerElement {}) {\n  static get is() {\n    return 'vaadin-grid-templatizer';\n  }\n\n  static get properties() {\n    return {\n      dataHost: Object,\n\n      template: Object,\n\n      _templateInstances: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      _parentPathValues: {\n        value: function() {\n          return {};\n        }\n      },\n\n      _grid: Object\n    };\n  }\n\n  static get observers() {\n    return [\n      '_templateInstancesChanged(_templateInstances.*, _parentPathValues.*)'\n    ];\n  }\n\n  constructor() {\n    super();\n\n    this._instanceProps = {\n      detailsOpened: true,\n      index: true,\n      item: true,\n      selected: true,\n      expanded: true,\n      level: true\n    };\n  }\n\n  createInstance() {\n    this._ensureTemplatized();\n    const instance = new this._TemplateClass({});\n    this.addInstance(instance);\n\n    return instance;\n  }\n\n  addInstance(instance) {\n    if (this._templateInstances.indexOf(instance) === -1) {\n      this._templateInstances.push(instance);\n      requestAnimationFrame(() => this.notifyPath('_templateInstances.*', this._templateInstances));\n    }\n  }\n\n  removeInstance(instance) {\n    const index = this._templateInstances.indexOf(instance);\n    this.splice('_templateInstances', index, 1);\n  }\n\n  _ensureTemplatized() {\n    if (!this._TemplateClass) {\n      this._TemplateClass = templatize(this.template, this, {\n        instanceProps: this._instanceProps,\n        parentModel: true,\n\n        forwardHostProp: function(prop, value) {\n          this._forwardParentProp(prop, value);\n\n          if (this._templateInstances) {\n            this._templateInstances.forEach(inst => inst.notifyPath(prop, value));\n          }\n        },\n\n        notifyInstanceProp: function(inst, prop, value) {\n          if (prop === 'index' || prop === 'item') {\n            // We dont need a change notification for these.\n            return;\n          }\n\n          const originalProp = `__${prop}__`;\n\n          // Notify for only user-action changes, not for scrolling updates. E. g.,\n          // if `detailsOpened` is different from `__detailsOpened__`, which was set during render.\n          if (inst[originalProp] === value) {\n            return;\n          }\n          inst[originalProp] = value;\n\n          const row = Array.from(this._grid.$.items.children).filter(row => this._grid._itemsEqual(row._item, inst.item))[0];\n          if (row) {\n            Array.from(row.children).forEach(cell => {\n              if (cell._instance) {\n                cell._instance[originalProp] = value;\n                cell._instance.notifyPath(prop, value);\n              }\n            });\n          }\n\n          const itemPrefix = 'item.';\n          if (Array.isArray(this._grid.items) && prop.indexOf(itemPrefix) === 0) {\n            const itemsIndex = this._grid.items.indexOf(inst.item);\n            const path = prop.slice(itemPrefix.length);\n            this._grid.notifyPath(`items.${itemsIndex}.${path}`, value);\n          }\n\n          const gridCallback = `_${prop}InstanceChangedCallback`;\n          if (this._grid && this._grid[gridCallback]) {\n            this._grid[gridCallback](inst, value);\n          }\n        }\n\n      });\n    }\n  }\n\n  _forwardParentProp(prop, value) {\n    this._parentPathValues[prop] = value;\n    this._templateInstances.forEach(inst => inst.notifyPath(prop, value));\n  }\n\n  _templateInstancesChanged(t, p) {\n    let index, count;\n    if (t.path === '_templateInstances') {\n      // Iterate all instances\n      index = 0;\n      count = this._templateInstances.length;\n    } else if (t.path === '_templateInstances.splices') {\n      // Iterate only new instances\n      index = t.value.index;\n      count = t.value.addedCount;\n    } else {\n      return;\n    }\n    Object.keys(this._parentPathValues || {}).forEach(keyName => {\n      for (var i = index; i < index + count; i++) {\n        this._templateInstances[i].set(keyName, this._parentPathValues[keyName]);\n      }\n    });\n  }\n\n}\n\ncustomElements.define(GridTemplatizer.is, GridTemplatizer);\n\nexport { GridTemplatizer as Templatizer };\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { FlattenedNodesObserver } from '@polymer/polymer/lib/utils/flattened-nodes-observer.js';\nimport { DirMixin } from '@vaadin/vaadin-element-mixin/vaadin-dir-mixin.js';\nimport { Templatizer } from './vaadin-grid-templatizer.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { animationFrame } from '@polymer/polymer/lib/utils/async.js';\n\n/**\n * @polymerMixin\n */\nexport const ColumnBaseMixin = superClass => class ColumnBaseMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * When set to true, the column is user-resizable.\n       * @default false\n       */\n      resizable: {\n        type: Boolean,\n        value: function() {\n          if (this.localName === 'vaadin-grid-column-group') {\n            return;\n          }\n\n          const parent = this.parentNode;\n          if (parent && parent.localName === 'vaadin-grid-column-group') {\n            return parent.resizable || false;\n          } else {\n            return false;\n          }\n        }\n      },\n\n      _headerTemplate: {\n        type: Object\n      },\n\n      _footerTemplate: {\n        type: Object\n      },\n\n      /**\n       * When true, the column is frozen. When a column inside of a column group is frozen,\n       * all of the sibling columns inside the group will get frozen also.\n       */\n      frozen: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * When set to true, the cells for this column are hidden.\n       */\n      hidden: {\n        type: Boolean\n      },\n\n      /**\n       * Text content to display in the header cell of the column.\n       */\n      header: {\n        type: String\n      },\n\n      /**\n       * Aligns the columns cell content horizontally.\n       * Supported values: \"start\", \"center\" and \"end\".\n       */\n      textAlign: {\n        type: String\n      },\n\n      _lastFrozen: {\n        type: Boolean,\n        value: false\n      },\n\n      _order: Number,\n\n      _reorderStatus: Boolean,\n\n      _emptyCells: Array,\n\n      _headerCell: Object,\n\n      _footerCell: Object,\n\n      _grid: Object,\n\n      /**\n       * Custom function for rendering the header content.\n       * Receives two arguments:\n       *\n       * - `root` The header cell content DOM element. Append your content to it.\n       * - `column` The `<vaadin-grid-column>` element.\n       */\n      headerRenderer: Function,\n\n      /**\n       * Custom function for rendering the footer content.\n       * Receives two arguments:\n       *\n       * - `root` The footer cell content DOM element. Append your content to it.\n       * - `column` The `<vaadin-grid-column>` element.\n       */\n      footerRenderer: Function\n    };\n  }\n\n  static get observers() {\n    return [\n      '_widthChanged(width, _headerCell, _footerCell, _cells.*)',\n      '_frozenChanged(frozen, _headerCell, _footerCell, _cells.*)',\n      '_flexGrowChanged(flexGrow, _headerCell, _footerCell, _cells.*)',\n      '_pathOrHeaderChanged(path, header, _headerCell, _footerCell, _cells.*, renderer, headerRenderer, _bodyTemplate, _headerTemplate)',\n      '_textAlignChanged(textAlign, _cells.*, _headerCell, _footerCell)',\n      '_orderChanged(_order, _headerCell, _footerCell, _cells.*)',\n      '_lastFrozenChanged(_lastFrozen)',\n      '_setBodyTemplateOrRenderer(_bodyTemplate, renderer, _cells, _cells.*)',\n      '_setHeaderTemplateOrRenderer(_headerTemplate, headerRenderer, _headerCell)',\n      '_setFooterTemplateOrRenderer(_footerTemplate, footerRenderer, _footerCell)',\n      '_resizableChanged(resizable, _headerCell)',\n      '_reorderStatusChanged(_reorderStatus, _headerCell, _footerCell, _cells.*)',\n      '_hiddenChanged(hidden, _headerCell, _footerCell, _cells.*)'\n    ];\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._bodyTemplate && (this._bodyTemplate.templatizer._grid = this._grid);\n    this._headerTemplate && (this._headerTemplate.templatizer._grid = this._grid);\n    this._footerTemplate && (this._footerTemplate.templatizer._grid = this._grid);\n\n    this._templateObserver.flush();\n    if (!this._bodyTemplate) {\n      // The observer might not have triggered if the tag is empty. Run manually.\n      this._templateObserver.callback();\n    }\n\n    requestAnimationFrame(() => {\n      this._allCells.forEach(cell => {\n        if (!cell._content.parentNode) {\n          this._grid && this._grid.appendChild(cell._content);\n        }\n      });\n    });\n  }\n\n  /** @protected */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    requestAnimationFrame(() => {\n      if (!this._findHostGrid()) {\n        this._allCells.forEach(cell => {\n          if (cell._content.parentNode) {\n            cell._content.parentNode.removeChild(cell._content);\n          }\n        });\n      }\n    });\n\n    this._gridValue = undefined;\n  }\n\n  _findHostGrid() {\n    let el = this;\n    // Custom elements extending grid must have a specific localName\n    while (el && !/^vaadin.*grid(-pro)?$/.test(el.localName)) {\n      el = el.assignedSlot ? el.assignedSlot.parentNode : el.parentNode;\n    }\n    return el || undefined;\n  }\n\n  get _grid() {\n    if (!this._gridValue) {\n      this._gridValue = this._findHostGrid();\n    }\n    return this._gridValue;\n  }\n\n  get _allCells() {\n    return []\n      .concat(this._cells || [])\n      .concat(this._emptyCells || [])\n      .concat(this._headerCell)\n      .concat(this._footerCell)\n      .filter(cell => cell);\n  }\n\n  constructor() {\n    super();\n\n    this._templateObserver = new FlattenedNodesObserver(this, info => {\n      this._headerTemplate = this._prepareHeaderTemplate();\n      this._footerTemplate = this._prepareFooterTemplate();\n      this._bodyTemplate = this._prepareBodyTemplate();\n    });\n  }\n\n  _prepareHeaderTemplate() {\n    return this._prepareTemplatizer(this._findTemplate(true) || null, {});\n  }\n\n  _prepareFooterTemplate() {\n    return this._prepareTemplatizer(this._findTemplate(false, true) || null, {});\n  }\n\n  _prepareBodyTemplate() {\n    return this._prepareTemplatizer(this._findTemplate() || null);\n  }\n\n  _prepareTemplatizer(template, instanceProps) {\n    if (template && !template.templatizer) {\n      const templatizer = new Templatizer();\n      templatizer._grid = this._grid;\n      templatizer.dataHost = this.dataHost;\n      templatizer._instanceProps = instanceProps || templatizer._instanceProps;\n      templatizer.template = template;\n      template.templatizer = templatizer;\n    }\n\n    return template;\n  }\n\n  _renderHeaderAndFooter() {\n    if (this.headerRenderer && this._headerCell) {\n      this.__runRenderer(this.headerRenderer, this._headerCell);\n    }\n    if (this.footerRenderer && this._footerCell) {\n      this.__runRenderer(this.footerRenderer, this._footerCell);\n    }\n  }\n\n  __runRenderer(renderer, cell, rowData) {\n    const args = [cell._content, this];\n    if (rowData && rowData.item) {\n      args.push(rowData);\n    }\n    renderer.apply(this, args);\n  }\n\n  __setColumnTemplateOrRenderer(template, renderer, cells) {\n    if (template && renderer) {\n      throw new Error('You should only use either a renderer or a template');\n    }\n\n    cells.forEach(cell => {\n      const model = this._grid.__getRowModel(cell.parentElement);\n\n      if (renderer) {\n        cell._renderer = renderer;\n\n        if (model.item || renderer === this.headerRenderer || renderer === this.footerRenderer) {\n          this.__runRenderer(renderer, cell, model);\n        }\n      } else if (cell._template !== template) {\n        cell._template = template;\n\n        cell._content.innerHTML = '';\n        template.templatizer._grid = template.templatizer._grid || this._grid;\n        const inst = template.templatizer.createInstance();\n        cell._content.appendChild(inst.root);\n        cell._instance = inst;\n        if (model.item) {\n          cell._instance.setProperties(model);\n        }\n      }\n    });\n  }\n\n  _setBodyTemplateOrRenderer(template, renderer, cells, splices) {\n    if ((template || renderer) && cells) {\n      this.__setColumnTemplateOrRenderer(template, renderer, cells);\n    }\n  }\n\n  _setHeaderTemplateOrRenderer(headerTemplate, headerRenderer, headerCell) {\n    if ((headerTemplate || headerRenderer) && headerCell) {\n      this.__setColumnTemplateOrRenderer(headerTemplate, headerRenderer, [headerCell]);\n    }\n  }\n\n  _setFooterTemplateOrRenderer(footerTemplate, footerRenderer, footerCell) {\n    if ((footerTemplate || footerRenderer) && footerCell) {\n      this.__setColumnTemplateOrRenderer(footerTemplate, footerRenderer, [footerCell]);\n      this._grid.__updateHeaderFooterRowVisibility(footerCell.parentElement);\n    }\n  }\n\n  _selectFirstTemplate(header = false, footer = false) {\n    return FlattenedNodesObserver.getFlattenedNodes(this)\n      .filter(node =>\n        node.localName === 'template'\n        && node.classList.contains('header') === header\n        && node.classList.contains('footer') === footer\n      )[0];\n  }\n\n  _findTemplate(header, footer) {\n    const template = this._selectFirstTemplate(header, footer);\n    if (template) {\n      if (this.dataHost) {\n        // set dataHost to the context where template has been defined\n        template._rootDataHost = this.dataHost._rootDataHost || this.dataHost;\n      }\n    }\n    return template;\n  }\n\n  _flexGrowChanged(flexGrow, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('flexGrow');\n    }\n\n    this._allCells.forEach(cell => cell.style.flexGrow = flexGrow);\n  }\n\n  _orderChanged(order, headerCell, footerCell, cells) {\n    this._allCells.forEach(cell => cell.style.order = order);\n  }\n\n  _widthChanged(width, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('width');\n    }\n\n    this._allCells.forEach(cell => cell.style.width = width);\n\n    // Force a reflow to workaround browser issues causing double scrollbars to grid\n    // https://github.com/vaadin/vaadin-grid/issues/1586\n    if (this._grid && this._grid.__forceReflow) {\n      this._grid.__forceReflow();\n    }\n  }\n\n  _frozenChanged(frozen, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('frozen', frozen);\n    }\n\n    this._allCells.forEach(cell => this._toggleAttribute('frozen', frozen, cell));\n\n    this._grid && this._grid._frozenCellsChanged && this._grid._frozenCellsChanged();\n  }\n\n  _lastFrozenChanged(lastFrozen) {\n    this._allCells.forEach(cell => this._toggleAttribute('last-frozen', lastFrozen, cell));\n\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._lastFrozen = lastFrozen;\n    }\n  }\n\n  _pathOrHeaderChanged(path, header, headerCell, footerCell, cells, renderer, headerRenderer, bodyTemplate, headerTemplate) {\n    const hasHeaderText = header !== undefined;\n    if (!headerRenderer && !headerTemplate && hasHeaderText && headerCell) {\n      this.__setTextContent(headerCell._content, header);\n    }\n\n    if (path && cells.value) {\n      if (!renderer && !bodyTemplate) {\n        const pathRenderer = (root, owner, {item}) => this.__setTextContent(root, this.get(path, item));\n        this.__setColumnTemplateOrRenderer(undefined, pathRenderer, cells.value);\n      }\n\n      if (!headerRenderer && !headerTemplate && !hasHeaderText && headerCell && header !== null) {\n        this.__setTextContent(headerCell._content, this._generateHeader(path));\n      }\n    }\n\n    if (headerCell) {\n      this._grid.__updateHeaderFooterRowVisibility(headerCell.parentElement);\n    }\n  }\n\n  __setTextContent(node, textContent) {\n    node.textContent !== textContent && (node.textContent = textContent);\n  }\n\n  _generateHeader(path) {\n    return path\n      .substr(path.lastIndexOf('.') + 1)\n      .replace(/([A-Z])/g, '-$1').toLowerCase()\n      .replace(/-/g, ' ')\n      .replace(/^./, match => match.toUpperCase());\n  }\n\n  _toggleAttribute(name, bool, node) {\n    if (node.hasAttribute(name) === !bool) {\n      if (bool) {\n        node.setAttribute(name, '');\n      } else {\n        node.removeAttribute(name);\n      }\n    }\n  }\n\n  _reorderStatusChanged(reorderStatus, headerCell, footerCell, cells) {\n    this._allCells.forEach(cell => cell.setAttribute('reorder-status', reorderStatus));\n  }\n\n  _resizableChanged(resizable, headerCell) {\n    if (resizable === undefined || headerCell === undefined) {\n      return;\n    }\n\n    if (headerCell) {\n      [headerCell].concat(this._emptyCells).forEach(cell => {\n        if (cell) {\n          const existingHandle = cell.querySelector('[part~=\"resize-handle\"]');\n          if (existingHandle) {\n            cell.removeChild(existingHandle);\n          }\n\n          if (resizable) {\n            const handle = document.createElement('div');\n            handle.setAttribute('part', 'resize-handle');\n            cell.appendChild(handle);\n          }\n        }\n      });\n    }\n  }\n\n  _textAlignChanged(textAlign, _cells, _headerCell, _footerCell) {\n    if (textAlign === undefined) {\n      return;\n    }\n    if (['start', 'end', 'center'].indexOf(textAlign) === -1) {\n      console.warn('textAlign can only be set as \"start\", \"end\" or \"center\"');\n      return;\n    }\n\n    let textAlignFallback;\n    if (getComputedStyle(this._grid).direction === 'ltr') {\n      if (textAlign === 'start') {\n        textAlignFallback = 'left';\n      } else if (textAlign === 'end') {\n        textAlignFallback = 'right';\n      }\n    } else {\n      if (textAlign === 'start') {\n        textAlignFallback = 'right';\n      } else if (textAlign === 'end') {\n        textAlignFallback = 'left';\n      }\n    }\n\n    this._allCells.forEach(cell => {\n      cell._content.style.textAlign = textAlign;\n      if (getComputedStyle(cell._content).textAlign !== textAlign) {\n        cell._content.style.textAlign = textAlignFallback;\n      }\n    });\n  }\n\n  _hiddenChanged(hidden, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('hidden', hidden);\n    }\n\n    if (!!hidden !== !!this._previousHidden && this._grid) {\n      if (hidden === true) {\n        this._allCells.forEach(cell => {\n          if (cell._content.parentNode) {\n            cell._content.parentNode.removeChild(cell._content);\n          }\n        });\n      }\n      this._grid._debouncerHiddenChanged = Debouncer.debounce(\n        this._grid._debouncerHiddenChanged,\n        animationFrame,\n        () => {\n          if (this._grid && this._grid._renderColumnTree) {\n            this._grid._renderColumnTree(this._grid._columnTree);\n          }\n        }\n      );\n\n      this._grid._updateLastFrozen && this._grid._updateLastFrozen();\n      this._grid.notifyResize && this._grid.notifyResize();\n      this._grid._resetKeyboardNavigation && this._grid._resetKeyboardNavigation();\n    }\n    this._previousHidden = hidden;\n  }\n\n};\n\n/**\n * A `<vaadin-grid-column>` is used to configure how a column in `<vaadin-grid>`\n * should look like.\n *\n * See `<vaadin-grid>` documentation and demos for instructions and examples on how\n * to configure the `<vaadin-grid-column>`.\n * ```\n *\n * @extends PolymerElement\n * @mixes Grid.ColumnBaseMixin\n */\nclass GridColumnElement extends ColumnBaseMixin(DirMixin(PolymerElement)) {\n  static get is() {\n    return 'vaadin-grid-column';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Width of the cells for this column.\n       */\n      width: {\n        type: String,\n        value: '100px'\n      },\n\n      /**\n       * Flex grow ratio for the cell widths. When set to 0, cell width is fixed.\n       */\n      flexGrow: {\n        type: Number,\n        value: 1\n      },\n\n      /**\n       * Custom function for rendering the cell content.\n       * Receives three arguments:\n       *\n       * - `root` The cell content DOM element. Append your content to it.\n       * - `column` The `<vaadin-grid-column>` element.\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       *   - `rowData.expanded` Sublevel toggle state.\n       *   - `rowData.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `rowData.selected` Selected state.\n       */\n      renderer: Function,\n\n      /**\n       * Path to an item sub-property whose value gets displayed in the column body cells.\n       * The property name is also shown in the column header if an explicit header or renderer isn't defined.\n       */\n      path: {\n        type: String\n      },\n\n      /**\n       * Automatically sets the width of the column based on the column contents when this is set to `true`.\n       *\n       * For performance reasons the column width is calculated automatically only once when the grid items\n       * are rendered for the first time and the calculation only considers the rows which are currently\n       * rendered in DOM (a bit more than what is currently visible). If the grid is scrolled, or the cell\n       * content changes, the column width might not match the contents anymore.\n       *\n       * Hidden columns are ignored in the calculation and their widths are not automatically updated when\n       * you show a column that was initially hidden.\n       *\n       * You can manually trigger the auto sizing behavior again by calling `grid.recalculateColumnWidths()`.\n       *\n       * The column width may still grow larger when `flexGrow` is not 0.\n       */\n      autoWidth: {\n        type: Boolean,\n        value: false\n      },\n\n      _bodyTemplate: {\n        type: Object\n      },\n\n      _cells: Array\n\n    };\n  }\n\n}\n\ncustomElements.define(GridColumnElement.is, GridColumnElement);\nexport { GridColumnElement };\n"],"sourceRoot":""}