{"version":3,"sources":["webpack:///./components/dnd-button.js","webpack:///./components/dnd-select-add.js","webpack:///./components/dnd-asi-select.js","webpack:///./data/choices.js","webpack:///./components/views/character/dnd-character-builder-class.js"],"names":["DndButton","label","type","String","value","icon","svg","background","border","svgFill","svgStroke","setTimeout","this","button","$","i","result","fill","stroke","customElements","define","DndSelectAdd","test","Boolean","reflectToAttribute","options","Array","observer","model","addCallback","Function","choices","Number","placeholder","multiValue","disabled","listBox","remove","select","render","isArray","choiceArray","map","v","indexOf","findIndex","o","name","source","filter","selectedValues","join","super","ready","async","renderer","root","document","createElement","setAttribute","addEventListener","e","opened","wasPreviouslySelected","srcElement","getAttribute","length","splice","selectedOptions","option","item","textContent","appendChild","_assignMenuElement","valueUpdated","connectedCallback","selectChangeHandler","val","selected","undefined","disconnectedCallback","removeEventListener","a","levelIndex","checked","selectedFeat","Object","selectedAbility1","selectedAbility2","featHasAttributeChoice","featAttributeSelection","featAttributeOptions","attributeOptions","switchChangeHandler","detail","_genASICallback","characterChangeHandler","character","updateFromCharacter","asi","index","feat","ability1","ability2","isFeat","featId","featRef","ability","choose","from","toUpperCase","featAttributeSelections","asiIndex","keyForChange","newVal","classOptionsMap","class","2","count","5","10","15","20","4","7","11","19","artificer","6","14","18","barbarian","subclasses","3","bard","paladin","sorcerer","17","1","levels","classes","noContentMessage","isEditMode","editModeHandler","classGrid","notifyResize","grid","draggedItem","rowDetailsRenderer","rowData","renderStack","features","_getClassLevelFeatures","firstElementChild","innerHTML","feature","recursiveEntryRender","deets","querySelector","bind","draggedItems","dropMode","dropTargetItem","items","dropIndex","dropLocation","JSON","parse","stringify","classChoices","_findLevelChoices","dispatchEvent","CustomEvent","bubbles","composed","hitDiceMaxes","push","clearCache","className","classRef","classFeatures","levelsInClass","levelsInSubclass","classFeaturesForLevel","find","gainSubclassFeature","some","subclassDef","subclassFeatures","isSubclass","concat","classLevelFeatures","f","__data","data","stayClosed","detailsOpenedItems","closeItemDetails","openItemDetails","levelChoices","_findChoices","classDef","classLevelCount","subclassChoiceLevel","id","selections","classSkillOptions","startingProficiencies","skills","classSkillProficiencies","classOptions","toLowerCase","classLevelOptions","classLevelOption","level","subclassLevelOptions","subclassLevelOption","subclass","b","classs","choice","adjChoice","c","window","innerWidth","obj","values","replace","element","target","closest","isOpen","classList","contains","intField","parseInt","dataset","max","changeVal","toggle","add","focus","maxes"],"mappings":"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","file":"9.bundle.js","sourcesContent":["import { PolymerElement, html } from '@polymer/polymer';\nimport { MDCRipple } from '@material/ripple';\nimport { } from '@polymer/polymer/lib/elements/dom-if.js';\nimport \"./dnd-svg\";\n\nclass DndButton extends PolymerElement {\n  static get properties() {\n    return {\n      label: {\n        type: String,\n        value: ''\n      },\n      icon: {\n        type: String,\n        value: ''\n      },\n      svg: {\n        type: String,\n        value: ''\n      },\n      background: {\n        type: String,\n        value: ''\n      },\n      border: {\n        type: String,\n        value: ''\n      },\n      svgFill: {\n        type: String,\n        value: ''\n      },\n      svgStroke: {\n        type: String,\n        value: ''\n      }\n    }\n  }\n\n  connectedCallback() {\n    setTimeout(()=> {\n      this.button = new MDCRipple(this.$.button);\n    }, 10)\n  }\n\n  _exists(i) {\n    return !!i;\n  }\n\n  _styleStr(background, border) {\n    let result = '';\n    if (background) {\n      result+= `background: ${background}; `\n    }\n    if (border) {\n      result+= `border: ${border}; `\n    }\n    return result;\n  }\n\n  _svgStyleStr(fill, stroke) {\n    let result = '';\n    if (fill) {\n      result+= `fill: ${fill}; `\n    }\n    if (stroke) {\n      result+= `stroke: ${stroke}; `\n    }\n    return result;\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles\">\n        .mdc-tab-scroller__scroll-area--scroll {\n          overflow-x: auto;\n          background-color: var(--mdc-theme-surface);\n          border: 1px solid var(--mdc-theme-text-divider-on-background);\n          border-bottom: none;\n        }\n        :host {\n          display: inline;\n          overflow: hidden;\n          white-space: nowrap;\n        }\n        .mdc-button {\n          display: inline-flex;\n          justify-content: center;\n          align-items: center;\n          width: 100%;\n        }\n        .mdc-button .mdc-button__icon {\n          margin-right: 0px;\n          margin-left: 8px;\n        }\n        .mdc-button [background] {\n          background: var(--lumo-contrast-10pct);\n        }\n        dnd-svg {\n          height: 20px;\n          width: 20px;\n          flex-shrink: 0;\n          flex-grow: 0;\n          padding-left: 8px;\n          fill: var(--mdc-theme-primary);\n          stroke: var(--mdc-theme-primary);\n        }\n        i {\n          flex-shrink: 0;\n          flex-grow: 0;\n        }\n\n        \n        :host(.btn-field__btn) dnd-svg {\n          padding-left: 0;\n        }\n        :host(.btn-field__btn) i {\n          margin-left: 0;\n        }\n\n        :host(.icon-only) dnd-svg {\n          margin-left: -24px;\n          padding-left: 0;\n        }\n        :host(.icon-only) i {\n          margin-left: -18px;\n          padding-left: 0;\n        }\n\n        :host(.link) .mdc-button__label {\n          text-transform: none;\n          color: var(--lumo-body-text-color);\n          letter-spacing: normal;\n        }\n        :host(.link) i {\n          color: var(--lumo-body-text-color);\n        }\n        :host(.link) button:hover::before {\n          background: none;\n        }\n        :host(.link) button:hover i,\n        :host(.link) button:hover .mdc-button__label {\n          color: var(--mdc-theme-secondary);\n        }\n      </style>\n      <button id=\"button\" class=\"mdc-button\" style$=\"[[_styleStr(background, border)]]\">\n        <div class=\"mdc-button__ripple\"></div>\n        <span class=\"mdc-button__label\">[[label]]</span>\n        <slot name=\"label\"></slot>\n        <template is=\"dom-if\" if=\"[[_exists(icon)]]\">\n          <i class=\"material-icons mdc-button__icon\" aria-hidden=\"true\">[[icon]]</i>\n        </template>\n        <template is=\"dom-if\" if=\"[[_exists(svg)]]\">\n          <dnd-svg id=\"[[svg]]\" style$=\"[[_svgStyleStr(svgFill, svgStroke)]]\"></dnd-svg>\n        </template>\n      </button>\n    `;\n  }\n\n}\ncustomElements.define('dnd-button', DndButton);","import { PolymerElement, html } from '@polymer/polymer';\nimport { mergeFeature } from '../util/charBuilder';\nimport { jqEmpty, util_capitalizeAll } from \"../js/utils\";\nimport \"@vaadin/vaadin-select\";\nimport {loadModel} from \"../util/data\";\n\nclass DndSelectAdd extends PolymerElement {\n  static get properties() {\n    return {\n      test: {\n        type: Boolean,\n        reflectToAttribute: true,\n        value: false\n      },\n      options: {\n        type: Array,\n        observer: \"optionsUpdated\"\n      },\n      model: {\n        type: String\n      },\n      addCallback: {\n        type: Function\n      },\n      value: {\n        type: String,\n        value: \"\",\n        observer: \"valueUpdated\"\n      },\n      choices: {\n        type: Number,\n        observer: \"choicesUpdated\"\n      },\n      label: {\n        type: String\n      },\n      placeholder: {\n        type: String,\n      },\n      multiValue: {\n        type: String,\n        value: \"\"\n      },\n      disabled: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      }\n    }\n  }\n\n  choicesUpdated() {\n    if (this.listBox) {\n      this.listBox.remove();\n      delete this.listBox;\n    }\n    this.$.select.render();\n  }\n\n  optionsUpdated() {\n    if (this.listBox) {\n      this.listBox.remove();\n      delete this.listBox;\n    }\n    this.$.select.render();\n  }\n\n  valueUpdated() {\n    if (this.choices) {\n      if (Array.isArray(this.value) && this.options) {\n        const choiceArray = this.value\n          .map(v => {\n            if (this.options.indexOf(v) !== -1) {\n              return this.options.indexOf(v);\n            } else {\n              return this.options.findIndex((o) => {\n                return o.name === v.name && o.source === v.source;\n              });\n            }\n          })\n          .filter(v => { return v !== -1 });\n\n        if (this.listBox) {\n          this.listBox.selectedValues = choiceArray;\n        }\n        this.multiValue = choiceArray.map(i => {\n          let value = this.options[i];\n          return value.name ? value.name : util_capitalizeAll(value) \n        }).join(\", \");\n      } else {\n        if (this.listBox) {\n          this.listBox.selectedValues = [];\n        }\n        this.multiValue = \"\";\n      }\n    } else {\n      if (this.value && this.options) {\n        if (this.value.source) {\n          this.$.select.value = this.options.findIndex(i => { return i.name === this.value.name && i.source === this.value.source || i === this.value.name }) + \"\";\n        } else if (this.value.name) {\n          this.$.select.value = this.options.findIndex(i => { return i.name === this.value.name || i === this.value.name }) + \"\";\n        } else {\n          this.$.select.value = this.options.findIndex(i => { return i.name === this.value || i === this.value }) + \"\";\n        }\n      } else {\n        this.$.select.value = \"\";\n      }\n    }\n  }\n\n  ready() {\n    super.ready();\n\n    setTimeout(async () => {\n      if (this.model) {\n        this.options = await loadModel(this.model);\n      }\n\n      this.$.select.renderer = (root, select) => {\n        if (!this.listBox) {\n          this.listBox = document.createElement('vaadin-list-box');\n\n          // setting up for multi-select\n          if (this.choices) {\n            this.listBox.setAttribute(\"multiple\", true);\n\n            this.listBox.addEventListener(\"click\", (e) => {\n              select.opened = true;\n              let wasPreviouslySelected = e.srcElement.getAttribute(\"selected\") !== null\n              setTimeout(() => {\n                if (this.listBox.selectedValues.length > this.choices\n                    && !wasPreviouslySelected) {\n                  this.listBox.selectedValues.splice(this.listBox.selectedValues.length - 2, 1)\n                }\n                let selectedOptions = this.listBox.selectedValues.map(v => { return this.options[v] });\n                this.multiValue = selectedOptions.map(o => { return o.name ? o.name : util_capitalizeAll(o) }).join(', ');\n                if (this.addCallback) {\n                  this.addCallback(selectedOptions);\n                }\n              }, 0);\n            });\n\n          }\n\n          // Adding options\n          if (this.options && this.options.length) {\n            for (let i = 0; i < this.options.length; i ++) {\n              const option = this.options[i],\n                item = document.createElement('vaadin-item');\n              if (option.name) {\n                item.textContent = option.name;\n                item.setAttribute(\"value\", i);\n              } else {\n                item.textContent = util_capitalizeAll(option);\n                item.setAttribute(\"value\", i);\n              }\n              this.listBox.appendChild(item);\n            }\n          }\n          root.appendChild(this.listBox);\n          this.$.select._assignMenuElement();\n\n          this.valueUpdated();\n        }\n      };\n    }, 0);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.selectChangeHandler = () => {\n      const val = this.$.select.value;\n      if (val) {\n        if (!this.choices) {\n          const selected = this.options[val];\n          if (this.addCallback) {\n            this.addCallback(selected, this.model);\n          } else {\n            mergeFeature(undefined, selected, this.model);\n          }\n          if (!this.value) {\n            this.$.select.value = \"\";\n          }\n        }\n      }\n    };\n\n    this.$.select.addEventListener(\"change\", this.selectChangeHandler);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.$.select.removeEventListener(\"change\", this.selectChangeHandler);\n  }\n\n  _exists(a) {\n    return !!a;\n  }\n\n  _label(label, choices) {\n    if (label) {\n      if (choices) {\n        return `${label} (${choices})`;\n      } else {\n        return label;\n      }\n    }\n  }\n  \n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: inline-block;\n        }\n        [slot=\"prefix\"] {\n          width: calc(100% - 46px);\n          padding: 12px;\n          line-height: 1.4;\n        }\n        vaadin-select {\n          width: 100%;\n        }\n        .prefix {\n          white-space: normal;\n          color: var(--lumo-body-text-color);\n        }\n      </style>\n      <vaadin-select test$=\"[[test]]\" theme=\"dark\" add id=\"select\" label=\"[[_label(label, choices)]]\" placeholder=\"[[placeholder]]\" disabled$=\"[[disabled]]\">\n        <div hidden$=\"[[!_exists(multiValue)]]\" slot=\"prefix\">\n          <span class=\"prefix\">[[multiValue]]</span>\n        </div>\n      </vaadin-select>\n    `;\n  }\n}\ncustomElements.define('dnd-select-add', DndSelectAdd);","import { PolymerElement, html } from \"@polymer/polymer\";\nimport { getSelectedCharacter, getASIForLevel, getCharacterChannel, setASI, getFeatReference, setFeatAttributeSelection } from \"../util/charBuilder\";\n\nclass DndAsiSelect extends PolymerElement {\n  \n  static get properties() {\n    return {\n      levelIndex: {\n        type: Number\n      },\n      checked: {\n        type: Boolean,\n        value: false\n      },\n      selectedFeat: {\n        type: Object\n      },\n      selectedAbility1: {\n        type: String,\n        value: ''\n      },\n      selectedAbility2: {\n        type: String,\n        value: ''\n      },\n      featHasAttributeChoice: {\n        type: Boolean,\n        value: false\n      },\n      featAttributeSelection: {\n        type: String,\n        value: ''\n      },\n      featAttributeOptions: {\n        type: Array,\n        value: []\n      },\n      disabled: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this.attributeOptions = [\n      \"STR\",\n      \"DEX\",\n      \"CON\",\n      \"INT\",\n      \"WIS\",\n      \"CHA\"\n    ]\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.switchChangeHandler = (e) => {\n      this.checked = e.detail.checked;\n      this._genASICallback()();\n    }\n    this.addEventListener(\"switch-change\", this.switchChangeHandler);\n\n    this.characterChangeHandler = (e) => {\n      let character = e.detail.character;\n      this.updateFromCharacter(character);\n    };\n    \n    this.updateFromCharacter(getSelectedCharacter());\n    getCharacterChannel().addEventListener(\"character-selected\", this.characterChangeHandler);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.removeEventListener(\"switch-change\", this.switchChangeHandler);\n    getCharacterChannel().removeEventListener(\"character-selected\", this.characterChangeHandler);\n  }\n\n  async updateFromCharacter(character) {\n    const { asi, index } = await getASIForLevel(this.levelIndex, character);\n\n    this.featHasAttributeChoice = false;\n    if (asi) {\n      this.selectedFeat = asi.feat;\n      this.selectedAbility1 = asi.ability1;\n      this.selectedAbility2 = asi.ability2;\n      this.checked = asi.isFeat;\n\n      if (asi.isFeat && asi.feat && asi.feat.name && asi.feat.source) {\n        const featId = `${asi.feat.name}_${asi.feat.source}`;\n        const featRef = await getFeatReference(featId);\n\n        if (featRef.ability && featRef.ability.length && featRef.ability[0].choose) {\n          this.featHasAttributeChoice = true;\n          this.featAttributeOptions = featRef.ability[0].choose.from.map(i => { return i.toUpperCase() });\n          this.featAttributeSelection = character.featAttributeSelections && character.featAttributeSelections[featId] \n            ? character.featAttributeSelections[featId] : '';\n        }\n      }\n    } else {\n      this.selectedFeat = { name: '', source: '' };\n      this.selectedAbility1 = '';\n      this.selectedAbility2 = '';\n      this.checked = false;\n    }\n    this.asiIndex = index;\n  }\n\n  _genASICallback(keyForChange) {\n    return (newVal) => {\n      setASI({\n        feat: keyForChange === 'feat' ? { name: newVal.name, source: newVal.source } : this.selectedFeat,\n        ability1: keyForChange === 'ability1' ? newVal : this.selectedAbility1,\n        ability2: keyForChange === 'ability2' ? newVal : this.selectedAbility2,\n        isFeat: this.checked\n      }, this.asiIndex);\n    }\n  }\n\n  _genFeatAbilityCallback() {\n    return (newVal) => {\n      if (this.selectedFeat && this.selectedFeat.name && this.selectedFeat.source) {\n        const featId = `${this.selectedFeat.name}_${this.selectedFeat.source}`;\n        setFeatAttributeSelection(featId, newVal);\n      }\n    }\n  }\n\n  _disableLabel(checked) {\n    return checked ? 'Feat' : 'ASI';\n  }\n\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          flex-direction: column;\n          max-width: 192px;\n        }\n        [hidden] {\n          display: none !important;\n        }\n        .abilities {\n          display: flex;\n          flex-wrap: wrap;\n        }\n        .abilities dnd-select-add {\n          width: calc(50% - 8px);\n        }\n        dnd-select-add + dnd-select-add {\n          margin-left: 16px;\n        }\n        dnd-select-add {\n          display: block;\n        }\n        .disable-label {\n          font-size: 14px;\n          font-weight: 500;\n          color: var(--mdc-theme-primary);\n        }\n      </style>\n\n      <div class=\"disable-label\" hidden$=\"[[!disabled]]\">[[_disableLabel(checked)]]</div>\n      <dnd-switch initial-value=[[checked]] label=\"ASI\" secondary-label=\"Feat\" disabled$=\"[[disabled]]\" hidden$=\"[[disabled]]\"></dnd-switch>\n      <div class=\"abilities\" hidden$=[[checked]]>\n        <dnd-select-add add-callback=\"[[_genASICallback('ability1')]]\" value=\"[[selectedAbility1]]\" options=\"[[attributeOptions]]\" placeholder=\"<ASI>\" disabled$=\"[[disabled]]\"></dnd-select-add>\n        <dnd-select-add add-callback=\"[[_genASICallback('ability2')]]\" value=\"[[selectedAbility2]]\" options=\"[[attributeOptions]]\" placeholder=\"<ASI>\" disabled$=\"[[disabled]]\"></dnd-select-add>\n      </div>\n      <div hidden$=[[!checked]]>\n        <dnd-select-add add-callback=\"[[_genASICallback('feat')]]\" model=\"feats\" value=\"[[selectedFeat.name]]\" placeholder=\"<Choose Feat>\" disabled$=\"[[disabled]]\"></dnd-select-add>\n      </div>\n      <div hidden$=[[!featHasAttributeChoice]]>\n        <dnd-select-add test add-callback=\"[[_genFeatAbilityCallback()]]\" value=\"[[featAttributeSelection]]\" options=\"[[featAttributeOptions]]\" placeholder=\"<Choose Attribute>\" disabled$=\"[[disabled]]\"></dnd-select-add>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define(\"dnd-asi-select\", DndAsiSelect);","export const classOptionsMap = {\n  \"artificer(ua)\": {\n    class: {\n      2: {\n        name: \"Wonderous Invention\",\n        count: 1,\n        options: [\"{@item Bag of holding}\", \"{@item cap of water breathing}\", \"{@item driftglobe}\", \"{@item goggles of night}\", \"{@item sending stones}\"]\n      },\n      5: {\n        name: \"Wonderous Invention\",\n        count: 1,\n        options: [\"{@item Alchemy jug}\", \"{@item helm of comprehending languages}\", \"{@item lantern of revealing}\", \"{@item ring of swimming}\", \"{@item robe of useful items}\", \"{@item rope of climbing}\", \"{@item wand of magic detection}\", \"{@item wand of secrets}\", \"{@item Bag of holding}\", \"{@item cap of water breathing}\", \"{@item driftglobe}\", \"{@item goggles of night}\", \"{@item sending stones}\"]\n      },\n      10: {\n        name: \"Wonderous Invention\",\n        count: 1,\n        options: [\"{@item Bag of beans}\", \"{@item chime of opening}\", \"{@item decanter of endless water}\", \"{@item eyes of minute seeing}\", \"{@item folding boat}\", \"{@item Heward's handy haversack}\", \"{@item Alchemy jug}\", \"{@item helm of comprehending languages}\", \"{@item lantern of revealing}\", \"{@item ring of swimming}\", \"{@item robe of useful items}\", \"{@item rope of climbing}\", \"{@item wand of magic detection}\", \"{@item wand of secrets}\", \"{@item Bag of holding}\", \"{@item cap of water breathing}\", \"{@item driftglobe}\", \"{@item goggles of night}\", \"{@item sending stones}\"]\n      },\n      15: {\n        name: \"Wonderous Invention\",\n        count: 1,\n        options: [\"{@item Boots of striding and springing}\", \"{@item bracers of archery}\", \"{@item brooch of shielding}\", \"{@item broom of flying}\", \"{@item hat of disguise}\", \"{@item slippers of spider climbing}\", \"{@item Bag of beans}\", \"{@item chime of opening}\", \"{@item decanter of endless water}\", \"{@item eyes of minute seeing}\", \"{@item folding boat}\", \"{@item Heward's handy haversack}\", \"{@item Alchemy jug}\", \"{@item helm of comprehending languages}\", \"{@item lantern of revealing}\", \"{@item ring of swimming}\", \"{@item robe of useful items}\", \"{@item rope of climbing}\", \"{@item wand of magic detection}\", \"{@item wand of secrets}\", \"{@item Bag of holding}\", \"{@item cap of water breathing}\", \"{@item driftglobe}\", \"{@item goggles of night}\", \"{@item sending stones}\"]\n      },\n      20: {\n        name: \"Wonderous Invention\",\n        count: 1,\n        options: [\"{@item Eyes of the eagle}\", \"{@item gem of brightness}\", \"{@item gloves of missile snaring}\", \"{@item gloves of swimming and climbing}\", \"{@item ring of jumping}\", \"{@item ring of mind shielding}\", \"{@item wings of flying}\", \"{@item Boots of striding and springing}\", \"{@item bracers of archery}\", \"{@item brooch of shielding}\", \"{@item broom of flying}\", \"{@item hat of disguise}\", \"{@item slippers of spider climbing}\", \"{@item Bag of beans}\", \"{@item chime of opening}\", \"{@item decanter of endless water}\", \"{@item eyes of minute seeing}\", \"{@item folding boat}\", \"{@item Heward's handy haversack}\", \"{@item Alchemy jug}\", \"{@item helm of comprehending languages}\", \"{@item lantern of revealing}\", \"{@item ring of swimming}\", \"{@item robe of useful items}\", \"{@item rope of climbing}\", \"{@item wand of magic detection}\", \"{@item wand of secrets}\", \"{@item Bag of holding}\", \"{@item cap of water breathing}\", \"{@item driftglobe}\", \"{@item goggles of night}\", \"{@item sending stones}\"]\n      }\n    }\n  },\n  \"artificer (revisited)\": {\n    class: {\n      2: {\n        name: \"Infuse Item\",\n        count: 3,\n        type: \"featureType=ai|source=UAArtificerRevisited\"\n      },\n      4: {\n        name: \"Infuse Item\",\n        count: 1,\n        type: \"featureType=ai|source=UAArtificerRevisited\"\n      },\n      7: {\n        name: \"Infuse Item\",\n        count: 1,\n        type: \"featureType=ai|source=UAArtificerRevisited\"\n      },\n      11: {\n        name: \"Infuse Item\",\n        count: 1,\n        type: \"featureType=ai|source=UAArtificerRevisited\"\n      },\n      15: {\n        name: \"Infuse Item\",\n        count: 1,\n        type: \"featureType=ai|source=UAArtificerRevisited\"\n      },\n      19: {\n        name: \"Infuse Item\",\n        count: 1,\n        type: \"featureType=ai|source=UAArtificerRevisited\"\n      }\n    }\n  },\n  artificer: {\n    class: {\n      2: {\n        name: \"Infuse Item\",\n        count: 4,\n        type: \"featureType=ai|source=ERLW\"\n      },\n      6: {\n        name: \"Infuse Item\",\n        count: 2,\n        type: \"featureType=ai|source=ERLW\"\n      },\n      10: {\n        name: \"Infuse Item\",\n        count: 2,\n        type: \"featureType=ai|source=ERLW\"\n      },\n      14: {\n        name: \"Infuse Item\",\n        count: 2,\n        type: \"featureType=ai|source=ERLW\"\n      },\n      18: {\n        name: \"Infuse Item\",\n        count: 2,\n        type: \"featureType=ai|source=ERLW\"\n      }\n    }\n  },\n  barbarian: {\n    subclasses: {\n      \"Path of the Totem Warrior\": {\n        3: {\n          name: \"Totem Spirit\",\n          count: 1,\n          options: [\"Bear\", \"Eagle\", \"Elk\", \"Wolf\", \"Tiger\"]\n        },\n        6: {\n          name: \"Aspect of the Beast\",\n          count: 1,\n          options: [\"Bear\", \"Eagle\", \"Elk\", {\n            name: \"Tiger\",\n            options: [\"athletics\", \"acrobatics\", \"stealth\", \"survival\"],\n            choose: 2,\n            type: \"proficiency\"\n          }, \"Wolf\"]\n        },\n        14: {\n          name: \"Totemic Attunement\",\n          count: 1,\n          options: [\"Bear\", \"Eagle\", \"Elk\", \"Tiger\", \"Wolf\"]\n        }\n      }\n    }\n  },\n  bard: {\n    subclasses: {\n      \"College of Swords\": {\n        3: {\n          name: \"Fighting Style\",\n          count: 1,\n          type: \"fs:b\"\n        }\n      }\n    }\n  },\n  paladin: {\n    class: {\n      2: {\n        name: \"Fighting Style\",\n        type: \"fs:p\",\n        count: 1\n      },\n    }\n  },\n  sorcerer: {\n    class: {\n      3: {\n        name: \"Metamagic\",\n        type: \"mm\",\n        count: 2\n      },\n      10: {\n        name: \"Metamagic\",\n        type: \"mm\",\n        count: 1\n      },\n      17: {\n        name: \"Metamagic\",\n        type: \"mm\",\n        count: 1\n      }\n    },\n    subclasses: {\n      \"Divine Soul\": {\n        1: [\n          {\n            name: \"Divine Magic Affinity\",\n            options: [\"Good (Cure Wounds)\", \"Evil (Inflict Wounds)\", \"Law (Bless)\", \"Chaos (Bane)\", \"Neutrality (Protection From Good and Evil\"],\n            count: 1\n          }\n        ]\n      }\n    }\n  }\n};\n\nexport const proficiencyGains = {\n  classes: {\n    \"artificer(ua)\": {\n      subclasses: {\n        \"Gunsmith\": {\n          1: {\n            name: \"Master Smith\",\n            value: \"{@item smith's tools|phb}\"\n          }\n        }\n      }\n    },\n    \"Artificer (Revisited)\": {\n      subclasses: {\n        \"Alchemist\": {\n          3: {\n            name: \"Tools of the Trade\",\n            value: [\"{@item alchemist's supplies|phb}\", \"{@item herbalism kit|phb}\"]\n          }\n        },\n        \"Archivist\": {\n          3: {\n            name: \"Tools of the Trade\",\n            value: [\"{@item calligrapher's supplies|phb}\", \"{@item forgery kit|phb}\"]\n          }\n        },\n        \"Artillerist\": {\n          3: {\n            name: \"Tools of the Trade\",\n            value: [\"{@item smith's tools|phb}\", \"{@item woodcarver's tools|phb}\"]\n          }\n        },\n        \"Battle Smith\": {\n          3: [\n            {\n              name: \"Tools of the Trade\",\n              value: [\"{@item leatherworker's tools|phb}\", \"{@item smith's tools|phb}\"]\n            }, \n            {\n              name: \"Battle Ready\",\n              value: \"martial weapons\"\n            }\n          ]\n        }\n      }\n    },\n    artificer: {\n      subclasses: {\n        \"Alchemist\": {\n          3: {\n            name: \"Tool Proficiency\",\n            value: \"alchemist's supplies\",\n            orOther: true,\n            type: \"artisan's tools\"\n          }\n        },\n        \"Artillerist\": {\n          3: {\n            name: \"Tool Proficiency\",\n            value: \"woodcarver's supplies\"\n          }\n        },\n        \"Battle Smith\": {\n          3: [\n            {\n              name: \"Tool Proficiency\",\n              value: \"smith's supplies\"\n            },\n            {\n              name: \"Battle Ready\",\n              value: \"martial weapons\"\n            }\n          ]\n        },\n        \"Armorer (UA)\": {\n          3: {\n            name: \"Tricks of the Trade\",\n            value: [\"heavy armor\", \"smith's tools\"]\n          }\n        }\n      }\n    }\n  }\n};\n\nexport const spellGains = {\n  classes: {\n    \"artificer(ua)\": {\n      subclasses: {\n        \"Gunsmith\": {\n          1: {\n            name: \"\",\n            value: \"mending\"\n          }\n        }\n      }\n    },\n    \"Artificer (Revisited)\": {\n      subclasses: {\n        \"Alchemist\": {\n          14: {\n            name: \"Chemical Savant\",\n            value: \"greater restoration\",\n            noSlot: true,\n            noMaterial: true,\n            recharge: \"long rest\"\n          }\n        }\n      }\n    },\n    \"artificer\": {\n      subclasses: {\n        \"Alchemist\": {\n          14: {\n            name: \"Chemical Mastery\",\n            value: [\"greater restoration\", \"heal\"],\n            noSlot: true,\n            noMaterial: true,\n            recharge: \"long rest\"\n          }\n        }\n      }\n    },\n    barbarian: {\n      subclasses: {\n        \"Path of the Totem Warrior\": {\n          3: {\n            name: \"Spirit Seeker\",\n            value: [\"beast sense\", \"speak with animals\"],\n            ritualOnly: true,\n            noSlot: true\n          }\n        },\n        \"Path of the Ancestral Guardian v2 (UA)\": {\n          10: {\n            name: \"Consult the Spirits\",\n            value: \"clairvoyance\",\n            noSlot: true\n          }\n        },\n        \"Path of the Ancestral Guardian\": {\n          10: {\n            name: \"Consult the Spirits\",\n            value: [\"augury\", \"clairvoyance\"],\n            noSlot: true,\n            noMaterial: true,\n            recharge: \"short rest\"\n          }\n        },\n        \"Path of the Wild Soul (UA)\": {\n          3: {\n            name: \"Lingering Magic\",\n            value: \"detect magic\",\n            noSlot: true,\n            noMaterial: true,\n            recharge: \"long rest\",\n            charges: \"con\"\n          }\n        }\n      }\n    },\n    bard: {\n      subclasses: {\n        \"College of Lore\": {\n          6: {\n            name: \"\",\n            count: 2,\n            list: \"any\"\n          }\n        }\n      },\n      class: {\n        10: {\n          name: \"Magical Secrets\",\n          count: 2,\n          list: \"any\"\n        },\n        14: {\n          name: \"\",\n          count: 2,\n          list: \"any\"\n        },\n        18: {\n          name: \"\",\n          count: 2,\n          list: \"any\"\n        }\n      }\n    }\n  }\n};\n\nexport const expertiseClasses = {\n  \"artificer(ua)\": {\n    2: {\n      name: \"Tool Expertise\",\n      type: \"artificier-tools\"\n    }\n  },\n  \"Artificer (Revisited)\": {\n    3: {\n      name: \"Tool Expertise\",\n      type: \"artificier-tools\"\n    }\n  },\n  \"Artificer\": {\n    6: {\n      name: \"Tool Expertise\",\n      type: \"artificier-tools\"\n    }\n  },\n  bard: {\n    3: 2,\n    10: 2\n  }\n};\n\nexport const itemGains = {\n  \"Artificer (Revisited)\": {\n    subclasses: {\n      \"Alchemist\": {\n        3: {\n          name: \"Tools of the Trade\",\n          value: [\"{@item alchemist's supplies|phb}\", \"{@item herbalism kit|phb}\"]\n        }\n      },\n      \"Archivist\": {\n        3: {\n          name: \"Tools of the Trade\",\n          value: [\"{@item calligrapher's supplies|phb}\", \"{@item forgery kit|phb}\"]\n        }\n      },\n      \"Artillerist\": {\n        3: {\n          name: \"Tools of the Trade\",\n          value: [\"{@item smith's tools|phb}\", \"{@item woodcarver's tools|phb}\", \"a nonmagical, wooden wand\"]\n        }\n      },\n      \"Battle Smith\": {\n        3: {\n          name: \"Tools of the Trade\",\n          value: [\"{@item leatherworker's tools|phb}\", \"{@item smith's tools|phb}\"]\n        }\n      }\n    }\n  }\n};\n\nexport const resistanceGains = {\n  class: {\n    \"Artificer (Revisited)\": {\n      subclasses: {\n        \"Alchemist\": {\n          14: [\n            {\n              name: \"Chemical Savant\",\n              level: \"resistance\",\n              type: \"damage\",\n              value: \"acid\"\n            },\n            {\n              name: \"Chemical Savant\",\n              level: \"resistance\",\n              type: \"damage\",\n              value: \"poison\"\n            },\n            {\n              name: \"Chemical Savant\",\n              level: \"immunity\",\n              type: \"condition\",\n              value: \"poisoned\"\n            }\n          ]\n        }\n      }\n    }\n  },\n  artificer: {\n    subclasses: {\n      \"Alchemist\": {\n        15: [\n          {\n            name: \"Chemical Mastery\",\n            level: \"resistance\",\n            type: \"damage\",\n            value: \"acid\"\n          },\n          {\n            name: \"Chemical Mastery\",\n            level: \"resistance\",\n            type: \"damage\",\n            value: \"poison\"\n          },\n          {\n            name: \"Chemical Mastery\",\n            level: \"immunity\",\n            type: \"condition\",\n            value: \"poisoned\"\n          }\n        ]\n      }\n    }\n  }\n};\n","import { PolymerElement, html } from \"@polymer/polymer\";\nimport { MutableData } from '@polymer/polymer/lib/mixins/mutable-data.js';\nimport { getCharacterChannel, getSelectedCharacter, getClassReferences, setClassLevels, mergeSubclass, setClassSkillProficiencies, getSubclassChoiceLevel, mergeFeature, setSubclassChoice, setClassChoice, getSubclassChoice, getClassChoice, getHPRollForClassLevel, getHPDiceForLevel, setHpRoll } from \"../../../util/charBuilder\";\nimport \"@vaadin/vaadin-grid\";\nimport \"../../dnd-select-add\";\nimport \"../../dnd-switch\";\nimport \"../../dnd-button\";\nimport \"../../dnd-asi-select\";\nimport \"../../dnd-svg\";\nimport { jqEmpty, getEntryName } from \"../../../js/utils\";\nimport { classOptionsMap } from \"../../../data/choices\";\nimport EntryRenderer from \"../../../util/entryrender\";\nimport { } from '@polymer/polymer/lib/elements/dom-if.js';\nimport { } from '@polymer/polymer/lib/elements/dom-repeat.js';\nimport { getEditModeChannel, isEditMode } from \"../../../util/editMode\";\nimport {filterModel} from \"../../../util/data\";\n\nclass DndCharacterBuilderClass extends MutableData(PolymerElement) {\n  \n  static get properties() {\n    return {\n      levels: {\n        type: Array,\n        value: []\n      },\n      classes: {\n        type: Object,\n      },\n      subclasses: {\n        type: Object,\n        value: undefined\n      },\n      noContentMessage: {\n        type: Boolean,\n        value: false\n      },\n      isEditMode: {\n        type: Boolean,\n        value: false\n      }\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.characterChangeHandler = (e) => {\n      let character = e.detail.character;\n      this.updateFromCharacter(character);\n    };\n    \n    this.updateFromCharacter(getSelectedCharacter());\n    getCharacterChannel().addEventListener(\"character-selected\", this.characterChangeHandler);\n\n    this.editModeHandler = (e) => {\n      this.isEditMode = e.detail.isEditMode;\n      this.$.classGrid.notifyResize();\n    }\n    getEditModeChannel().addEventListener('editModeChange', this.editModeHandler);\n    this.isEditMode = isEditMode();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    getCharacterChannel().removeEventListener(\"character-selected\", this.characterChangeHandler);\n    getEditModeChannel().removeEventListener('editModeChange', this.editModeHandler);\n  }\n\n  ready() {\n    super.ready();\n\n    const renderer = new EntryRenderer();\n\n    setTimeout(() => {\n      const grid = this.$.classGrid;\n      let draggedItem;\n\n      grid.rowDetailsRenderer = ((root, grid, rowData) => {\n        let renderStack = [],\n          features = this._getClassLevelFeatures(this.levels, rowData.index, this.classes, this.subclasses);\n        \n        if (features && features.length) {\n          if (!root.firstElementChild) {\n            root.innerHTML = '<div class=\"details\" id=\"stats\"></div>';\n          }\n\n          for (let feature of features) {\n            renderer.recursiveEntryRender(\n              feature,\n              renderStack,\n              0,\n              undefined,\n              true\n            );\n          }\n          const deets = root.querySelector('.details');\n          jqEmpty(deets);\n          deets.innerHTML = renderStack.join(\"\");\n        }\n      }).bind(this);\n\n      grid.addEventListener('grid-dragstart', function(e) {\n        draggedItem = e.detail.draggedItems[0];\n        grid.dropMode = 'between';\n      });\n\n      grid.addEventListener('grid-dragend', function(e) {\n        draggedItem = grid.dropMode = null;\n      });\n\n      grid.addEventListener('grid-drop', function(e) {\n        const dropTargetItem = e.detail.dropTargetItem;\n        if (draggedItem && draggedItem !== dropTargetItem) {\n          // Reorder the items\n          const items = grid.items.filter(function(i) {\n            return i !== draggedItem;\n          });\n          const dropIndex = items.indexOf(dropTargetItem)\n            + (e.detail.dropLocation === 'below' ? 1 : 0);\n          items.splice(dropIndex, 0, draggedItem);\n          setClassLevels(items);\n        }\n      });\n    }, 0);\n  }\n\n  async updateFromCharacter(character) {\n    if (character && character.levels && character.levels.length) {\n      this.noContentMessage = false;\n      this.character = character;\n      this.classes = await getClassReferences(character);\n      this.subclasses = JSON.parse(JSON.stringify(character.subclasses));\n\n      this.classChoices = await this._findLevelChoices(character, this.classes);\n\n      this.dispatchEvent(new CustomEvent(\"loadingChange\", { bubbles: true, composed: true }));\n\n      this.levels = character.levels;\n\n      const hitDiceMaxes = [];\n      for (let i = 0; i < character.levels.length; i++) {\n        hitDiceMaxes.push(await getHPDiceForLevel(i));\n      }\n      this.hitDiceMaxes = hitDiceMaxes;\n\n      this.$.classGrid.clearCache();\n    } else {\n      this.noContentMessage = true;\n      this.dispatchEvent(new CustomEvent(\"loadingChange\", { bubbles: true, composed: true }));\n      this.$.classGrid.clearCache();\n    }\n  }\n\n  _getClassLevelFeatures(levels, index, classes, subclasses) {\n    if (classes && levels[index] && subclasses) {\n      const className = levels[index].name;\n      const classRef = classes[className];\n\n      if (classRef) {\n        const classFeatures = classRef.classFeatures;\n        let levelsInClass = -1;\n        let levelsInSubclass = -1;\n\n        if (levels.length >= index + 1) {\n          for (let i = 0; i <= index; i ++) {\n            if (levels[i].name === className) {\n              levelsInClass ++;\n\n              const classFeaturesForLevel = classFeatures[levelsInClass];\n              if (classFeaturesForLevel) {\n                const hasSubclassFeature = classFeaturesForLevel.find(i => i.gainSubclassFeature);\n                if (hasSubclassFeature) {\n                  levelsInSubclass ++;\n                }\n              }\n            }\n          }\n\n          const classFeaturesForLevel = classFeatures[levelsInClass];\n          if (classFeaturesForLevel) {\n            const hasSubclassFeature = classFeaturesForLevel.some(i => i.gainSubclassFeature);\n            if (hasSubclassFeature && subclasses && subclasses[className] && classRef.subclasses && classRef.subclasses.length) {\n              const subclassDef = classRef.subclasses.find(i => subclasses[className].name === i.name);\n              if (subclassDef.subclassFeatures[levelsInSubclass]) {\n                subclassDef.subclassFeatures[levelsInSubclass].map((i) => { i.isSubclass = true; return i; })\n                return [...classFeaturesForLevel].concat(subclassDef.subclassFeatures[levelsInSubclass]);\n              }\n            }\n            return classFeaturesForLevel.filter((feature) => { \n              const name = getEntryName(feature);\n              return name !== 'Proficiency Versatility' && name !== 'Martial Versatility';\n            });\n          }\n        }\n      }\n    }\n  }\n\n  _getClassLevelFeatureStringArray(levels, index, classes, subclasses) {\n    if (levels && index !== undefined && classes && subclasses) {\n      const classLevelFeatures = this._getClassLevelFeatures(levels, index, classes, subclasses);\n\n      if (classLevelFeatures) {\n        return classLevelFeatures.map(f => {\n          return { name: getEntryName(f), isSubclass: f.isSubclass };\n        });\n      }\n    }\n  }\n\n  _level(index) {\n    return index + 1;\n  }\n\n  _deleteLevel(e) {\n    let index = e.model.__data.index;\n    this.levels.splice(index, 1);\n    setClassLevels(this.levels);\n  }\n\n  _expandDetails(e) {\n    let data = e.model.__data.item,\n      stayClosed = this.$.classGrid.detailsOpenedItems.indexOf(data) > -1;\n\n    for (let item of this.$.classGrid.detailsOpenedItems) {\n      this.$.classGrid.closeItemDetails(item);\n    }\n\n    if (stayClosed) {\n      this.$.classGrid.closeItemDetails(data);\n    } else {\n      this.$.classGrid.openItemDetails(data);\n    }\n    this.$.classGrid.notifyResize();\n  }\n\n  async _findLevelChoices(character, classes) {\n    const levelChoices = [];\n    if (character && character.levels && character.levels.length) {\n      for (let i = 0; i < character.levels.length; i++) {\n        levelChoices.push(await this._findChoices(character, classes, i));\n      }\n    }\n    return levelChoices;\n  }\n\n  async _findChoices(character, classes, levelIndex) {\n    if (classes && character.levels && character.levels.length && character.levels.length > levelIndex) {\n      let levels = character.levels,\n        subclasses = character.subclasses,\n        name = levels[levelIndex].name,\n        classDef = classes[name];\n\n      if (classDef) {\n        let choices = [],\n          classLevelCount = 0,\n          subclassChoiceLevel = getSubclassChoiceLevel(classDef);\n\n        for (let i = 0; i <= levelIndex; i++) {\n          let level = levels[i]\n          if (level.name === name) {\n            classLevelCount ++;\n          }\n        }\n\n        if (subclassChoiceLevel !== undefined && classLevelCount === subclassChoiceLevel) {\n          choices.push({\n            id: \"subclass\",\n            from: classDef.subclasses,\n            selections: character.subclasses[name]\n          });\n        }\n\n        let features = this._getClassLevelFeatures(levels, levelIndex, classes, subclasses);\n        if (features && features.length\n            && features.find((f) => { return f.name === \"Ability Score Improvement\"; })) {\n          choices.push({\n            id: \"asi\"\n          });\n        }\n\n        if (levelIndex === 0) {\n          const classSkillOptions = classDef.startingProficiencies.skills[0].choose;\n          choices.push({\n            id: \"profs\",\n            count: classSkillOptions.count,\n            from: classSkillOptions.from,\n            selections: character.classSkillProficiencies\n          });\n        }\n\n        if (classLevelCount) {\n          const classOptions = classOptionsMap[name.toLowerCase()];\n\n          if (classOptions && classOptions.class && classOptions.class[classLevelCount]) {\n            const classLevelOptions = [].concat(classOptions.class[classLevelCount]);\n            \n            for (const classLevelOption of classLevelOptions) {\n              if (classLevelOption.options) {\n                choices.push({\n                  id: \"classFeature\",\n                  name: classLevelOption.name,\n                  from: classLevelOption.options,\n                  count: classLevelOption.count > 1 ? classLevelOption.count : undefined,\n                  class: name.toLowerCase(),\n                  feature: classLevelOption.name,\n                  level: classLevelCount,\n                  selections: getClassChoice(name.toLowerCase(), classLevelCount, classLevelOption.name)\n                });\n              } else if (classLevelOption.type) {\n                const options = await filterModel(\"features\", classLevelOption.type);\n                choices.push({\n                  id: \"classFeature\",\n                  name: classLevelOption.name,\n                  from: options,\n                  count: classLevelOption.count > 1 ? classLevelOption.count : undefined,\n                  class: name.toLowerCase(),\n                  feature: classLevelOption.name,\n                  level: classLevelCount,\n                  selections: getClassChoice(name.toLowerCase(), classLevelCount, classLevelOption.name)\n                });\n              }\n            }\n          }\n\n          if (classOptions && classOptions.subclasses && subclasses[name] && classOptions.subclasses[subclasses[name].name] && classOptions.subclasses[subclasses[name].name][classLevelCount]) {\n            const subclassLevelOptions = [].concat(classOptions.subclasses[subclasses[name].name][classLevelCount]);\n            \n            for (const subclassLevelOption of subclassLevelOptions) {\n              if (subclassLevelOption.options) {\n                choices.push({\n                  id: \"subclassFeature\",\n                  name: subclassLevelOption.name,\n                  from: subclassLevelOption.options,\n                  count: subclassLevelOption.count > 1 ? subclassLevelOption.count : undefined,\n                  class: name.toLowerCase(),\n                  subclass: subclasses[name],\n                  feature: subclassLevelOption.name,\n                  level: classLevelCount,\n                  selections: getSubclassChoice(name.toLowerCase(), subclasses[name].name.toLowerCase(), classLevelCount, subclassLevelOption.name)\n                });\n              } else if (subclassLevelOption.type) {\n                const options = await filterModel(\"features\", subclassLevelOption.type);\n                choices.push({\n                  id: \"subclassFeature\",\n                  name: subclassLevelOption.name,\n                  from: options,\n                  count: subclassLevelOption.count > 1 ? subclassLevelOption.count : undefined,\n                  class: name.toLowerCase(),\n                  subclass: subclasses[name],\n                  feature: subclassLevelOption.name,\n                  level: classLevelCount,\n                  selections: getSubclassChoice(name.toLowerCase(), subclasses[name].name.toLowerCase(), classLevelCount, subclassLevelOption.name)\n                });\n              }\n            }\n          }\n        }\n\n        return choices;\n      }\n    }\n    return [];\n  }\n\n  _equal(a, b) {\n    return a === b;\n  }\n\n  _genSubclassCallback(level) {\n    return (subclass) => {\n      mergeSubclass(undefined, level.name, subclass);\n    }\n  }\n\n  _genSubclassOptions(level) {\n    return this.classes[level.name].subclasses;\n  }\n\n  _getSubclassSelection(level, subclasses) {\n    return subclasses[level.name];\n  }\n\n  _classFeatureOptionAddCallback(classs, level, feature) {\n    return (choice) => {\n      let adjChoice;\n      if (Array.isArray(choice)) {\n        adjChoice = choice.map(c => {\n          if (c.name) {\n            return { name: c.name, source: c.source }\n          } else {\n            return c;\n          }\n        });\n      } else if (choice.name) {\n        adjChoice = { name: choice.name, source: choice.source };\n      } else {\n        adjChoice = choice;\n      }\n      setClassChoice(classs, level, feature, adjChoice);\n    };\n  }\n\n  _subclassFeatureOptionAddCallback(classs, subclass, level, feature) {\n    return (choice) => {\n      let adjChoice;\n      if (Array.isArray(choice)) {\n        adjChoice = choice.map(c => {\n          if (c.name) {\n            return { ...c }\n          } else {\n            return c;\n          }\n        });\n      } else if (choice.name) {\n        adjChoice = { ...choice };\n      } else {\n        adjChoice = choice;\n      }\n      setSubclassChoice(classs, subclass.name.toLowerCase(), level, feature, adjChoice);\n    };\n  }\n\n  _indexOfLevel(level, levels) {\n    return levels.indexOf(level);\n  }\n\n  _isMobile() {\n    return window.innerWidth < 921;\n  }\n\n  _objArray(obj) {\n    return Object.values(obj);\n  }\n\n  _atIndex(data, index) {\n    return data ? data[index] : null;\n  }\n\n  _svgFromClass(className) {\n    return className ? className.replace(/(\\s|\\(|\\))/g, \"\") : '';\n  }\n\n  _addClassLevel(e) {\n    mergeFeature(undefined, e.model.item, \"classes\");\n  }\n\n  _classSkillAddCallback(skills) {\n    setClassSkillProficiencies(skills);\n  }\n\n  _levelHp(className, index) {\n    return getHPRollForClassLevel(className, index + 1);\n  }\n\n  _editModeClass(isEditMode) {\n    return isEditMode ? 'edit-mode' : 'not-edit-mode';\n  }\n\n  _toggleHpField(e) {\n    const element = e.target.closest('.btn-field');\n    const isOpen = element.classList.contains('btn-field--open');\n    const intField = element.querySelector('vaadin-integer-field');\n    const level = parseInt(element.dataset.level) + 1;\n    const className = element.dataset.className;\n    const max = parseInt(element.dataset.max);\n  \n    if (isOpen) {\n      const changeVal = parseInt(intField.value);\n      if (changeVal && changeVal <= max && changeVal > 0) {\n        setHpRoll(className, level, changeVal);\n        intField.value = '';\n        element.classList.toggle('btn-field--open');\n      } else {\n        element.classList.add('btn-field--error');\n        setTimeout(() => {\n          element.classList.remove('btn-field--error');\n        }, 500);\n      }\n    } else {\n      element.classList.toggle('btn-field--open');\n      intField.focus();\n    }\n  }\n\n  _levelHitDice(index, maxes) {\n    if (maxes && index !== undefined && maxes[index]) {\n      return maxes[index];\n    }\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles my-styles\">\n        .something {\n          display: block;\n        }\n        #stats {\n          margin-top: 16px;\n          line-height: 1.9;\n        }\n        .details {\n          padding: 0 24px;\n        }\n\n        #classGrid {\n          margin-bottom: 144px;\n        }\n\n        .not-edit-mode .heading-wrap {\n          display: none;\n        }\n\n        .heading-wrap {\n          display: flex;\n          justify-content: space-between;\n          margin: 22px 14px 5px;\n          align-items: center;\n        }\n\n        .not-edit-mode .button-wrap {\n          display: none;\n        }\n\n        .button-wrap {\n          display: flex;\n          flex-wrap: wrap;\n          align-items: center;\n          padding: 10px;\n        }\n        .button-wrap > * {\n          margin: 4px;\n        }\n\n        .row {\n          position: relative;\n        }\n        .row:after {\n          content: \"\";\n          display: table;\n          clear: both;\n        }\n\n        .open-details {\n          cursor: pointer;\n          display: flex;\n          align-items: flex-start;\n          flex-wrap: wrap;\n        }\n        .open-details:hover {\n          color: var(--mdc-theme-secondary);\n        }\n\n        .level-col {\n          width: calc(100% - 70px);\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          overflow: hidden;\n          flex-shrink: 0;\n          padding: 6px 0;\n        }\n        .level-col__level {\n          margin-right: 10px;\n          font-size: 20px;\n          font-weight: bold;\n        }\n        .level-col__image-wrap {\n          width: 30px;\n          position: relative;\n          height: 21px;\n          display: inline-block;\n        }\n        .level-col__image {\n          width: 30px;\n          height: 30px;\n          display: block;\n          position: absolute;\n          top: -1px;\n        }\n        .level-col__class {\n          font-size: 20px;\n          font-weight: bold;\n        }\n\n        .features-col {\n          white-space: normal;\n          width: calc(100% - 70px);\n          margin: 0;\n          padding: 8px 0;\n          font-size: 15px;\n        }\n        .class-feature:not(:last-of-type)::after {\n          content: ', ';\n        }\n        .class-feature[subclass] {\n          color: var(--mdc-theme-secondary);\n        }\n\n        .choices-col {\n          display: flex;\n          float: left;\n          flex-wrap: wrap;\n          width: 100%;\n        }\n        .choices-col__choice {\n          margin-right: 16px;\n          width: 100%;\n        }\n        .choices-col__choice dnd-select-add {\n          min-width: 250px;\n          width: calc(50% - 20px);\n        }\n        .choices-col__subclass-choice {\n          display: block;\n        }\n\n        .delete-col {\n          position: absolute;\n          right: -8px;\n          bottom: 0;\n        }\n        .delete-btn {\n          height: 24px;\n          width: 24px;\n          font-size: 18px;\n          padding: 0;\n        }\n        .delete-btn:hover {\n          color: var(--mdc-theme-secondary);\n        }\n        .not-edit-mode .delete-btn {\n          display: none;\n        }\n        \n\n        .btn-field {\n          display: inline-flex;\n          flex-direction: row;\n          flex-wrap: nowrap;\n          margin-bottom: 16px;\n          width: 80px;\n          height: 36px;\n          background: var(--lumo-contrast-10pct);\n          border-radius: 4px;\n        }\n        .btn-field--error {\n          background: var(--lumo-error-color-50pct);\n        }\n        .btn-field__btn {\n          display: block;\n          width: 100%;\n        }\n        .btn-field__input {\n          display: none;\n        }\n        .btn-field--open .btn-field__btn {\n          width: 40px;\n        }\n        .btn-field__btn-label-text {\n          position: relative;\n          left: 4px;\n          bottom: 2px;\n        }\n        .btn-field--open .btn-field__btn-label-text {\n          display: none;\n        }\n        .btn-field--open .btn-field__input {\n          display: block;\n          width: 40px;\n          margin-top: -40px;\n        }\n        .btn-field--open .btn-field__btn-label {\n          margin-left: -20px;\n        }\n        .btn-field vaadin-integer-field {\n          --lumo-contrast-10pct: transparent;\n        }\n\n\n        .hp-col {\n          position: absolute;\n          right: 0;\n          top: 8px;\n        }\n        .not-edit-mode .hp-col {\n          right: 0px;\n        }\n        .hp-col .material-icons {\n          font-size: 16px;\n          position: relative;\n          margin-right: 8px;\n          top: 3px;\n        }\n        .hp-col__non-edit {\n          display: block;\n        }\n        .edit-mode .hp-col__non-edit {\n          display: none;\n        }\n        .hp-col__edit {\n          display: none;\n        }\n        .edit-mode .hp-col__edit {\n          display: inline-flex;\n        }\n\n        .details {\n          font-size: 14px;\n          width: calc(100% - 30px);\n          margin: 0 auto 13px !important;\n          background: var(--lumo-contrast-10pct);\n          border-radius: 4px;\n          white-space: pre-line;\n          padding: 14px 14px 1px;\n        }\n\n        .details#stats p {\n          line-height: 1.5;\n        }\n\n        @media(min-width: 921px) {\n          .features-col {\n            margin: 0 30px 0 12px;\n            width: unset;\n            font-size: 16px;\n          }\n          #classGrid {\n            margin-bottom: 0;\n          }\n        }\n\n        .no-content-message {\n          padding: 20px;\n          font-size: 14px;\n          font-style: italic;\n        }\n      </style>\n\n      <div class$=\"[[_editModeClass(isEditMode)]]\">\n        <div class=\"heading-wrap\">\n          <dnd-select-add model=\"classes\" placeholder=\"Add a Class\"></dnd-select-add>\n        </div>\n        <div class=\"button-wrap\">\n          <template is=\"dom-repeat\" items=\"[[_objArray(classes)]]\">\n            <dnd-button icon=\"add\" label=\"[[item.name]]\" on-click=\"_addClassLevel\"></dnd-button>\n          </template>\n        </div>\n\n        <div class=\"no-content-message\" hidden$=\"[[!noContentMessage]]\">Enter edit mode to add classes and levels.</div>\n\n        <vaadin-grid id=\"classGrid\" items=[[levels]] theme=\"no-border\" height-by-rows>\n          <vaadin-grid-column flex-grow=\"1\">\n            <template>\n              <div class=\"row\">\n                <div class=\"open-details\" on-click=\"_expandDetails\">\n                  <div class=\"level-col\">\n                    <span class=\"level-col__level\">[[_level(index)]]</span>\n                    <span class=\"level-col__image-wrap\" ><dnd-svg class=\"level-col__image\" default-color id=\"[[_svgFromClass(item.name)]]\"></dnd-svg></span>\n                    <span class=\"level-col__class\">[[item.name]]</span>\n                  </div>\n\n                  <div class=\"features-col\">\n                    <template is=\"dom-repeat\" items=\"[[_getClassLevelFeatureStringArray(levels, index, classes, subclasses)]]\">\n                      <span class=\"class-feature\" subclass$=\"[[item.isSubclass]]\">[[item.name]]</span>\n                    </template>\n                  </div>\n                </div>\n\n                <div class=\"choices-col\">\n                  <template is=\"dom-repeat\" items=\"[[_atIndex(classChoices, index)]]\" as=\"choice\">\n                    <div class=\"choices-col__choice\">\n                      <template is=\"dom-if\" if=\"[[_equal(choice.id, 'subclass')]]\">\n                        <dnd-select-add class=\"choices-col__subclass-choice\" label=\"Subclass\" placeholder=\"<Choose Subclass>\" disabled$=\"[[!isEditMode]]\"\n                          options=\"[[choice.from]]\" value=\"[[choice.selections]]\" add-callback=\"[[_genSubclassCallback(item)]]\"></dnd-select-add>\n                      </template>\n                      <template is=\"dom-if\" if=\"[[_equal(choice.id, 'asi')]]\">\n                        <dnd-asi-select level-index=\"[[_indexOfLevel(item, levels)]]\" character=\"[[character]]\" disabled$=\"[[!isEditMode]]\"></dnd-asi-select>\n                      </template>\n                      <template is=\"dom-if\" if=\"[[_equal(choice.id, 'profs')]]\">\n                        <dnd-select-add choices=\"[[choice.count]]\" label=\"Skill Proficiency\" placeholder=\"<Choose Skills>\" disabled$=\"[[!isEditMode]]\"\n                          options=\"[[choice.from]]\" value=\"[[choice.selections]]\" add-callback=\"[[_classSkillAddCallback]]\"></dnd-select-add>\n                      </template>\n                      <template is=\"dom-if\" if=\"[[_equal(choice.id, 'classFeature')]]\">\n                        <dnd-select-add choices=\"[[choice.count]]\" label=\"[[choice.name]]\" placeholder=\"<Choose Option>\" disabled$=\"[[!isEditMode]]\"\n                          options=\"[[choice.from]]\" value=\"[[choice.selections]]\" add-callback=\"[[_classFeatureOptionAddCallback(choice.class, choice.level, choice.feature)]]\"></dnd-select-add>\n                      </template>\n                      <template is=\"dom-if\" if=\"[[_equal(choice.id, 'subclassFeature')]]\">\n                        <dnd-select-add choices=\"[[choice.count]]\" label=\"[[choice.name]]\" placeholder=\"<Choose Option>\" disabled$=\"[[!isEditMode]]\"\n                          options=\"[[choice.from]]\" value=\"[[choice.selections]]\" add-callback=\"[[_subclassFeatureOptionAddCallback(choice.class, choice.subclass, choice.level, choice.feature)]]\"></dnd-select-add>\n                      </template>\n                    </div>\n                  </template>\n                </div>\n\n                <div class=\"hp-col\">\n                  <div class=\"hp-col__non-edit\">HP Roll: <span class=\"material-icons\" aria-hidden=\"true\">favorite</span> [[_levelHp(item.name, index)]]</div>\n                  <div class=\"hp-col__edit btn-field\" data-max$=\"[[_levelHitDice(index, hitDiceMaxes)]]\" data-level$=\"[[index]]\" data-class-name$=\"[[item.name]]\">\n                    <dnd-button background=\"none\" class=\"btn-field__btn\" on-click=\"_toggleHpField\">\n                      <span class=\"btn-field__btn-label\" slot=\"label\"><span class=\"material-icons\" aria-hidden=\"true\">favorite</span><span class=\"btn-field__btn-label-text\">[[_levelHp(item.name, index)]]</span></span>\n                    </dnd-button>\n                    <vaadin-integer-field class=\"btn-field__input\" min=\"1\" max=\"[[_levelHitDice(index, hitDiceMaxes)]]\"></vaadin-integer-field>\n                  </div>\n                </div>\n\n                <div class=\"delete-col\">\n                  <dnd-button class=\"delete-btn link\" label=\"Delete\" icon=\"close\" on-click=\"_deleteLevel\"></dnd-button>\n                </div>\n              </div>\n            </template>\n          </vaadin-grid-column>\n        </vaadin-grid>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define(\"dnd-character-builder-class\", DndCharacterBuilderClass);"],"sourceRoot":""}