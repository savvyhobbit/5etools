{"version":3,"sources":["webpack:///./js/items.js","webpack:///./node_modules/@vaadin/vaadin-text-field/theme/lumo/vaadin-number-field-styles.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-number-field.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-integer-field.js","webpack:///./node_modules/@vaadin/vaadin-text-field/vaadin-text-field.js","webpack:///./components/views/character/dnd-character-builder-equipment-item-detail.js","webpack:///./node_modules/@vaadin/vaadin-text-field/theme/lumo/vaadin-text-area-styles.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-text-area.js"],"names":["renderer","renderSelection","item","rootEl","data","makeSmall","hasParsed","noDisplay","type","category","undefined","entries","window","itemTypeList","j","length","push","property","properties","split","itemPropertyList","k","armor","resist","stealth","strength","scfType","adjustItem","wrap","querySelector","innerHTML","classList","add","value","weight","tier","rarity","reqAttune","weaponCategory","damages","i","damage","isLast","roll","dmgTypeToFull","dmg1","dmgType","ac","speed","capacity","carryingcapacity","append","indexOf","prop","a","name","dmg2","range","reload","entryList","renderStack","recursiveEntryRender","join","toLowerCase","$_documentContainer","document","head","appendChild","content","createElement","memoizedTemplate","hasControls","Boolean","reflectToAttribute","min","Number","observer","max","step","super","ready","this","__previousValidInput","inputElement","addEventListener","__onInputChange","bind","e","preventDefault","_decreaseValue","_increaseValue","template","cloneNode","thisTemplate","import","is","decreaseButton","increaseButton","styles","inputField","prefixSlot","insertBefore","_createMethodObserver","required","minlength","maxlength","pattern","invalid","isNumUnset","n","_constraintsChanged","validate","_incrementValue","incr","disabled","readonly","parseFloat","_getIncrement","newValue","_incrementIsInsideTheLimits","_setValue","String","dispatchEvent","CustomEvent","bubbles","currentValue","multiplier","Math","_getMultiplier","margin","round","number","s","isNaN","pow","_getDecimalCount","sign","__validateByStep","__stepChangedCalled","getAttribute","setAttribute","newVal","oldVal","_valueChanged","keyCode","_onKeyDown","checkValidity","customElements","define","preventInvalidInput","_enabledCharPattern","__isInteger","console","warn","__hasOnlyDigits","_stepChanged","test","DndCharacterBuilderEquipmentItemDetail","isEditMode","hasRenderedOutput","hasAC","armorAC","isArmor","isMartial","weaponMagicModifier","itemRarity","itemName","itemWeight","weaponProperties","Array","itemResist","itemQuantity","Object","storedItem","itemType","itemTypes","rarityTypes","damageTypes","resistTypes","weaponPropertyOptions","weaponPropertyValues","connectedCallback","editModeHandler","detail","disconnectedCallback","removeEventListener","error","itemRef","lookupFailed","$","renderedOutput","_getItemType","weapon","parseInt","genericBonus","propStr","props","map","propObj","find","option","trim","filter","canHaveResist","canHaveQuantity","quantity","canHaveSpell","ITEM_TYPE_JSON_TO_ABV","newType","root","isEquipped","isAttuned","hasQuantity","typeVal","key","rollDamageIndexAttr","rollDamageIndex","splice","parsedMod","propCodes","parsedAC","parsedWeight","parsedQuantity","bools","bool","_updateHeight","_onAnimationEnd","animationName","scrollTop","input","inputWidth","getComputedStyle","width","valueLength","_oldValueLength","style","maxWidth","height","display","inputHeight","scrollHeight","clientHeight","removeProperty","_dispatchIronResizeEventIfNeeded"],"mappings":"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","file":"9.bundle.js","sourcesContent":["import EntryRenderer from '../util/entryrender.js';\r\nimport Parser from '../util/Parser.js';\r\nimport { cloneDeep, utils_makeRoller } from '../js/utils.js';\r\n\r\nconst stats_wrapper = `\r\n\t<div class=\"stats-wrapper margin-bottom_large\">\r\n\t\t<div class=\"margin-bottom_small\">\r\n\t\t\t<span class=\"type\"></span><span class=\"rarity\"></span>\r\n\t\t\t<span class=\"attunement\"></span>\r\n\t\t</div>\r\n\t\t<div class=\"margin-bottom_small\">\r\n\t\t\t<span class=\"value\"></span><span class=\"weight\"></span>\r\n\t\t</div>\r\n\t\t<div class=\"margin-bottom_small\">\r\n\t\t\t<span class=\"damage\"></span>\r\n\t\t\t<span class=\"damageType\"></span>\r\n\t\t\t<span class=\"properties\"></span>\r\n\t\t</div>\r\n\t\t<div class=\"text\"></div>\r\n\t</div>`;\r\n\r\nconst renderer = new EntryRenderer();\r\nfunction renderSelection(item, rootEl, data, makeSmall) {\r\n\tadjustItem(item);\r\n\tconst wrap = rootEl.querySelector(\".selection-wrapper\") || rootEl;\r\n\twrap.innerHTML = stats_wrapper;\r\n\r\n\tif (makeSmall) {\r\n\t\twrap.querySelector('.stats-wrapper').classList.add('small');\r\n\t}\r\n\t\r\n\t// const sourceEl = rootEl.querySelector(\".stats-wrapper .source\")\r\n\t// const source = item.source;\r\n\t// const sourceFull = Parser.sourceJsonToFull(source);\r\n\t// sourceEl.innerHTML = (`<span class=\"source${item.source}\">${sourceFull},</span> page ${item.page}`);\r\n\r\n\trootEl.querySelector(\".stats-wrapper .value\").innerHTML = (item.value ? item.value+(item.weight ? \", \" : \"\") : \"\");\r\n\trootEl.querySelector(\".stats-wrapper .weight\").innerHTML = (item.weight ? item.weight+(item.weight == 1 ? \" lb.\" : \" lbs.\") : \"\");\r\n\trootEl.querySelector(\".stats-wrapper .rarity\").innerHTML = ((item.tier ? \", \"+item.tier : \"\")+(item.rarity ? \", \"+item.rarity : \"\"));\r\n\trootEl.querySelector(\".stats-wrapper .attunement\").innerHTML = (item.reqAttune ? item.reqAttune : \"\");\r\n\trootEl.querySelector(\".stats-wrapper .type\").innerHTML = (item.typeText);\r\n\r\n\trootEl.querySelector(\".stats-wrapper .damage\").innerHTML = (\"\");\r\n\trootEl.querySelector(\".stats-wrapper .damageType\").innerHTML = (\"\");\r\n\tconst type = item.type || \"\";\r\n\tif (item.weaponCategory) {\r\n\t\tif (item.damages && item.damages.length) {\r\n\t\t\tfor (let i = 0; i < item.damages.length; i++) {\r\n\t\t\t\tconst damage = item.damages[i];\r\n\t\t\t\tconst isLast = i === item.damages.length - 1;\r\n\t\t\t\tif (damage.roll && damage.type) {\r\n\t\t\t\t\trootEl.querySelector(\".stats-wrapper .damage\").innerHTML += `<span>${utils_makeRoller(damage.roll)} ${Parser.dmgTypeToFull(damage.type)}</span>${isLast ? '': ' + '}`\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(item.dmg1) rootEl.querySelector(\".stats-wrapper .damage\").innerHTML = (utils_makeRoller(item.dmg1));\r\n\t\t\tif(item.dmgType) rootEl.querySelector(\".stats-wrapper .damageType\").innerHTML = (Parser.dmgTypeToFull(item.dmgType));\r\n\t\t}\r\n\t} else if (type === \"LA\" ||type === \"MA\"|| type === \"HA\") {\r\n\t\trootEl.querySelector(\".stats-wrapper .damage\").innerHTML = (\"AC \"+item.ac+(type === \"LA\" ? \" + Dex\" : type === \"MA\" ? \" + Dex (max 2)\" : \"\"));\r\n\t} else if (type === \"S\") {\r\n\t\trootEl.querySelector(\".stats-wrapper .damage\").innerHTML = (\"AC +\"+item.ac);\r\n\t} else if (type === \"MNT\" || type === \"VEH\") {\r\n\t\tconst speed = item.speed;\r\n\t\tconst capacity = item.carryingcapacity;\r\n\t\tif (speed) rootEl.querySelector(\".stats-wrapper .damage\").append(\"Speed=\"+speed);\r\n\t\tif (speed && capacity) rootEl.querySelector(\".stats-wrapper .damage\").append(type === \"MNT\" ? \", \" : \"<br/>\");\r\n\t\tif (capacity) {\r\n\t\t\trootEl.querySelector(\".stats-wrapper .damage\").append(\"Carrying Capacity=\"+capacity);\r\n\r\n\t\t\tif (capacity.indexOf(\"ton\") === -1 && capacity.indexOf(\"passenger\") === -1) {\r\n\t\t\t\trootEl.querySelector(\".stats-wrapper .damage\").append(capacity == 1 ? \" lb.\" : \" lbs.\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trootEl.querySelector(\".stats-wrapper .properties\").innerHTML = (\"\");\r\n\tif (item.property) {\r\n\t\tconst properties = item.property.split(\",\");\r\n\t\tfor (let i = 0; i < properties.length; i++) {\r\n\t\t\tconst prop = properties[i];\r\n\t\t\tlet a = window.itemPropertyList[prop].name;\r\n\t\t\tif (prop === \"V\" && item.dmg2) a = `${a} (${item.dmg2})`;\r\n\t\t\tif (prop === \"T\" || prop === \"A\" || prop === \"AF\") a = `${a} (${item.range}ft.)`;\r\n\t\t\tif (prop === \"RLD\") a = `${a} (${item.reload} shots)`;\r\n\t\t\ta = (i > 0 ? \", \" : item.dmg1 ? \"- \" : \"\") + a;\r\n\t\t\trootEl.querySelector(\".stats-wrapper .properties\").append(a);\r\n\t\t}\r\n\t}\r\n\r\n\tconst entryList = {type: \"entries\", entries: item.entries};\r\n\tconst renderStack = [];\r\n\trenderer.recursiveEntryRender(entryList, renderStack, 1);\r\n\trootEl.querySelector(\".stats-wrapper .text\").innerHTML = (utils_makeRoller(renderStack.join(\"\")).split(item.name.toLowerCase()).join(\"<i>\"+item.name.toLowerCase()+\"</i>\"));\r\n}\r\n\r\nfunction adjustItem(item) {\r\n\tif (item.hasParsed) {\r\n\t\treturn;\r\n\t}\r\n\titem.hasParsed = true;\r\n\tif (item.noDisplay) {\r\n\t\treturn;\r\n\t}\r\n\tif (item.type === \"GV\") {\r\n\t\titem.category = \"Generic Variant\";\r\n\t}\r\n\tif (item.category === undefined) {\r\n\t\titem.category = \"Other\";\r\n\t}\r\n\tif (item.entries === undefined) {\r\n\t\titem.entries = [];\r\n\t} else {\r\n\t\titem.entries = cloneDeep(item.entries);\r\n\t}\r\n\tif (item.type && window.itemTypeList[item.type]) {\r\n\t\tfor (let j = 0; j < window.itemTypeList[item.type].entries.length; j++) {\r\n\t\t\titem.entries.push(window.itemTypeList[item.type].entries[j]);\r\n\t\t}\r\n\t}\r\n\tif (item.property) {\r\n\t\tconst properties = item.property.split(\",\");\r\n\t\tfor (let j = 0; j < properties.length; j++) {\r\n\t\t\tif (window.itemPropertyList[properties[j]].entries) {\r\n\t\t\t\tfor (let k = 0; k < window.itemPropertyList[properties[j]].entries.length; k++) {\r\n\t\t\t\t\titem.entries.push(window.itemPropertyList[properties[j]].entries[k]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t//The following could be encoded in JSON, but they depend on more than one JSON property; maybe fix if really bored later\r\n\tif (item.armor) {\r\n\t\tif (item.resist) {\r\n\t\t\titem.entries.push(\"You have resistance to \"+item.resist+\" damage while you wear this armor.\");\r\n\t\t}\r\n\t\tif (item.armor && item.stealth) {\r\n\t\t\titem.entries.push(\"The wearer has disadvantage on Stealth (Dexterity) checks.\");\r\n\t\t}\r\n\t\tif (item.type === \"HA\" && item.strength) {\r\n\t\t\titem.entries.push(\"If the wearer has a Strength score lower than \" + item.strength + \", their speed is reduced by 10 feet.\");\r\n\t\t}\r\n\t} else if (item.resist) {\r\n\t\tif (item.type === \"P\") {\r\n\t\t\titem.entries.push(\"When you drink this potion, you gain resistance to \"+item.resist+\" damage for 1 hour.\");\r\n\t\t}\r\n\t\tif (item.type === \"RG\") {\r\n\t\t\titem.entries.push(\"You have resistance to \"+item.resist+\" damage while wearing this ring.\");\r\n\t\t}\r\n\t}\r\n\tif (item.type === \"SCF\") {\r\n\t\tif (item.scfType === \"arcane\") {\r\n\t\t\titem.entries.push(\"An arcane focus is a special item designed to channel the power of arcane spells. A sorcerer, warlock, or wizard can use such an item as a spellcasting focus, using it in place of any material component which does not list a cost.\");\r\n\t\t}\r\n\t\tif (item.scfType === \"druid\") {\r\n\t\t\titem.entries.push(\"A druid can use such a druidic focus as a spellcasting focus, using it in place of any material component that does not have a cost.\");\r\n\t\t}\r\n\t\tif (item.scfType === \"holy\") {\r\n\t\t\titem.entries.push(\"A holy symbol is a representation of a god or pantheon.\");\r\n\t\t\titem.entries.push(\"A cleric or paladin can use a holy symbol as a spellcasting focus, using it in place of any material components which do not list a cost. To use the symbol in this way, the caster must hold it in hand, wear it visibly, or bear it on a shield.\");\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport { renderSelection };","import '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/field-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-number-field\" theme-for=\"vaadin-number-field\">\n  <template>\n    <style include=\"lumo-field-button\">\n      :host {\n        width: 8em;\n      }\n\n      :host([has-controls]:not([theme~=\"align-right\"])) [part=\"value\"] {\n        text-align: center;\n      }\n\n      [part=\"decrease-button\"][disabled],\n      [part=\"increase-button\"][disabled] {\n        opacity: 0.2;\n      }\n\n      :host([has-controls]) [part=\"input-field\"] {\n        padding: 0;\n      }\n\n      [part=\"decrease-button\"],\n      [part=\"increase-button\"] {\n        cursor: pointer;\n        font-size: var(--lumo-icon-size-s);\n        width: 1.6em;\n        height: 1.6em;\n      }\n\n      [part=\"decrease-button\"]::before,\n      [part=\"increase-button\"]::before {\n        margin-top: 0.2em;\n      }\n\n      /* RTL specific styles */\n\n      :host([dir=\"rtl\"]) [part=\"value\"],\n      :host([dir=\"rtl\"]) [part=\"input-field\"] ::slotted(input) {\n        --_lumo-text-field-overflow-mask-image: linear-gradient(to left, transparent, #000 1.25em);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-element.js';\n\nimport '@polymer/polymer/lib/elements/custom-style.js';\nimport { TextFieldElement } from './vaadin-text-field.js';\nimport { DomModule } from '@polymer/polymer/lib/elements/dom-module.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-number-field-template\">\n  <template>\n    <style>\n      :host([readonly]) [part\\$=\"button\"] {\n        pointer-events: none;\n      }\n\n      [part=\"decrease-button\"]::before {\n        content: \"âˆ’\";\n      }\n\n      [part=\"increase-button\"]::before {\n        content: \"+\";\n      }\n\n      [part=\"decrease-button\"],\n      [part=\"increase-button\"] {\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n      }\n\n      /* Hide the native arrow icons */\n      [part=\"value\"]::-webkit-outer-spin-button,\n      [part=\"value\"]::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n      }\n\n      [part=\"value\"] {\n        /* Older Firefox versions (v47.0) requires !important */\n        -moz-appearance: textfield !important;\n      }\n\n      :host([dir=\"rtl\"]) [part=\"input-field\"] {\n        direction: ltr;\n      }\n\n      :host([dir=\"rtl\"]) [part=\"value\"]::placeholder {\n        direction: rtl;\n      }\n\n      :host([dir=\"rtl\"]) [part=\"input-field\"] ::slotted(input)::placeholder {\n        direction: rtl;\n      }\n\n      :host([dir=\"rtl\"]) [part=\"value\"]:-ms-input-placeholder,\n      :host([dir=\"rtl\"]) [part=\"input-field\"] ::slotted(input):-ms-input-placeholder {\n        direction: rtl;\n      }\n\n      :host([dir=\"rtl\"]:not([has-controls])) [part=\"value\"]::placeholder {\n        text-align: left;\n      }\n\n      :host([dir=\"rtl\"]:not([has-controls])) [part=\"input-field\"] ::slotted(input)::placeholder {\n        text-align: left;\n      }\n\n      :host([dir=\"rtl\"]:not([has-controls])) [part=\"value\"]:-ms-input-placeholder,\n      :host([dir=\"rtl\"]:not([has-controls])) [part=\"input-field\"] ::slotted(input):-ms-input-placeholder {\n        text-align: left;\n      }\n    </style>\n\n    <div disabled\\$=\"[[!_allowed(-1, value, min, max, step)]]\" part=\"decrease-button\" on-click=\"_decreaseValue\" on-touchend=\"_decreaseButtonTouchend\" hidden\\$=\"[[!hasControls]]\">\n    </div>\n\n    <div disabled\\$=\"[[!_allowed(1, value, min, max, step)]]\" part=\"increase-button\" on-click=\"_increaseValue\" on-touchend=\"_increaseButtonTouchend\" hidden\\$=\"[[!hasControls]]\">\n    </div>\n  </template>\n\n  \n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\nlet memoizedTemplate;\n\n/**\n* `<vaadin-number-field>` is a Web Component for number field control in forms.\n*\n* ```html\n* <vaadin-number-field label=\"Number\">\n* </vaadin-number-field>\n* ```\n*\n* @extends PolymerElement\n* @demo demo/index.html\n*/\nclass NumberFieldElement extends TextFieldElement {\n  static get is() {\n    return 'vaadin-number-field';\n  }\n\n  static get version() {\n    return '2.6.2';\n  }\n\n  static get properties() {\n    return {\n      /**\n      * Set to true to display value increase/decrease controls.\n      */\n      hasControls: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n      * The minimum value of the field.\n      */\n      min: {\n        type: Number,\n        reflectToAttribute: true,\n        observer: '_minChanged'\n      },\n\n      /**\n       * The maximum value of the field.\n       */\n      max: {\n        type: Number,\n        reflectToAttribute: true,\n        observer: '_maxChanged'\n      },\n\n      /**\n       * Specifies the allowed number intervals of the field.\n       */\n      step: {\n        type: Number,\n        value: 1,\n        observer: '_stepChanged'\n      }\n\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.__previousValidInput = this.value || '';\n    this.inputElement.type = 'number';\n    this.inputElement.addEventListener('change', this.__onInputChange.bind(this));\n  }\n\n  _decreaseButtonTouchend(e) {\n    // Cancel the following click and focus events\n    e.preventDefault();\n    this._decreaseValue();\n  }\n\n  _increaseButtonTouchend(e) {\n    // Cancel the following click and focus events\n    e.preventDefault();\n    this._increaseValue();\n  }\n\n  static get template() {\n    if (!memoizedTemplate) {\n      // Clone the superclass template\n      memoizedTemplate = super.template.cloneNode(true);\n\n      // Retrieve this element's dom-module template\n      const thisTemplate = DomModule.import(this.is + '-template', 'template');\n      const decreaseButton = thisTemplate.content.querySelector('[part=\"decrease-button\"]');\n      const increaseButton = thisTemplate.content.querySelector('[part=\"increase-button\"]');\n      const styles = thisTemplate.content.querySelector('style');\n\n      // Add the buttons and styles to the text-field template\n      const inputField = memoizedTemplate.content.querySelector('[part=\"input-field\"]');\n      const prefixSlot = memoizedTemplate.content.querySelector('[name=\"prefix\"]');\n      inputField.insertBefore(decreaseButton, prefixSlot);\n      inputField.appendChild(increaseButton);\n      memoizedTemplate.content.appendChild(styles);\n    }\n\n    return memoizedTemplate;\n  }\n\n  _createConstraintsObserver() {\n    // NOTE: do not call \"super\" but instead override the method to add extra arguments\n    this._createMethodObserver('_constraintsChanged(required, minlength, maxlength, pattern, min, max, step)');\n  }\n\n  _constraintsChanged(required, minlength, maxlength, pattern, min, max, step) {\n    if (!this.invalid) {\n      return;\n    }\n\n    const isNumUnset = n => (!n && n !== 0);\n\n    if (!isNumUnset(min) || !isNumUnset(max)) {\n      this.validate();\n    } else {\n      super._constraintsChanged(required, minlength, maxlength, pattern);\n    }\n  }\n\n  _decreaseValue() {\n    this._incrementValue(-1);\n  }\n\n  _increaseValue() {\n    this._incrementValue(1);\n  }\n\n  _incrementValue(incr) {\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    let value = parseFloat(this.value);\n\n    if (!this.value) {\n      if (this.min == 0 && incr < 0 ||\n          this.max == 0 && incr > 0 ||\n          this.max == 0 && this.min == 0) {\n        incr = 0;\n        value = 0;\n      } else if ((this.max == null || this.max >= 0) &&\n                 (this.min == null || this.min <= 0)) {\n        value = 0;\n      } else if (this.min > 0) {\n        value = this.min;\n        if (this.max < 0 && incr < 0) {\n          value = this.max;\n        }\n        incr = 0;\n      } else if (this.max < 0) {\n        value = this.max;\n        if (incr < 0) {\n          incr = 0;\n        } else {\n          // FIXME(yuriy): find a proper solution to make correct step back\n          if (this._getIncrement(1, value - this.step) > this.max) {\n            value -= 2 * this.step;\n          } else {\n            value -= this.step;\n          }\n        }\n      }\n    } else if (value < this.min) {\n      incr = 0;\n      value = this.min;\n    } else if (value > this.max) {\n      incr = 0;\n      value = this.max;\n    }\n\n    const newValue = this._getIncrement(incr, value);\n    if (!this.value || incr == 0 || this._incrementIsInsideTheLimits(incr, value)) {\n      this._setValue(newValue);\n    }\n  }\n\n  _setValue(value) {\n    this.value = this.inputElement.value = String(parseFloat(value));\n    this.dispatchEvent(new CustomEvent('change', {bubbles: true}));\n  }\n\n  _getIncrement(incr, currentValue) {\n    let step = this.step || 1,\n      min = this.min || 0;\n\n    // To avoid problems with decimal math, multiplying to operate with integers.\n    const multiplier = Math.max(this._getMultiplier(currentValue),\n      this._getMultiplier(step),\n      this._getMultiplier(min));\n\n    step *= multiplier;\n    currentValue = Math.round(currentValue * multiplier);\n    min *= multiplier;\n\n    const margin = (currentValue - min) % step;\n\n    if (incr > 0) {\n      return (currentValue - margin + step) / multiplier;\n    } else if (incr < 0) {\n      return (currentValue - (margin || step)) / multiplier;\n    } else {\n      return currentValue / multiplier;\n    }\n  }\n\n  _getDecimalCount(number) {\n    const s = String(number);\n    const i = s.indexOf('.');\n    return i === -1 ? 1 : s.length - i - 1;\n  }\n\n  _getMultiplier(number) {\n    if (!isNaN(number)) {\n      return Math.pow(10, this._getDecimalCount(number));\n    }\n  }\n\n  _incrementIsInsideTheLimits(incr, value) {\n    if (incr < 0) {\n      return this.min == null || this._getIncrement(incr, value) >= this.min;\n    } else if (incr > 0) {\n      return this.max == null || this._getIncrement(incr, value) <= this.max;\n    } else {\n      return this._getIncrement(incr, value) <= this.max && this._getIncrement(incr, value) >= this.min;\n    }\n  }\n\n  _allowed(sign) {\n    const incr = sign * (this.step || 1);\n    const value = parseFloat(this.value);\n    return !this.value || (!this.disabled && this._incrementIsInsideTheLimits(incr, value));\n  }\n\n  _stepChanged(step) {\n    // Avoid using initial value in validation\n    this.__validateByStep = this.__stepChangedCalled || this.getAttribute('step') !== null;\n    this.inputElement.step = this.__validateByStep ? step : 'any';\n\n    this.__stepChangedCalled = true;\n    this.setAttribute('step', step);\n  }\n\n  _minChanged(min) {\n    this.inputElement.min = min;\n  }\n\n  _maxChanged(max) {\n    this.inputElement.max = max;\n  }\n\n  _valueChanged(newVal, oldVal) {\n    // Validate value to be numeric\n    if (newVal && isNaN(parseFloat(newVal))) {\n      this.value = '';\n    } else if (typeof this.value !== 'string') {\n      this.value = String(this.value);\n    }\n\n    super._valueChanged(this.value, oldVal);\n  }\n\n  _onKeyDown(e) {\n    if (e.keyCode == 38) {\n      e.preventDefault();\n      this._increaseValue();\n    } else if (e.keyCode == 40) {\n      e.preventDefault();\n      this._decreaseValue();\n    }\n    super._onKeyDown(e);\n  }\n\n  __onInputChange() {\n    this.validate();\n  }\n\n  checkValidity() {\n    // text-field mixin does not check against `min`, `max` and `step`\n    if (this.min !== undefined || this.max !== undefined || this.__validateByStep) {\n      return this.inputElement.checkValidity();\n    }\n\n    return super.checkValidity();\n  }\n}\n\nwindow.customElements.define(NumberFieldElement.is, NumberFieldElement);\n\nexport { NumberFieldElement };\n","/**\n@license\nCopyright (c) 2019 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-element.js';\n\nimport '@polymer/polymer/lib/elements/custom-style.js';\nimport { NumberFieldElement } from './vaadin-number-field.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-integer-field-template\">\n\n  \n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n\n/**\n* `<vaadin-integer-field>` is a Web Component for integer field control in forms.\n*\n* ```html\n* <vaadin-integer-field label=\"Number\">\n* </vaadin-integer-field>\n* ```\n*\n* @extends PolymerElement\n* @demo demo/index.html\n*/\nclass IntegerFieldElement extends NumberFieldElement {\n  static get is() {\n    return 'vaadin-integer-field';\n  }\n\n  static get version() {\n    return '2.6.2';\n  }\n\n  static get properties() {\n    // Hide inherited props that don't work with <input type=\"number\"> from JSDoc.\n    return {\n      /**\n       * @private\n       */\n      pattern: String,\n      /**\n       * @private\n       */\n      preventInvalidInput: Boolean,\n      /**\n       * @private\n       */\n      minlength: Number,\n      /**\n       * @private\n       */\n      maxlength: Number\n    };\n  }\n\n  ready() {\n    super.ready();\n    this._enabledCharPattern = '[-+\\\\d]';\n  }\n\n  _valueChanged(newVal, oldVal) {\n    if (newVal !== '' && !this.__isInteger(newVal)) {\n      console.warn(`Trying to set non-integer value \"${newVal}\" to <vaadin-integer-field>.`\n        + ` Clearing the value.`);\n      this.value = '';\n      return;\n    }\n    super._valueChanged(newVal, oldVal);\n  }\n\n  _stepChanged(newVal, oldVal) {\n    if (!this.__hasOnlyDigits(newVal)) {\n      console.warn(`Trying to set invalid step size \"${newVal}\",`\n        + ` which is not a positive integer, to <vaadin-integer-field>.`\n        + ` Resetting the default value 1.`);\n      this.step = 1;\n      return;\n    }\n    super._stepChanged(newVal, oldVal);\n  }\n\n  __isInteger(value) {\n    return /^(-\\d)?\\d*$/.test(String(value));\n  }\n\n  __hasOnlyDigits(value) {\n    return /^\\d*$/.test(String(value));\n  }\n}\n\nwindow.customElements.define(IntegerFieldElement.is, IntegerFieldElement);\n\nexport { IntegerFieldElement };\n","import './theme/lumo/vaadin-text-field.js';\n","import { PolymerElement, html } from \"@polymer/polymer\";\nimport {\n  setItem\n} from \"../../../util/charBuilder\";\nimport { getEditModeChannel, isEditMode } from \"../../../util/editMode\";\nimport { renderSelection } from \"../../../js/items\";\nimport { DAMAGE_TYPES, RARITY_TYPES } from \"../../../util/consts\";\nimport { findInPath, util_capitalizeAll } from \"../../../js/utils\";\nimport \"@vaadin/vaadin-text-field/vaadin-text-field\";\nimport \"@vaadin/vaadin-text-field/vaadin-integer-field\";\nimport \"@vaadin/vaadin-text-field/vaadin-text-area\";\nimport Parser from '../../../util/Parser';\n\n\n//// BOONS\n// Resistance\n// DC+\n// Proficiency?\n// Spells known\nclass DndCharacterBuilderEquipmentItemDetail extends PolymerElement {\n  \n  static get properties() {\n    return {\n      isEditMode: {\n        type: Boolean,\n        value: false\n      },\n      hasRenderedOutput: {\n        type: Boolean,\n        value: false\n      },\n      hasAC: {\n        type: Boolean,\n        value: false\n      },\n      armorAC: {\n        type: Number,\n        value: 0\n      },\n      isArmor: {\n        type: Boolean,\n        value: false\n      },\n      isMartial: {\n        type: Boolean,\n        value: false\n      },\n      weaponMagicModifier: {\n        type: Number,\n        value: 0\n      },\n      itemRarity: {\n        type: String,\n      },\n      itemName: {\n        type: String,\n      },\n      itemWeight: {\n        type: Number,\n        value: 0\n      },\n      weaponProperties: {\n        type: Array,\n      },\n      itemResist: {\n        type: String,\n      },\n      itemQuantity: {\n        type: Number,\n        value: 0\n      },\n      item: {\n        type: Object\n      },\n      storedItem: {\n        type: Object\n      },\n      itemType: {\n        type: String,\n        value: ''\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_itemChanged(item)'\n    ]\n  }\n\n  constructor() {\n    super();\n\n    this.itemTypes = [\n      'Currency',\n      'Armor (Light)',\n      'Armor (Medium)',\n      'Armor (Heavy)',\n      'Melee Weapon',\n      'Ranged Weapon',\n      'Shield',\n      'Adventuring Gear',\n      'Ammunition',\n      'Artisan Tool',\n      'Explosive',\n      'Gaming Set',\n      'Instrument',\n      'Mount',\n      'Potion',\n      'Rod',\n      'Ring',\n      'Scroll',\n      'Spellcasting Focus',\n      'Tool',\n      'Tack and Harness',\n      'Trade Good',\n      'Vehicle',\n      'Wand'\n    ];\n\n    this.rarityTypes = RARITY_TYPES;\n    this.damageTypes = DAMAGE_TYPES;\n    this.resistTypes = ['<None>', ...DAMAGE_TYPES];\n    this.weaponPropertyOptions = [\n      { name: 'Two-Handed', value: '2H' },\n      { name: 'Ammunition', value: 'A' },\n      { name: 'Finesse', value: 'F' },\n      { name: 'Heavy', value: 'H' },\n      { name: 'Light', value: 'L' },\n      { name: 'Loading', value: 'LD' },\n      { name: 'Reach', value: 'R' },\n      { name: 'Reload', value: 'RLD' },\n      { name: 'Special', value: 'S' },\n      { name: 'Thrown', value: 'T' },\n      { name: 'Versatile', value: 'V' },\n    ]\n    this.weaponPropertyValues = [\n      'Two-Handed',\n      'Ammunition',\n      'Finesse',\n      'Heavy',\n      'Light',\n      'Loading',\n      'Reach',\n      'Reload',\n      'Special',\n      'Thrown',\n      'Versatile'\n    ]\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.editModeHandler = (e) => {\n      this.isEditMode = e.detail.isEditMode;\n    }\n    getEditModeChannel().addEventListener('editModeChange', this.editModeHandler);\n    this.isEditMode = isEditMode();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    getEditModeChannel().removeEventListener('editModeChange', this.editModeHandler);\n  }\n\n  _itemChanged() {\n    console.error('itemDetail:', this.item);\n\n    if (this.item.itemRef && !this.item.lookupFailed) {\n      this.hasRenderedOutput = true;\n      renderSelection(this.item, this.$.renderedOutput, undefined, true);\n    } else {\n      this.hasRenderedOutput = false;\n    }\n    this.itemType = this._getItemType();\n    this.hasAC = this.item.type === 'S' || !!this.item.armor;\n    if (this.hasAC) {\n      this.armorAC = this.item.ac;\n    }\n    this.isArmor = !!this.item.armor;\n    this.isMartial = this.item.weaponCategory === 'Martial';\n    if (this.item.weapon) {\n      this.weaponMagicModifier = parseInt(this.item.genericBonus, 10);\n      const propStr = this.item.property;\n      if (propStr) {\n        const props = propStr.split(',').map(prop => {\n          const propObj = this.weaponPropertyOptions.find((option) => option.value === prop.trim());\n          if (propObj) {\n            return propObj.name;\n          }\n        }).filter(prop => !!prop);\n        this.weaponProperties = props;\n        if (!this.item.damages) {\n          if (this.item.dmg1) {\n            this.item.storedItem.damages = [{roll: this.item.dmg1, type: util_capitalizeAll(Parser.dmgTypeToFull(this.item.dmgType))}];\n          } else {\n            this.item.storedItem.damages = [];\n          }\n        }\n      }\n    }\n    this.itemRarity = this.item.rarity;\n    this.itemName = this.item.name;\n    this.itemWeight = this.item.weight;\n    this.canHaveResist = this.item.armor || this.item.type === 'P' || this.item.type === 'RG';\n    this.itemResist = this.item.resist;\n    this.canHaveQuantity = this.item.type === 'P' || this.item.type === 'A' || this.item.type === 'EXP';\n    this.itemQuantity = this.item.quantity;\n    this.canHaveSpell = this.item.type === 'SC';\n\n    if (this.item.storedItem) {\n      this.storedItem = this.item.storedItem;\n    }\n  }\n\n  _getItemType() {\n    if (this.item) {\n      return Parser.ITEM_TYPE_JSON_TO_ABV[this.item.type];  \n    }\n    return '';\n  }\n\n  _selectItemType() {\n    const newType = this.root.querySelector('#typeSelect').value\n    this.storedItem.armor = false;\n    this.storedItem.weapon = false;\n    this.storedItem.type = '';\n    this.storedItem.isEquipped = false;\n    this.storedItem.isAttuned = false;\n\n    switch (newType) {\n      case 'Armor (Light)':\n        this.storedItem.armor = true;\n        this.storedItem.weaponCategory = null;\n        this.storedItem.type = 'LA';\n        break;\n      case 'Armor (Medium)':\n        this.storedItem.armor = true;\n        this.storedItem.weaponCategory = null;\n        this.storedItem.type = 'MA';\n        break;\n      case 'Armor (Heavy)':\n        this.storedItem.armor = true;\n        this.storedItem.weaponCategory = null;\n        this.storedItem.type = 'HA';\n        break;\n      case 'Ranged Weapon':\n        this.storedItem.weapon = true;\n        this.storedItem.weaponCategory = 'Simple';\n        this.storedItem.type = 'R';\n        this.storedItem.resist = null;\n        break;\n      case 'Melee Weapon':\n        this.storedItem.weapon = true;\n        this.storedItem.weaponCategory = 'Simple';\n        this.storedItem.type = 'M';\n        this.storedItem.resist = null;\n        break;\n      case 'Shield':\n        this.storedItem.type = 'S';\n        this.storedItem.weaponCategory = null;\n        this.storedItem.ac = 2;\n        this.storedItem.resist = null;\n        break;\n      case 'Adventuring Gear':\n        this.storedItem.weaponCategory = null;\n        this.storedItem.type = 'G';\n        this.storedItem.resist = null;\n        break;\n      case 'Currency':\n        this.storedItem.weaponCategory = null;\n        this.storedItem.type = '$'\n        this.storedItem.resist = null;\n        this.storedItem.quantity = 1;\n        this.storedItem.hasQuantity = true;\n        break;\n      default:\n        const typeVal = Object.entries(Parser.ITEM_TYPE_JSON_TO_ABV).find(([key, value]) => value === newType);\n        if (typeVal) {\n          this.storedItem.type = typeVal[0];\n        }\n        if (newType !== 'P' || newType !== 'RG') {\n          this.storedItem.resist = null;\n        }\n        break;\n    }\n    if (!(this.storedItem.type === 'P' || this.storedItem.type === 'A' || this.storedItem.type === 'EXP' || this.storedItem.type === '$')) {\n      this.storedItem.hasQuantity = false;\n    }\n    setItem(this.item);\n  }\n\n  _updateItem() {\n    setItem(this.item);\n  }\n\n  _addDamage() {\n    if (!this.storedItem.damages) {\n      this.storedItem.damages = [];\n    }\n    this.storedItem.damages.push({roll: '', type: ''});\n    setItem(this.item);\n  }\n\n  _removeDamage(e) {\n    const rollDamageEl = findInPath('.roll__damage', e);\n    const rollDamageIndexAttr = rollDamageEl.getAttribute('index');\n    const rollDamageIndex = parseInt(rollDamageIndexAttr, 10);\n    this.storedItem.damages.splice(rollDamageIndex, 1);\n    setItem(this.item);\n  }\n\n  _changeWeaponType() {\n    if (this.item.weapon) {\n      if (this.isMartial) {\n        this.storedItem.weaponCategory = 'Martial';\n      } else {\n        this.storedItem.weaponCategory = 'Simple';\n      }\n      setItem(this.item);\n    }\n  }\n\n  _weaponMagicModifierChange() {\n    let parsedMod = parseInt(this.weaponMagicModifier, 10);\n\n    if (isNaN(parsedMod)) {\n      parsedMod = 0;\n    }\n    this.storedItem.genericBonus = parsedMod > 0 ? `+${parsedMod}` : parsedMod;\n    setItem(this.item);\n  }\n\n  _itemRarityChange() {\n    if (this.itemRarity) {\n      this.storedItem.rarity = this.itemRarity;\n      setItem(this.item);\n    }\n  }\n\n  _itemNameChange() {\n    if (this.itemName) {\n      this.storedItem.name = this.itemName;\n      setItem(this.item);\n    }\n  }\n\n  _addWeaponProperty() {\n    return ((props) => {\n      if (props && props.length) {\n        const propCodes = props.map((prop) => {\n          const propObj = this.weaponPropertyOptions.find((option) => option.name === prop.trim());\n          if (propObj) {\n            return propObj.value;\n          }\n        }).filter(prop => !!prop);\n        this.storedItem.property = propCodes.join(',');\n        setItem(this.item);\n      }\n    }).bind(this);\n  }\n\n  _armorACChange() {\n    let parsedAC = parseInt(this.armorAC, 10);\n\n    if (isNaN(parsedAC)) {\n      parsedAC = 0;\n    }\n    this.storedItem.ac = parsedAC;\n    setItem(this.item);\n  }\n\n  _itemWeightChange() {\n    let parsedWeight = parseFloat(this.itemWeight, 10);\n\n    if (isNaN(parsedWeight)) {\n      parsedWeight = 0;\n    }\n    this.storedItem.weight = parsedWeight;\n    setItem(this.item);\n\n  }\n\n  _itemResistChange() {\n    if (this.itemResist) {\n      this.storedItem.resist = this.itemResist === '<None>' ? null : this.itemResist;\n      setItem(this.item);\n    }\n  }\n\n  _itemQuantityChange() {\n    let parsedQuantity = parseInt(this.itemQuantity, 10);\n\n    if (isNaN(parsedQuantity)) {\n      parsedQuantity = 0;\n    }\n    this.storedItem.quantity = parsedQuantity;\n    this.storedItem.hasQuantity = true;\n    setItem(this.item);\n  }\n\n  _or(...bools) {\n    for (let bool of bools) {\n      if (bool) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles my-styles\"></style>\n      <style>\n        :host {}\n        [hidden] {\n          display: none !important;\n        }\n\n        .edit__wrap {\n          margin-right: -10px;\n        }\n        .edit__name {\n          width: calc(65% - 10px);\n          padding-top: 0;\n        }\n        .edit__notes {\n          width: calc(100% - 10px);\n          min-height: 200px;\n        }\n        .edit__checkboxes {\n          display: flex;\n          flex-direction: column;\n          margin: 10px 10px 0 0;\n        }\n        .edit__weapon {\n          margin-right: 10px;\n        }\n\n        .damage_heading {\n          margin: 16px 0 0px;\n          font-size: 16px;\n          color: var(--mdc-theme-secondary);\n        }\n\n        .roll__damages {\n          display: flex;\n          flex-direction: column;\n        }\n        .roll__damage {\n          display: flex;\n        }\n        .roll__damage vaadin-text-field,\n        .roll__damage vaadin-select {\n          max-width: 100%;\n        }\n        .roll__damage-roll--edit,\n        .roll__damage-type--edit {\n          width: calc(50% - 40px);\n        }\n        .roll__damage-roll--edit {\n          margin-right: 16px;\n        }\n        .roll__damage-remove {\n          margin: auto 16px 4px;\n        }\n\n        dnd-switch {\n          margin: 10px auto 0;\n          display: block;\n        }\n\n        h2 {\n          margin-top: 0;\n          font-size: 16px;\n          font-weight: bold;\n          margin-bottom: 8px;\n        }\n\n        vaadin-checkbox {\n          width: fit-content;\n        }\n\n        vaadin-select {\n          max-width: calc(50% - 12px);\n        }\n        vaadin-number-field,\n        vaadin-integer-field {\n          width: calc(33% - 10px);\n        }\n        vaadin-text-field,\n        vaadin-text-area,\n        vaadin-integer-field,\n        vaadin-number-field,\n        vaadin-select {\n          margin-right: 10px;\n        }\n\n        .margin-bottom_large {\n          margin-bottom: 0 !important;\n        }\n\n        @media(min-width: 921px) {\n        }\n      </style>\n\n      <div>\n        <div hidden$=\"[[isEditMode]]\">\n          <div hidden$=\"[[!hasRenderedOutput]]\">\n            <h2>[[item.name]]</h4>\n            <div>[[item.notes]]</div>\n            <div hidden$=\"[[item.hideRef]]\" id=\"renderedOutput\"></div>\n          </div>\n\n          <div hidden$=\"[[hasRenderedOutput]]\">\n            <h2>[[item.name]]</h4>\n            <div>[[item.notes]]</div>\n          </div>\n        </div>\n\n        <template is=\"dom-if\" if=\"[[isEditMode]]\">\n          <div class=\"edit__wrap\">\n            <vaadin-text-field class=\"edit__name\" theme=\"label--secondary\" value=\"{{itemName}}\" label=\"Name\" on-change=\"_itemNameChange\"></vaadin-text-field>\n            <vaadin-number-field theme=\"label--secondary\" has-controls value=\"{{itemWeight}}\" label=\"Weight\" min=\"0\" on-change=\"_itemWeightChange\"></vaadin-number-field>\n\n            <vaadin-select id=\"typeSelect\" value=\"[[itemType]]\" on-change=\"_selectItemType\" label=\"Type\" >\n              <template>\n                <vaadin-list-box>\n                  <template is=\"dom-repeat\" items=\"[[itemTypes]]\">\n                    <vaadin-item>[[item]]</vaadin-item>\n                  </template>\n                </vaadin-list-box>\n              </template>\n            </vaadin-select>\n\n            <vaadin-select id=\"raritySelect\" value=\"{{itemRarity}}\" on-change=\"_itemRarityChange\" label=\"Rarity\" >\n              <template>\n                <vaadin-list-box>\n                  <template is=\"dom-repeat\" items=\"[[rarityTypes]]\">\n                    <vaadin-item>[[item]]</vaadin-item>\n                  </template>\n                </vaadin-list-box>\n              </template>\n            </vaadin-select>\n\n            <div class=\"edit__weapon\" hidden$=\"[[!item.weapon]]\">\n              <vaadin-integer-field theme=\"label--secondary\"  min=\"0\" max=\"5\" has-controls value=\"{{weaponMagicModifier}}\" label=\"Magic Modifier\" on-change=\"_weaponMagicModifierChange\"></vaadin-integer-field>\n\n              <dnd-select-add choices=\"100\" label=\"Weapon Properties\" options=\"[[weaponPropertyValues]]\" value=\"[[weaponProperties]]\" add-callback=\"[[_addWeaponProperty()]]\"></dnd-select-add>\n\n              <dnd-switch label='Simple Weapon' secondary-label='Martial Weapon' initial-value=\"[[isMartial]]\" checked={{isMartial}} on-switch-change=\"_changeWeaponType\" ></dnd-switch>\n\n              <h4 class=\"damage_heading\">Damage</h4>\n              <template is=\"dom-repeat\" items=\"[[storedItem.damages]]\" as=\"damage\">\n                <div class=\"roll__damage\" index$=\"[[index]]\">\n                  <dnd-button on-click=\"_removeDamage\" icon=\"remove\" class='roll__damage-remove icon-only'></dnd-button>\n                  <div class=\"roll__damage-roll--edit\">\n                    <vaadin-text-field theme=\"label--secondary\" value=\"{{damage.roll}}\" on-change=\"_updateItem\" label=\"Damage Roll\"></vaadin-text-field>\n                  </div>\n                  <div class=\"roll__damage-type--edit\">\n                    <vaadin-select value=\"{{damage.type}}\" on-change=\"_updateItem\" label=\"Damage Type\" >\n                      <template>\n                        <vaadin-list-box>\n                          <template is=\"dom-repeat\" items=\"[[damageTypes]]\">\n                            <vaadin-item>[[item]]</vaadin-item>\n                          </template>\n                        </vaadin-list-box>\n                      </template>\n                    </vaadin-select>\n                  </div>\n                </div>\n              </template>\n              <dnd-button on-click=\"_addDamage\" label=\"Add Damage\" icon=\"add\" class=\"roll__add-damage\"></dnd-button>\n            </div>\n\n            <vaadin-integer-field theme=\"label--secondary\"  hidden$=\"[[!hasAC]]\" min=\"0\" max=\"30\" has-controls value=\"{{armorAC}}\" label=\"AC\" on-change=\"_armorACChange\"></vaadin-integer-field>\n            \n            <vaadin-integer-field theme=\"label--secondary\"  hidden$=\"[[!item.hasQuantity]]\" min=\"0\" has-controls value=\"{{itemQuantity}}\" label=\"Quantity\" on-change=\"_itemQuantityChange\"></vaadin-integer-field>\n\n            <!-- <vaadin-select hidden$=\"[[!canHaveResist]]\" value=\"{{itemResist}}\" on-change=\"_itemResistChange\" label=\"Resistance\">\n              <template>\n                <vaadin-list-box>\n                  <template is=\"dom-repeat\" items=\"[[resistTypes]]\">\n                    <vaadin-item>[[item]]</vaadin-item>\n                  </template>\n                </vaadin-list-box>\n              </template>\n            </vaadin-select> -->\n\n            <div class=\"edit__checkboxes\">\n              <vaadin-checkbox hidden$=\"[[!canHaveQuantity]]\" checked=\"{{storedItem.hasQuantity}}\" on-change=\"_updateItem\">Has Quantity?</vaadin-checkbox>\n              <vaadin-checkbox hidden$=\"[[!isArmor]]\" checked=\"{{storedItem.stealth}}\" on-change=\"_updateItem\">Disadvantage on Stealth?</vaadin-checkbox>\n              <vaadin-checkbox checked=\"{{storedItem.reqAttune}}\" on-change=\"_updateItem\">Requires Attunement?</vaadin-checkbox>\n              <vaadin-checkbox checked=\"{{storedItem.wondrous}}\" on-change=\"_updateItem\">Wondrous?</vaadin-checkbox>\n              <vaadin-checkbox hidden$=\"[[!storedItem.itemRef]]\" checked=\"{{storedItem.hideRef}}\" on-change=\"_updateItem\">Hide Reference?</vaadin-checkbox>\n            </div>\n\n            <vaadin-text-area  theme=\"label--secondary\" class=\"edit__notes\" value=\"{{storedItem.notes}}\" label=\"Notes\" on-change=\"_updateItem\"></vaadin-text-area>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define(\"dnd-character-builder-equipment-item-detail\", DndCharacterBuilderEquipmentItemDetail);","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-text-area\" theme-for=\"vaadin-text-area\">\n  <template>\n    <style include=\"lumo-text-field\">\n      [part=\"input-field\"],\n      [part=\"input-field\"] ::slotted(textarea) {\n        /* Equal to the implicit padding in vaadin-text-field */\n        padding-top: calc((var(--lumo-text-field-size) - 1em * var(--lumo-line-height-s)) / 2);\n        padding-bottom: calc((var(--lumo-text-field-size) - 1em * var(--lumo-line-height-s)) / 2);\n        height: auto;\n        box-sizing: border-box;\n        transition: background-color 0.1s;\n        line-height: var(--lumo-line-height-s);\n      }\n\n      :host(:not([readonly])) [part=\"input-field\"]::after {\n        display: none;\n      }\n\n      :host([readonly]) [part=\"input-field\"] {\n        border: 1px dashed var(--lumo-contrast-30pct);\n      }\n\n      :host([readonly]) [part=\"input-field\"]::after {\n        border: none;\n      }\n\n      :host(:hover:not([readonly]):not([focused])) [part=\"input-field\"] {\n        background-color: var(--lumo-contrast-20pct);\n      }\n\n      @media (pointer: coarse) {\n        :host(:hover:not([readonly]):not([focused])) [part=\"input-field\"] {\n          background-color: var(--lumo-contrast-10pct);\n        }\n\n        :host(:active:not([readonly]):not([focused])) [part=\"input-field\"] {\n          background-color: var(--lumo-contrast-20pct);\n        }\n      }\n\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(textarea) {\n        line-height: inherit;\n        --_lumo-text-field-overflow-mask-image: none;\n      }\n\n      /* Vertically align icon prefix/suffix with the first line of text */\n      [part=\"input-field\"] ::slotted(iron-icon) {\n        margin-top: calc((var(--lumo-icon-size-m) - 1em * var(--lumo-line-height-s)) / -2);\n      }\n\n      [part=\"input-field\"] [part=\"value\"],\n      [part=\"input-field\"] ::slotted(textarea) {\n        white-space: pre-wrap; /* override \\`nowrap\\` from <vaadin-text-field> */\n        align-self: stretch; /* override \\`baseline\\` from <vaadin-text-field> */\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { TextFieldMixin } from './vaadin-text-field-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\n/**\n * `<vaadin-text-area>` is a Web Component for text area control in forms.\n *\n * ```html\n * <vaadin-text-area label=\"Add description\">\n * </vaadin-text-area>\n * ```\n *\n * ### Prefixes and suffixes\n *\n * These are child elements of a `<vaadin-text-area>` that are displayed\n * inline with the input, before or after.\n * In order for an element to be considered as a prefix, it must have the slot\n * attribute set to `prefix` (and similarly for `suffix`).\n *\n * ```html\n * <vaadin-text-area label=\"Add description\">\n *   <div slot=\"prefix\">Details:</div>\n *   <div slot=\"suffix\">The end!</div>\n * </vaadin-text-area>\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `label` | The label element\n * `input-field` | The element that wraps prefix, value and suffix\n * `value` | The text value element inside the `input-field` element\n * `error-message` | The error message element\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `disabled` | Set to a disabled text field | :host\n * `has-value` | Set when the element has a value | :host\n * `has-label` | Set when the element has a label | :host\n * `invalid` | Set when the element is invalid | :host\n * `focused` | Set when the element is focused | :host\n * `focus-ring` | Set when the element is keyboard focused | :host\n * `readonly` | Set to a readonly text field | :host\n *\n * See [ThemableMixin â€“ how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends PolymerElement\n * @mixes TextFieldMixin\n * @mixes ThemableMixin\n * @demo demo/index.html\n */\nclass TextAreaElement extends ElementMixin(TextFieldMixin(ThemableMixin(PolymerElement))) {\n  static get template() {\n    return html`\n    <style include=\"vaadin-text-field-shared-styles\">\n      .vaadin-text-area-container {\n        flex: auto;\n        max-height: inherit; /* MSIE 11 */\n        min-height: inherit; /* MSIE 11 */\n      }\n\n      /* The label and the error message should neither grow nor shrink. */\n      [part=\"label\"],\n      [part=\"error-message\"] {\n        flex: none;\n      }\n\n      [part=\"input-field\"] {\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n      }\n\n      [part=\"value\"] {\n        resize: none;\n      }\n\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(*) {\n        align-self: flex-start;\n      }\n\n      @keyframes vaadin-text-area-appear {\n        to {\n          opacity: 1;\n        }\n      }\n\n      :host {\n        animation: 1ms vaadin-text-area-appear;\n      }\n    </style>\n\n    <div class=\"vaadin-text-area-container\">\n\n      <label part=\"label\" on-click=\"focus\" id=\"[[_labelId]]\">[[label]]</label>\n\n      <div part=\"input-field\" id=\"[[_inputId]]\">\n\n        <slot name=\"prefix\"></slot>\n\n        <slot name=\"textarea\">\n          <textarea part=\"value\"></textarea>\n        </slot>\n\n        <div part=\"clear-button\" id=\"clearButton\" role=\"button\" aria-label\\$=\"[[i18n.clear]]\"></div>\n        <slot name=\"suffix\"></slot>\n\n      </div>\n\n      <div part=\"error-message\" id=\"[[_errorId]]\" aria-live=\"assertive\" aria-hidden\\$=\"[[_getErrorMessageAriaHidden(invalid, errorMessage, _errorId)]]\">[[errorMessage]]</div>\n\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-text-area';\n  }\n\n  static get version() {\n    return '2.6.2';\n  }\n\n  static get observers() {\n    return [\n      '_textAreaValueChanged(value)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    this._updateHeight();\n    this.addEventListener('animationend', this._onAnimationEnd);\n  }\n\n  _onAnimationEnd(e) {\n    if (e.animationName.indexOf('vaadin-text-area-appear') === 0) {\n      this._updateHeight();\n    }\n  }\n\n  get _slottedTagName() {\n    return 'textarea';\n  }\n\n  _textAreaValueChanged(value) {\n    this._updateHeight();\n  }\n\n  _updateHeight() {\n    const inputField = this.root.querySelector('[part=input-field]');\n    const scrollTop = inputField.scrollTop;\n    const input = this.inputElement;\n\n    const inputWidth = getComputedStyle(input).width;\n\n    const valueLength = this.value ? this.value.length : 0;\n    // Only clear the height when the content shortens to minimize scrollbar flickering.\n    if (this._oldValueLength >= valueLength) {\n      // Fix the input element width so its scroll height isn't affected by host's disappearing scrollbars\n      input.style.maxWidth = inputWidth;\n      input.style.height = 'auto';\n      // Avoid a jumpy Safari rendering issue\n      inputField.style.display = 'block';\n    }\n    this._oldValueLength = valueLength;\n\n    const inputHeight = input.scrollHeight;\n    if (inputHeight > input.clientHeight) {\n      input.style.height = inputHeight + 'px';\n    }\n\n    // Restore\n    input.style.removeProperty('max-width');\n    inputField.style.removeProperty('display');\n    inputField.scrollTop = scrollTop;\n\n    this._dispatchIronResizeEventIfNeeded('InputHeight', inputHeight);\n  }\n\n  /**\n   * Fired when the text-area height changes.\n   *\n   * @event iron-resize\n   */\n}\n\ncustomElements.define(TextAreaElement.is, TextAreaElement);\n\nexport { TextAreaElement };\n"],"sourceRoot":""}